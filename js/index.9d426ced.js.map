{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/oryx/core/StencilSet/ComplexPropertyItem.js","webpack:///./src/oryx/Utils.js","webpack:///./examples/assets/images/bpmn2.0/icons/activity/expanded.subprocess.png","webpack:///./examples/assets/images/bpmn2.0/icons/gateway/parallel.png","webpack:///./src/oryx/Editor.js","webpack:///./examples/assets/images/bpmn2.0/icons/gateway/inclusive.png","webpack:///./src/oryx/core/StencilSet/Rules.js","webpack:///./src/oryx/core/StencilSet/StencilSet.js","webpack:///./src/oryx/core/StencilSet/index.js","webpack:///./examples/assets/images/bpmn2.0/icons/catching/message.png","webpack:///./src/oryx/core/StencilSet/_Index.js","webpack:///./src/oryx/core/Shape.js","webpack:///./examples/assets/images/delete.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/subprocess.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.service.png","webpack:///./examples/assets/images/bpmn2.0/icons/catching/error.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/adhoc.subprocess.png","webpack:///./examples/assets/images/pencil.png","webpack:///./examples/assets/images/bpmn2.0/icons/catching/cancel.png","webpack:///./examples/assets/images/bpmn2.0/icons/diagram.png","webpack:///./examples/assets/images/bpmn2.0/icons/endevent/terminate.png","webpack:///./examples/assets/images/bpmn2.0/icons/gateway/exclusive.databased.png","webpack:///./examples/assets/images/bpmn2.0/icons/catching/timer.png","webpack:///./examples/assets/images/bpmn2.0/icons/throwing/signal.png","webpack:///./src/oryx/Kickstart.js","webpack:///./src/oryx/Plugins/AbstractPlugin.js","webpack:///./src/oryx/Plugins/AbstractLayouter.js","webpack:///./src/oryx/Plugins/Edit.js","webpack:///./src/oryx/Plugins/View.js","webpack:///./src/oryx/Plugins/Loading.js","webpack:///./src/oryx/Plugins/CanvasResizeButton.js","webpack:///./src/oryx/Plugins/CanvasResize.js","webpack:///./src/libs/jquery.autogrow-textarea.js","webpack:///./src/oryx/Plugins/RenameShapes.js","webpack:///./src/oryx/Plugins/ProcessLink.js","webpack:///./src/oryx/Plugins/Save.js","webpack:///./src/oryx/Plugins/SelectedRect.js","webpack:///./src/oryx/Plugins/GridLine.js","webpack:///./src/oryx/Plugins/Resizer.js","webpack:///./src/oryx/Plugins/DragDropResize.js","webpack:///./src/oryx/Plugins/ShapeHighlighting.js","webpack:///./src/oryx/Plugins/HighlightingSelectedShapes.js","webpack:///./src/oryx/Plugins/DragDocker.js","webpack:///./src/oryx/Plugins/AddDocker.js","webpack:///./src/oryx/Plugins/SelectionFrame.js","webpack:///./src/oryx/Plugins/Overlay.js","webpack:///./src/oryx/Plugins/KeysMove.js","webpack:///./src/oryx/Plugins/Layouter.js","webpack:///./src/oryx/Plugins/BPMN2_0.js","webpack:///./src/oryx/Plugins/Arrangement.js","webpack:///./src/oryx/Plugins/PoolAsProperty.js","webpack:///./src/oryx/Plugins/index.js","webpack:///./examples/assets/images/bpmn2.0/icons/artifact/text.annotation.png","webpack:///./examples/assets/images/bpmn2.0/icons/startevent/message.png","webpack:///./src/oryx/core/UIObject.js","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.send.png","webpack:///./src/oryx/core/Math.js","webpack:///./examples/assets/images/bpmn2.0/icons/activity/task.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.shell.png","webpack:///./examples/assets/images/bpmn2.0/icons/gateway/eventbased.png","webpack:///./examples/assets/images/bpmn2.0/icons sync ^\\.\\/.*$","webpack:///./examples/assets/images/wrench.png","webpack:///./examples/assets/images/bpmn2.0/icons/dataobject/data.store.png","webpack:///./src/oryx/core/MoveDockersCommand.js","webpack:///./examples/assets/images/bpmn2.0/icons/catching/compensation.png","webpack:///./src/oryx/ERDF.js","webpack:///./src/oryx/core/Controls/Control.js","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.receive.png","webpack:///./packages/property-section/src/main.vue?fbae","webpack:///packages/property-section/src/main.vue","webpack:///./packages/property-section/src/main.vue?95f3","webpack:///./packages/property-section/src/main.vue","webpack:///./packages/property-section/index.js","webpack:///./examples/views/Home.vue?821a","webpack:///examples/views/Home.vue","webpack:///./examples/views/Home.vue?ac27","webpack:///./examples/views/Home.vue","webpack:///./examples/router.js","webpack:///./src/oryx/path_parser.js","webpack:///./src/oryx/core/StencilSet/Stencil.js","webpack:///./src/oryx/core/Edge.js","webpack:///./examples/components/demo-block.vue?a9d4","webpack:///./examples/assets/images/bpmn2.0/icons/startevent/error.png","webpack:///./src/oryx/core/StencilSet/PropertyItem.js","webpack:///./examples/assets/images/bpmn2.0/icons/catching/signal.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.camel.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.decision.png","webpack:///./examples/assets/images/bpmn2.0/icons/startevent/timer.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.http.png","webpack:///./src/oryx/Log.js","webpack:///./src/flowable/FLOW_eventBus.js","webpack:///./examples/assets/images/bpmn2.0/icons/connector/association.undirected.png","webpack:///./src/oryx/core/svg/EditPathHandler.js","webpack:///./src/oryx/core/svg/MinMaxPathHandler.js","webpack:///./src/oryx/core/svg/PointsPathHandler.js","webpack:///./src/oryx/core/svg/SVGShape.js","webpack:///./src/oryx/core/svg/SVGMarker.js","webpack:///./src/oryx/core/svg/Label.js","webpack:///./src/oryx/core/SVG.js","webpack:///./examples/assets/images/bpmn2.0/icons/connector/messageflow.png","webpack:///./src/oryx/core/Node.js","webpack:///./src/oryx/core/StencilSet/Property.js","webpack:///./src/oryx/CONFIG.js","webpack:///./examples/assets/images/bpmn2.0/icons/throwing/none.png","webpack:///./src/oryx/core/Move.js","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.mule.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity sync ^\\.\\/.*$","webpack:///./examples/assets/images/bpmn2.0/icons/endevent/cancel.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.script.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.business.rule.png","webpack:///./examples/assets/images/bpmn2.0/icons/connector/sequenceflow.png","webpack:///./src/oryx/core/Canvas.js","webpack:///./examples/App.vue?eff4","webpack:///examples/App.vue","webpack:///./examples/App.vue?517c","webpack:///./examples/App.vue","webpack:///./examples/plugins/element.js","webpack:///./packages/flow-design/src/flow-design.vue?7e25","webpack:///./packages/editor-toolbar/src/main.vue?d2fd","webpack:///./src/locale/lang/zh-CN.js","webpack:///./src/locale/util.js","webpack:///./src/locale/format.js","webpack:///./src/locale/index.js","webpack:///./src/mixins/locale.js","webpack:///packages/editor-toolbar/src/main.vue","webpack:///./packages/editor-toolbar/src/main.vue?e1d4","webpack:///./packages/editor-toolbar/src/main.vue","webpack:///./packages/editor-toolbar/index.js","webpack:///./packages/palette-wrapper/src/main.vue?b841","webpack:///./packages/stencil-item/src/main.vue?9cdc","webpack:///packages/stencil-item/src/main.vue","webpack:///./packages/stencil-item/src/main.vue?e106","webpack:///./packages/stencil-item/src/main.vue","webpack:///./packages/stencil-item/index.js","webpack:///./packages/process-tree-list/src/main.vue?850a","webpack:///packages/process-tree-list/src/main.vue","webpack:///./packages/process-tree-list/src/main.vue?de31","webpack:///./packages/process-tree-list/src/main.vue","webpack:///./packages/process-tree-list/index.js","webpack:///./packages/root-stencil-item/src/main.vue?8043","webpack:///packages/root-stencil-item/src/main.vue","webpack:///./packages/root-stencil-item/src/main.vue?4167","webpack:///./packages/root-stencil-item/src/main.vue","webpack:///./packages/root-stencil-item/index.js","webpack:///packages/palette-wrapper/src/main.vue","webpack:///./packages/palette-wrapper/src/main.vue?7cdd","webpack:///./packages/palette-wrapper/src/main.vue","webpack:///./packages/palette-wrapper/index.js","webpack:///./packages/canvas-wrapper/src/main.vue?c46f","webpack:///./src/EventBus.js","webpack:///./src/Util.js","webpack:///./src/directives/drag-drop.js","webpack:///packages/canvas-wrapper/src/main.vue","webpack:///./packages/canvas-wrapper/src/main.vue?5ba3","webpack:///./packages/canvas-wrapper/src/main.vue","webpack:///./packages/canvas-wrapper/index.js","webpack:///./src/flowable/FLOWABLE_Config.js","webpack:///./src/oryx/index.js","webpack:///./src/flowable/TOOLBAR_ACTIONS.js","webpack:///./src/flowable/Command/CreateCommand.js","webpack:///./src/flowable/Command/MorphTo.js","webpack:///./src/flowable/Command/setProperty.js","webpack:///./src/flowable/Command/commandClass.js","webpack:///./src/flowable/EditorManager.js","webpack:///packages/flow-design/src/flow-design.vue","webpack:///./packages/flow-design/src/flow-design.vue?4355","webpack:///./packages/flow-design/src/flow-design.vue","webpack:///./packages/flow-design/index.js","webpack:///./packages/stencil-drag-item/src/main.vue?d793","webpack:///packages/stencil-drag-item/src/main.vue","webpack:///./packages/stencil-drag-item/src/main.vue?cdcc","webpack:///./packages/stencil-drag-item/src/main.vue","webpack:///./packages/stencil-drag-item/index.js","webpack:///./src/index.js","webpack:///./examples/components/demo-block.vue?abb7","webpack:///examples/components/demo-block.vue","webpack:///./examples/components/demo-block.vue?b359","webpack:///./examples/components/demo-block.vue","webpack:///./examples/main.js","webpack:///./examples/assets/images/bpmn2.0/icons/swimlane/pool.png","webpack:///./src/oryx/core/Controls/Magnet.js","webpack:///./src/oryx/core/Controls/index.js","webpack:///./examples/assets/images/bpmn2.0/icons/endevent/error.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.manual.png","webpack:///./src/oryx/core/AbstractShape.js","webpack:///./examples/assets/images/bpmn2.0/icons/activity/list/type.user.png","webpack:///./examples/assets/images/bpmn2.0/icons/startevent/none.png","webpack:///./examples/assets/images/bpmn2.0/icons/connector/association.unidirectional.png","webpack:///./src/oryx/core/Controls/Docker.js","webpack:///./packages/property-section/src/main.vue?5f08","webpack:///./examples/assets/images/bpmn2.0/icons/startevent/signal.png","webpack:///./examples/assets/images/bpmn2.0/icons/activity/event.subprocess.png","webpack:///./examples/assets/images/bpmn2.0/icons/endevent/none.png","webpack:///./src/oryx/core/Bounds.js","webpack:///./examples/assets/images/bpmn2.0/icons/activity/event.subprocess.collapsed.png","webpack:///./src/oryx/core/UIEnableDrag.js","webpack:///./examples/assets/images/bpmn2.0/icons/swimlane/lane.png","webpack:///./src/oryx/core/Command.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","index","jsonpScriptSrc","p","about","chunk-04ba02e7","chunk-399e2613","chunk-84e17dd0","chunk-bcd97db4","chunk-d63807ee","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","clearTimeout","chunk","errorType","realSrc","error","undefined","setTimeout","all","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","ComplexPropertyItem","jsonItem","namespace","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_jsonItem","_namespace","_property","_items","Hash","_complexItems","toLowerCase","ORYX_CINFIG","TYPE_CHOICE","items","Array","each","item","PropertyItem","TYPE_COMPLEX","complexItems","complexItem","id","equals","optional","width","values","disable","Utils","getParamFromUrl","replace","regexS","regex","RegExp","results","exec","location","adjustLightness","arguments","adjustGradient","gradient","reference","ORYX_CONFIG","DISABLE_GRADIENT","col","getAttributeNS","$A","stop","setAttributeNS","graft","parent","doc","ownerDocument","constructor","String","createTextNode","snared","match","createElementNS","Number","toString","k","provideId","res","hex","Math","floor","random","join","SVGClassElementsAreAvailable","checkClassType","classInst","classType","setMissingClasses","SVGElement","availablePlugins","_loadPlugins","plugins","resultXml","globalProperties","preferences","props","childNodes","prop","attributes","attr","set","nodeName","nodeValue","plugin","me","node","pluginData","propertyNodes","properties","concat","requires","requireNodes","req","find","namespaces","notUsesIn","notUsesInNodes","not","url","PATH","PLUGINS_FOLDER","ORYX_Log","debug","log","JSONHelper","eachChild","iterator","deep","modify","childShapes","newChildShapes","shape","Function","jQuery","extend","getShape","getChildShapes","allShapes","serialize","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default","ifIE10","userAgent","navigator","a","appVersion","indexOf","IE10AndBelow","isNaN","screen","logicalXDPI","systemXDPI","ua","IEZoomBelow10","z","zoom","round","deviceXDPI","getTranslation","jsonObject","lang","substr","Plugins","Plugins_s","Editor","config","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_14__","DOMEventListeners","selection","zoomLevel","_eventsQueue","loadedPlugins","pluginsData","model","modelId","ORYX_Utils","fullscreen","_initEventListener","_createCanvas","stencil","_generateGUI","loadPluginFinished","loadContentFinished","initFinished","_finishedLoading","loadPlugins","loadSerialized","getCanvas","update","handleEvents","ORYX_Config","EVENT_EDITOR_INIT_COMPLETED","Cookie","callbacks","onChange","callback","interval","start","pe","currentString","cookie","PeriodicalExecuter","getParams","split","param","EVENT_LOADED","documentElement","addEventListener","EVENT_KEYDOWN","catchKeyDownEvents","EVENT_KEYUP","catchKeyUpEvents","_keydownEnabled","_keyupEnabled","EVENT_MOUSEDOWN","EVENT_MOUSEUP","EVENT_MOUSEOVER","EVENT_MOUSEOUT","EVENT_SELECTION_CHANGED","EVENT_MOUSEMOVE","WINDOW_HEIGHT","canvasParent","rootNode","append","setSize","CustomConfigs","CANVAS_WIDTH","height","CANVAS_HEIGHT","curAvailablePlugins","clone","loadedPlugin","engaged","readyState","onreadystatechange","loadTry","getAvailablePlugins","loadedStencilSetsNamespaces","getStencilSets","keys","facade","_getPluginFacade","newPlugin","any","info","className","eval","registryChanged","onSelectionChanged","registerOnEvent","loaded","warn","loadScript","source","activatePluginByName","newPlugins","registerPluginsOnKeyEvents","setSelection","stencilType","canvasConfig","search","findRootStencilName","canvasStencil","ORYX_StencilSet","fatal","div","addClassName","_canvas","ORYX_Canvas","eventHandlerCallback","field","prefix","deserialize","_pluginFacade","offer","getStencilSetExtensionDefinition","ss_extensions_def","getRules","loadStencilSet","createShape","deleteShape","getSelection","updateSelection","importJSON","getJSON","getSerializedJSON","executeCommands","isExecutingCommands","unregisterOnEvent","raiseEvent","enableEvent","disableEvent","eventCoordinates","eventCoordinatesXY","getModelMetaData","commandExecuting","commands","commandStack","commandStackExecuted","command","execute","EVENT_EXECUTE_COMMANDS","canvasJSON","toJSON","ssextensions","extensions","findAll","sse","endsWith","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_7___default","noSelectionAfterImport","renewResourceIds","stencilset","getStencil","stencilSet","wrongSS","alert","format","commandClass","_ORYX_Command","loadSerializedCB","_this","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","noSelection","shapes","connections","parents","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_15__","add","con","setDockedShape","setReferencePoint","getDockers","dockers","first","getDockedShape","referencePoint","last","updateSize","without","ORYX_Command","serJsonObject","JSON","parse","SyntaxError","message","collectResourceIds","map","resourceId","flatten","resourceIds","oldResourceId","newResourceId","requestMeta","loadSSExtensions","metaDataExtension","getExtensionForMetaData","loadSSExtension","addShapeObjects","isList","setProperty","stencilsets","extension","ex","ss_extension_namespaces","ss_extension_namespace","startsWith","addExtension","SS_EXTENSIONS_FOLDER","initializeRules","EVENT_STENCIL_SET_LOADED","eventType","member","unset","stencilSets","rules","modelMetaData","keyCodes","keyComb","eventName","keyAction","metaKeys","META_KEY_META_CTRL","META_KEY_ALT","META_KEY_SHIFT","keyCode","toggle","buttonInstance","pressed","functionality","b","include","isPropertyChanged","elements","subSelectionElement","force","ORYX_Shape","isEqual","isDirty","_subSelection","subSelection","option","newShapeObject","obj","ORYX_Node","ORYX_Edge","canvas","shapetype","sset","template","_jsonStencil","postProcessProperties","point","position","x","y","connectingType","connectedShape","magnet","getDefaultMagnet","cPoint","bounds","center","midPoint","centerMoveTo","end","startPoint","getAbsoluteReferencePoint","docker","createDocker","endPont","upL","upperLeft","moveBy","min","lwR","lowerRight","max","nodeTypeId","idWithoutNs","po","_update","dontUpdateSelection","alignDockers","remove","getOutgoingShapes","os","getIncomingShapes","is","eventObj","arg","_queueRunning","val","_executeEventImmediately","uiObj","trace","_handleMouseDown","_handleMouseMove","_handleMouseUp","_handleMouseHover","_handleMouseOut","forceExecution","_executeEvents","isInput","tagName","toUpperCase","gridHasFocus","isValidEvent","keyUpEvent","createKeyCombEvent","KEY_ACTION_UP","keyDownEvent","KEY_ACTION_DOWN","keyEvent","pressedKey","which","ctrlKey","metaKey","altKey","shiftKey","focus","element","currentTarget","elementController","currentIsSelectable","isSelectable","currentIsMovable","isMovable","modifierKeyPressed","noObjectsSelected","currentIsSelected","newSelection","ORYX_Controls_Docker","svgPoint","ownerSVGElement","createSVGPoint","clientX","clientY","additionalIEZoom","matrix","getScreenCTM","matrixTransform","inverse","modelUrl","Ajax","Request","method","onSuccess","transport","editorConfig","responseText","ORYX_Editor","_resizeFixTimeout","resizeBy","_resizefixTimeout","Rules","classCallCheck","_stencilSets","_stencils","_containerStencils","_cachedConnectSET","_cachedConnectSE","_cachedConnectTE","_cachedCardSE","_cachedCardTE","_cachedContainPC","_cachedMorphRS","_connectionRules","_cardinalityRules","_containmentRules","_morphingRules","_layoutRules","existingSS","ss","jsonRules","stencils","connectionRules","cardinalityRules","containmentRules","morphingRules","cr","_isRoleOfOtherNamespace","role","connects","connect","from","toRoles","to","cardr","cardrKey","outgoingEdges","rule","ie","incomingEdges","conr","conrKey","contains","containRole","morphr","morphrKey","preserveBounds","baseMorphs","baseMorphStencilId","morphStencil","_getStencilById","layoutRules","getDirections","edgeRole","layoutKey","args","_canConnect","sourceStencil","targetStencil","edge","edgeStencil","_getMaximumNumberOfOutgoingEdge","_getMaximumNumberOfIncomingEdge","_canContain","_getMaximumOccurrence","containingStencil","containedStencil","children","morphs","select","roles","sourceShape","_edges","newArgs","canConnect","targetShape","edgeShape","_sources","_targets","_cacheConnect","_cacheCard","cs","resultCR","edgeRules","_getConnectionRulesOfEdgeStencil","sourceRole","targetRoles","targetRole","containingShape","containedShape","childValues","_cacheContain","as","_morphStencils","_cacheMorph","uniq","sort","_baseMorphs","pair","baseMorph","incoming","incomingEdgeStencils","outgoing","outgoingEdgeStencils","edgeStencils","baseEdgeStencils","size","showInShapeMenu","layout","in","out","parseValues","v","edgeRule","defaultRule","_hasRole","isRole","child","cardRule","maximumOccurrence","maximum","StencilSet","baseUrl","_extensions","_baseUrl","_jsonObject","_availableStencils","_init","rootStencil","mayBeRoot","sortByGroup","containers","checkedContainers","_loop","container","pop","canContain","sortBy","groups","edges","title","description","_source","asynchronous","addExtensionDirectly","onFailure","onException","str","jsonExtension","defaultPosition","oStencil","Stencil","addProperty","removeproperties","remprop","propId","removeProperty","removestencils","remstencil","stencilJson","propertyJson","sId","response","__handleStencilset","pps","propertyPackages","pp","errornous","Property","_StencilSet","Index","_Index","_stencilSetsByNamespace","_stencilSetsByUrl","_StencilSetNSByEditorInstance","_rulesByEditorInstance","splitted","editorId","stencilSetNSs","stencilSetNS","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","StencilSet_Stencil","Shape","options","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_10__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_12__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_14__","magnets","_defaultMagnet","nodes","_dockerChangedCallback","_dockerChanged","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_13__","_labels","class","style","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_get__WEBPACK_IMPORTED_MODULE_15__","propertiesChanged","propChanged","refToView","ref","label","text","refreshedSvgElements","itemRef","svgElem","getElementById","SVGImageElement","refId","TYPE_FLOWABLE_MULTIINSTANCE","svgElemFrame","svgElemFrame2","svgElemParallel","TYPE_URL","TYPE_DIAGRAM_LINK","svgElems","getElementsByTagNameNS","elem","complexAttributeToView","propJson","evalJSON","TYPE_BOOLEAN","inverseBoolean","TYPE_COLOR","fill","lightness","NAMESPACE_ORYX","stroke","TYPE_STRING","TYPE_EXPRESSION","TYPE_DATASOURCE","TYPE_INTEGER","TYPE_FLOAT","fillOpacity","strokeOpacity","TYPE_SUB_PROCESS_LINK","onclickAttr","getAttributeNodeNS","styleAttr","textContent","svgElemSequential","layoutEvents","_delegateEvent","getLabels","invoke","labels","animate","removeAttributeNS","isNode","getInstanceofType","includes","uiObject","isVisible","getChildNodes","silent","UIObject","ORYX_Controls","Control","ctrls","Docker","Magnet","insertBefore","_changed","EVENT_SHAPEADDED","removeMarkers","EVENT_SHAPEREMOVED","pointAX","pointAY","pointBX","pointBY","includePointX","includePointY","excludePointX","excludePointY","absoluteBounds","isPointIncluded","refPointX","refPointY","midPointX","midPointY","sqrt","pow","firstChild","registerCallback","serializedObject","serializeForERDF","followingShape","ERDF","__stripHashes","json","ser","isChanged","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_core_js_parse_float__WEBPACK_IMPORTED_MODULE_0___default","slabel","getLabel","svgDocument","_adjustIds","idIndex","Element","eid","hasChildNodes","getId","AbstractShape","Kickstart","started","alreadyLoaded","load","kick","register","require","XMLNS","XHTML","PROCESSDATA_REF","USE_ARESS_WORKAROUNDS","SHOW_DEBUG_ALERTS_WHEN_SAVING","SHOW_EXTENDED_DEBUG_INFORMATION","USE_ASYNCHRONOUS_REQUESTS","RESOURCE_ID_PREFIX","RESOURCE_CREATED","RESOURCE_REMOVED","RESOURCE_SAVED","RESOURCE_RELOADED","RESOURCE_SYNCHRONIZED","ResourceManager","__corrupt","__latelyCreatedResource","__listeners","$H","__token","addListener","listener","mask","controller","token","removeListener","__listners","__Event","action","__dispatchEvent","getResource","resources","DataManager","query","Resource","isResource","entryUrl","__Resource","__createResource","alternativeDiv","collectionUrls","collectionUrl","resource","serialization","__request","responseXML","$$","cloneNode","__synclocal","__resourceActionSucceeded","__resourceActionFailed","__id","__url","reload","_url","_id","RESURCE_RELOADED","save","synchronize","$","RESOURCE","SAVED","requestOptions","parameters","params","toQueryString","headers","success","async","httpRequest","Try","these","XMLHttpRequest","ActiveXObject","h","setRequestHeader","open","send","response_s","localDiv","status","init","_registerTriple","_triples","triple","run","__synchronizeShape","_triple","Triple","Literal","setObject","__storeShape","__forceExistance","__persistShape","shapeData","shapeResource","removeTriples","addTriple","__persistDOM","__renderCanvas","__counter","__provideId","serializeDOM","syncGlobal","__syncglobal","razielType","preserveNamespace","nodeType","ELEMENT_NODE","clazz","ignore","namespaceURI","attribute","_node","TEXT_NODE","subject","LITERAL","elementId","predicate","escapeHTML","triples","removed","__removeTriple","removeTriple","__removeTripleRecursively","continueFrom","classes","content","echo","Boolean","Event","observe","AbstractPlugin","onLoaded","svgNode","svgNodePosition","el","getChildShapeByResourceId","getChildById","compact","overlayID","EVENT_OVERLAY_SHOW","nodePosition","EVENT_OVERLAY_HIDE","stylesheet","xsl","parser","DOMParser","parsedData","parseFromString","xsltProcessor","XSLTProcessor","domParser","xslObject","importStylesheet","newData","transformToFragment","serializedData","XMLSerializer","serializeToString","encodeURIComponent","filename","win","write","submitForm","body","createHiddenElement","newElement","close","submit","serializedDOM","_stopSelectionChange","xmlObject","getSerializedDOM","serializer","stencilSetExtensionNamespace","extensionKey","EVENT_LAYOUT","allEdges","offset","Command","possibleConstructorReturn","getPrototypeOf","absoluteXY","ulo","inherits","createClass","changes","executeAgain","oldDockerPositions","second","align","beforeLast","removeUnusedDockers","isBendPointIncluded","doLayout","p1","p2","abs","dockerPositions","refDocker","abRef","xdif","ydif","xs","ys","absPXY","ab","bb","widen","isIncluded","removeDocker","change","removeAllDocker","pos","AbstractLayouter","layouted","_initLayout","assertThisInitialized","toLayout","isIncludedInLayout","ClipBoard","shapesAsJson","SSnamespace","useOffset","useNoOffset","outgoings","targets","getParentShape","parentIndex","DeleteCommand","clipboard","shapeAsJson","incomingDockers","outgoingDockers","dockedShape","ACTION_DELETE_COMPLETED","selectedShapes","Edit","group","cut","cutDesc","copy","copyDesc","paste","pasteDesc","del","delDesc","I18N","icon","callEdit","editCut","minShape","editCopy","editPaste","isEnabled","isOccupied","maxShape","editDelete","fn","_controlPressed","shapesToConsider","childShapesToConsider","isChildShapeOfAnother","s2","hasChildShape","attached","getOutgoingNodes","edgesToConsider","getChildEdges","getAllDockedShapes","will_update","refresh","getAllShapesToConsider","childShapeResourceIds","pluck","targetRemoved","getDocker","sourceRemoved","COPY_MOVE_OFFSET","View","ownPluginData","zoomIn","zoomInDesc","zoomOut","zoomOutDesc","zoomStandard","zoomStandardDesc","zoomFitToModel","zoomFitToModelDesc","maxFitToScreenLevel","minZoomLevel","maxZoomLevel","diff","ZOOM_OFFSET","_checkSize","setAFixZoomLevel","cls","_checkZoomLevelRange","factor","scrollNode","getHTMLContainer","newWidth","newHeight","offsetTop","offsetHeight","marginTop","top","newScrollTop","scrollTop","getHeight","newScrollLeft","scrollLeft","getWidth","visibleHeight","visibleWidth","scaleFactorWidth","scaleFactorHeight","zoomFactor","minForCanvas","Loading","EVENT_LOADING_ENABLE","enableLoading","EVENT_LOADING_DISABLE","disableLoading","EVENT_LOADING_STATUS","showStatus","innerHTML","removeClassName","display","left","offsetLeft","tout","CanvasResizeButton","RESIZE","tipGrow","tipShrink","N","W","S","E","actualScrollNode","canvasNode","svgRootNode","iconClass","iconClassShrink","idGrow","idShrink","buttonGrow","buttonShrink","offSetWidth","isOverOffset","isOverButton","X","offsetX","layerX","Y","offsetY","layerY","canvasOffset","clientWidth","widthDiff","clientHeight","showButtons","show","w","CANVAS_RESIZE_INTERVAL","CANVAS_MIN_HEIGHT","CANVAS_MIN_WIDTH","hide","hideButtons","resizeCanvas","extentionSize","move","collect","CanvasResize","resize","shrink","autogrow","filter","self","$self","minHeight","noFlickerPad","hasClass","parse_int_default","css","shadow","fontSize","fontFamily","fontWeight","lineHeight","word-wrap","appendTo","times","string","number","space","html","keyup","keydown","RenameShapes","EVENT_CANVAS_SCROLL","hideField","EVENT_DBLCLICK","actOnDBLClick","renamePerF2","evt","destroy","directlyEditable","readonly","allRefToViews","toView","nearestLabel","evtCoord","trans","lastChild","getCenterPosition","len","textInput","oldValueText","shownTextField","updateValueFunction","newValue","oldValue","currentEl","scale","hasParent","searchShape","parentXY","f","canvasOffsetLeft","canvasScrollLeft","canvasScrollTop","additionaloffset","textInputComp","ProcessLink","EVENT_PROPERTY_CHANGED","propertyChanged","link","stroke-width","line-captions","transform","Save","onbeforeunload","onUnLoad","changeDifference","EVENT_UNDO_EXECUTE","updateTitle","EVENT_SAVED","EVENT_UNDO_ROLLBACK","hasChanges","_hasChanges","changeSymbol","SelectedRect","parentId","dashedArea","stroke-dasharray","pointer-events","padding","SELECTED_AREA_PADDING","GridLine","direction","DIR_HORIZONTAL","DIR_VERTICAL","line","baseVal","getItem","cWidth","getScale","cHeight","Resizer","orientation","handleMouseDown","handleMouseUp","handleMouseMove","dragEnable","offSetPosition","minSize","maxSize","aspectRatio","resizeCallbacks","resizeStartCallbacks","resizeEndCallbacks","offsetScroll","pointerX","pointerY","containmentParentNode","newAspectRatio","MINIMUM_SIZE","MAXIMUM_SIZE","DragDropResize","currentShapes","toMoveShapes","distPoints","isResizing","dragIntialized","edgesMovable","faktorXY","isAddingAllowed","isAttachingAllowed","callbackMouseMove","callbackMouseUp","containerNode","getSvgContainer","selectedRect","SHOW_GRIDLINE","vLine","hLine","resizerSE","registerOnResize","onResize","registerOnResizeEnd","onResizeEnd","registerOnResizeStart","onResizeStart","resizerNW","resizerSouth","resizerNorth","resizerEast","resizerWest","_this2","topLevelElements","getShapesWithSharedParent","dks","hasF","hasL","isUndocked","newBounds","elementInLane","box","findChindsInBound","dragBounds","oldDragBounds","resizeRectangle","isResizable","fixedAspectRatio","setBounds","minimumSize","maximumSize","GRID_ENABLED","distPointTimeout","distShapes","parentShape","ul","lr","eventX","eventY","EVENT_HIGHLIGHT_HIDE","highlightId","afterDrag","dockCommand","newDockedShape","_this3","newPosition","newParent","oldPosition","oldDockedShape","oldParent","dock","EVENT_ARRANGEMENT_TOP","excludeCommand","toDockShape","refreshSelectedShapes","EVENT_DRAGDROP_END","removeEventListener","EVENT_DRAGDROP_START","_onlyEdges","currentShape","beforeDrag","_currentUnderlyingNodes","snapToGrid","moveTo","underlyingNodes","getAbstractShapesAtPosition","checkIfAttachable","checkRules","reverse","EVENT_HIGHLIGHT_SHOW","SELECTION_HIGHLIGHT_STYLE_RECTANGLE","color","SELECTION_VALID_COLOR","SELECTION_INVALID_COLOR","bound","absBounds","bA","bB","noEdges","isPointOverOffset","oldUpL","ORYX_Command_Move","_undockedEdgesCommand","unshift","EVENT_RESIZE_START","_ORYX_Command2","_this4","oldBounds","getOffset","b1","b2","changed","layoutEdges","parentPosition","EVENT_RESIZE_END","undockEdgeCommand","_ORYX_Command3","moveShapes","_this5","refPoint","getChildren","hideAllLabels","allDockedShapes","showAllLabels","gridX","gridY","cThres","gx","gy","GRID_DISTANCE","ShapeHighlighting","highlightNodes","setHighlight","hideHighlight","setAttributesByStyle","bo","strWidth","strokewidth","BORDER_OFFSET","getPathRectangle","SELECTION_HIGHLIGHT_COLOR","opacity","path","getPathEdge","OFFSET_EDGE_BOUNDS","getPathByElements","getPath","getPathCorners","SELECTION_HIGHLIGHT_SIZE","strokeWidth","edgeDockers","dockerPoint","HighlightingSelectedShapes","opacityFull","opacityLow","DragDocker","VALIDCOLOR","INVALIDCOLOR","shapeSelection","dockerParent","dockerSource","dockerTarget","lastUIObj","isStartDocker","isEndDocker","undockTreshold","initialDockerPosition","outerDockerNotMoved","isValid","EVENT_DOCKERDRAG","handleDockerDrag","handleMouseOver","handleMouseOut","uiEvent","_commandArg","isDocked","movedCallback","dockerMoved","upCallback","dockerMovedFinished","startEventPos","UIDragFunction","UIEnableDrag","snapToMagnet","evPos","distanceDockerPointer","ORYX_Math","getDistancePointToPoint","highestParent","getHighestParentBeforeCanvas","curObj","orgObj","hideMagnets","showMagnets","showHighlight","absoluteCenterXY","minOffset","DOCKER_SNAP_OFFSET","nearestX","nearestY","dockerCenter","previous","next","cp","cn","cd","isPointInLine","raise","intersecX","intersecY","EVENT_DRAGDOCKER_DOCKED","shapeWithoutEdges","dragDockerCommand","newPos","oldPos","removedDockers","AddDocker","enableAdd","enableRemove","enable","addClass","removeClass","blur","enabledAdd","newDockerCommand","setEnableAdd","enabledRemove","setEnableRemove","cursor","addEnabled","deleteEnabled","addDocker","SelectionFrame","offsetPosition","moveCallback","setPos","corrSVG","Overlay","styleNode","setAttributes","isSVG","_temp","svg","dontCloneNode","_temps","deleteAttributes","tmp","unregisterCallback","childs","getAllChilds","ids","attrTextValue","attrValue","gsub","attrMarkerValue","copyAttr","csstags","delEl","KeysMove","copyElements","selectAll","KEY_CODE_LEFT","KEY_CODE_RIGHT","KEY_CODE_UP","KEY_CODE_DOWN","far","distance","currentSelection","onlyEdgesSelected","selectionBounds","ORYX_Move","EdgeLayouter","getIncomingNodes","positions","getPositions","setDockers","am","bm","aFirst","aLast","off","getWeight","pos2","dir","d1","d2","dr1","getLayoutingRules","dr2","fromWeight","toWeight","sameDirection","center1","center2","sameIncomingFrom","sameOutgoingTo","Layouter","ResizeLanesCommand","pool","shapeChildren","childShape","shapeUpperLeft","parentHeight","lane","childLanes","getLanes","getLeafLanes","leafLanes","laneUpperLeft","findNewLane","laUpL","shUpL","depthChange","getDepth","computeChanges","hashChildShapes","shapeChild","oldHeight","setHeight","childLane","store","setDimensions","hashedBounds","adjustHeight","yOffset","sUl","BPMN2_0","handleDockerDocked","handleLayoutPool","handleSubProcess","handleShapeRemove","afterLoad","getNamespace","laneName","sh","getParentPool","isLeafFn","leaf","isLeaf","parentHasMoreLanes","isParent","CommandB","_Command2","hashedSubProcesses","resized","moveChildDockers","getSource","getTarget","bothAreIncluded","previousIsOver","nextIsOver","ORYX_MoveDockersCommand","edgeSource","isGateway","currentPool","lanes","allLanes","considerForDockers","hashedPositions","caption","trim","rect","deletedLanes","addedLanes","effectBound","moveOffset","poolTypeId","updateHeight","updateVPoolWidth","adjustWidth","oldXY","hashedPoolPositions","xy","adjustPoolBothendsLanes","isResized","adjustLanes","getAllExcludedLanes","modifyLane","orderSort","changedLaneOldxy","changedLanexy","checkForChanges","updateDockers","poolHashedPositions","LanesHasBeenReordered","_Command3","originPosition","poolId","executed","hp2","hashedLaneDepth","forceToUpdateLane","nodesInLaneMoveby","shouldScale","_Command4","oldState","newState","applyState","state","oldB","adjustVLaneWidth","cy","isScaled","_svgShapes","fromDepth","toDepth","xOffset","laneType","root","changedLane","propagateWidth","oldWidth","tempWidth","setLanePosition","propagateHeight","tempHeight","includePool","hashed","absPool","movedShapes","oldPool","xOffsetDepth","depth","isOverLane","relY","MoveChildCommand","_Command5","_this6","recursive","auy","buy","aly","bly","ha","getHashedBounds","hb","oauy","obuy","oaly","obly","above","below","slightlyAboveBottom","slightlyAboveTop","slightlyBelowBottom","slightlyBelowTop","aux","bux","alx","blx","oaux","obux","oalx","oblx","insertFrom","old","newA","Arrangement","groupA","amDesc","ac","acDesc","asDesc","alignShapes","EDITOR_ALIGN_MIDDLE","EDITOR_ALIGN_CENTER","EDITOR_ALIGN_SIZE","setZLevel","setToTop","EVENT_ARRANGEMENT_BACK","setToBack","EVENT_ARRANGEMENT_FORWARD","setForward","EVENT_ARRANGEMENT_BACKWARD","setBackward","elemnt","zLevelCommand","elAndIndex","sortedEl","oldIndex","newIndex","tmpElem","compactElem","some","checkedEl","previousSibling","nextSibling","nextNode","way","maxWidth","maxHeight","orgPos","newCoordinates","relBounds","EDITOR_ALIGN_BOTTOM","EDITOR_ALIGN_TOP","EDITOR_ALIGN_LEFT","EDITOR_ALIGN_RIGHT","LaneLinkProperties","PoolAsProperty","poolH","poolV","EVENT_PROPWINDOW_PROP_CHANGED","handlePropertyChanged","handleDragdropEnd","handleAddShape","handleShapeRefreshed","pools","ls","shape_id","allUserTasks","findUserTaskInBound","setNodesWhenLayoutPool","getAllLanes","tasks","setPropertiesWinthinLane","other","pro","propertyKey","propertyValue","incomingShapes","incomingGateway","aShape","foundGateway","found","findInWhichLane","getProperties","arry","forEach","map_default","keys_default","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","Bounds","_changedCallback","cparent","_uiObjects","absUL","pXY","RIGHT","TOP","BOTTOM","LEFT","computeOutCode","xmin","ymin","xmax","ymax","code","point1","point2","pointX","pointY","lPoint1X","lPoint1Y","lPoint2X","lPoint2Y","isPointInEllipse","cx","rx","ry","tx","ty","isPointInPolygone","polygone","lastIndex","x1","y1","x2","y2","crossings","distancePointLinie","lineP1","lineP2","toSegmentOnly","intersectionPoint","getPointOfIntersectionPointLine","getDistanceBetweenTwoPoints","between1","between2","pointIsLeftOfLine","vec1","getVector","vec2","getPointBetweenTwoPoints","relative","OgetVector","getIdentityVector","vector","getOrthogonalIdentityVector","vec","onSegmentOnly","denominator","u","pointOfIntersection","getTranslatedPoint","getInverseMatrix","det","getDeterminant","getTranslatedBoundingBox","getCTM","getBBox","ll","ur","minPoint","maxPoint","getAngle","angle","asin","PI","isRectOverLine","clipLineOnRect","outcode0","outcode1","outcodeOut","hhh","accept","done","./activity/adhoc.subprocess.png","./activity/event.subprocess.collapsed.png","./activity/event.subprocess.png","./activity/expanded.subprocess.png","./activity/list/type.business.rule.png","./activity/list/type.camel.png","./activity/list/type.decision.png","./activity/list/type.http.png","./activity/list/type.manual.png","./activity/list/type.mule.png","./activity/list/type.receive.png","./activity/list/type.script.png","./activity/list/type.send.png","./activity/list/type.service.png","./activity/list/type.shell.png","./activity/list/type.user.png","./activity/subprocess.png","./activity/task.png","./artifact/text.annotation.png","./catching/cancel.png","./catching/compensation.png","./catching/error.png","./catching/message.png","./catching/signal.png","./catching/timer.png","./connector/association.undirected.png","./connector/association.unidirectional.png","./connector/messageflow.png","./connector/sequenceflow.png","./dataobject/data.store.png","./diagram.png","./endevent/cancel.png","./endevent/error.png","./endevent/none.png","./endevent/terminate.png","./gateway/eventbased.png","./gateway/exclusive.databased.png","./gateway/inclusive.png","./gateway/parallel.png","./startevent/error.png","./startevent/message.png","./startevent/none.png","./startevent/signal.png","./startevent/timer.png","./swimlane/lane.png","./swimlane/pool.png","./throwing/none.png","./throwing/signal.png","webpackContext","webpackContextResolve","MoveDockersCommand","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","updateEdge","DELIMITERS","HASH","HYPHEN","schemas","registerSchema","SCHEMA","RDFS","_checkProfile","__startTime","Date","bodies","_parseDocumentMetadata","_parseFromTag","__stopTime","heads","links","metas","reversedProperties","_parseTriplesFrom","meta","_parseTypeTriplesFrom","alt","subjectType","objectType","schema","delimiter","substring","registerTriple","profiles","__enhanceObject","isLocal","isCurrentDocument","isLiteral","LIITERAL","literal","uri","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","laneEnableValue","collapsed","propertyWindowState","selectedItem","auditData","createDate","$t","_e","author","on","click","propertyWindowStateToggle","glyphicon-chevron-right","glyphicon-chevron-down","directives","rawName","expression","modelData","_l","clear","disable-pro","currentShapeType","laneValueAry","$event","propertyClicked","currentSelectedProperty","showDialogProperties","getTemplateComponentName","selectedShape","updateProperty","updatePropertyInModel","staticRenderFns","mainvue_type_script_lang_js_","editorManager","components","mounted","FLOW_eventBus","CONFIG","EVENT_TYPE_PROPERTY_VALUE_CHANGED","noValue","EVENT_TYPE_SELECTION_CHANGED","EVENT_TYPE_DOUBLE_CLICK","computed","getBaseModelData","methods","dispatchEvent","hidden","templateUrl","hasReadWriteMode","readModeTemplateUrl","writeModeTemplateUrl","_ref","shapeId","previousSelectedShape","assignCommand","getEditor","dispatchFlowEvent","src_mainvue_type_script_lang_js_","component","componentNormalizer","main","propertySection","install","Vue","Homevue_type_script_lang_js_","created","views_Homevue_type_script_lang_js_","Home","use","Router","routes","navConf","header","addComponent","router","route","catch","availableRoutes","redirect","createRouter","addRoutes","Svg","VERSION","NAMESPACE","PathLexer","pathData","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__","setPathData","_pathData","PathToken","PathToken_const","EOD","$1","COMMAND","NUMBER","UNDEFINED","PathParser_const","PARAMCOUNT","A","C","H","L","M","Q","T","V","Z","METHODNAME","q","PathParser","_lexer","_handler","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__","localName","parseData","beginParse","lexer","getNextToken","typeis","param_count","handler","jsonStencil","_stencilSet","_propertyPackages","_view","_properties","view","xml","SVGSVGElement","_loadSVGOnSuccess","_loadSVGOnFailure","SERVER_HANDLER_ROOT","objectId","hiddenPropertyPackages","ppId","oProp","getRepositoryEntries","repositoryEntries","defaultAlign","propertyId","Edge","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_9__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_11__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_12__","_dockerUpdated","_markers","_paths","_interactionPaths","_dockersByPath","_markersByPath","attachedNodePositionData","stencilNode","addEventHandlers","_oldBounds","_stencil","diffX","diffY","diffWidth","diffHeight","relX","getReferencePoint","segment","fromPosition","toPosition","dirty","initializingShapes","oiv","intersection","setX","setY","oldDistance","newIntersection","isHor","isVer","mx","iorientation","my","updateReferencePointOfLabel","numOfDockers","getEdgePosition","_getAngle","horizontalAlign","verticalAlign","getOffsetTop","rotate","getOffsetBottom","pos1","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_6___default","calculatePositionOfAttachedChildNode","refreshAttachedNodes","nodeData","docker1","endPoint","docker2","relativizePoint","newNodePosition","relativDistanceFromDocker1","movePointToUpperLeftOfNode","findEdgeSegmentForNode","smallestDistance","nodeCenterPoint","distanceCenterToLineOne","distanceCenterToLineTwo","getLineParameterForPosition","ORYX_UIObject","fromDocker","toDocker","dockerPoint1","dockerPoint2","relativeDistance","updateDocker","_dockedShape","_dockedShapeBounds","lastPoint","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_get__WEBPACK_IMPORTED_MODULE_13__","isbetweenAB","firstPoint","deltaX","deltaY","part","pathArray","handleChildShapesAfterAddDocker","startDocker","endDocker","segmentElements","getAttachedNodePositionDataForSegment","lengthSegmentPart1","lengthSegmentPart2","relativDockerPosition","nodePositionData","newFullDistance","relativPartOfSegment","fromIndex","toIndex","findSegment","elementsOfSegment","handleChildShapesAfterRemoveDocker","exDocker","lastDocker","allowAttr","newDocker","marked","minPointX","minPointY","maxPointX","maxPointY","defs","NAMESPACE_SVG","marker","markerElements","markerElement","ORYX_SVG","SVGMarker","textElements","textElement","Label","gs","g","isFirst","SVGPathElement","pathId","markersByThisPath","markerUrl","strip","markerStartId","getValidMarkerId","markerMidId","markerEndId","PointsPathHandler","setHandler","parsePath","points","paths","iPath","textElems","textElem","registerOnChange","rawId","svgElement","foundMarker","serializeEvent","deserializeEvent","oryxDockers","dataByPath","dockersByPath","$break","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_demo_block_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_demo_block_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","ORYX_LOGLEVEL_TRACE","ORYX_LOGLEVEL_DEBUG","ORYX_LOGLEVEL_INFO","ORYX_LOGLEVEL_WARN","ORYX_LOGLEVEL_ERROR","ORYX_LOGLEVEL_FATAL","ORYX_LOGLEVEL","printf","__appenders","__log","messageParts","getTime","appender","addAppender","listeners","scope","numOfCallbacks","newArray","hasListener","dispatch","EditPathHandler","oldX","oldY","deltaWidth","deltaHeight","newPoints","parse_float_default","xAxisRotation","largeArcFlag","sweepFlag","pointsAbs","editPointsAbs","pointsRel","editPointsRel","MinMaxPathHandler","minX","minY","maxX","maxY","_lastAbsX","_lastAbsY","calculateMinMax","addPoints","SVGShape","radiusX","radiusY","isHorizontallyResizable","isVerticallyResizable","anchorLeft","anchorRight","anchorTop","anchorBottom","allowDockers","resizeMarkerMid","editPathParser","editPathHandler","SVGRectElement","xAttr","yAttr","widthAttr","heightAttr","SVGCircleElement","cxAttr","cyAttr","rAttr","SVGEllipseElement","rxAttr","ryAttr","SVGLineElement","x1Attr","y1Attr","x2Attr","y2Attr","SVGPolylineElement","SVGPolygonElement","pointsArray","numberOfItems","resizeAttr","anchorAttr","anchors","allowDockersAttr","resizeMarkerMidAttr","widthDelta","heightDelta","updatedPoints","visible","hasOwnerSVG","SVGGElement","refX","refY","markerWidth","markerHeight","oldRefX","oldRefY","oldMarkerWidth","oldMarkerHeight","enabled","minimumLength","svgShapes","refXValue","refYValue","markerWidthValue","markerHeightValue","optionalAttr","enabledAttr","minLengthAttr","svgChild","svgShape","_getSVGShapes","SVGTextElement","invisibleRenderPoint","fitToElemId","edgePosition","_text","_verticalAlign","_horizontalAlign","_rotate","_rotationPoint","_isChanged","alignValues","alignValue","_originVerticalAlign","_originHorizontalAlign","originEdgePosition","OFFSET_EDGE_LABEL_TOP","offsetBottom","OFFSET_EDGE_LABEL_BOTTOM","rotateValue","originAnchorLeft","originAnchorRight","originAnchorTop","originAnchorBottom","xValue","yValue","setOriginX","setOriginY","getComputedTextLength","ee","up","getX","getY","_referencePoint","changeCallbacks","_isUpdating","textLines","_textHasChanged","textLine","tspan","indices","_checkFittingToReferencedElem","_positionText","tspans","newtspans","refNode","refbb","getFontSize","textLength","_getRenderedTextLength","refBoxLength","startIndex","lastSeperatorIndex","numOfChars","getTrimmedTextLength","sslength","newtspan","curChar","charAt","invalidTSpans","indic","$R","toArray","dy","LABEL_LINE_DISTANCE","endIndex","getSubStringLength","sum","_estimateCharacterWidth","character","_characterSets","_characterSetValues","oldText","getInheritedFontSize","test","getExtentOfChar","LABEL_DEFAULT_LINE_HEIGHT","oldLength","setPosition","right","bottom","valign","setEdgePosition","getOriginEdgePosition","isAnchorLeft","isOriginAnchorLeft","isAnchorRight","isOriginAnchorRight","isAnchorTop","isOriginAnchorTop","isAnchorBottom","isOriginAnchorBottom","getOriginVerticalAlign","getOriginHorizontalAlign","SVG","Node","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__","ORYX_Bounds","dataId","forcedHeight","anchorOffset","leftIncluded","rightIncluded","topIncluded","bottomIncluded","_isYLocked","widthDifference","heightDifference","newX","newY","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_get__WEBPACK_IMPORTED_MODULE_10__","_initSVGShapes","isOverEl","dockerPos","entry","attributeTitle","createAttribute","setAttributeNode","attributeId","stencilTargetNode","minSizeAttr","minSizeValues","maxSizeAttr","maxSizeValues","magnetElem","defaultAttr","dockerElem","jsonProp","_jsonProp","ORYX_LOG","_hidden","globalMin","getMinForType","globalMax","getMaxForType","MAX_VALUE","wrapLines","dateFormat","list","category","popular","alwaysAppearInMultiselect","TYPE_MULTIPLECOMPLEX","jsonComplexItem","linkableType","BACKEND_SWITCH","PANEL_LEFT_WIDTH","PANEL_RIGHT_COLLAPSED","PANEL_RIGHT_WIDTH","APPNAME","WEB_URL","OFFSET_HEADER","MODE_READONLY","MODE_FULLSCREEN","PREVENT_LOADINGMASK_AT_READY","PLUGINS_ENABLED","BPMN20_SCHEMA_VALIDATION_ON","SHAPEMENU_RIGHT","SHAPEMENU_BOTTOM","SHAPEMENU_LEFT","SHAPEMENU_TOP","MORPHITEM_DISABLED","TYPE_DATE","TYPE_TEXT","TYPE_MODEL_LINK","TYPE_FORM_FLOW_LINK","TYPE_FORM_LINK","TYPE_SERVICE_LINK","TYPE_CONDITIONS","TYPE_constIABLES","TYPE_LISTENER","TYPE_EPC_FREQ","TYPE_GLOSSARY_LINK","TYPE_DATASOURCE_MINIMAL","TYPE_VALIDATORS","TYPE_FLOWABLE_HTTP_REQUEST_METHOD","ENABLE_MORPHMENU_BY_HOVER","EVENT_CLICK","EVENT_SHAPE_MENU_CLOSE","EVENT_LAYOUT_ROWS","EVENT_LAYOUT_BPEL","EVENT_LAYOUT_BPEL_VERTICAL","EVENT_LAYOUT_BPEL_HORIZONTAL","EVENT_LAYOUT_BPEL_SINGLECHILD","EVENT_LAYOUT_BPEL_AUTORESIZE","EVENT_AUTOLAYOUT_LAYOUT","EVENT_UNDO_RESET","EVENT_BUTTON_UPDATE","EVENT_GLOSSARY_LINK_EDIT","EVENT_GLOSSARY_SHOW","EVENT_GLOSSARY_NEW","EVENT_SHOW_PROPERTYWINDOW","EVENT_ABOUT_TO_SAVE","EVENT_TYPE_EDITOR_READY","EVENT_TYPE_EDITOR_BOOTED","EVENT_TYPE_SELECTION_CHANGE","EVENT_TYPE_TOOLBAR_BUTTON_CLICKEDEVENT_TYPE_TOOLBAR_BUTTON_CLICKED","EVENT_TYPE_ITEM_DROPPED","EVENT_TYPE_MOUSE_OUT","EVENT_TYPE_MOUSE_OVER","EVENT_TYPE_MODEL_SAVED","EVENT_TYPE_HIDE_SHAPE_BUTTONS","EVENT_TYPE_SHOW_VALIDATION_POPUP","EVENT_TYPE_NAVIGATE_TO_PROCESS","EVENT_TYPE_UNDO_REDO_RESET","SELECTION_HIGHLIGHT_COLOR2","SELECTION_HIGHLIGHT_STYLE_CORNER","DOCKER_DOCKED_COLOR","DOCKER_UNDOCKED_COLOR","EDIT_OFFSET_PASTE","KEY_CODE_X","KEY_CODE_C","KEY_CODE_V","KEY_CODE_DELETE","KEY_CODE_META","KEY_CODE_BACKSPACE","KEY_Code_enter","KEY_Code_left","KEY_Code_right","KEY_Code_top","KEY_Code_bottom","FORM_ROW_WIDTH","FORM_GROUP_MARGIN","FORM_GROUP_EMPTY_HEIGHT","ATOM","RDF","RAZIEL","CANVAS_BACKGROUND_COLOR","DEFAULT_SHAPE_MARGIN","SCALERS_SIZE","OFFSET_MAGNET","MAX_NUM_SHAPES_NO_GROUP","SHAPEMENU_CREATE_OFFSET_CORNER","SHAPEMENU_CREATE_OFFSET","setCustomConfigs","configs","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default","editorCustomConfigs","Move","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","newParents","oldParents","dockedNodes","dockAllShapes","addShapeToParent","selectCurrentShapes","allSameEdges","shouldDocked","_loop2","unul","csul","./adhoc.subprocess.png","./event.subprocess.collapsed.png","./event.subprocess.png","./expanded.subprocess.png","./list/type.business.rule.png","./list/type.camel.png","./list/type.decision.png","./list/type.http.png","./list/type.manual.png","./list/type.mule.png","./list/type.receive.png","./list/type.script.png","./list/type.send.png","./list/type.service.png","./list/type.shell.png","./list/type.user.png","./subprocess.png","./task.png","Canvas","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","colHighlightState","colHighlightEnabled","_htmlContainer","underlayNode","columnHightlight1","visibility","columnHightlight2","oncontextmenu","setHightlightState","_traverseForUpdate","childRet","addMarkers","childObject","shapeObjects","eventHandler","addShape","ShapeClass","newShape","addChildShapesRecursively","addedShapes","inject","dockersStr","__properties","dontSetBounds","escapeText","svgClone","getRootNode","_removeInvisibleElements","margin","svgCont","protocol","host","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7__","Appvue_type_template_id_39c044a7_render","Appvue_type_script_lang_js_","examples_Appvue_type_script_lang_js_","App","lib_button_default","lib_slider_default","lib_dropdown_default","lib_dropdown_menu_default","lib_dropdown_item_default","lib_input_default","lib_checkbox_default","lib_input_number_default","lib_dialog_default","lib_table_default","lib_table_column_default","lib_message_default","lib_radio_default","lib_select_default","lib_option_default","lib_tag_default","$message","flow_designvue_type_template_id_3745c3e2_render","wrapperHeight","editor","_t","flow_designvue_type_template_id_3745c3e2_staticRenderFns","mainvue_type_template_id_156c84ba_scoped_true_render","separator","disabled","toolbarButtonClicked","cssClass","data-toggle","secondaryItems","toolbarSecondaryButtonClicked","saveVisible","append-to-body","saveDialog","errorMessage","staticStyle","font-size","margin-top","for","saveLoading","conflictResolveAction","domProps","input","composing","$set","checked","isArray","newVersion","_i","$$a","$$el","$$c","$$v","$$i","slot","isConflict","saveAndClose","isOkButtonDisabled","okClicked","mainvue_type_template_id_156c84ba_scoped_true_staticRenderFns","zh_CN","GENERAL","MAIN-TITLE","NAVIGATION","PROCESSES","CASEMODELS","FORMS","DECISION-TABLES","APPS","TITLE","SELECT-GROUP","MATCHING-GROUPS","FILTER","HISTORY","ACTION","LOGOUT","RETURN-TO-LIST","CANCEL","CLOSE","EDIT","SAVE","OPEN","OK","CONFIRM","CONFIRM-AND-CLOSE","NEW-FORM","CREATE-FORM","NEW-DECISION-TABLE","CREATE-DECISION-TABLE","MESSAGE","SELECT-GROUP-HELP","PEOPLE-NO-MATCHING-RESULTS","GROUP-NO-MATCHING-RESULTS","GROUP-SOURCE-TYPE","GROUP-SOURCE-SEARCH-OPTION","GROUP-SOURCE-FIELD-OPTION","EDITOR","POPUP","UNSAVED-CHANGES","DESCRIPTION","DISCARD","CONTINUE","PROCESS-LIST","SEARCH-PLACEHOLDER","CREATE","IMPORT","PROCESSES-COUNT","PROCESSES-ONE","PROCESSES-EMPTY","PROCESSES-BPMN-HINT","PROCESSES-BPMN-IMPORT-HINT","FILTER-TEXT","FILTER-TEXT-EMPTY","RECENT","RECENT-COUNT","RECENT-ONE","RECENT-EMPTY","SORT","MODIFIED-ASC","MODIFIED-DESC","NAME-ASC","NAME-DESC","CASE-LIST","CASES","CASES-COUNT","CASES-ONE","CASES-EMPTY","CASES-CMMN-HINT","CASES-CMMN-IMPORT-HINT","FORMS-LIST","CREATE-INLINE","SHOW-MORE","FORMS-COUNT","FORMS-ONE","FORMS-EMPTY","DECISION-TABLES-LIST","DECISION-TABLES-COUNT","DECISION-TABLES-ONE","DECISION-TABLES-EMPTY","APPS-LIST","APPS-COUNT","APPS-ONE","APPS-EMPTY","NO-APPS","NO-APPS-CALL-TO-ACTION","NO-APPS-NOTE","PROCESS","NAME","KEY","VERSION-COMMENT","DETAILS","DUPLICATE","EXPORT_BPMN20","DELETE","CREATE-CONFIRM","DUPLICATE-CONFIRM","OPEN-IN-EDITOR","EDIT-CONFIRM","DELETE-CONFIRM","USE-AS-NEW-VERSION","FAVORITE","HISTORY-TITLE","LAST-UPDATED-BY","CREATED-BY","NO-DESCRIPTION","CREATE-TITLE","DUPLICATE-TITLE","CREATE-DESCRIPTION","DUPLICATE-DESCRIPTION","EDIT-DESCRIPTION","DELETE-DESCRIPTION","EDIT-TITLE","DELETE-TITLE","DELETE-LOADING-RELATIONS","DELETE-RELATIONS-DESCRIPTION-SINGLE","DELETE-RELATIONS-DESCRIPTION","DELETE-PROCESS-RELATION","DELETE-FORM-RELATION","DELETE-APP-RELATION","IMPORT-DESCRIPTION","IMPORT-TITLE","USE-AS-NEW-TITLE","USE-AS-NEW-DESCRIPTION","USE-AS-NEW-UNRESOLVED-MODELS-ERROR","USE-AS-NEW-UNRESOLVED-MODEL","SHARED-WITH","PERMISSION","ACTIONS","DROPZONE","CANCEL-UPLOAD","ERROR","NO-DROP","ALERT","NOT-FOUND","SUBPROCESS","CASE","EXPORT_CMMN","FORM","SAVE-FORM-TITLE","DECISION-TABLE","HIT-POLICY","SHARE","ADD-COMMENT","EXPORT","COMMENTS-TITLE","HIT-POLICIES","FIRST","ANY","UNIQUE","PRIORITY","RULE ORDER","OUTPUT ORDER","COLLECT","COLLECT-OPERATORS","SUM","MIN","MAX","COUNT","SAVE-DESCRIPTION","SAVE-DECISION-TABLE-TITLE","FAVORITE-CONFIRM","UN-FAVORITE-CONFIRM","APP","ICON","THEME","GROUPS-ACCESS","USERS-ACCESS","PUBLISH","PUBLISH-CONFIRM","SELECT-ICON","SELECT-THEME","EDIT-MODELS","EXPORT-ZIP","EXPORT-BAR","MODELS-TITLE","NO-MODELS-SELECTED","PREVIEW","SAVE-APP-TITLE","SAVE-APP-SAVE-SUCCESS","PUBLISH-TITLE","PUBLISH-DESCRIPTION","PUBLISH-FIELD","PUBLISH-ERROR-PROCDEF-KEY-CONFLICT","PUBLISH-ERROR-PROCESS-ALREADY-USED","PUBLISH-ERROR-PROCESS-ALREADY-USED-APP","PUBLISH-ERROR-PROCDEF-DUPLICATE-KEYS","DELETE-DESCRIPTION-WITH-RUNTIME","DELETE-CASCADE-FALSE","DELETE-CASCADE-TRUE","HAS-CUSTOM-STENCILITEM","HAS-VALIDATIONERROR","RENEWIDM-IDS","INCLUDE-MODELS-TITLE","PUBLISH-ERROR","SHARE-INFO","ADD","FORM-BUILDER","PALLETTE","TEXT","MULTILINE-TEXT","PASSWORD","CHECKBOX","DATE","DROPDOWN","RADIO","PEOPLE","GROUP-OF-PEOPLE","UPLOAD","EXPRESSION","DECIMAL","HYPERLINK","SPACER","HORIZONTAL-LINE","HEADLINE","HEADLINE-WITH-LINE","TABS","OPTIONS","UPLOAD-OPTIONS","ADVANCED-OPTIONS","LAST-UPDATED","DESIGN","OUTCOME","EXPRESSION-TITLE","EMPTY-EXPRESSION","EXPRESSION-HELP","OPTIONS-EXPRESSION-HELP","LABEL","FUNCTIONAL-GROUP","PERSON","COMPONENT","OVERRIDEID","ID","PLACEHOLDER","RADIO-BUTTON-DEFAULT","DROPDOWN-DEFAULT-EMPTY-SELECTION","DROPDOWN-EMPTY-VALUE-HELP","OPTIONS-EXPRESSION","OPTIONS-EXPRESSION-ENABLED","REQUIRED","READONLY","ADD-OPTION","UPLOAD-ALLOW-MULTIPLE","SIZE","MAX-LENGTH","MIN-LENGTH","PASSWORD-UNMASK-OPTION","HYPERLINK-URL","REGEX-PATTERN","MASK","EXAMPLES","LETTER","NUMBERORLETTER","OPTIONAL","PHONE","OUTCOMES","NO-OUTCOMES-OPTION","OUTCOMES-OPTION","POSSIBLE-OUTCOMES","NEW-OUTCOME-PLACEHOLDER","REMOVE","DECISION-TABLE-EDITOR","EMPTY-MESSAGES","NO-VARIABLE-SELECTED","EXPRESSION-EDITOR","INPUT-TITLE","INPUT-DESCRIPTION","OUTPUT-TITLE","OUTPUT-DESCRIPTION","EXPRESSION-LABEL","EXPRESSION-PLACEHOLDER","EXPRESSION-VARIABLE-NAME","EXPRESSION-VARIABLE-TYPE","EXPRESSION-VARIABLE-NAME-PLACEHOLDER","OUTPUT-NEW-VARIABLE-ID","OUTPUT-NEW-VARIABLE-TYPE","COMPLEX-EXPRESSION-LABEL","ALLOWED-VALUES","OUTPUT-VALUES","OUTPUT-VALUES-OPTIONAL","OUTPUT-VALUES-NOT-OPTIONAL","BUTTON-ACTIONS-LABEL","BUTTON-ADD-INPUT-LABEL","BUTTON-ADD-OUTPUT-LABEL","BUTTON-ADD-RULE-LABEL","BUTTON-MOVE-RULE-UPWARDS-LABEL","BUTTON-MOVE-RULE-DOWNWARDS-LABEL","BUTTON-REMOVE-RULE-LABEL","EXPRESSION-VARIABLE-REQUIRED-ERROR","SAVE-CONFIRM","TOUR","WELCOME-TITLE","WELCOME-CONTENT","PALETTE-TITLE","PALETTE-CONTENT","CANVAS-TITLE","CANVAS-CONTENT","DRAGDROP-TITLE","DRAGDROP-CONTENT","PROPERTIES-TITLE","PROPERTIES-CONTENT","TOOLBAR-TITLE","TOOLBAR-CONTENT","END-TITLE","END-CONTENT","FEATURE-TOUR","BENDPOINT","ACTION.OK","ACTION.SAVE","ACTION.SAVE-AND-CLOSE","ACTION.SEND","ACTION.CANCEL","ACTION.SELECT","ACTION.ADD","ACTION.REMOVE","ACTION.MOVE.UP","ACTION.MOVE.DOWN","TOOLBAR.ACTION.CLOSE","TOOLBAR.ACTION.SAVE","TOOLBAR.ACTION.VALIDATE","TOOLBAR.ACTION.CUT","TOOLBAR.ACTION.COPY","TOOLBAR.ACTION.PASTE","TOOLBAR.ACTION.DELETE","TOOLBAR.ACTION.UNDO","TOOLBAR.ACTION.REDO","TOOLBAR.ACTION.ZOOMIN","TOOLBAR.ACTION.ZOOMOUT","TOOLBAR.ACTION.ZOOMACTUAL","TOOLBAR.ACTION.ZOOMFIT","TOOLBAR.ACTION.BENDPOINT.ADD","TOOLBAR.ACTION.BENDPOINT.REMOVE","TOOLBAR.ACTION.ALIGNHORIZONTAL","TOOLBAR.ACTION.ALIGNVERTICAL","TOOLBAR.ACTION.SAMESIZE","TOOLBAR.ACTION.HELP","TOOLBAR.ACTION.FEEDBACK","FORM_TOOLBAR.ACTION.SAVE","APP_DEFINITION_TOOLBAR.ACTION.SAVE","BUTTON.ACTION.DELETE.TOOLTIP","BUTTON.ACTION.MORPH.TOOLTIP","ELEMENT.AUTHOR","ELEMENT.DATE_CREATED","PROPERTY.REMOVED","PROPERTY.EMPTY","PROPERTY.PROPERTY.EDIT.TITLE","PROPERTY.FEEDBACK.TITLE","PROPERTY.ASSIGNMENT.TITLE","PROPERTY.ASSIGNMENT.TYPE","PROPERTY.ASSIGNMENT.TYPE.IDENTITYSTORE","PROPERTY.ASSIGNMENT.TYPE.STATIC","PROPERTY.ASSIGNMENT.ASSIGNEE","PROPERTY.ASSIGNMENT.MATCHING","PROPERTY.ASSIGNMENT.ASSIGNEE_PLACEHOLDER","PROPERTY.ASSIGNMENT.EMPTY","PROPERTY.ASSIGNMENT.NONE","PROPERTY.ASSIGNMENT.PLACEHOLDER-SEARCHUSER","PROPERTY.ASSIGNMENT.PLACEHOLDER-SEARCHGROUP","PROPERTY.ASSIGNMENT.SEARCH","PROPERTY.ASSIGNMENT.ASSIGNEE_DISPLAY","PROPERTY.ASSIGNMENT.CANDIDATE_USERS_DISPLAY","PROPERTY.ASSIGNMENT.CANDIDATE_USERS","PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS_DISPLAY","PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS","PROPERTY.ASSIGNMENT.USER_IDM_DISPLAY","PROPERTY.ASSIGNMENT.USER_IDM_EMAIL_DISPLAY","PROPERTY.ASSIGNMENT.USER_IDM_FIELD_DISPLAY","PROPERTY.ASSIGNMENT.IDM_EMPTY","PROPERTY.ASSIGNMENT.IDM.TYPE","PROPERTY.ASSIGNMENT.IDM.NO_CANDIDATE_USERS","PROPERTY.ASSIGNMENT.IDM.NO_CANDIDATE_GROUPS","PROPERTY.ASSIGNMENT.IDM.DROPDOWN.INITIATOR","PROPERTY.ASSIGNMENT.IDM.DROPDOWN.USER","PROPERTY.ASSIGNMENT.IDM.DROPDOWN.USERS","PROPERTY.ASSIGNMENT.IDM.DROPDOWN.GROUPS","PROPERTY.ASSIGNMENT.INITIATOR-CAN-COMPLETE","PROPERTY.EXECUTIONLISTENERS.DISPLAY","PROPERTY.EXECUTIONLISTENERS.EMPTY","PROPERTY.EXECUTIONLISTENERS.EVENT","PROPERTY.EXECUTIONLISTENERS.CLASS","PROPERTY.EXECUTIONLISTENERS.CLASS.PLACEHOLDER","PROPERTY.EXECUTIONLISTENERS.EXPRESSION","PROPERTY.EXECUTIONLISTENERS.EXPRESSION.PLACEHOLDER","PROPERTY.EXECUTIONLISTENERS.DELEGATEEXPRESSION","PROPERTY.EXECUTIONLISTENERS.DELEGATEEXPRESSION.PLACEHOLDER","PROPERTY.EXECUTIONLISTENERS.UNSELECTED","PROPERTY.EXECUTIONLISTENERS.FIELDS.NAME","PROPERTY.EXECUTIONLISTENERS.FIELDS.NAME.PLACEHOLDER","PROPERTY.EXECUTIONLISTENERS.FIELDS.EXPRESSION","PROPERTY.EXECUTIONLISTENERS.FIELDS.EXPRESSION.PLACEHOLDER","PROPERTY.EXECUTIONLISTENERS.FIELDS.STRINGVALUE","PROPERTY.EXECUTIONLISTENERS.FIELDS.STRINGVALUE.PLACEHOLDER","PROPERTY.EXECUTIONLISTENERS.FIELDS.STRING","PROPERTY.EXECUTIONLISTENERS.FIELDS.STRING.PLACEHOLDER","PROPERTY.EXECUTIONLISTENERS.FIELDS.IMPLEMENTATION","PROPERTY.EXECUTIONLISTENERS.FIELDS.EMPTY","PROPERTY.FIELDS","PROPERTY.FIELDS.EMPTY","PROPERTY.FIELDS.NAME","PROPERTY.FIELDS.NAME.PLACEHOLDER","PROPERTY.FIELDS.EXPRESSION","PROPERTY.FIELDS.EXPRESSION.PLACEHOLDER","PROPERTY.FIELDS.STRINGVALUE","PROPERTY.FIELDS.STRINGVALUE.PLACEHOLDER","PROPERTY.FIELDS.STRING","PROPERTY.FIELDS.STRING.PLACEHOLDER","PROPERTY.FIELDS.IMPLEMENTATION","PROPERTY.DATAPROPERTIES.VALUES","PROPERTY.DATAPROPERTIES.EMPTY","PROPERTY.DATAPROPERTIES.ID","PROPERTY.DATAPROPERTIES.ID.PLACEHOLDER","PROPERTY.DATAPROPERTIES.NAME","PROPERTY.DATAPROPERTIES.NAME.PLACEHOLDER","PROPERTY.DATAPROPERTIES.TYPE","PROPERTY.DATAPROPERTIES.VALUE.PLACEHOLDER","PROPERTY.DATAPROPERTIES.VALUE","PROPERTY.FORMPROPERTIES.VALUE","PROPERTY.FORMPROPERTIES.EMPTY","PROPERTY.FORMPROPERTIES.ID","PROPERTY.FORMPROPERTIES.ID.PLACEHOLDER","PROPERTY.FORMPROPERTIES.NAME","PROPERTY.FORMPROPERTIES.NAME.PLACEHOLDER","PROPERTY.FORMPROPERTIES.TYPE","PROPERTY.FORMPROPERTIES.DATEPATTERN","PROPERTY.FORMPROPERTIES.DATEPATTERN.PLACEHOLDER","PROPERTY.FORMPROPERTIES.VALUES","PROPERTY.FORMPROPERTIES.ENUMVALUES.EMPTY","PROPERTY.FORMPROPERTIES.VALUES.ID","PROPERTY.FORMPROPERTIES.VALUES.NAME","PROPERTY.FORMPROPERTIES.VALUES.ID.PLACEHOLDER","PROPERTY.FORMPROPERTIES.VALUES.NAME.PLACEHOLDER","PROPERTY.FORMPROPERTIES.EXPRESSION","PROPERTY.FORMPROPERTIES.EXPRESSION.PLACEHOLDER","PROPERTY.FORMPROPERTIES.VARIABLE","PROPERTY.FORMPROPERTIES.VARIABLE.PLACEHOLDER","PROPERTY.FORMPROPERTIES.REQUIRED","PROPERTY.FORMPROPERTIES.READABLE","PROPERTY.FORMPROPERTIES.WRITABLE","PROPERTY.INPARAMETERS.VALUE","PROPERTY.INPARAMETERS.EMPTY","PROPERTY.OUTPARAMETERS.VALUE","PROPERTY.OUTPARAMETERS.EMPTY","PROPERTY.PARAMETER.SOURCE","PROPERTY.PARAMETER.SOURCE.PLACEHOLDER","PROPERTY.PARAMETER.SOURCEEXPRESSION","PROPERTY.PARAMETER.SOURCEEXPRESSION.PLACEHOLDER","PROPERTY.PARAMETER.TARGET","PROPERTY.PARAMETER.TARGET.PLACEHOLDER","PROPERTY.PARAMETER.EMPTY","PROPERTY.PROCESSREFERENCE.EMPTY","PROPERTY.PROCESSREFERENCE.TITLE","PROPERTY.PROCESSREFERENCE.ERROR.PROCESS","PROPERTY.PROCESSREFERENCE.PROCESS.LOADING","PROPERTY.PROCESSREFERENCE.PROCESS.EMPTY","PROPERTY.FORMREFERENCE.EMPTY","PROPERTY.FORMREFERENCE.TITLE","PROPERTY.FORMREFERENCE.DESCRIPTION","PROPERTY.FORMREFERENCE.ERROR.FORM","PROPERTY.FORMREFERENCE.FORM.LOADING","PROPERTY.FORMREFERENCE.FORM.EMPTY","PROPERTY.TASKLISTENERS.VALUE","PROPERTY.TASKLISTENERS.EMPTY","PROPERTY.TASKLISTENERS.EVENT","PROPERTY.TASKLISTENERS.CLASS","PROPERTY.TASKLISTENERS.CLASS.PLACEHOLDER","PROPERTY.TASKLISTENERS.EXPRESSION","PROPERTY.TASKLISTENERS.EXPRESSION.PLACEHOLDER","PROPERTY.TASKLISTENERS.DELEGATEEXPRESSION","PROPERTY.TASKLISTENERS.DELEGATEEXPRESSION.PLACEHOLDER","PROPERTY.TASKLISTENERS.UNSELECTED","PROPERTY.TASKLISTENERS.FIELDS.NAME","PROPERTY.TASKLISTENERS.FIELDS.NAME.PLACEHOLDER","PROPERTY.TASKLISTENERS.FIELDS.EXPRESSION","PROPERTY.TASKLISTENERS.FIELDS.EXPRESSION.PLACEHOLDER","PROPERTY.TASKLISTENERS.FIELDS.STRINGVALUE","PROPERTY.TASKLISTENERS.FIELDS.STRINGVALUE.PLACEHOLDER","PROPERTY.TASKLISTENERS.FIELDS.STRING","PROPERTY.TASKLISTENERS.FIELDS.STRING.PLACEHOLDER","PROPERTY.TASKLISTENERS.FIELDS.IMPLEMENTATION","PROPERTY.TASKLISTENERS.FIELDS.EMPTY","PROPERTY.EVENTLISTENERS.DISPLAY","PROPERTY.EVENTLISTENERS.EMPTY","PROPERTY.EVENTLISTENERS.EVENTS","PROPERTY.EVENTLISTENERS.RETHROW","PROPERTY.EVENTLISTENERS.CLASS","PROPERTY.EVENTLISTENERS.CLASS.PLACEHOLDER","PROPERTY.EVENTLISTENERS.DELEGATEEXPRESSION","PROPERTY.EVENTLISTENERS.DELEGATEEXPRESSION.PLACEHOLDER","PROPERTY.EVENTLISTENERS.ENTITYTYPE","PROPERTY.EVENTLISTENERS.ENTITYTYPE.PLACEHOLDER","PROPERTY.EVENTLISTENERS.RETHROWTYPE","PROPERTY.EVENTLISTENERS.ERRORCODE","PROPERTY.EVENTLISTENERS.ERRORCODE.PLACEHOLDER","PROPERTY.EVENTLISTENERS.MESSAGENAME","PROPERTY.EVENTLISTENERS.MESSAGENAME.PLACEHOLDER","PROPERTY.EVENTLISTENERS.SIGNALNAME","PROPERTY.EVENTLISTENERS.SIGNALNAME.PLACEHOLDER","PROPERTY.EVENTLISTENERS.UNSELECTED","PROPERTY.SIGNALDEFINITIONS.DISPLAY","PROPERTY.SIGNALDEFINITIONS.EMPTY","PROPERTY.SIGNALDEFINITIONS.SCOPE-GLOBAL","PROPERTY.SIGNALDEFINITIONS.SCOPE-PROCESSINSTANCE","PROPERTY.SIGNALDEFINITIONS.ID","PROPERTY.SIGNALDEFINITIONS.NAME","PROPERTY.SIGNALDEFINITIONS.SCOPE","PROPERTY.MESSAGEDEFINITIONS.DISPLAY","PROPERTY.MESSAGEDEFINITIONS.EMPTY","PROPERTY.MESSAGEDEFINITIONS.ID","PROPERTY.MESSAGEDEFINITIONS.NAME","PROPERTY.SEQUENCEFLOW.ORDER.EMPTY","PROPERTY.SEQUENCEFLOW.ORDER.NOT.EMPTY","PROPERTY.SEQUENCEFLOW.ORDER.NO.OUTGOING.SEQUENCEFLOW.FOUND","PROPERTY.SEQUENCEFLOW.ORDER.DESCRIPTION","PROPERTY.SEQUENCEFLOW.ORDER.SEQUENCEFLOW.VALUE","PROPERTY.SEQUENCEFLOW.CONDITION.TITLE","PROPERTY.SEQUENCEFLOW.CONDITION.STATIC","PROPERTY.SEQUENCEFLOW.CONDITION.NO-CONDITION-DISPLAY","PROPERTY.DUEDATE.EMPTY","PROPERTY.DUEDATE.DEFINED","PROPERTY.DUEDATE.TITLE","PROPERTY.DUEDATE.EXPRESSION-LABEL","PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.NO-DUEDATE","PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.EXPRESSION","PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.STATIC","PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.FIELD","MODEL.SAVE.TITLE","MODEL.VALIDATE.TITLE","MODEL.NAME","MODEL.KEY","MODEL.DESCRIPTION","MODEL.SAVE.NEWVERSION","MODEL.SAVE.COMMENT","MODEL.SAVE.SAVING","MODEL.LASTMODIFIEDDATE","MODEL.SAVE.ERROR","MODEL.VALIDATIONERRORS","MODEL.CONFLICT.WRITE","MODEL.CONFLICT.WRITE.OPTIONS","MODEL.CONFLICT.WRITE.OPTION.OVERWRITE","MODEL.CONFLICT.WRITE.OPTION.DISCARDCHANGES","MODEL.CONFLICT.WRITE.OPTION.SAVEAS","MODEL.CONFLICT.WRITE.OPTION.NEWVERSION","MODEL.CONFLICT.SAVEAS","EVENT_TYPE.ACTIVITY.COMPENSATE.TOOLTIP","EVENT_TYPE.ACTIVITY.COMPLETED.TOOLTIP","EVENT_TYPE.ACTIVITY.ERROR.RECEIVED.TOOLTIP","EVENT_TYPE.MEMBERSHIP.CREATED.TOOLTIP","EVENT_TYPE.MEMBERSHIP.DELETED.TOOLTIP","EVENT_TYPE.MEMBERSHIPS.DELETED.TOOLTIP","EVENT_TYPE.TASK.ASSIGNED.TOOLTIP","EVENT_TYPE.TASK.COMPLETED.TOOLTIP","EVENT_TYPE.UNCAUGHT.BPMNERROR.TOOLTIP","EVENT_TYPE.VARIABLE.CREATED.TOOLTIP","EVENT_TYPE.VARIABLE.DELETED.TOOLTIP","EVENT_TYPE.VARIABLE.UPDATED.TOOLTIP","PROPERTY.DECISIONTABLEREFERENCE.EMPTY","PROPERTY.DECISIONTABLEREFERENCE.TITLE","PROPERTY.DECISIONTABLEREFERENCE.ERROR.FORM","PROPERTY.DECISIONTABLEREFERENCE.DECISIONTABLE.LOADING","PROPERTY.DECISIONTABLEREFERENCE.DECISIONTABLE.EMPTY","PROPERTY.CASEREFERENCE.EMPTY","PROPERTY.CASEREFERENCE.TITLE","PROPERTY.CASEREFERENCE.ERROR.FORM","PROPERTY.CASEREFERENCE.CASE.LOADING","PROPERTY.CASEREFERENCE.CASE.EMPTY","PROPERTY.PACKAGEA","hasOwn","RE_NARGS","_len","_key","esm_typeof","Format","defaultLang","merged","i18nHandler","vuei18n","get_prototype_of_default","locale","deepmerge","array","current","i18n","mixins_locale","undoStack","redoStack","account","mixins","getToolbarItems","getSecondaryItems","MousetrapBind","executeFunctionByName","functionName","context","func","TOOLBAR_ACTIONS","buttonIndex","buttonClicked","services","$scope","$rootScope","$parent","EVENT_TYPE_TOOLBAR_BUTTON_CLICKED","toolbarItem","mousetrap_default","undo","redo","deleteItem","getStencilData","stencilNameSpace","successCallback","getModel","modeltype","modelType","json_xml","stringify_default","newversion","comment","lastUpdated","saveAs","ignoreChanges","safeApply","$root","phase","$$phase","watch","nv","ov","main_component","editorToolbar","mainvue_type_template_id_25ad003e_scoped_true_render","stencilItemGroups","expanded","expandedToggle","data-drag","jqyoui-draggable","data-jqyoui-options","customIcon","_f","current-process","treeview","edit","padding-left","mainvue_type_template_id_25ad003e_scoped_true_staticRenderFns","mainvue_type_template_id_a3dec4be_scoped_true_render","$first","mainvue_type_template_id_a3dec4be_scoped_true_staticRenderFns","stencil_item_src_mainvue_type_script_lang_js_","default","getShowStencilData","$emit","packages_stencil_item_src_mainvue_type_script_lang_js_","src_main_component","src_main","stencilItem","mainvue_type_template_id_097dd824_scoped_true_render","showSubProcess","mainvue_type_template_id_097dd824_scoped_true_staticRenderFns","process_tree_list_src_mainvue_type_script_lang_js_","flowableShapes","packages_process_tree_list_src_mainvue_type_script_lang_js_","process_tree_list_src_main_component","process_tree_list_src_main","processTreeList","mainvue_type_template_id_78f86284_scoped_true_render","mainvue_type_template_id_78f86284_scoped_true_staticRenderFns","root_stencil_item_src_mainvue_type_script_lang_js_","packages_root_stencil_item_src_mainvue_type_script_lang_js_","root_stencil_item_src_main_component","root_stencil_item_src_main","rootStencilTtem","palette_wrapper_src_mainvue_type_script_lang_js_","isEditorReady","diyStencilItem","paletteItems","stencilItemTemplate","stencil_item","process_tree_list","rootStencilItemTemplate","root_stencil_item","packages_palette_wrapper_src_mainvue_type_script_lang_js_","palette_wrapper_src_main_component","palette_wrapper_src_main","paletteWrapper","mainvue_type_template_id_7d0d16c4_scoped_true_render","onDrop","onOver","onOut","data-model","data-drop","&scroll","fnScroll","btn_visibile","hide_shape_buttons","hide_morph_buttons","morphShape","trigger","handleCommand","hide_edit_buttons","editShape","hide_flow_add_btns","onStart","onDrag","revert","helper","quickAddItem","mainvue_type_template_id_7d0d16c4_scoped_true_staticRenderFns","EventBus","findGroup","groupArray","addGroup","groupName","getAdditionalIEZoom","_debounce","timer","delay","th","ngDragDropService","draggableScope","droppableScope","extract","callbackName","atStartBracket","atEndBracket","lastIndexOf","$parse","callEventCallback","ui","objExtract","draggable","binding","vnode","dragSettings","jqyouiOptions","zIndex","dataset","drag","onStop","droppable","dropSettings","drop","over","beforeDrop","canvas_wrapper_src_mainvue_type_script_lang_js_","morphShapes","currentSelectedMorph","dragCanContain","dragModeOver","quickMenu","btns","btn","$on","quickMenuItems","selectedElements","subSelectionElements","getSubSelection","selectedElementBeforeScrolling","orginalResizerSEStyle","orginalResizerNWStyle","fnHandleScrollDebounce","_type","handleDisplayProperty","updateOryxButtonPosition","flowToolbarEvent","currentSelectedShape","currentSelectedShapeId","getStencilItemById","morphRoles","morphRole","ary","morphOptions","stencilId","genericTaskId","dropCallback","pageX","pageY","screenCTM","parentAbs","dragCurrentParent","_j","cShape","connectMorph","dropTargetElement","canAttach","_option","dropEvent","droppedItem","dragCurrentParentId","dragCurrentParentStencil","overCallback","outCallback","startDragCallbackQuickMenu","dragCallbackQuickMenu","coord","aShapes","instanceofCanvas","setHightlightStateBasedOnX","_j2","candidate","parentCandidate","instanceofNode","instanceofEdge","curCan","associationConnect","canConnectTo","_parentCandidate","newItemId","packages_canvas_wrapper_src_mainvue_type_script_lang_js_","canvas_wrapper_src_main_component","canvas_wrapper_src_main","canvasWrapper","FLOWABLE_CONFIG","UI_CONFIG","showRemovedProperties","HEADER_CONFIG","showAppTitle","showHeaderMenu","showMainNavigation","showPageHeader","TOOLBAR_CONFIG","enabledAction","disableInForm","minSelectionCount","ORYX","URLS","configrationRetries","Version","Log","Prototype","Methods","_load","_loadPluginsOnFails","onOryxResourcesLoaded","createByUrl","Core","Controls","EDITOR_TOUR","gettingStarted","useLocalStorage","userName","firstName","fullname","translations","tourStepDomElements","tour","Tour","storage","localStorage","backdrop","keyboard","steps","orphan","_buildStepTemplate","onNext","_buildOnNextFunction","placement","onEnd","_buildOnEndFunction","sequenceFlowBendpoint","addPrevButton","addNextButton","addEndTourButton","optionalForcedWidth","image","selector","selectors","elementsToResetIndex","closeEditor","$location","validate","lastCommands","forceSelectionRefresh","rollback","toggleUndo","toggleRedo","_getOryxEditPlugin","addBendPoint","dockerPlugin","_getOryxDockerPlugin","removeBendPoint","oryxEditPlugin","_getOryxViewPlugin","zoomActual","zoomFit","alignVertical","_getOryxArrangmentPlugin","alignHorizontal","sameSize","help","oryxViewPlugin","oryxArrangmentPlugin","oryxDockerPlugin","CreateCommand","currentReference","targetRefPos","sourceRefPos","shapeOptions","midpoint","bc","bs","MorphTo","serialized","serProp","boundsObj","changedBounds","oPos","setRelatedDockers","rPoint","rPointNew","absXY","SetProperty","CommandClass","dockedShapeParent","FLOWABLE","EditorManager","editorConfigs","property_config","PROPERTY_CONFIG","treeFilteredElements","canvasTracker","structualIcons","SubProcess","CollapsedSubProcess","EventSubProcess","elementsWithoutRenameAction","setModelId","loading","setModelData","setStencilData","stencilData","setShowStencilData","setToolbarItems","pluginConfig","bootEditor","Commands","construct","toolbarItems","syncCanvasTracker","stencilSetNamespace","stencilSetUrl","_mergeCanvasToChild","showStencilData","quickMenuDefinition","ignoreForPaletteDefinition","roleItem","stencilItemGroups_ary","stencilIndex","currentGroupName","currentGroup","groupIndex","childGroupName","childGroup","canConnectAssociation","customIconId","stencilRole","availableQuickMenuItems","findAndRegisterCanvas","eventMappings","oryxType","flowableType","eventMapping","filterEvent","renderProcessHierarchy","initAddListener","initRegisterOnEvent","isLoading","getTree","stencilItemId","findStencilItemInGroup","events","_buildTreeChildren","toObject","coordinates","jsonShapes","targetable","_findTarget","flowableShape","showShapeProperties","updateToolbarButtonStatus","canvasSelected","createdByUser","propertyConfig","isHidden","currentProperty","canvasSection","shapeXY","flow_op_btns","editable","quickButtonX","quickButtonY","flow_add_btns","minLength","decodeURIComponent","showValidationDialog","currentValidationId","validationId","isOnProcessLevel","onProcessLevel","_internalCreateModal","now_default","$modal","editorHistory","$window","processId","flow_designvue_type_script_lang_js_","toolbar","editor_toolbar","palette_wrapper","canvas_wrapper","property_section","EditorManager_EditorManager","objectSpread","src_flow_designvue_type_script_lang_js_","flow_design_component","flow_design","flowEditor","mainvue_type_template_id_272dd1c8_scoped_true_render","mainvue_type_template_id_272dd1c8_scoped_true_staticRenderFns","stencil_drag_item_src_mainvue_type_script_lang_js_","dragModeOver_drag","startDragCallback","dragCallback","parentStencilId","parentItem","canvasCandidate","packages_stencil_drag_item_src_mainvue_type_script_lang_js_","stencil_drag_item_src_main_component","stencil_drag_item_src_main","stencilDragItem","opts","installed","demo_blockvue_type_template_id_a3425874_render","isExpand","span","demo_blockvue_type_template_id_a3425874_staticRenderFns","demo_blockvue_type_script_lang_js_","components_demo_blockvue_type_script_lang_js_","demo_block_component","demo_block","demoBlock","productionTip","date","$mount","fill-opacity","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_11__","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_13__","superId","superStencilId","hiddenProperties","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15__","childEdges","ne","nodesAtPosition","candidates","nodesInZOrder","zOrderIndex","_isInSetProperty","E_myself_flowable_edit_node_modules_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_1___default","setHiddenProperty","mergedProperties","merge","resultProperties","_oldRefPoint1","_oldRefPoint2","_dockerNode","_referencePointNode","_updateCallback","dswidth","dsheight","dockerIndex","dock1","dock2","absoluteReferenzPoint1","absoluteReferenzPoint2","minDimension","newPoint","getIntersectionPoint","grandParentPos","setDockerColor","prevent","_preventHiding","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_b1d41464_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_main_vue_vue_type_style_index_0_id_b1d41464_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_changedCallbacks","suspendChange","changedWhileSuspend","sizeChanged","ax","ay","bx","by","currentPosition","dx","_CONFIG__WEBPACK_IMPORTED_MODULE_0__","UIDragCallback","UIDisableDrag","disableCallback"],"mappings":"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","file":"js/index.9d426ced.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"index\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"5cd4b684\",\"chunk-04ba02e7\":\"9ce0d4ed\",\"chunk-399e2613\":\"495458c9\",\"chunk-84e17dd0\":\"6e916017\",\"chunk-bcd97db4\":\"9107d33f\",\"chunk-d63807ee\":\"a421248c\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-04ba02e7\":1,\"chunk-84e17dd0\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"31d6cfe0\",\"chunk-04ba02e7\":\"258c9bfa\",\"chunk-399e2613\":\"31d6cfe0\",\"chunk-84e17dd0\":\"8b9b55af\",\"chunk-bcd97db4\":\"31d6cfe0\",\"chunk-d63807ee\":\"31d6cfe0\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import ORYX_CINFIG from '../../CONFIG'\r\nimport PropertyItem from './PropertyItem'\r\n\r\n\r\n/**\r\n * Returns the translation of an attribute in jsonObject specified by its name\r\n * according to navigator.language\r\n */\r\n\r\nexport default class ComplexPropertyItem {\r\n  constructor (jsonItem, namespace, property) {\r\n    // arguments.callee.$.construct.apply(this, arguments)\r\n    if (!jsonItem) {\r\n      throw 'ORYX.Core.StencilSet.ComplexPropertyItem(construct): Parameter jsonItem is not defined.'\r\n    }\r\n    if (!namespace) {\r\n      throw 'ORYX.Core.StencilSet.ComplexPropertyItem(construct): Parameter namespace is not defined.'\r\n    }\r\n    if (!property) {\r\n      throw 'ORYX.Core.StencilSet.ComplexPropertyItem(construct): Parameter property is not defined.'\r\n    }\r\n\r\n    this._jsonItem = jsonItem\r\n    this._namespace = namespace\r\n    this._property = property\r\n    this._items = new Hash()\r\n    this._complexItems = new Hash()\r\n\r\n    // init all values\r\n    if (!jsonItem.name) {\r\n      throw 'ORYX.Core.StencilSet.ComplexPropertyItem(construct): Name is not defined.'\r\n    }\r\n\r\n    if (!jsonItem.type) {\r\n      throw 'ORYX.Core.StencilSet.ComplexPropertyItem(construct): Type is not defined.'\r\n    } else {\r\n      jsonItem.type = jsonItem.type.toLowerCase()\r\n    }\r\n\r\n    if (jsonItem.type === ORYX_CINFIG.TYPE_CHOICE) {\r\n      if (jsonItem.items && jsonItem.items instanceof Array) {\r\n        jsonItem.items.each((function (item) {\r\n          this._items[item.value] = new PropertyItem(item, namespace, this)\r\n        }).bind(this))\r\n      } else {\r\n        throw 'ORYX.Core.StencilSet.Property(construct): No property items defined.'\r\n      }\r\n    } else if (jsonItem.type === ORYX_CINFIG.TYPE_COMPLEX) {\r\n      if (jsonItem.complexItems && jsonItem.complexItems instanceof Array) {\r\n        jsonItem.complexItems.each((function (complexItem) {\r\n          this._complexItems[complexItem.id] = new ComplexPropertyItem(complexItem, namespace, this)\r\n        }).bind(this))\r\n      } else {\r\n        throw 'ORYX.Core.StencilSet.Property(construct): No property items defined.'\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {ORYX.Core.StencilSet.PropertyItem} item\r\n   * @return {Boolean} True, if item has the same namespace and id.\r\n   */\r\n  equals (item) {\r\n    return (this.property().equals(item.property()) && this.name() === item.name())\r\n  }\r\n\r\n  namespace () {\r\n    return this._namespace\r\n  }\r\n\r\n  property () {\r\n    return this._property\r\n  }\r\n\r\n  name () {\r\n    return this._jsonItem.name\r\n  }\r\n\r\n  id () {\r\n    return this._jsonItem.id\r\n  }\r\n\r\n  type () {\r\n    return this._jsonItem.type\r\n  }\r\n\r\n  optional () {\r\n    return this._jsonItem.optional\r\n  }\r\n\r\n  width () {\r\n    return this._jsonItem.width\r\n  }\r\n\r\n  value () {\r\n    return this._jsonItem.value\r\n  }\r\n\r\n  items () {\r\n    return this._items.values()\r\n  }\r\n\r\n  complexItems () {\r\n    return this._complexItems.values()\r\n  }\r\n\r\n  disable () {\r\n    return this._jsonItem.disable\r\n  }\r\n}","import ORYX_CONFIG from './CONFIG'\r\nimport ORYX_Log from './Log'\r\n\r\nconst Utils = {\r\n  /**\r\n   * General helper method for parsing a param out of current location url\r\n   * 获取当前url上的参数\r\n   * @example\r\n   * // Current url in Browser => \"http://oryx.org?param=value\"\r\n   * ORYX.Utils.getParamFromUrl(\"param\") // => \"value\"\r\n   * @param {Object} name\r\n   */\r\n  getParamFromUrl: function (name) {\r\n    name = name.replace(/[\\[]/, '\\\\\\[').replace(/[\\]]/, '\\\\\\]')\r\n    var regexS = '[\\\\?&]' + name + '=([^&#]*)'\r\n    var regex = new RegExp(regexS)\r\n    var results = regex.exec(window.location.href)\r\n    if (results == null) {\r\n      return null\r\n    }\r\n    else {\r\n      return results[1]\r\n    }\r\n  },\r\n\r\n  adjustLightness: function () {\r\n    return arguments[0]\r\n  },\r\n\r\n  adjustGradient: function (gradient, reference) {\r\n\r\n    if (ORYX_CONFIG.DISABLE_GRADIENT && gradient) {\r\n\r\n      var col = reference.getAttributeNS(null, 'stop-color') || '#ffffff'\r\n\r\n      $A(gradient.getElementsByTagName('stop')).each(function (stop) {\r\n        if (stop == reference) {\r\n          return\r\n        }\r\n        stop.setAttributeNS(null, 'stop-color', col)\r\n      })\r\n    }\r\n  },\r\n\r\n  // TODO Implement namespace awareness on attribute level.\r\n  /**\r\n   * graft() function\r\n   * Originally by Sean M. Burke from interglacial.com, altered for usage with\r\n   * SVG and namespace (xmlns) support. Be sure you understand xmlns before\r\n   * using this funtion, as it creates all grafted elements in the xmlns\r\n   * provided by you and all element's attribures in default xmlns. If you\r\n   * need to graft elements in a certain xmlns and wish to assign attributes\r\n   * in both that and another xmlns, you will need to do stepwise grafting,\r\n   * adding non-default attributes yourself or you'll have to enhance this\r\n   * function. Latter, I would appreciate: martin�apfelfabrik.de\r\n   * @param {Object} namespace The namespace in which\r\n   *          elements should be grafted.\r\n   * @param {Object} parent The element that should contain the grafted\r\n   *          structure after the function returned.\r\n   * @param {Object} t the crafting structure.\r\n   * @param {Object} doc the document in which grafting is performed.\r\n   */\r\n  graft: function (namespace, parent, t, doc) {\r\n    doc = (doc || (parent && parent.ownerDocument) || document)\r\n    let e\r\n    if (t === undefined) {\r\n      throw 'Can\\'t graft an undefined value'\r\n    } else if (t.constructor == String) {\r\n      e = doc.createTextNode(t)\r\n    } else {\r\n      for (let i = 0; i < t.length; i++) {\r\n        if (i === 0 && t[i].constructor == String) {\r\n          let snared = t[i].match(/^([a-z][a-z0-9]*)\\.([^\\s\\.]+)$/i)\r\n          if (snared) {\r\n            e = doc.createElementNS(namespace, snared[1])\r\n            e.setAttributeNS(null, 'class', snared[2])\r\n            continue\r\n          }\r\n          snared = t[i].match(/^([a-z][a-z0-9]*)$/i)\r\n          if (snared) {\r\n            e = doc.createElementNS(namespace, snared[1])  // but no class\r\n            continue\r\n          }\r\n\r\n          // Otherwise:\r\n          e = doc.createElementNS(namespace, 'span')\r\n          e.setAttribute(null, 'class', 'namelessFromLOL')\r\n        }\r\n\r\n        if (t[i] === undefined) {\r\n          throw 'Can\\'t graft an undefined value in a list!'\r\n        } else if (t[i].constructor == String || t[i].constructor == Array) {\r\n          this.graft(namespace, e, t[i], doc)\r\n        } else if (t[i].constructor == Number) {\r\n          this.graft(namespace, e, t[i].toString(), doc)\r\n        } else if (t[i].constructor == Object) {\r\n          // hash's properties => element's attributes\r\n          for (var k in t[i]) {\r\n            e.setAttributeNS(null, k, t[i][k])\r\n          }\r\n        } else {\r\n\r\n        }\r\n      }\r\n    }\r\n    if (parent && parent.appendChild) {\r\n      parent.appendChild(e)\r\n    } else {\r\n\r\n    }\r\n    return e // return the topmost created node\r\n  },\r\n  /**\r\n   * Provides an uniq id\r\n   * @overwrite\r\n   * @return {String}\r\n   *\r\n   */\r\n  provideId: function () {\r\n    let res = [], hex = '0123456789ABCDEF'\r\n    for (let i = 0; i < 36; i++) res[i] = Math.floor(Math.random() * 0x10)\r\n\r\n    res[14] = 4\r\n    res[19] = (res[19] & 0x3) | 0x8\r\n\r\n    for (let i = 0; i < 36; i++) {\r\n      res[i] = hex[res[i]]\r\n    }\r\n    res[8] = res[13] = res[18] = res[23] = '-'\r\n\r\n    return 'sid-' + res.join('')\r\n  },\r\n  /**\r\n   * Workaround for SAFARI/Webkit, because\r\n   * when trying to check SVGSVGElement of instanceof there is\r\n   * raising an error\r\n   *\r\n   */\r\n  SVGClassElementsAreAvailable: true,\r\n  checkClassType: function (classInst, classType) {\r\n    if (this.SVGClassElementsAreAvailable) {\r\n      return classInst instanceof classType\r\n    } else {\r\n      return classInst == classType\r\n    }\r\n  },\r\n  setMissingClasses: function () {\r\n    try {\r\n      SVGElement\r\n    } catch (e) {\r\n      this.SVGClassElementsAreAvailable = false\r\n      let SVGSVGElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg').toString()\r\n      let SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g').toString()\r\n      let SVGPathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path').toString()\r\n      let SVGTextElement = document.createElementNS('http://www.w3.org/2000/svg', 'text').toString()\r\n      //SVGMarkerElement \t= document.createElementNS('http://www.w3.org/2000/svg', 'marker').toString();\r\n      let SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect').toString()\r\n      let SVGImageElement = document.createElementNS('http://www.w3.org/2000/svg', 'image').toString()\r\n      let SVGCircleElement = document.createElementNS('http://www.w3.org/2000/svg', 'circle').toString()\r\n      let SVGEllipseElement = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse').toString()\r\n      let SVGLieElement = document.createElementNS('http://www.w3.org/2000/svg', 'line').toString()\r\n      let SVGPolylineElement = document.createElementNS('http://www.w3.org/2000/svg', 'polyline').toString()\r\n      let SVGPolygonElement = document.createElementNS('http://www.w3.org/2000/svg', 'polygon').toString()\r\n    }\r\n\r\n  },\r\n  availablePlugins: [],\r\n  _loadPlugins: function (plugins) {\r\n    this.availablePlugins.length = 0\r\n    let resultXml = plugins\r\n    // get plugins.xml content\r\n    // var resultXml = jQuery.parseXML(plugins); //jquery parser\r\n\r\n    // TODO: Describe how properties are handled.\r\n    // Get the globale Properties\r\n    let globalProperties = []\r\n    let preferences = $A(resultXml.getElementsByTagName('properties'))\r\n    preferences.each(function (p) {\r\n      let props = $A(p.childNodes)\r\n      props.each(function (prop) {\r\n        let property = new Hash()\r\n\r\n        // get all attributes from the node and set to global properties\r\n        let attributes = $A(prop.attributes)\r\n        attributes.each(function (attr) {\r\n          property.set(attr.nodeName, attr.nodeValue)\r\n        })\r\n        if (attributes.length > 0) {\r\n          globalProperties.push(property)\r\n        }\r\n      })\r\n    })\r\n\r\n    // TODO Why are we using XML if we don't respect structure anyway?\r\n    // for each plugin element in the configuration..\r\n    let plugin = resultXml.getElementsByTagName('plugin')\r\n    const me = this\r\n    $A(plugin).each(function (node) {\r\n      // get all element's attributes.\r\n      // TODO: What about: var pluginData = $H(node.attributes) !?\r\n      let pluginData = new Hash()\r\n      $A(node.attributes).each(function (attr) {\r\n        pluginData.set(attr.nodeName, attr.nodeValue)\r\n      })\r\n\r\n      // ensure there's a name attribute.\r\n      if (!pluginData.get('name')) {\r\n        ORYX_Log.error('A plugin is not providing a name. Ingnoring this plugin.')\r\n        return\r\n      }\r\n\r\n      // ensure there's a source attribute.\r\n      if (!pluginData.get('source')) {\r\n        ORYX_Log.error('Plugin with name \\'%0\\' doesn\\'t provide a source attribute.', pluginData.get('name'))\r\n        return\r\n      }\r\n\r\n      // Get all private Properties\r\n      let propertyNodes = node.getElementsByTagName('property')\r\n      let properties = []\r\n      $A(propertyNodes).each(function (prop) {\r\n        let property = new Hash()\r\n\r\n        // Get all Attributes from the Node\r\n        let attributes = $A(prop.attributes)\r\n        attributes.each(function (attr) {\r\n          property.set(attr.nodeName, attr.nodeValue)\r\n        })\r\n\r\n        if (attributes.length > 0) {\r\n          properties.push(property)\r\n        }\r\n      })\r\n\r\n      // Set all Global-Properties to the Properties\r\n      properties = properties.concat(globalProperties)\r\n\r\n      // Set Properties to Plugin-Data\r\n      pluginData.set('properties', properties)\r\n\r\n      // Get the RequieredNodes\r\n      let requireNodes = node.getElementsByTagName('requires')\r\n      let requires\r\n      $A(requireNodes).each(function (req) {\r\n        let namespace = $A(req.attributes).find(function (attr) {\r\n          return attr.name == 'namespace'\r\n        })\r\n        if (namespace && namespace.nodeValue) {\r\n          if (!requires) {\r\n            requires = { namespaces: [] }\r\n          }\r\n          requires.namespaces.push(namespace.nodeValue)\r\n        }\r\n      })\r\n\r\n      // Set Requires to the Plugin-Data, if there is one\r\n      if (requires) {\r\n        pluginData.set('requires', requires)\r\n      }\r\n\r\n      // Get the RequieredNodes\r\n      let notUsesInNodes = node.getElementsByTagName('notUsesIn')\r\n      let notUsesIn\r\n      $A(notUsesInNodes).each(function (not) {\r\n        let namespace = $A(not.attributes).find(function (attr) {\r\n          return attr.name == 'namespace'\r\n        })\r\n        if (namespace && namespace.nodeValue) {\r\n          if (!notUsesIn) {\r\n            notUsesIn = { namespaces: [] }\r\n          }\r\n\r\n          notUsesIn.namespaces.push(namespace.nodeValue)\r\n        }\r\n      })\r\n\r\n      // Set Requires to the Plugin-Data, if there is one\r\n      if (notUsesIn) {\r\n        pluginData.set('notUsesIn', notUsesIn)\r\n      }\r\n\r\n      let url = ORYX_CONFIG.PATH + ORYX_CONFIG.PLUGINS_FOLDER + pluginData.get('source')\r\n\r\n      ORYX_Log.debug('Requireing \\'%0\\'', url)\r\n\r\n      // Add the Script-Tag to the Site\r\n      //Kickstart.require(url);\r\n\r\n      // 加载成功log\r\n      // ORYX_Log.info(\"Plugin '%0' successfully loaded.\", pluginData.get('name'));\r\n\r\n      // Add the Plugin-Data to all available Plugins\r\n      me.availablePlugins.push(pluginData)\r\n    })\r\n    console.log(44, me.availablePlugins)\r\n  },\r\n  /**\r\n   * @namespace Collection of methods which can be used on a shape json object (ORYX.Core.AbstractShape#toJSON()).\r\n   * @example\r\n   * jQuery.extend(shapeAsJson, ORYX.Core.AbstractShape.JSONHelper);\r\n   */\r\n  JSONHelper: {\r\n    /**\r\n     * Iterates over each child shape.\r\n     * @param {Object} iterator Iterator function getting a child shape and his parent as arguments.\r\n     * @param {boolean} [deep=false] Iterate recursively (childShapes of childShapes)\r\n     * @param {boolean} [modify=false] If true, the result of the iterator function is taken as new shape, return false\r\n     *   to delete it. This enables modifying the object while iterating through the child shapes.\r\n     * @example\r\n     * // Increases the lowerRight x value of each direct child shape by one.\r\n     * myShapeAsJson.eachChild(function(shape, parentShape){\r\n     *     shape.bounds.lowerRight.x = shape.bounds.lowerRight.x + 1;\r\n     *     return shape;\r\n     * }, false, true);\r\n     */\r\n    eachChild: function (iterator, deep, modify) {\r\n      if (!this.childShapes) return\r\n\r\n      let newChildShapes = [] //needed if modify = true\r\n      this.childShapes.each(function (shape) {\r\n        if (!(shape.eachChild instanceof Function)) {\r\n          jQuery.extend(shape, this.JSONHelper)\r\n        }\r\n        let res = iterator(shape, this)\r\n        if (res) newChildShapes.push(res) //if false is returned, and modify = true, current shape is deleted.\r\n\r\n        if (deep) shape.eachChild(iterator, deep, modify)\r\n      }.bind(this))\r\n      if (modify) this.childShapes = newChildShapes\r\n    },\r\n    getShape: function () {\r\n      return null\r\n    },\r\n    getChildShapes: function (deep) {\r\n      let allShapes = this.childShapes\r\n      if (deep) {\r\n        this.eachChild(function (shape) {\r\n          if (!(shape.getChildShapes instanceof Function)) {\r\n            jQuery.extend(shape, this.JSONHelper)\r\n          }\r\n          allShapes = allShapes.concat(shape.getChildShapes(deep))\r\n        }, true)\r\n      }\r\n      return allShapes\r\n    },\r\n    /**\r\n     * @return {String} Serialized JSON object\r\n     */\r\n    serialize: function () {\r\n      return JSON.stringify(this)\r\n    }\r\n  },\r\n  ifIE10: function () {\r\n    // IE10\r\n    let userAgent = navigator.userAgent\r\n    let a = navigator.appVersion.indexOf('MSIE 10') !== -1 ||\r\n      (userAgent.indexOf('Trident') !== -1 && userAgent.indexOf('rv:11') !== -1)\r\n    return a\r\n  },\r\n  IE10AndBelow: function () {\r\n    if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n      let ua = navigator.userAgent\r\n      if (ua.indexOf('MSIE') >= 0) {\r\n        // IE 10 and below\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  },\r\n  IEZoomBelow10: function (z) {\r\n    if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n      let ua = navigator.userAgent\r\n      if (ua.indexOf('MSIE') >= 0) {\r\n        // IE 10 and below\r\n        let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n        if (zoom !== 100) {\r\n          z = zoom / 100\r\n          return z\r\n        }\r\n      }\r\n    }\r\n    return z\r\n  },\r\n  getTranslation: function (jsonObject, name) {\r\n    // let lang = ORYX.I18N.Language.toLowerCase()\r\n    let lang = 'en_us'\r\n    let result = jsonObject[name + '_' + lang]\r\n    if (result) {\r\n      return result\r\n    }\r\n    result = jsonObject[name + '_' + lang.substr(0, 2)]\r\n    if (result) {\r\n      return result\r\n    }\r\n    return jsonObject[name]\r\n  }\r\n}\r\n\r\nexport default Utils\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACOSURBVDiNxZOxDQMxDAPJwDMlTQb4ESyt4TGCX8Nqvs8CqbwU0zidAzhwgCegRuCxICRKwoouSzSABADufpe0A7hOco1kqbW+EgB0+BERxwzt7ltnbpCEnLMk4Zf5MMsdnB+QRkszGx5HRHAqYGT8pvM7+FtAc/dtFureBvQSSRZJu5k9JzMayQIAXH3nN1THWgoy/KC8AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADGSURBVDiNjZNBEoMgDAAXuPZVetIHgP7G3zDwgPbUvqrXDL2ow1iD5gaT3SQTMKUUtJjneQGIMS5ajr2AO6DbRLcFK9CLyCgiI9Brkj9BBQ8552/O+SsigyaxLTiEUEIIpSWxGnyspEnsHbglMdM0LUAnIuPWtiYASCkZ7/3DOfcEPuoa74YppagjbN2klMx2t1Z/Ae8Y42Jhf2lv59zLe//Qqh1hqLZwJTmD9xHqOBtHg08FRwmABquCWrIeT+GmoJI0v/MP+SK6UFLKcIEAAAAASUVORK5CYII=\"","import ORYX_Log from './Log'\r\nimport ORYX_Config from './CONFIG'\r\nimport ORYX_Editor from './Editor'\r\nimport ORYX_Utils from './Utils'\r\nimport Plugins_s from './Plugins'\r\nimport ORYX_Edge from './core/Edge'\r\nimport ORYX_Node from './core/Node'\r\nimport ORYX_Shape from './core/Shape'\r\nimport ORYX_Canvas from './core/Canvas'\r\nimport ORYX_StencilSet from './core/StencilSet'\r\n\r\nimport ORYX_Command from './core/Command'\r\nimport ORYX_Controls_Docker from './core/Controls/Docker'\r\n\r\nconst Plugins = Plugins_s\r\n/**\r\n * The Editor class.\r\n * @class ORYX.Editor\r\n * @extends Clazz\r\n * @param {Object} config An editor object, passed to {@link ORYX.Editor#loadSerialized}\r\n * @param {String} config.id Any ID that can be used inside the editor. If fullscreen=false, any HTML node with this id\r\n *   must be present to render the editor to this node.\r\n * @param {boolean} [config.fullscreen=true] Render editor in fullscreen mode or not.\r\n * @param {String} config.stencilset.url Stencil set URL.\r\n * @param {String} [config.stencil.id] Stencil type used for creating the canvas.\r\n * @param {Object} config.properties Any properties applied to the canvas.\r\n */\r\nexport default class Editor {\r\n  /** @lends ORYX.Editor.prototype */\r\n  constructor (config) {\r\n    // Defines the global dom event listener\r\n    this.DOMEventListeners = new Hash()\r\n    // Defines the selection\r\n    this.selection = []\r\n    // Defines the current zoom level\r\n    this.zoomLevel = 1.0\r\n    // initialization.\r\n    this._eventsQueue = []\r\n    this.loadedPlugins = []\r\n    this.pluginsData = []\r\n\r\n    // meta data about the model for the signavio warehouse\r\n    // directory, new, name, description, revision, model (the model data)\r\n\r\n    let model = config\r\n    this.id = model.modelId\r\n\r\n    if (config.model) {\r\n      model = config.model\r\n    }\r\n\r\n    if (!this.id) {\r\n      this.id = model.id\r\n      if (!this.id) {\r\n        this.id = ORYX_Utils.provideId()\r\n      }\r\n    }\r\n\r\n    // Defines if the editor should be fullscreen or not\r\n    this.fullscreen = config.fullscreen !== false\r\n\r\n    // Initialize the eventlistener\r\n    this._initEventListener()\r\n    // CREATES the canvas\r\n    this._createCanvas(model.stencil ? model.stencil.id : null, model.properties)\r\n    // 生成整个 EXT.VIEWPORT\r\n    this._generateGUI()\r\n\r\n    // Initializing of a callback to check loading ends\r\n    let loadPluginFinished = false\r\n    let loadContentFinished = false\r\n    let initFinished = function () {\r\n      if (!loadPluginFinished || !loadContentFinished) {\r\n        return\r\n      }\r\n      this._finishedLoading()\r\n    }.bind(this)\r\n\r\n    // LOAD the plugins\r\n    this.loadPlugins()\r\n    loadPluginFinished = true\r\n    initFinished()\r\n\r\n    // LOAD the content of the current editor instance\r\n    window.setTimeout(function () {\r\n      this.loadSerialized(model, true) // Request the meta data as well\r\n      this.getCanvas().update()\r\n      loadContentFinished = true\r\n      initFinished()\r\n      this.handleEvents({ type: ORYX_Config.EVENT_EDITOR_INIT_COMPLETED })\r\n    }.bind(this), 200)\r\n\r\n    this.Cookie = {\r\n      callbacks: [],\r\n      onChange: function (callback, interval) {\r\n        this.callbacks.push(callback)\r\n        this.start(interval)\r\n      },\r\n      start: function (interval) {\r\n        if (this.pe) {\r\n          return\r\n        }\r\n        let currentString = document.cookie\r\n        this.pe = new PeriodicalExecuter(function () {\r\n          if (currentString != document.cookie) {\r\n            currentString = document.cookie\r\n            this.callbacks.each(function (callback) {\r\n              callback(this.getParams())\r\n            }.bind(this))\r\n          }\r\n\r\n        }.bind(this), (interval || 10000) / 1000)\r\n      },\r\n      stop: function () {\r\n        if (this.pe) {\r\n          this.pe.stop()\r\n          this.pe = null\r\n        }\r\n      },\r\n      getParams: function () {\r\n        let res = {}\r\n        let p = document.cookie\r\n        p.split('; ').each(function (param) {\r\n          res[param.split('=')[0]] = param.split('=')[1]\r\n        })\r\n        return res\r\n      },\r\n      toString: function () {\r\n        return document.cookie\r\n      }\r\n    }\r\n  }\r\n\r\n  _finishedLoading () {\r\n    // Raise Loaded Event\r\n    this.handleEvents({ type: ORYX_Config.EVENT_LOADED })\r\n  }\r\n\r\n  _initEventListener () {\r\n    // Register on Events\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_KEYDOWN, this.catchKeyDownEvents.bind(this), false)\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_KEYUP, this.catchKeyUpEvents.bind(this), false)\r\n\r\n    // Enable Key up and down Event\r\n    this._keydownEnabled = true\r\n    this._keyupEnabled = true\r\n\r\n    this.DOMEventListeners.set(ORYX_Config.EVENT_MOUSEDOWN, [])\r\n    this.DOMEventListeners.set(ORYX_Config.EVENT_MOUSEUP, [])\r\n    this.DOMEventListeners.set(ORYX_Config.EVENT_MOUSEOVER, [])\r\n    this.DOMEventListeners.set(ORYX_Config.EVENT_MOUSEOUT, [])\r\n    this.DOMEventListeners.set(ORYX_Config.EVENT_SELECTION_CHANGED, [])\r\n    this.DOMEventListeners.set(ORYX_Config.EVENT_MOUSEMOVE, [])\r\n  }\r\n\r\n  /**\r\n   * Generate the whole viewport of the\r\n   * Editor and initialized the Ext-Framework\r\n   */\r\n  _generateGUI () {\r\n    // Defines the layout height if it's NOT fullscreen\r\n    let layoutHeight = ORYX_Config.WINDOW_HEIGHT\r\n    let canvasParent = this.getCanvas().rootNode.parentNode\r\n\r\n    jQuery('#canvasSection').append(canvasParent)\r\n    if (canvasParent.parentNode) {\r\n      // Set the editor to the center, and refresh the size\r\n      canvasParent.parentNode.setAttributeNS(null, 'align', 'center')\r\n      canvasParent.setAttributeNS(null, 'align', 'left')\r\n      this.getCanvas().setSize({\r\n        width: ORYX_Config.CustomConfigs.CANVAS_WIDTH,\r\n        height: ORYX_Config.CustomConfigs.CANVAS_HEIGHT\r\n      })\r\n    }\r\n  }\r\n\r\n  getAvailablePlugins () {\r\n    let curAvailablePlugins = ORYX_Utils.availablePlugins.clone()\r\n    curAvailablePlugins.each(function (plugin) {\r\n      if (this.loadedPlugins.find(function (loadedPlugin) {\r\n        return loadedPlugin.type == this.name\r\n      }.bind(plugin))) {\r\n        plugin.engaged = true\r\n      } else {\r\n        plugin.engaged = false\r\n      }\r\n    }.bind(this))\r\n    return curAvailablePlugins\r\n  }\r\n\r\n  loadScript (url, callback) {\r\n    let script = document.createElement('script')\r\n    script.type = 'text/javascript'\r\n    if (script.readyState) {  //IE\r\n      script.onreadystatechange = function () {\r\n        if (script.readyState == 'loaded' || script.readyState == 'complete') {\r\n          script.onreadystatechange = null\r\n          callback()\r\n        }\r\n      }\r\n    } else {  //Others\r\n      script.onload = function () {\r\n        callback()\r\n      }\r\n    }\r\n    script.src = url\r\n    document.getElementsByTagName('head')[0].appendChild(script)\r\n  }\r\n\r\n  /**\r\n   * activate Plugin\r\n   *\r\n   * @param {String} name\r\n   * @param {Function} callback\r\n   *    callback(sucess, [errorCode])\r\n   *      errorCodes: NOTUSEINSTENCILSET, REQUIRESTENCILSET, NOTFOUND, YETACTIVATED\r\n   */\r\n  activatePluginByName (name, callback, loadTry) {\r\n    let match = this.getAvailablePlugins().find(function (value) {\r\n      return value.name == name\r\n    })\r\n    if (match && (!match.engaged || (match.engaged === 'false'))) {\r\n      let loadedStencilSetsNamespaces = this.getStencilSets().keys()\r\n      let facade = this._getPluginFacade()\r\n      let newPlugin\r\n      const me = this\r\n      ORYX_Log.debug('Initializing plugin \\'%0\\'', match.name)\r\n\r\n      if (!match.requires || !match.requires.namespaces || match.requires.namespaces.any(function (req) {\r\n        return loadedStencilSetsNamespaces.indexOf(req) >= 0\r\n      })) {\r\n        if (!match.notUsesIn || !match.notUsesIn.namespaces || !match.notUsesIn.namespaces.any(function (req) {\r\n          return loadedStencilSetsNamespaces.indexOf(req) >= 0\r\n        })) {\r\n\r\n          try {\r\n            let className = eval(match.name)\r\n            let newPlugin = new className(facade, match)\r\n            newPlugin.type = match.name\r\n\r\n            // If there is an GUI-Plugin, they get all Plugins-Offer-Meta-Data\r\n            if (newPlugin.registryChanged)\r\n              newPlugin.registryChanged(me.pluginsData)\r\n\r\n            // If there have an onSelection-Method it will pushed to the Editor Event-Handler\r\n            if (newPlugin.onSelectionChanged)\r\n              me.registerOnEvent(ORYX_Config.EVENT_SELECTION_CHANGED, newPlugin.onSelectionChanged.bind(newPlugin))\r\n            this.loadedPlugins.push(newPlugin)\r\n            this.loadedPlugins.each(function (loaded) {\r\n              if (loaded.registryChanged)\r\n                loaded.registryChanged(this.pluginsData)\r\n            }.bind(me))\r\n            callback(true)\r\n\r\n          } catch (e) {\r\n            ORYX_Log.warn('Plugin %0 is not available', match.name)\r\n            if (!!loadTry) {\r\n              callback(false, 'INITFAILED')\r\n              return\r\n            }\r\n            this.loadScript('plugins/scripts/' + match.source, this.activatePluginByName.bind(this, match.name, callback, true))\r\n          }\r\n        } else {\r\n          callback(false, 'NOTUSEINSTENCILSET')\r\n          ORYX_Log.info('Plugin need a stencilset which is not loaded\\'', match.name)\r\n        }\r\n\r\n      } else {\r\n        callback(false, 'REQUIRESTENCILSET')\r\n        ORYX_Log.info('Plugin need a stencilset which is not loaded\\'', match.name)\r\n      }\r\n\r\n    } else {\r\n      callback(false, match ? 'NOTFOUND' : 'YETACTIVATED')\r\n      //TODO error handling\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Laden der Plugins\r\n   */\r\n  loadPlugins () {\r\n    const me = this\r\n    let newPlugins = []\r\n    let loadedStencilSetsNamespaces = this.getStencilSets().keys()\r\n\r\n    // Available Plugins will be initalize\r\n    let facade = this._getPluginFacade()\r\n\r\n    Plugins.availablePlugins.each(function (value) {\r\n      ORYX_Log.debug('Initializing plugin \\'%0\\'', value.get('name'))\r\n      try {\r\n        let className = eval(value.get('name'))\r\n        // let className = value.get('name')\r\n        if (className) {\r\n          let plugin = new className(facade, value)\r\n          plugin.type = value.get('name')\r\n          newPlugins.push(plugin)\r\n          plugin.engaged = true\r\n        }\r\n      } catch (e) {\r\n        ORYX_Log.warn('Plugin %0 is not available %1', value.get('name'), e)\r\n      }\r\n\r\n    })\r\n    newPlugins.each(function (value) {\r\n      // If there is an GUI-Plugin, they get all Plugins-Offer-Meta-Data\r\n      if (value.registryChanged)\r\n        value.registryChanged(me.pluginsData)\r\n\r\n      // If there have an onSelection-Method it will pushed to the Editor Event-Handler\r\n      if (value.onSelectionChanged)\r\n        me.registerOnEvent(ORYX_Config.EVENT_SELECTION_CHANGED, value.onSelectionChanged.bind(value))\r\n    })\r\n\r\n    this.loadedPlugins = newPlugins\r\n    this.registerPluginsOnKeyEvents()\r\n    this.setSelection()\r\n  }\r\n\r\n  /**\r\n   * Creates the Canvas\r\n   * @param {String} [stencilType] The stencil type used for creating the canvas.\r\n   * If not given, a stencil with myBeRoot = true from current stencil set is taken.\r\n   *\r\n   * @param {Object} [canvasConfig] Any canvas properties (like language).\r\n   */\r\n  _createCanvas (stencilType, canvasConfig) {\r\n    if (stencilType) {\r\n      // Add namespace to stencilType\r\n      if (stencilType.search(/^http/) === -1) {\r\n        stencilType = this.getStencilSets().values()[0].namespace() + stencilType\r\n      }\r\n    } else {\r\n      // Get any root stencil type\r\n      stencilType = this.getStencilSets().values()[0].findRootStencilName()\r\n    }\r\n    // get the stencil associated with the type\r\n    let canvasStencil = ORYX_StencilSet.stencil(stencilType)\r\n\r\n    if (!canvasStencil) {\r\n      ORYX_Log.fatal('初始化失败, 因为类型为 %0 的模具不是加载的模具集的一部分。', stencilType)\r\n    }\r\n\r\n    // create all dom\r\n    // TODO fix border, so the visible canvas has a double border and some spacing to the scrollbars\r\n    let div = ORYX_Utils.graft('http://www.w3.org/1999/xhtml', null, ['div'])\r\n    // set class for custom styling\r\n    div.addClassName('ORYX_Editor')\r\n\r\n    // create the canvas\r\n    this._canvas = new ORYX_Canvas({\r\n      width: ORYX_Config.CustomConfigs.CANVAS_WIDTH,\r\n      height: ORYX_Config.CustomConfigs.CANVAS_HEIGHT,\r\n      'eventHandlerCallback': this.handleEvents.bind(this),\r\n      id: this.id,\r\n      parentNode: div\r\n    }, canvasStencil, this._getPluginFacade())\r\n\r\n    if (canvasConfig) {\r\n      // Migrate canvasConfig to an RDF-like structure\r\n      //FIXME this isn't nice at all because we don't want rdf any longer\r\n      let properties = []\r\n      for (let field in canvasConfig) {\r\n        properties.push({\r\n          prefix: 'oryx',\r\n          name: field,\r\n          value: canvasConfig[field]\r\n        })\r\n      }\r\n      this._canvas.deserialize(properties)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a per-editor singleton plugin facade.\r\n   * To be used in plugin initialization.\r\n   */\r\n  _getPluginFacade () {\r\n    // if there is no pluginfacade already created:\r\n    if (!(this._pluginFacade))\r\n\r\n    // create it.\r\n      this._pluginFacade = {\r\n        activatePluginByName: this.activatePluginByName.bind(this),\r\n        //deactivatePluginByName:\t\tthis.deactivatePluginByName.bind(this),\r\n        getAvailablePlugins: this.getAvailablePlugins.bind(this),\r\n        offer: this.offer.bind(this),\r\n        getStencilSets: this.getStencilSets.bind(this),\r\n        getStencilSetExtensionDefinition: function () {\r\n          return Object.clone(this.ss_extensions_def || {})\r\n        }.bind(this),\r\n        getRules: this.getRules.bind(this),\r\n        loadStencilSet: this.loadStencilSet.bind(this),\r\n        createShape: this.createShape.bind(this),\r\n        deleteShape: this.deleteShape.bind(this),\r\n        getSelection: this.getSelection.bind(this),\r\n        setSelection: this.setSelection.bind(this),\r\n        updateSelection: this.updateSelection.bind(this),\r\n        getCanvas: this.getCanvas.bind(this),\r\n\r\n        importJSON: this.importJSON.bind(this),\r\n        getJSON: this.getJSON.bind(this),\r\n        getSerializedJSON: this.getSerializedJSON.bind(this),\r\n\r\n        executeCommands: this.executeCommands.bind(this),\r\n        isExecutingCommands: this.isExecutingCommands.bind(this),\r\n\r\n        registerOnEvent: this.registerOnEvent.bind(this),\r\n        unregisterOnEvent: this.unregisterOnEvent.bind(this),\r\n        raiseEvent: this.handleEvents.bind(this),\r\n        enableEvent: this.enableEvent.bind(this),\r\n        disableEvent: this.disableEvent.bind(this),\r\n\r\n        eventCoordinates: this.eventCoordinates.bind(this),\r\n        eventCoordinatesXY: this.eventCoordinatesXY.bind(this),\r\n\r\n        getModelMetaData: this.getModelMetaData.bind(this)\r\n      }\r\n\r\n    // return it.\r\n    return this._pluginFacade\r\n  }\r\n\r\n  isExecutingCommands () {\r\n    return !!this.commandExecuting\r\n  }\r\n\r\n  /**\r\n   * Implementes the command pattern\r\n   * (The real usage of the command pattern\r\n   * is implemented and shown in the Plugins/undo.js)\r\n   *\r\n   * @param <Oryx.Core.Command>[] Array of commands\r\n   */\r\n  executeCommands (commands) {\r\n    if (!this.commandStack) {\r\n      this.commandStack = []\r\n    }\r\n    if (!this.commandStackExecuted) {\r\n      this.commandStackExecuted = []\r\n    }\r\n\r\n\r\n    this.commandStack = [].concat(this.commandStack)\r\n      .concat(commands)\r\n\r\n    // Check if already executes\r\n    if (this.commandExecuting) {\r\n      return\r\n    }\r\n\r\n    // Start execution\r\n    this.commandExecuting = true\r\n\r\n    // Iterate over all commands\r\n    while (this.commandStack.length > 0) {\r\n      let command = this.commandStack.shift()\r\n      // and execute it\r\n      command.execute()\r\n      this.commandStackExecuted.push(command)\r\n    }\r\n\r\n    // Raise event for executing commands\r\n    this.handleEvents({\r\n      type: ORYX_Config.EVENT_EXECUTE_COMMANDS,\r\n      commands: this.commandStackExecuted\r\n    })\r\n\r\n    // Remove temporary vars\r\n    delete this.commandStack\r\n    delete this.commandStackExecuted\r\n    delete this.commandExecuting\r\n\r\n\r\n    this.updateSelection()\r\n  }\r\n\r\n  /**\r\n   * Returns JSON of underlying canvas (calls ORYX.Canvas#toJSON()).\r\n   * @return {Object} Returns JSON representation as JSON object.\r\n   */\r\n  getJSON () {\r\n    let canvasJSON = this.getCanvas().toJSON()\r\n    canvasJSON.ssextensions = this.getStencilSets().values()[0].extensions().keys().findAll(function (sse) {\r\n      return !sse.endsWith('/meta#')\r\n    })\r\n    return canvasJSON\r\n  }\r\n\r\n  /**\r\n   * Serializes a call to toJSON().\r\n   * @return {String} Returns JSON representation as string.\r\n   */\r\n  getSerializedJSON () {\r\n    return JSON.stringify(this.getJSON())\r\n  }\r\n\r\n  /**\r\n   * Imports shapes in JSON as expected by {@link ORYX.Editor#loadSerialized}\r\n   * @param {Object|String} jsonObject The (serialized) json object to be imported\r\n   * @param {boolean } [noSelectionAfterImport=false] Set to true if no shapes should be selected after import\r\n   * @throws {SyntaxError} If the serialized json object contains syntax errors\r\n   */\r\n  importJSON (jsonObject, noSelectionAfterImport) {\r\n    try {\r\n      jsonObject = this.renewResourceIds(jsonObject)\r\n    } catch (error) {\r\n      throw error\r\n    }\r\n    //check, if the imported json model can be loaded in this editor\r\n    // (stencil set has to fit)\r\n    if (jsonObject.stencilset.namespace && jsonObject.stencilset.namespace !== this.getCanvas().getStencil().stencilSet().namespace()) {\r\n      let wrongSS = 'The stencil set of the imported file ({0}) does not match to the loaded stencil set ({1}).'\r\n      alert(String.format(wrongSS, jsonObject.stencilset.namespace, this.getCanvas().getStencil().stencilSet().namespace()))\r\n      // alert(String.format(ORYX.I18N.JSONImport.wrongSS, jsonObject.stencilset.namespace, this.getCanvas().getStencil().stencilSet().namespace()))\r\n      return null\r\n    } else {\r\n      class commandClass extends ORYX_Command {\r\n        constructor (jsonObject, loadSerializedCB, noSelectionAfterImport, facade) {\r\n          super()\r\n          this.jsonObject = jsonObject\r\n          this.noSelection = noSelectionAfterImport\r\n          this.facade = facade\r\n          this.shapes\r\n          this.connections = []\r\n          this.parents = new Hash()\r\n          this.selection = this.facade.getSelection()\r\n          this.loadSerialized = loadSerializedCB\r\n        }\r\n        execute () {\r\n          if (!this.shapes) {\r\n            // Import the shapes out of the serialization\r\n            this.shapes = this.loadSerialized(this.jsonObject)\r\n            //store all connections\r\n            this.shapes.each(function (shape) {\r\n              if (shape.getDockers) {\r\n                let dockers = shape.getDockers()\r\n                if (dockers) {\r\n                  if (dockers.length > 0) {\r\n                    this.connections.push([dockers.first(), dockers.first().getDockedShape(), dockers.first().referencePoint])\r\n                  }\r\n                  if (dockers.length > 1) {\r\n                    this.connections.push([dockers.last(), dockers.last().getDockedShape(), dockers.last().referencePoint])\r\n                  }\r\n                }\r\n              }\r\n\r\n              //store parents\r\n              this.parents[shape.id] = shape.parent\r\n            }.bind(this))\r\n          } else {\r\n            this.shapes.each(function (shape) {\r\n              this.parents[shape.id].add(shape)\r\n            }.bind(this))\r\n\r\n            this.connections.each(function (con) {\r\n              con[0].setDockedShape(con[1])\r\n              con[0].setReferencePoint(con[2])\r\n              con[0].update()\r\n            })\r\n          }\r\n\r\n          //this.parents.values().uniq().invoke(\"update\");\r\n          this.facade.getCanvas().update()\r\n\r\n          if (!this.noSelection)\r\n            this.facade.setSelection(this.shapes)\r\n          else\r\n            this.facade.updateSelection()\r\n\r\n          // call updateSize again, because during loadSerialized the edges' bounds\r\n          // are not yet initialized properly\r\n          this.facade.getCanvas().updateSize()\r\n\r\n        }\r\n        rollback () {\r\n          let selection = this.facade.getSelection()\r\n          this.shapes.each(function (shape) {\r\n            selection = selection.without(shape)\r\n            this.facade.deleteShape(shape)\r\n          }.bind(this))\r\n\r\n          /*this.parents.values().uniq().each(function(parent) {\r\n           if(!this.shapes.member(parent))\r\n           parent.update();\r\n           }.bind(this));*/\r\n\r\n          this.facade.getCanvas().update()\r\n          this.facade.setSelection(selection)\r\n        }\r\n      }\r\n      const command = new commandClass(jsonObject,\r\n        this.loadSerialized.bind(this),\r\n        noSelectionAfterImport,\r\n        this._getPluginFacade())\r\n\r\n      this.executeCommands([command])\r\n      return command.shapes.clone()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This method renew all resource Ids and according references.\r\n   * Warning: The implementation performs a substitution on the serialized object for\r\n   * easier implementation. This results in a low performance which is acceptable if this\r\n   * is only used when importing models.\r\n   * @param {Object|String} jsonObject\r\n   * @throws {SyntaxError} If the serialized json object contains syntax errors.\r\n   * @return {Object} The jsonObject with renewed ids.\r\n   * @private\r\n   */\r\n  renewResourceIds (jsonObject) {\r\n    let serJsonObject\r\n    // For renewing resource ids, a serialized and object version is needed\r\n    if (Object.prototype.toString.call(jsonObject) === 'String') {\r\n      try {\r\n        serJsonObject = jsonObject\r\n        jsonObject = JSON.parse(jsonObject)\r\n      } catch (error) {\r\n        throw new SyntaxError(error.message)\r\n      }\r\n    } else {\r\n      serJsonObject = JSON.stringify(jsonObject)\r\n    }\r\n\r\n    // collect all resourceIds recursively\r\n    let collectResourceIds = function (shapes) {\r\n      if (!shapes) return []\r\n\r\n      return shapes.map(function (shape) {\r\n        return collectResourceIds(shape.childShapes).concat(shape.resourceId)\r\n      }).flatten()\r\n    }\r\n    let resourceIds = collectResourceIds(jsonObject.childShapes)\r\n\r\n    // Replace each resource id by a new one\r\n    resourceIds.each(function (oldResourceId) {\r\n      let newResourceId = ORYX_Utils.provideId()\r\n      serJsonObject = serJsonObject.replace(new RegExp(oldResourceId, 'g'), newResourceId)\r\n    })\r\n\r\n    return JSON.parse(serJsonObject)\r\n  }\r\n\r\n  /**\r\n   * Loads serialized model to the oryx.\r\n   * @example\r\n   * editor.loadSerialized({\r\n   *    resourceId: \"mymodel1\",\r\n   *    childShapes: [\r\n   *       {\r\n   *          stencil:{ id:\"Subprocess\" },\r\n   *          outgoing:[{resourceId: 'aShape'}],\r\n   *          target: {resourceId: 'aShape'},\r\n   *          bounds:{ lowerRight:{ y:510, x:633 }, upperLeft:{ y:146, x:210 } },\r\n   *          resourceId: \"myshape1\",\r\n   *          childShapes:[],\r\n   *          properties:{},\r\n   *       }\r\n   *    ],\r\n   *    properties:{\r\n   *       language: \"English\"\r\n   *    },\r\n   *    stencilset:{\r\n   *       url:\"http://localhost:8080/oryx/stencilsets/bpmn1.1/bpmn1.1.json\"\r\n   *    },\r\n   *    stencil:{\r\n   *       id:\"BPMNDiagram\"\r\n   *    }\r\n   * });\r\n   * @param {Object} model Description of the model to load.\r\n   * @param {Array} [model.ssextensions] List of stenctil set extensions.\r\n   * @param {String} model.stencilset.url\r\n   * @param {String} model.stencil.id\r\n   * @param {Array} model.childShapes\r\n   * @param {Array} [model.properties]\r\n   * @param {String} model.resourceId\r\n   * @return {ORYX.Core.Shape[]} List of created shapes\r\n   * @methodOf ORYX.Editor.prototype\r\n   */\r\n  loadSerialized (model, requestMeta) {\r\n    let canvas = this.getCanvas()\r\n    // Bugfix (cf. http://code.google.com/p/oryx-editor/issues/detail?id=240)\r\n    // Deserialize the canvas' stencil set extensions properties first!\r\n    this.loadSSExtensions(model.ssextensions)\r\n\r\n    // Load Meta Data Extension if available\r\n    // #Signavio\r\n    if (requestMeta === true) {\r\n      let metaDataExtension = this.getExtensionForMetaData()\r\n      if (metaDataExtension) {\r\n        this.loadSSExtension(metaDataExtension)\r\n      }\r\n    }\r\n    let shapes = this.getCanvas().addShapeObjects(model.childShapes, this.handleEvents.bind(this))\r\n\r\n    if (model.properties) {\r\n      for (let key in model.properties) {\r\n        let value = model.properties[key]\r\n        let prop = this.getCanvas().getStencil().property('oryx-' + key)\r\n        if (!(typeof value === 'string') && (!prop || !prop.isList())) {\r\n          value = JSON.stringify(value)\r\n        }\r\n        this.getCanvas().setProperty('oryx-' + key, value)\r\n      }\r\n    }\r\n\r\n    this.getCanvas().updateSize()\r\n\r\n    // Force to update the selection\r\n    this.selection = [null]\r\n    this.setSelection([])\r\n\r\n    return shapes\r\n  }\r\n\r\n  /**\r\n   * Return the namespace of the extension which\r\n   * provided all the self defined meta data\r\n   * @return {String} Returns null if no extension is defined, otherwise the namespace\r\n   *\r\n   */\r\n  getExtensionForMetaData () {\r\n    if (!this.ss_extensions_def || !(this.ss_extensions_def.extensions instanceof Array)) {\r\n      return null\r\n    }\r\n\r\n    let stencilsets = this.getStencilSets()\r\n    let extension = this.ss_extensions_def.extensions.find(function (ex) {\r\n      return !!stencilsets[ex['extends']] && ex.namespace.endsWith('/meta#')\r\n    })\r\n\r\n    return extension ? extension.namespace || null : null\r\n  }\r\n\r\n  /**\r\n   * Calls ORYX.Editor.prototype.ss_extension_namespace for each element\r\n   * @param {Array} ss_extension_namespaces An array of stencil set extension namespaces.\r\n   */\r\n  loadSSExtensions (ss_extension_namespaces) {\r\n    if (!ss_extension_namespaces) return\r\n\r\n    ss_extension_namespaces.each(function (ss_extension_namespace) {\r\n      this.loadSSExtension(ss_extension_namespace)\r\n    }.bind(this))\r\n  }\r\n\r\n  /**\r\n   * Loads a stencil set extension.\r\n   * The stencil set extensions definiton file must already\r\n   * be loaded when the editor is initialized.\r\n   */\r\n  loadSSExtension (ss_extension_namespace) {\r\n    if (this.ss_extensions_def) {\r\n      let extension = this.ss_extensions_def.extensions.find(function (ex) {\r\n        return (ex.namespace == ss_extension_namespace)\r\n      })\r\n      if (!extension) {\r\n        return\r\n      }\r\n\r\n      let stencilset = this.getStencilSets()[extension['extends']]\r\n      if (!stencilset) {\r\n        return\r\n      }\r\n\r\n      // Check if absolute or relative url\r\n      if ((extension['definition'] || '').startsWith('/')) {\r\n        stencilset.addExtension(extension['definition'])\r\n      } else {\r\n        stencilset.addExtension(ORYX_Config.SS_EXTENSIONS_FOLDER + extension['definition'])\r\n      }\r\n\r\n      //stencilset.addExtension(\"/oryx/build/stencilsets/extensions/\" + extension[\"definition\"])\r\n      this.getRules().initializeRules(stencilset)\r\n\r\n      this._getPluginFacade().raiseEvent({\r\n        type: ORYX_Config.EVENT_STENCIL_SET_LOADED\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  disableEvent (eventType) {\r\n    if (eventType == ORYX_Config.EVENT_KEYDOWN) {\r\n      this._keydownEnabled = false\r\n    }\r\n    if (eventType == ORYX_Config.EVENT_KEYUP) {\r\n      this._keyupEnabled = false\r\n    }\r\n    if (this.DOMEventListeners.keys().member(eventType)) {\r\n      let value = this.DOMEventListeners.unset(eventType)\r\n      this.DOMEventListeners.set('disable_' + eventType, value)\r\n    }\r\n  }\r\n\r\n  enableEvent (eventType) {\r\n    if (eventType == ORYX_Config.EVENT_KEYDOWN) {\r\n      this._keydownEnabled = true\r\n    }\r\n\r\n    if (eventType == ORYX_Config.EVENT_KEYUP) {\r\n      this._keyupEnabled = true\r\n    }\r\n\r\n    if (this.DOMEventListeners.keys().member('disable_' + eventType)) {\r\n      let value = this.DOMEventListeners.unset('disable_' + eventType)\r\n      this.DOMEventListeners.set(eventType, value)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Methods for the PluginFacade\r\n   */\r\n  registerOnEvent (eventType, callback) {\r\n    if (!(this.DOMEventListeners.keys().member(eventType))) {\r\n      this.DOMEventListeners.set(eventType, [])\r\n    }\r\n    this.DOMEventListeners.get(eventType).push(callback)\r\n  }\r\n\r\n  unregisterOnEvent (eventType, callback) {\r\n    if (this.DOMEventListeners.keys().member(eventType)) {\r\n      this.DOMEventListeners.set(eventType, this.DOMEventListeners.get(eventType).without(callback))\r\n    } else {\r\n      // Event is not supported\r\n      // TODO: Error Handling\r\n    }\r\n  }\r\n\r\n  getSelection () {\r\n    return this.selection || []\r\n  }\r\n\r\n  getStencilSets () {\r\n    return ORYX_StencilSet.stencilSets(this.id)\r\n  }\r\n\r\n  getRules () {\r\n    return ORYX_StencilSet.rules(this.id)\r\n  }\r\n\r\n  loadStencilSet (source) {\r\n    try {\r\n      ORYX_StencilSet.loadStencilSet(source, this.modelMetaData, this.id)\r\n      this.handleEvents({ type: ORYX_Config.EVENT_STENCIL_SET_LOADED })\r\n    } catch (e) {\r\n      ORYX_Log.warn('Requesting stencil set file failed. (' + e + ')')\r\n    }\r\n  }\r\n\r\n  offer (pluginData) {\r\n    if (!this.pluginsData.member(pluginData)) {\r\n      this.pluginsData.push(pluginData)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * It creates an new event or adds the callback, if already existing,\r\n   * for the key combination that the plugin passes in keyCodes attribute\r\n   * of the offer method.\r\n   *\r\n   * The new key down event fits the schema:\r\n   *    key.event[.metactrl][.alt][.shift].'thekeyCode'\r\n   */\r\n  registerPluginsOnKeyEvents () {\r\n    this.pluginsData.each(function (pluginData) {\r\n      if (pluginData.keyCodes) {\r\n        pluginData.keyCodes.each(function (keyComb) {\r\n          let eventName = 'key.event'\r\n\r\n          /* Include key action */\r\n          eventName += '.' + keyComb.keyAction\r\n\r\n          if (keyComb.metaKeys) {\r\n            /* Register on ctrl or apple meta key as meta key */\r\n            if (keyComb.metaKeys.indexOf(ORYX_Config.META_KEY_META_CTRL) > -1) {\r\n              eventName += '.' + ORYX_Config.META_KEY_META_CTRL\r\n            }\r\n\r\n            /* Register on alt key as meta key */\r\n            if (keyComb.metaKeys.indexOf(ORYX_Config.META_KEY_ALT) > -1) {\r\n              eventName += '.' + ORYX_Config.META_KEY_ALT\r\n            }\r\n\r\n            /* Register on shift key as meta key */\r\n            if (keyComb.metaKeys.indexOf(ORYX_Config.META_KEY_SHIFT) > -1) {\r\n              eventName += '.' + ORYX_Config.META_KEY_SHIFT\r\n            }\r\n          }\r\n\r\n          /* Register on the actual key */\r\n          if (keyComb.keyCode) {\r\n            eventName += '.' + keyComb.keyCode\r\n          }\r\n\r\n          /* Register the event */\r\n          ORYX_Log.debug('Register Plugin on Key Event: %0', eventName)\r\n          if (pluginData.toggle === true && pluginData.buttonInstance) {\r\n            this.registerOnEvent(eventName, function () {\r\n              pluginData.buttonInstance.toggle(!pluginData.buttonInstance.pressed) // Toggle\r\n              pluginData.functionality.call(\r\n                pluginData,\r\n                pluginData.buttonInstance,\r\n                pluginData.buttonInstance.pressed) // Call function\r\n            })\r\n          } else {\r\n            this.registerOnEvent(eventName, pluginData.functionality)\r\n          }\r\n\r\n        }.bind(this))\r\n      }\r\n    }.bind(this))\r\n  }\r\n\r\n  isEqual (a, b) {\r\n    return a === b || (a.length === b.length && a.all(function (r) {\r\n      return b.include(r)\r\n    }))\r\n  }\r\n\r\n  isDirty (a) {\r\n    return a.any(function (shape) {\r\n      return shape.isPropertyChanged()\r\n    })\r\n  }\r\n\r\n  setSelection (elements, subSelectionElement, force) {\r\n    if (!elements) {\r\n      elements = []\r\n    }\r\n    if (!(elements instanceof Array)) {\r\n      elements = [elements]\r\n    }\r\n\r\n    elements = elements.findAll(function (n) {\r\n      return n && n instanceof ORYX_Shape\r\n    })\r\n\r\n    if (elements[0] instanceof ORYX_Canvas) {\r\n      elements = []\r\n    }\r\n\r\n    if (!force && this.isEqual(this.selection, elements) && !this.isDirty(elements)) {\r\n      return\r\n    }\r\n\r\n    this.selection = elements\r\n    this._subSelection = subSelectionElement\r\n\r\n    this.handleEvents({\r\n      type: ORYX_Config.EVENT_SELECTION_CHANGED,\r\n      elements: elements,\r\n      subSelection: subSelectionElement,\r\n      force: !!force\r\n    })\r\n  }\r\n\r\n  updateSelection () {\r\n    this.setSelection(this.selection, this._subSelection, true)\r\n    /*var s = this.selection;\r\n     this.setSelection();\r\n     this.setSelection(s);*/\r\n  }\r\n\r\n  getCanvas () {\r\n    return this._canvas\r\n  }\r\n\r\n  /**\r\n   *  option = {\r\n   *\t\ttype: string,\r\n   *\t\tposition: {x:int, y:int},\r\n   *\t\tconnectingType:\tuiObj-Class\r\n   *\t\tconnectedShape: uiObj\r\n   *\t\tdraggin: bool\r\n   *\t\tnamespace: url\r\n   *       parent: ORYX.Core.AbstractShape\r\n   *\t\ttemplate: a template shape that the newly created inherits properties from.\r\n   *\t\t}\r\n   */\r\n  // 创建图形元素\r\n  createShape (option) {\r\n    console.log(12, option)\r\n    // If there is no argument, throw an exception\r\n    if (!option || !option.type || !option.namespace) {\r\n      throw 'To create a new shape you have to give an argument with type and namespace'\r\n    }\r\n\r\n    let newShapeObject\r\n\r\n    if (option && option.serialize && option.serialize instanceof Array) {\r\n      let type = option.serialize.find(function (obj) {\r\n        return (obj.prefix + '-' + obj.name) == 'oryx-type'\r\n      })\r\n      let stencil = ORYX_StencilSet.stencil(type.value)\r\n      if (stencil.type() == 'node') {\r\n        newShapeObject = new ORYX_Node({ 'eventHandlerCallback': this.handleEvents.bind(this) }, stencil, this._getPluginFacade())\r\n      } else {\r\n        newShapeObject = new ORYX_Edge({ 'eventHandlerCallback': this.handleEvents.bind(this) }, stencil, this._getPluginFacade())\r\n      }\r\n      this.getCanvas().add(newShapeObject)\r\n      newShapeObject.deserialize(option.serialize)\r\n\r\n      return newShapeObject\r\n    }\r\n\r\n    let canvas = this.getCanvas()\r\n    // Get the shape type\r\n    let shapetype = option.type\r\n    // Get the stencil set\r\n    let sset = ORYX_StencilSet.stencilSet(option.namespace)\r\n    // Create an New Shape, dependents on an Edge or a Node\r\n    if (sset.stencil(shapetype).type() == 'node') {\r\n      newShapeObject = new ORYX_Node({ 'eventHandlerCallback': this.handleEvents.bind(this) }, sset.stencil(shapetype), this._getPluginFacade())\r\n    } else {\r\n      newShapeObject = new ORYX_Edge({ 'eventHandlerCallback': this.handleEvents.bind(this) }, sset.stencil(shapetype), this._getPluginFacade())\r\n    }\r\n\r\n    // when there is a template, inherit the properties.\r\n    if (option.template) {\r\n      newShapeObject._jsonStencil.properties = option.template._jsonStencil.properties\r\n      newShapeObject.postProcessProperties()\r\n    }\r\n\r\n    // Add to the canvas\r\n    if (option.parent && newShapeObject instanceof ORYX_Node) {\r\n      option.parent.add(newShapeObject)\r\n    } else {\r\n      canvas.add(newShapeObject)\r\n    }\r\n\r\n    // Set the position\r\n    let point = option.position ? option.position : { x: 100, y: 200 }\r\n    let con\r\n    // If there is create a shape and in the argument there is given an ConnectingType and is instance of an edge\r\n    if (option.connectingType && option.connectedShape && !(newShapeObject instanceof ORYX_Edge)) {\r\n      // there will be create a new Edge\r\n      con = new ORYX_Edge({ 'eventHandlerCallback': this.handleEvents.bind(this) }, sset.stencil(option.connectingType), this._getPluginFacade())\r\n\r\n      // And both endings dockers will be referenced to the both shapes\r\n      con.dockers.first().setDockedShape(option.connectedShape)\r\n\r\n      let magnet = option.connectedShape.getDefaultMagnet()\r\n      let cPoint = magnet ? magnet.bounds.center() : option.connectedShape.bounds.midPoint()\r\n      con.dockers.first().setReferencePoint(cPoint)\r\n      con.dockers.last().setDockedShape(newShapeObject)\r\n      con.dockers.last().setReferencePoint(newShapeObject.getDefaultMagnet().bounds.center())\r\n\r\n      // The Edge will be added to the canvas and be updated\r\n      canvas.add(con)\r\n      //con.update();\r\n    }\r\n\r\n    // Move the new Shape to the position\r\n    if (newShapeObject instanceof ORYX_Edge && option.connectedShape) {\r\n      newShapeObject.dockers.first().setDockedShape(option.connectedShape)\r\n\r\n      if (option.connectedShape instanceof ORYX_Node) {\r\n        newShapeObject.dockers.first().setReferencePoint(option.connectedShape.getDefaultMagnet().bounds.center())\r\n        newShapeObject.dockers.last().bounds.centerMoveTo(point)\r\n      } else {\r\n        newShapeObject.dockers.first().setReferencePoint(option.connectedShape.bounds.midPoint())\r\n      }\r\n\r\n      let start = newShapeObject.dockers.first()\r\n      let end = newShapeObject.dockers.last()\r\n\r\n      if (start.getDockedShape() && end.getDockedShape()) {\r\n        let startPoint = start.getAbsoluteReferencePoint()\r\n        let endPoint = end.getAbsoluteReferencePoint()\r\n\r\n        let docker = newShapeObject.createDocker()\r\n        docker.bounds.centerMoveTo({\r\n          x: startPoint.x + (endPont.x - startPoint.x) / 2,\r\n          y: startPoint.y + (endPont.y - startPoint.y) / 2\r\n        })\r\n      }\r\n\r\n    } else {\r\n      let b = newShapeObject.bounds\r\n      if (newShapeObject instanceof ORYX_Node && newShapeObject.dockers.length == 1) {\r\n        b = newShapeObject.dockers.first().bounds\r\n      }\r\n\r\n      b.centerMoveTo(point)\r\n\r\n      let upL = b.upperLeft()\r\n      b.moveBy(-Math.min(upL.x, 0), -Math.min(upL.y, 0))\r\n\r\n      let lwR = b.lowerRight()\r\n      b.moveBy(-Math.max(lwR.x - canvas.bounds.width(), 0), -Math.max(lwR.y - canvas.bounds.height(), 0))\r\n\r\n      // 处理泳道\r\n      // let canvasBound = this.facade.getCanvas().bounds\r\n      let nodeTypeId = newShapeObject.getStencil().idWithoutNs()\r\n      // .endsWith('Lane')\r\n      if (nodeTypeId === 'V-Pool') {\r\n        let po = {\r\n          a: { x: b.a.x, y: 0 },\r\n          b: { x: b.b.x, y: canvas.bounds.height() }\r\n        }\r\n        newShapeObject.bounds.set(po)\r\n      } else if (nodeTypeId === 'V-Lane') {\r\n        let po = {\r\n          a: { x: b.a.x, y: 30 },\r\n          b: { x: b.b.x, y: canvas.bounds.height() }\r\n        }\r\n        newShapeObject.bounds.set(po)\r\n      } else if (nodeTypeId === 'Pool') {\r\n        let po = {\r\n          a: { x: 0, y: b.a.y },\r\n          b: { x: canvas.bounds.width(), y: b.b.y }\r\n        }\r\n        newShapeObject.bounds.set(po)\r\n      }\r\n    }\r\n\r\n    this.handleEvents({ type: 'newshape_addin_canvas', shape: newShapeObject })\r\n\r\n    // Update the shape\r\n    if (newShapeObject instanceof ORYX_Edge) {\r\n      newShapeObject._update(false)\r\n    }\r\n\r\n    // And refresh the selection\r\n    if (!(newShapeObject instanceof ORYX_Edge) && !(option.dontUpdateSelection)) {\r\n      this.setSelection([newShapeObject])\r\n    }\r\n\r\n    if (con && con.alignDockers) {\r\n      // con.alignDockers();\r\n    }\r\n    if (newShapeObject.alignDockers) {\r\n      newShapeObject.alignDockers()\r\n    }\r\n\r\n    return newShapeObject\r\n  }\r\n\r\n  deleteShape (shape) {\r\n    if (!shape || !shape.parent) {\r\n      return\r\n    }\r\n\r\n    // remove shape from parent\r\n    // this also removes it from DOM\r\n    shape.parent.remove(shape)\r\n\r\n    // delete references to outgoing edges\r\n    shape.getOutgoingShapes().each(function (os) {\r\n      let docker = os.getDockers().first()\r\n      if (docker && docker.getDockedShape() == shape) {\r\n        docker.setDockedShape(undefined)\r\n      }\r\n    })\r\n\r\n    // delete references to incoming edges\r\n    shape.getIncomingShapes().each(function (is) {\r\n      let docker = is.getDockers().last()\r\n      if (docker && docker.getDockedShape() == shape) {\r\n        docker.setDockedShape(undefined)\r\n      }\r\n    })\r\n\r\n    // delete references of the shape's dockers\r\n    shape.getDockers().each(function (docker) {\r\n      docker.setDockedShape(undefined)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Returns an object with meta data about the model.\r\n   * Like name, description, ...\r\n   *\r\n   * Empty object with the current backend.\r\n   *\r\n   * @return {Object} Meta data about the model\r\n   */\r\n  getModelMetaData () {\r\n    return this.modelMetaData\r\n  }\r\n\r\n  /* Event-Handler Methods */\r\n\r\n  /**\r\n   * Helper method to execute an event immediately. The event is not\r\n   * scheduled in the _eventsQueue. Needed to handle Layout-Callbacks.\r\n   */\r\n  _executeEventImmediately (eventObj) {\r\n    if (this.DOMEventListeners.keys().member(eventObj.event.type)) {\r\n      this.DOMEventListeners.get(eventObj.event.type).each((function (value) {\r\n        value(eventObj.event, eventObj.arg)\r\n      }).bind(this))\r\n    }\r\n  }\r\n\r\n  _executeEvents () {\r\n    this._queueRunning = true\r\n    while (this._eventsQueue.length > 0) {\r\n      let val = this._eventsQueue.shift()\r\n      this._executeEventImmediately(val)\r\n    }\r\n    this._queueRunning = false\r\n  }\r\n\r\n  /**\r\n   * Leitet die Events an die Editor-Spezifischen Event-Methoden weiter\r\n   * @param {Object} event Event , welches gefeuert wurde\r\n   * @param {Object} uiObj Target-UiObj\r\n   */\r\n  handleEvents (event, uiObj) {\r\n    ORYX_Log.trace('Dispatching event type %0 on %1', event.type, uiObj)\r\n    switch (event.type) {\r\n      case ORYX_Config.EVENT_MOUSEDOWN:\r\n        this._handleMouseDown(event, uiObj)\r\n        break\r\n      case ORYX_Config.EVENT_MOUSEMOVE:\r\n        this._handleMouseMove(event, uiObj)\r\n        break\r\n      case ORYX_Config.EVENT_MOUSEUP:\r\n        this._handleMouseUp(event, uiObj)\r\n        break\r\n      case ORYX_Config.EVENT_MOUSEOVER:\r\n        this._handleMouseHover(event, uiObj)\r\n        break\r\n      case ORYX_Config.EVENT_MOUSEOUT:\r\n        this._handleMouseOut(event, uiObj)\r\n        break\r\n    }\r\n    /* Force execution if necessary. Used while handle Layout-Callbacks. */\r\n    if (event.forceExecution) {\r\n      this._executeEventImmediately({ event: event, arg: uiObj })\r\n    } else {\r\n      this._eventsQueue.push({ event: event, arg: uiObj })\r\n    }\r\n\r\n    if (!this._queueRunning) {\r\n      this._executeEvents()\r\n    }\r\n\r\n    // TODO: Make this return whether no listener returned false.\r\n    // So that, when one considers bubbling undesireable, it won't happen.\r\n    return false\r\n  }\r\n\r\n  isValidEvent (e) {\r\n    try {\r\n      let isInput = ['INPUT', 'TEXTAREA'].include(e.target.tagName.toUpperCase())\r\n      let gridHasFocus = e.target.className.include('x-grid3-focus') && !e.target.className.include('x-grid3-focus-canvas')\r\n      return !isInput && !gridHasFocus\r\n    } catch (e) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  catchKeyUpEvents (event) {\r\n    if (!this._keyupEnabled) {\r\n      return\r\n    }\r\n    /* assure we have the current event. */\r\n    if (!event)\r\n      event = window.event\r\n\r\n    // Checks if the event comes from some input field\r\n    if (!this.isValidEvent(event)) {\r\n      return\r\n    }\r\n\r\n    /* Create key up event type */\r\n    let keyUpEvent = this.createKeyCombEvent(event, ORYX_Config.KEY_ACTION_UP)\r\n\r\n    ORYX_Log.debug('Key Event to handle: %0', keyUpEvent)\r\n\r\n    /* forward to dispatching. */\r\n    this.handleEvents({ type: keyUpEvent, event: event })\r\n  }\r\n\r\n  /**\r\n   * Catches all key down events and forward the appropriated event to\r\n   * dispatching concerning to the pressed keys.\r\n   *\r\n   * @param {Event}\r\n   *    The key down event to handle\r\n   */\r\n  catchKeyDownEvents (event) {\r\n    if (!this._keydownEnabled) {\r\n      return\r\n    }\r\n    /* Assure we have the current event. */\r\n    if (!event) {\r\n      event = window.event\r\n    }\r\n\r\n    /* Fixed in FF3 */\r\n    // This is a mac-specific fix. The mozilla event object has no knowledge\r\n    // of meta key modifier on osx, however, it is needed for certain\r\n    // shortcuts. This fix adds the metaKey field to the event object, so\r\n    // that all listeners that registered per Oryx plugin facade profit from\r\n    // this. The original bug is filed in\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=418334\r\n    //if (this.__currentKey == ORYX.CONFIG.KEY_CODE_META) {\r\n    //\tevent.appleMetaKey = true;\r\n    //}\r\n    //this.__currentKey = pressedKey;\r\n\r\n    // Checks if the event comes from some input field\r\n    if (!this.isValidEvent(event)) {\r\n      return\r\n    }\r\n\r\n    /* Create key up event type */\r\n    let keyDownEvent = this.createKeyCombEvent(event, ORYX_Config.KEY_ACTION_DOWN)\r\n\r\n    ORYX_Log.debug('Key Event to handle: %0', keyDownEvent)\r\n\r\n    /* Forward to dispatching. */\r\n    this.handleEvents({ type: keyDownEvent, event: event })\r\n  }\r\n\r\n  /**\r\n   * Creates the event type name concerning to the pressed keys.\r\n   *\r\n   * @param {Event} keyDownEvent\r\n   *    The source keyDownEvent to build up the event name\r\n   */\r\n  createKeyCombEvent (keyEvent, keyAction) {\r\n    /* Get the currently pressed key code. */\r\n    let pressedKey = keyEvent.which || keyEvent.keyCode\r\n    //this.__currentKey = pressedKey;\r\n\r\n    /* Event name */\r\n    let eventName = 'key.event'\r\n\r\n    /* Key action */\r\n    if (keyAction) {\r\n      eventName += '.' + keyAction\r\n    }\r\n\r\n    /* Ctrl or apple meta key is pressed */\r\n    if (keyEvent.ctrlKey || keyEvent.metaKey) {\r\n      eventName += '.' + ORYX_Config.META_KEY_META_CTRL\r\n    }\r\n\r\n    /* Alt key is pressed */\r\n    if (keyEvent.altKey) {\r\n      eventName += '.' + ORYX_Config.META_KEY_ALT\r\n    }\r\n\r\n    /* Alt key is pressed */\r\n    if (keyEvent.shiftKey) {\r\n      eventName += '.' + ORYX_Config.META_KEY_SHIFT\r\n    }\r\n\r\n    /* Return the composed event name */\r\n    return eventName + '.' + pressedKey\r\n  }\r\n\r\n  _handleMouseDown (event, uiObj) {\r\n    // get canvas.\r\n    let canvas = this.getCanvas()\r\n    // Try to get the focus\r\n    canvas.focus()\r\n\r\n    // find the shape that is responsible for this element's id.\r\n    let element = event.currentTarget\r\n    let elementController = uiObj\r\n\r\n    // gather information on selection.\r\n    let currentIsSelectable = (elementController !== null) &&\r\n      (elementController !== undefined) && (elementController.isSelectable)\r\n    let currentIsMovable = (elementController !== null) &&\r\n      (elementController !== undefined) && (elementController.isMovable)\r\n    let modifierKeyPressed = event.shiftKey || event.ctrlKey\r\n    let noObjectsSelected = this.selection.length === 0\r\n    let currentIsSelected = this.selection.member(elementController)\r\n\r\n    // Rule #1: When there is nothing selected, select the clicked object.\r\n    if (currentIsSelectable && noObjectsSelected) {\r\n      this.setSelection([elementController])\r\n      ORYX_Log.trace('Rule #1 applied for mouse down on %0', element.id)\r\n\r\n      // Rule #3: When at least one element is selected, and there is no\r\n      // control key pressed, and the clicked object is not selected, select\r\n      // the clicked object.\r\n    } else if (currentIsSelectable && !noObjectsSelected && !modifierKeyPressed && !currentIsSelected) {\r\n      this.setSelection([elementController])\r\n      //var objectType = elementController.readAttributes();\r\n      //alert(objectType[0] + \": \" + objectType[1]);\r\n\r\n      ORYX_Log.trace('Rule #3 applied for mouse down on %0', element.id)\r\n\r\n      // Rule #4: When the control key is pressed, and the current object is\r\n      // not selected, add it to the selection.\r\n    } else if (currentIsSelectable && modifierKeyPressed && !currentIsSelected) {\r\n      let newSelection = this.selection.clone()\r\n      newSelection.push(elementController)\r\n      this.setSelection(newSelection)\r\n\r\n      ORYX_Log.trace('Rule #4 applied for mouse down on %0', element.id)\r\n      // Rule #6\r\n    } else if (currentIsSelectable && currentIsSelected && modifierKeyPressed) {\r\n      let newSelection = this.selection.clone()\r\n      this.setSelection(newSelection.without(elementController))\r\n\r\n      ORYX_Log.trace('Rule #6 applied for mouse down on %0', elementController.id)\r\n\r\n      // Rule #5: When there is at least one object selected and no control\r\n      // key pressed, we're dragging.\r\n      /*} else if(currentIsSelectable && !noObjectsSelected\r\n       && !modifierKeyPressed) {\r\n\r\n       if(this.log.isTraceEnabled())\r\n       this.log.trace(\"Rule #5 applied for mouse down on \"+element.id);\r\n       */\r\n      // Rule #2: When clicked on something that is neither\r\n      // selectable nor movable, clear the selection, and return.\r\n    } else if (!currentIsSelectable && !currentIsMovable) {\r\n      this.setSelection([])\r\n      ORYX_Log.trace('Rule #2 applied for mouse down on %0', element.id)\r\n      return\r\n\r\n      // Rule #7: When the current object is not selectable but movable,\r\n      // it is probably a control. Leave the selection unchanged but set\r\n      // the movedObject to the current one and enable Drag. Dockers will\r\n      // be processed in the dragDocker plugin.\r\n    } else if (!currentIsSelectable && currentIsMovable && !(elementController instanceof ORYX_Controls_Docker)) {\r\n\r\n      // TODO: If there is any moveable elements, do this in a plugin\r\n      //ORYX.Core.UIEnableDrag(event, elementController);\r\n\r\n      ORYX_Log.trace('Rule #7 applied for mouse down on %0', element.id)\r\n\r\n      // Rule #8: When the element is selectable and is currently selected and no\r\n      // modifier key is pressed\r\n    } else if (currentIsSelectable && currentIsSelected && !modifierKeyPressed) {\r\n      this._subSelection = this._subSelection != elementController ? elementController : undefined\r\n      this.setSelection(this.selection, this._subSelection)\r\n      ORYX_Log.trace('Rule #8 applied for mouse down on %0', element.id)\r\n    }\r\n\r\n    // prevent event from bubbling, return.\r\n    //Event.stop(event);\r\n    return\r\n  }\r\n\r\n  _handleMouseMove (event, uiObj) {\r\n    return;\r\n  }\r\n\r\n  _handleMouseUp (event, uiObj) {\r\n    // get canvas.\r\n    let canvas = this.getCanvas()\r\n\r\n    // find the shape that is responsible for this elemement's id.\r\n    let elementController = uiObj\r\n\r\n    //get event position\r\n    let evPos = this.eventCoordinates(event)\r\n\r\n    //Event.stop(event);\r\n  }\r\n\r\n  _handleMouseHover (event, uiObj) {\r\n    return\r\n  }\r\n\r\n  _handleMouseOut (event, uiObj) {\r\n    return\r\n  }\r\n\r\n  /**\r\n   * Calculates the event coordinates to SVG document coordinates.\r\n   * @param {Event} event\r\n   * @return {SVGPoint} The event coordinates in the SVG document\r\n   */\r\n  eventCoordinates (event) {\r\n    let canvas = this.getCanvas()\r\n\r\n    let svgPoint = canvas.node.ownerSVGElement.createSVGPoint()\r\n    svgPoint.x = event.clientX\r\n    svgPoint.y = event.clientY\r\n\r\n    let additionalIEZoom = 1\r\n    if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n      let ua = navigator.userAgent\r\n      if (ua.indexOf('MSIE') >= 0) {\r\n        //IE 10 and below\r\n        let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n        if (zoom !== 100) {\r\n          additionalIEZoom = zoom / 100\r\n        }\r\n      }\r\n    }\r\n\r\n    if (additionalIEZoom !== 1) {\r\n      svgPoint.x = svgPoint.x * additionalIEZoom\r\n      svgPoint.y = svgPoint.y * additionalIEZoom\r\n    }\r\n\r\n    let matrix = canvas.node.getScreenCTM()\r\n    return svgPoint.matrixTransform(matrix.inverse())\r\n  }\r\n\r\n  eventCoordinatesXY (x, y) {\r\n    let canvas = this.getCanvas()\r\n\r\n    let svgPoint = canvas.node.ownerSVGElement.createSVGPoint()\r\n    svgPoint.x = x\r\n    svgPoint.y = y\r\n\r\n    let additionalIEZoom = 1\r\n    if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n      let ua = navigator.userAgent\r\n      if (ua.indexOf('MSIE') >= 0) {\r\n        // IE 10 and below\r\n        let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n        if (zoom !== 100) {\r\n          additionalIEZoom = zoom / 100\r\n        }\r\n      }\r\n    }\r\n\r\n    if (additionalIEZoom !== 1) {\r\n      svgPoint.x = svgPoint.x * additionalIEZoom\r\n      svgPoint.y = svgPoint.y * additionalIEZoom\r\n    }\r\n\r\n    let matrix = canvas.node.getScreenCTM()\r\n    return svgPoint.matrixTransform(matrix.inverse())\r\n  }\r\n\r\n  /**\r\n   * Creates a new ORYX.Editor instance by fetching a model from given url and passing it to the constructur\r\n   * @param {String} modelUrl The JSON URL of a model.\r\n   * @param {Object} config Editor config passed to the constructur, merged with the response of the request to modelUrl\r\n   */\r\n  createByUrl (modelUrl) {\r\n    new Ajax.Request(modelUrl, {\r\n      method: 'GET',\r\n      onSuccess: function (transport) {\r\n        var editorConfig = JSON.parse(transport.responseText)\r\n        new ORYX_Editor(editorConfig)\r\n      }.bind(this)\r\n    })\r\n  }\r\n\r\n  // provideId () {\r\n  //   let res = [], hex = '0123456789ABCDEF'\r\n  //\r\n  //   for (let i = 0; i < 36; i++) res[i] = Math.floor(Math.random() * 0x10)\r\n  //\r\n  //   res[14] = 4\r\n  //   res[19] = (res[19] & 0x3) | 0x8\r\n  //\r\n  //   for (let i = 0; i < 36; i++) res[i] = hex[res[i]]\r\n  //\r\n  //   res[8] = res[13] = res[18] = res[23] = '-'\r\n  //\r\n  //   return 'oryx_' + res.join('')\r\n  // }\r\n\r\n  /**\r\n   * When working with Ext, conditionally the window needs to be resized. To do\r\n   * so, use this class method. Resize is deferred until 100ms, and all subsequent\r\n   * resizeBugFix calls are ignored until the initially requested resize is\r\n   * performed.\r\n   */\r\n  resizeFix () {\r\n    if (!ORYX_Editor._resizeFixTimeout) {\r\n      ORYX_Editor._resizeFixTimeout = window.setTimeout(function () {\r\n        window.resizeBy(1, 1)\r\n        window.resizeBy(-1, -1)\r\n        ORYX_Editor._resizefixTimeout = null\r\n      }, 100)\r\n    }\r\n  }\r\n}\r\n\r\n\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEtSURBVDiNjZOxasMwFEWvn9BgyD85OFNCySijtVAC/YeCof9QCIWuJhpDIZND/E8BD+ZJHSoHVbbSaNOT7uG++6TMOYfU0lrXANA0TZ26Q/+ISwDlCHoY4AUrZt4w8wbAKgWZAALx2hhzNcZcmXmdgmRhBqN4GIadEOINQOGPOmZ+l1LuAbRhJpQQXwD0RLQloi2AXghxGYZhFzvJnHN/bGdZ9gmgPxwOz6HVqqq+AOTOuRchxGl0QmPaY88ACiL6mIT1WyuCTEqtdZ0c46OLfCBnIcRJKbUA0FlrX+OLvtYppRa+hXPTNPVtCjMhfo+tePETMy/jSdxa8IVWSrln5iWA3Fp7tNYeAeRzYiB6B6GTIFQEttv4X0wAMQQAUuIkIIT47az4LiCA3P3OPzCf0rmw0lvwAAAAAElFTkSuQmCC\"","import ORYX_Edge from '../Edge'\r\nimport ORYX_Shape from '../Shape'\r\n\r\nexport default class Rules {\r\n  constructor () {\r\n    // arguments.callee.$.construct.apply(this, arguments)\r\n\r\n    this._stencilSets = []\r\n    this._stencils = []\r\n    this._containerStencils = []\r\n\r\n    this._cachedConnectSET = new Hash()\r\n    this._cachedConnectSE = new Hash()\r\n    this._cachedConnectTE = new Hash()\r\n    this._cachedCardSE = new Hash()\r\n    this._cachedCardTE = new Hash()\r\n    this._cachedContainPC = new Hash()\r\n    this._cachedMorphRS = new Hash()\r\n\r\n    this._connectionRules = new Hash()\r\n    this._cardinalityRules = new Hash()\r\n    this._containmentRules = new Hash()\r\n    this._morphingRules = new Hash()\r\n    this._layoutRules = new Hash()\r\n  }\r\n\r\n  /**\r\n   * Call this method to initialize the rules for a stencil set and all of its\r\n   * active extensions.\r\n   *\r\n   * @param {Object}  stencilSet\r\n   */\r\n  initializeRules (stencilSet) {\r\n    const existingSS = this._stencilSets.find(function (ss) {\r\n      return (ss.namespace() == stencilSet.namespace())\r\n    })\r\n    if (existingSS) {\r\n      // reinitialize all rules\r\n      let stencilsets = this._stencilSets.clone()\r\n      stencilsets = stencilsets.without(existingSS)\r\n      stencilsets.push(stencilSet)\r\n\r\n      this._stencilSets = []\r\n      this._stencils = []\r\n      this._containerStencils = []\r\n\r\n      this._cachedConnectSET = new Hash()\r\n      this._cachedConnectSE = new Hash()\r\n      this._cachedConnectTE = new Hash()\r\n      this._cachedCardSE = new Hash()\r\n      this._cachedCardTE = new Hash()\r\n      this._cachedContainPC = new Hash()\r\n      this._cachedMorphRS = new Hash()\r\n\r\n      this._connectionRules = new Hash()\r\n      this._cardinalityRules = new Hash()\r\n      this._containmentRules = new Hash()\r\n      this._morphingRules = new Hash()\r\n      this._layoutRules = new Hash()\r\n\r\n      stencilsets.each(function (ss) {\r\n        this.initializeRules(ss)\r\n      }.bind(this))\r\n      return\r\n    } else {\r\n      this._stencilSets.push(stencilSet)\r\n\r\n      let jsonRules = new Hash(stencilSet.jsonRules())\r\n      const namespace = stencilSet.namespace()\r\n      let stencils = stencilSet.stencils()\r\n\r\n      stencilSet.extensions().values().each(function (extension) {\r\n        if (extension.rules) {\r\n          if (extension.rules.connectionRules)\r\n            jsonRules.connectionRules = jsonRules.connectionRules.concat(extension.rules.connectionRules)\r\n          if (extension.rules.cardinalityRules)\r\n            jsonRules.cardinalityRules = jsonRules.cardinalityRules.concat(extension.rules.cardinalityRules)\r\n          if (extension.rules.containmentRules)\r\n            jsonRules.containmentRules = jsonRules.containmentRules.concat(extension.rules.containmentRules)\r\n          if (extension.rules.morphingRules)\r\n            jsonRules.morphingRules = jsonRules.morphingRules.concat(extension.rules.morphingRules)\r\n        }\r\n        if (extension.stencils) {\r\n          stencils = stencils.concat(extension.stencils)\r\n        }\r\n      })\r\n\r\n      this._stencils = this._stencils.concat(stencilSet.stencils())\r\n\r\n      // init connection rules\r\n      let cr = this._connectionRules\r\n      if (jsonRules.get('connectionRules')) {\r\n        jsonRules.get('connectionRules').each((function (rules) {\r\n          if (this._isRoleOfOtherNamespace(rules.role)) {\r\n            if (!cr.get(rules.role)) {\r\n              cr.set(rules.role, new Hash())\r\n            }\r\n          } else {\r\n            if (!cr.get(namespace + rules.role))\r\n              cr.set(namespace + rules.role, new Hash())\r\n          }\r\n\r\n          rules.connects.each((function (connect) {\r\n            let toRoles = []\r\n            if (connect.to) {\r\n              if (!(connect.to instanceof Array)) {\r\n                connect.to = [connect.to]\r\n              }\r\n              connect.to.each((function (to) {\r\n                if (this._isRoleOfOtherNamespace(to)) {\r\n                  toRoles.push(to)\r\n                } else {\r\n                  toRoles.push(namespace + to)\r\n                }\r\n              }).bind(this))\r\n            }\r\n\r\n            let role, from\r\n            if (this._isRoleOfOtherNamespace(rules.role)) {\r\n              role = rules.role\r\n            } else {\r\n              role = namespace + rules.role\r\n            }\r\n\r\n            if (this._isRoleOfOtherNamespace(connect.from)) {\r\n              from = connect.from\r\n            } else {\r\n              from = namespace + connect.from\r\n            }\r\n\r\n            if (!cr.get(role).get(from)) {\r\n              cr.get(role).set(from, toRoles)\r\n            } else {\r\n              cr.get(role).set(from, cr.get(role).get(from).concat(toRoles))\r\n            }\r\n\r\n          }).bind(this))\r\n        }).bind(this))\r\n      }\r\n\r\n      // init cardinality rules\r\n      let cardr = this._cardinalityRules\r\n      if (jsonRules.get('cardinalityRules')) {\r\n        jsonRules.get('cardinalityRules').each((function (rules) {\r\n          let cardrKey\r\n          if (this._isRoleOfOtherNamespace(rules.role)) {\r\n            cardrKey = rules.role\r\n          } else {\r\n            cardrKey = namespace + rules.role\r\n          }\r\n\r\n          if (!cardr.get(cardrKey)) {\r\n            cardr.set(cardrKey, {})\r\n            for (let i in rules) {\r\n              cardr.get(cardrKey)[i] = rules[i]\r\n            }\r\n          }\r\n\r\n          let oe = new Hash()\r\n          if (rules.outgoingEdges) {\r\n            rules.outgoingEdges.each((function (rule) {\r\n              if (this._isRoleOfOtherNamespace(rule.role)) {\r\n                oe.set(rule.role, rule)\r\n              } else {\r\n                oe.set(namespace + rule.role, rule)\r\n              }\r\n            }).bind(this))\r\n          }\r\n          cardr.get(cardrKey).outgoingEdges = oe\r\n\r\n          let ie = new Hash()\r\n          if (rules.incomingEdges) {\r\n            rules.incomingEdges.each((function (rule) {\r\n              if (this._isRoleOfOtherNamespace(rule.role)) {\r\n                ie.set(rule.role, rule)\r\n              } else {\r\n                ie.set(namespace + rule.role, rule)\r\n              }\r\n            }).bind(this))\r\n          }\r\n          cardr.get(cardrKey).incomingEdges = ie\r\n        }).bind(this))\r\n      }\r\n\r\n      // init containment rules\r\n      let conr = this._containmentRules\r\n      if (jsonRules.get('containmentRules')) {\r\n        jsonRules.get('containmentRules').each((function (rules) {\r\n          let conrKey\r\n          if (this._isRoleOfOtherNamespace(rules.role)) {\r\n            conrKey = rules.role\r\n          } else {\r\n            this._containerStencils.push(namespace + rules.role)\r\n            conrKey = namespace + rules.role\r\n          }\r\n          if (!conr.get(conrKey)) {\r\n            conr.set(conrKey, [])\r\n          }\r\n          (rules.contains || []).each((function (containRole) {\r\n            if (this._isRoleOfOtherNamespace(containRole)) {\r\n              conr.get(conrKey).push(containRole)\r\n            } else {\r\n              conr.get(conrKey).push(namespace + containRole)\r\n            }\r\n          }).bind(this))\r\n        }).bind(this))\r\n      }\r\n\r\n      // init morphing rules\r\n      let morphr = this._morphingRules\r\n      if (jsonRules.get('morphingRules')) {\r\n        jsonRules.get('morphingRules').each((function (rules) {\r\n          let morphrKey\r\n          if (this._isRoleOfOtherNamespace(rules.role)) {\r\n            morphrKey = rules.role\r\n          } else {\r\n            morphrKey = namespace + rules.role\r\n          }\r\n          if (!morphr.get(morphrKey)) {\r\n            morphr.set(morphrKey, [])\r\n          }\r\n          if (!rules.preserveBounds) {\r\n            rules.preserveBounds = false\r\n          }\r\n          rules.baseMorphs.each((function (baseMorphStencilId) {\r\n            var morphStencil = this._getStencilById(namespace + baseMorphStencilId)\r\n            if (morphStencil) {\r\n              morphr.get(morphrKey).push(morphStencil)\r\n            }\r\n          }).bind(this))\r\n        }).bind(this))\r\n      }\r\n\r\n      // init layouting rules\r\n      let layoutRules = this._layoutRules\r\n      if (jsonRules.get('layoutRules')) {\r\n        var getDirections = function (o) {\r\n          return {\r\n            'edgeRole': o.edgeRole || undefined,\r\n            't': o['t'] || 1,\r\n            'r': o['r'] || 1,\r\n            'b': o['b'] || 1,\r\n            'l': o['l'] || 1\r\n          }\r\n        }\r\n\r\n        jsonRules.get('layoutRules').each(function (rules) {\r\n          let layoutKey\r\n          if (this._isRoleOfOtherNamespace(rules.role)) {\r\n            layoutKey = rules.role\r\n          } else {\r\n            layoutKey = namespace + rules.role\r\n          }\r\n          if (!layoutRules.get(layoutKey)) {\r\n            layoutRules.set(layoutKey, {})\r\n          }\r\n          if (rules['in']) {\r\n            layoutRules.get(layoutKey)['in'] = getDirections(rules['in'])\r\n          }\r\n          if (rules['ins']) {\r\n            layoutRules.get(layoutKey)['ins'] = (rules['ins'] || []).map(function (e) {\r\n              return getDirections(e)\r\n            })\r\n          }\r\n          if (rules['out']) {\r\n            layoutRules.get(layoutKey)['out'] = getDirections(rules['out'])\r\n          }\r\n          if (rules['outs']) {\r\n            layoutRules.get(layoutKey)['outs'] = (rules['outs'] || []).map(function (e) {\r\n              return getDirections(e)\r\n            })\r\n          }\r\n        }.bind(this))\r\n      }\r\n    }\r\n  }\r\n\r\n  _getStencilById (id) {\r\n    return this._stencils.find(function (stencil) {\r\n      return stencil.id() == id\r\n    })\r\n  }\r\n\r\n  _cacheConnect (args) {\r\n    let result = this._canConnect(args)\r\n\r\n    if (args.sourceStencil && args.targetStencil) {\r\n      let source = this._cachedConnectSET[args.sourceStencil.id()]\r\n      if (!source) {\r\n        source = new Hash()\r\n        this._cachedConnectSET[args.sourceStencil.id()] = source\r\n      }\r\n\r\n      let edge = source[args.edgeStencil.id()]\r\n      if (!edge) {\r\n        edge = new Hash()\r\n        source[args.edgeStencil.id()] = edge\r\n      }\r\n      edge[args.targetStencil.id()] = result\r\n    } else if (args.sourceStencil) {\r\n      let source = this._cachedConnectSE[args.sourceStencil.id()]\r\n      if (!source) {\r\n        source = new Hash()\r\n        this._cachedConnectSE[args.sourceStencil.id()] = source\r\n      }\r\n      source[args.edgeStencil.id()] = result\r\n    } else {\r\n      let target = this._cachedConnectTE[args.targetStencil.id()]\r\n      if (!target) {\r\n        target = new Hash()\r\n        this._cachedConnectTE[args.targetStencil.id()] = target\r\n      }\r\n      target[args.edgeStencil.id()] = result\r\n    }\r\n\r\n    return result\r\n  }\r\n\r\n  _cacheCard (args) {\r\n    if (args.sourceStencil) {\r\n      let source = this._cachedCardSE[args.sourceStencil.id()]\r\n      if (!source) {\r\n        source = new Hash()\r\n        this._cachedCardSE[args.sourceStencil.id()] = source\r\n      }\r\n\r\n      let max = this._getMaximumNumberOfOutgoingEdge(args)\r\n      if (max == undefined) {\r\n        max = -1\r\n      }\r\n      source[args.edgeStencil.id()] = max\r\n    }\r\n\r\n    if (args.targetStencil) {\r\n      let target = this._cachedCardTE[args.targetStencil.id()]\r\n      if (!target) {\r\n        target = new Hash()\r\n        this._cachedCardTE[args.targetStencil.id()] = target\r\n      }\r\n\r\n      let max = this._getMaximumNumberOfIncomingEdge(args)\r\n      if (max == undefined) {\r\n        max = -1\r\n      }\r\n\r\n      target[args.edgeStencil.id()] = max\r\n    }\r\n  }\r\n\r\n  _cacheContain (args) {\r\n    let result = [this._canContain(args),\r\n      this._getMaximumOccurrence(args.containingStencil, args.containedStencil)]\r\n\r\n    if (result[1] == undefined) {\r\n      result[1] = -1\r\n    }\r\n\r\n    let children = this._cachedContainPC[args.containingStencil.id()]\r\n    if (!children) {\r\n      children = new Hash()\r\n      this._cachedContainPC[args.containingStencil.id()] = children\r\n    }\r\n\r\n    children[args.containedStencil.id()] = result\r\n\r\n    return result\r\n  }\r\n  /**\r\n   * Returns all stencils belonging to a morph group. (calculation result is cached)\r\n   */\r\n  _cacheMorph (role) {\r\n    let morphs = this._cachedMorphRS[role]\r\n\r\n    if (!morphs) {\r\n      morphs = []\r\n\r\n      if (this._morphingRules.keys().include(role)) {\r\n        morphs = this._stencils.select(function (stencil) {\r\n          return stencil.roles().include(role)\r\n        })\r\n      }\r\n\r\n      this._cachedMorphRS[role] = morphs\r\n    }\r\n    return morphs\r\n  }\r\n\r\n  /** Begin connection rules' methods */\r\n\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args sourceStencil: ORYX.Core.StencilSet.Stencil | undefined\r\n   *            sourceShape: ORYX.Core.Shape | undefined\r\n   *\r\n   * At least sourceStencil or sourceShape has to be specified\r\n   *\r\n   * @return {Array} Array of stencils of edges that can be outgoing edges of\r\n   *         the source.\r\n   */\r\n  outgoingEdgeStencils (args) {\r\n    // check arguments\r\n    if (!args.sourceShape && !args.sourceStencil) {\r\n      return []\r\n    }\r\n\r\n    // init arguments\r\n    if (args.sourceShape) {\r\n      args.sourceStencil = args.sourceShape.getStencil()\r\n    }\r\n\r\n    let _edges = []\r\n\r\n    // test each edge, if it can connect to source\r\n    this._stencils.each((function (stencil) {\r\n      if (stencil.type() === 'edge') {\r\n        let newArgs = Object.clone(args)\r\n        newArgs.edgeStencil = stencil\r\n        if (this.canConnect(newArgs)) {\r\n          _edges.push(stencil)\r\n        }\r\n      }\r\n    }).bind(this))\r\n\r\n    return _edges\r\n  }\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args targetStencil: ORYX.Core.StencilSet.Stencil | undefined\r\n   *            targetShape: ORYX.Core.Shape | undefined\r\n   *\r\n   * At least targetStencil or targetShape has to be specified\r\n   *\r\n   * @return {Array} Array of stencils of edges that can be incoming edges of\r\n   *         the target.\r\n   */\r\n  incomingEdgeStencils (args) {\r\n    // check arguments\r\n    if (!args.targetShape && !args.targetStencil) {\r\n      return []\r\n    }\r\n\r\n    // init arguments\r\n    if (args.targetShape) {\r\n      args.targetStencil = args.targetShape.getStencil()\r\n    }\r\n\r\n    let _edges = []\r\n\r\n    // test each edge, if it can connect to source\r\n    this._stencils.each((function (stencil) {\r\n      if (stencil.type() === 'edge') {\r\n        let newArgs = Object.clone(args)\r\n        newArgs.edgeStencil = stencil\r\n        if (this.canConnect(newArgs)) {\r\n          _edges.push(stencil)\r\n        }\r\n      }\r\n    }).bind(this))\r\n\r\n    return _edges\r\n  }\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args edgeStencil: ORYX.Core.StencilSet.Stencil | undefined\r\n   *            edgeShape: ORYX.Core.Edge | undefined targetStencil:\r\n   *            ORYX.Core.StencilSet.Stencil | undefined targetShape:\r\n   *            ORYX.Core.Node | undefined\r\n   *\r\n   * At least edgeStencil or edgeShape has to be specified!!!\r\n   *\r\n   * @return {Array} Returns an array of stencils that can be source of the\r\n   *         specified edge.\r\n   */\r\n  sourceStencils (args) {\r\n    // check arguments\r\n    if (!args ||\r\n      !args.edgeShape && !args.edgeStencil) {\r\n      return []\r\n    }\r\n\r\n    // init arguments\r\n    if (args.targetShape) {\r\n      args.targetStencil = args.targetShape.getStencil()\r\n    }\r\n\r\n    if (args.edgeShape) {\r\n      args.edgeStencil = args.edgeShape.getStencil()\r\n    }\r\n\r\n    let _sources = []\r\n\r\n    // check each stencil, if it can be a source\r\n    this._stencils.each((function (stencil) {\r\n      let newArgs = Object.clone(args)\r\n      newArgs.sourceStencil = stencil\r\n      if (this.canConnect(newArgs)) {\r\n        _sources.push(stencil)\r\n      }\r\n    }).bind(this))\r\n\r\n    return _sources\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args edgeStencil: ORYX.Core.StencilSet.Stencil | undefined\r\n   *            edgeShape: ORYX.Core.Edge | undefined sourceStencil:\r\n   *            ORYX.Core.StencilSet.Stencil | undefined sourceShape:\r\n   *            ORYX.Core.Node | undefined\r\n   *\r\n   * At least edgeStencil or edgeShape has to be specified!!!\r\n   *\r\n   * @return {Array} Returns an array of stencils that can be target of the\r\n   *         specified edge.\r\n   */\r\n  targetStencils (args) {\r\n    // check arguments\r\n    if (!args ||\r\n      !args.edgeShape && !args.edgeStencil) {\r\n      return []\r\n    }\r\n\r\n    // init arguments\r\n    if (args.sourceShape) {\r\n      args.sourceStencil = args.sourceShape.getStencil()\r\n    }\r\n\r\n    if (args.edgeShape) {\r\n      args.edgeStencil = args.edgeShape.getStencil()\r\n    }\r\n\r\n    let _targets = []\r\n\r\n    // check stencil, if it can be a target\r\n    this._stencils.each((function (stencil) {\r\n      let newArgs = Object.clone(args)\r\n      newArgs.targetStencil = stencil\r\n      if (this.canConnect(newArgs)) {\r\n        _targets.push(stencil)\r\n      }\r\n    }).bind(this))\r\n\r\n    return _targets\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args edgeStencil: ORYX.Core.StencilSet.Stencil edgeShape:\r\n   *            ORYX.Core.Edge |undefined sourceStencil:\r\n   *            ORYX.Core.StencilSet.Stencil | undefined sourceShape:\r\n   *            ORYX.Core.Node |undefined targetStencil:\r\n   *            ORYX.Core.StencilSet.Stencil | undefined targetShape:\r\n   *            ORYX.Core.Node |undefined\r\n   *\r\n   * At least source or target has to be specified!!!\r\n   *\r\n   * @return {Boolean} Returns, if the edge can connect source and target.\r\n   */\r\n\r\n  canConnect (args) {\r\n    // check arguments\r\n    if (!args ||\r\n      (!args.sourceShape && !args.sourceStencil &&\r\n        !args.targetShape && !args.targetStencil) ||\r\n      !args.edgeShape && !args.edgeStencil) {\r\n      return false\r\n    }\r\n\r\n    // init arguments\r\n    if (args.sourceShape) {\r\n      args.sourceStencil = args.sourceShape.getStencil()\r\n    }\r\n    if (args.targetShape) {\r\n      args.targetStencil = args.targetShape.getStencil()\r\n    }\r\n    if (args.edgeShape) {\r\n      args.edgeStencil = args.edgeShape.getStencil()\r\n    }\r\n\r\n    let result\r\n\r\n    if (args.sourceStencil && args.targetStencil) {\r\n      let source = this._cachedConnectSET[args.sourceStencil.id()]\r\n      if (!source) {\r\n        result = this._cacheConnect(args)\r\n      } else {\r\n        let edge = source[args.edgeStencil.id()]\r\n        if (!edge) {\r\n          result = this._cacheConnect(args)\r\n        } else {\r\n          let target = edge[args.targetStencil.id()]\r\n          if (target == undefined) {\r\n            result = this._cacheConnect(args)\r\n          } else {\r\n            result = target\r\n          }\r\n        }\r\n      }\r\n    } else if (args.sourceStencil) {\r\n      let source = this._cachedConnectSE[args.sourceStencil.id()]\r\n      if (!source) {\r\n        result = this._cacheConnect(args)\r\n      } else {\r\n        let edge = source[args.edgeStencil.id()]\r\n        if (edge == undefined) {\r\n          result = this._cacheConnect(args)\r\n        } else {\r\n          result = edge\r\n        }\r\n      }\r\n    } else {\r\n      // args.targetStencil\r\n      let target = this._cachedConnectTE[args.targetStencil.id()]\r\n      if (!target) {\r\n        result = this._cacheConnect(args)\r\n      } else {\r\n        let edge = target[args.edgeStencil.id()]\r\n        if (edge == undefined) {\r\n          result = this._cacheConnect(args)\r\n        } else {\r\n          result = edge\r\n        }\r\n      }\r\n    }\r\n\r\n    // check cardinality\r\n    if (result) {\r\n      if (args.sourceShape) {\r\n        let source = this._cachedCardSE[args.sourceStencil.id()]\r\n        if (!source) {\r\n          this._cacheCard(args)\r\n          source = this._cachedCardSE[args.sourceStencil.id()]\r\n        }\r\n\r\n        let max = source[args.edgeStencil.id()]\r\n        if (max == undefined) {\r\n          this._cacheCard(args)\r\n        }\r\n\r\n        max = source[args.edgeStencil.id()]\r\n\r\n        if (max != -1) {\r\n          result = args.sourceShape.getOutgoingShapes().all(function (cs) {\r\n            if ((cs.getStencil().id() === args.edgeStencil.id()) &&\r\n              ((args.edgeShape) ? cs !== args.edgeShape : true)) {\r\n              max--\r\n              return (max > 0)\r\n            } else {\r\n              return true\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n      if (args.targetShape) {\r\n        let target = this._cachedCardTE[args.targetStencil.id()]\r\n        if (!target) {\r\n          this._cacheCard(args)\r\n          target = this._cachedCardTE[args.targetStencil.id()]\r\n        }\r\n\r\n        let max = target[args.edgeStencil.id()]\r\n        if (max == undefined) {\r\n          this._cacheCard(args)\r\n        }\r\n\r\n        max = target[args.edgeStencil.id()]\r\n\r\n        if (max != -1) {\r\n          result = args.targetShape.getIncomingShapes().all(function (cs) {\r\n            if ((cs.getStencil().id() === args.edgeStencil.id()) &&\r\n              ((args.edgeShape) ? cs !== args.edgeShape : true)) {\r\n              max--\r\n              return (max > 0)\r\n            } else {\r\n              return true\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    return result\r\n  }\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args edgeStencil: ORYX.Core.StencilSet.Stencil edgeShape:\r\n   *            ORYX.Core.Edge |undefined sourceStencil:\r\n   *            ORYX.Core.StencilSet.Stencil | undefined sourceShape:\r\n   *            ORYX.Core.Node |undefined targetStencil:\r\n   *            ORYX.Core.StencilSet.Stencil | undefined targetShape:\r\n   *            ORYX.Core.Node |undefined\r\n   *\r\n   * At least source or target has to be specified!!!\r\n   *\r\n   * @return {Boolean} Returns, if the edge can connect source and target.\r\n   */\r\n  _canConnect (args) {\r\n    // check arguments\r\n    if (!args ||\r\n      (!args.sourceShape && !args.sourceStencil &&\r\n        !args.targetShape && !args.targetStencil) ||\r\n      !args.edgeShape && !args.edgeStencil) {\r\n      return false\r\n    }\r\n\r\n    // init arguments\r\n    if (args.sourceShape) {\r\n      args.sourceStencil = args.sourceShape.getStencil()\r\n    }\r\n    if (args.targetShape) {\r\n      args.targetStencil = args.targetShape.getStencil()\r\n    }\r\n    if (args.edgeShape) {\r\n      args.edgeStencil = args.edgeShape.getStencil()\r\n    }\r\n\r\n    // 1. check connection rules\r\n    let resultCR\r\n\r\n    // get all connection rules for this edge\r\n    let edgeRules = this._getConnectionRulesOfEdgeStencil(args.edgeStencil)\r\n\r\n    // check connection rules, if the source can be connected to the target\r\n    // with the specified edge.\r\n    if (edgeRules.keys().length === 0) {\r\n      resultCR = false\r\n    } else {\r\n      if (args.sourceStencil) {\r\n        resultCR = args.sourceStencil.roles().any(function (sourceRole) {\r\n          let targetRoles = edgeRules.get(sourceRole)\r\n          if (!targetRoles) {\r\n            return false\r\n          }\r\n\r\n          if (args.targetStencil) {\r\n            return (targetRoles.any(function (targetRole) {\r\n              return args.targetStencil.roles().member(targetRole)\r\n            }))\r\n          } else {\r\n            return true\r\n          }\r\n        })\r\n      } else {\r\n        // !args.sourceStencil -> there is args.targetStencil\r\n        resultCR = edgeRules.values().any(function (targetRoles) {\r\n          return args.targetStencil.roles().any(function (targetRole) {\r\n            return targetRoles.member(targetRole)\r\n          })\r\n        })\r\n      }\r\n    }\r\n\r\n    return resultCR\r\n  }\r\n  /** End connection rules' methods */\r\n\r\n  /** Begin containment rules' methods */\r\n  isContainer (shape) {\r\n    return this._containerStencils.member(shape.getStencil().id())\r\n  }\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args containingStencil: ORYX.Core.StencilSet.Stencil\r\n   *            containingShape: ORYX.Core.AbstractShape containedStencil:\r\n   *            ORYX.Core.StencilSet.Stencil containedShape: ORYX.Core.Shape\r\n   */\r\n  canContain (args) {\r\n    if (!args ||\r\n      !args.containingStencil && !args.containingShape ||\r\n      !args.containedStencil && !args.containedShape) {\r\n      return false\r\n    }\r\n\r\n    // init arguments\r\n    if (args.containedShape) {\r\n      args.containedStencil = args.containedShape.getStencil()\r\n    }\r\n\r\n    if (args.containingShape) {\r\n      args.containingStencil = args.containingShape.getStencil()\r\n    }\r\n\r\n    //if(args.containingStencil.type() == 'edge' || args.containedStencil.type() == 'edge')\r\n    //\treturn false;\r\n    if (args.containedStencil.type() == 'edge') {\r\n      return false\r\n    }\r\n\r\n    let childValues\r\n    let parent = this._cachedContainPC[args.containingStencil.id()]\r\n    if (!parent) {\r\n      childValues = this._cacheContain(args)\r\n    } else {\r\n      childValues = parent[args.containedStencil.id()]\r\n      if (!childValues)\r\n        childValues = this._cacheContain(args)\r\n    }\r\n\r\n    if (!childValues[0]) {\r\n      return false\r\n    } else if (childValues[1] == -1) {\r\n      return true\r\n    } else {\r\n      if (args.containingShape) {\r\n        let max = childValues[1]\r\n        return args.containingShape.getChildShapes(false).all(function (as) {\r\n          if (as.getStencil().id() === args.containedStencil.id()) {\r\n            max--\r\n            return (max > 0) ? true : false\r\n          } else {\r\n            return true\r\n          }\r\n        })\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args containingStencil: ORYX.Core.StencilSet.Stencil\r\n   *            containingShape: ORYX.Core.AbstractShape containedStencil:\r\n   *            ORYX.Core.StencilSet.Stencil containedShape: ORYX.Core.Shape\r\n   */\r\n  _canContain (args) {\r\n    if (!args ||\r\n      !args.containingStencil && !args.containingShape ||\r\n      !args.containedStencil && !args.containedShape) {\r\n      return false\r\n    }\r\n\r\n    // init arguments\r\n    if (args.containedShape) {\r\n      args.containedStencil = args.containedShape.getStencil()\r\n    }\r\n\r\n    if (args.containingShape) {\r\n      args.containingStencil = args.containingShape.getStencil()\r\n    }\r\n\r\n    //\t\tif(args.containingShape) {\r\n    //\t\t\tif(args.containingShape instanceof ORYX.Core.Edge) {\r\n    //\t\t\t\t// edges cannot contain other shapes\r\n    //\t\t\t\treturn false;\r\n    //\t\t\t}\r\n    //\t\t}\r\n\r\n\r\n    let result\r\n    // check containment rules\r\n    result = args.containingStencil.roles().any((function (role) {\r\n      const roles = this._containmentRules.get(role)\r\n      if (roles) {\r\n        return roles.any(function (role) {\r\n          return args.containedStencil.roles().member(role)\r\n        })\r\n      } else {\r\n        return false\r\n      }\r\n    }).bind(this))\r\n\r\n    return result\r\n  }\r\n  /** End containment rules' methods */\r\n\r\n  /** Begin morphing rules' methods */\r\n\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *           args\r\n   *            stencil: ORYX.Core.StencilSet.Stencil | undefined\r\n   *            shape: ORYX.Core.Shape | undefined\r\n   *\r\n   * At least stencil or shape has to be specified\r\n   *\r\n   * @return {Array} Array of stencils that the passed stencil/shape can be\r\n   *         transformed to (including the current stencil itself)\r\n   */\r\n  morphStencils (args) {\r\n    // check arguments\r\n    if (!args.stencil && !args.shape) {\r\n      return []\r\n    }\r\n\r\n    // init arguments\r\n    if (args.shape) {\r\n      args.stencil = args.shape.getStencil()\r\n    }\r\n\r\n    let _morphStencils = []\r\n    args.stencil.roles().each(function (role) {\r\n      this._cacheMorph(role).each(function (stencil) {\r\n        _morphStencils.push(stencil)\r\n      })\r\n    }.bind(this))\r\n\r\n\r\n    const baseMorphs = this.baseMorphs()\r\n    // BaseMorphs should be in the front of the array\r\n    _morphStencils = _morphStencils.uniq().sort(function (a, b) {\r\n      return baseMorphs.include(a) && !baseMorphs.include(b) ? -1 : (baseMorphs.include(b) && !baseMorphs.include(a) ? 1 : 0)\r\n    })\r\n    return _morphStencils\r\n  }\r\n  /**\r\n   * @return {Array} An array of all base morph stencils\r\n   */\r\n  baseMorphs () {\r\n    let _baseMorphs = []\r\n    this._morphingRules.each(function (pair) {\r\n      pair.value.each(function (baseMorph) {\r\n        _baseMorphs.push(baseMorph)\r\n      })\r\n    })\r\n    return _baseMorphs\r\n  }\r\n  /**\r\n   * Returns true if there are morphing rules defines\r\n   * @return {boolean}\r\n   */\r\n  containsMorphingRules () {\r\n    return this._stencilSets.any(function (ss) {\r\n      return !!ss.jsonRules().morphingRules\r\n    })\r\n  }\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args\r\n   *            sourceStencil:\r\n   *            ORYX.Core.StencilSet.Stencil | undefined\r\n   *            sourceShape:\r\n   *            ORYX.Core.Node |undefined\r\n   *            targetStencil:\r\n   *            ORYX.Core.StencilSet.Stencil | undefined\r\n   *            targetShape:\r\n   *            ORYX.Core.Node |undefined\r\n   *\r\n   *\r\n   * @return {Stencil} Returns, the stencil for the connecting edge\r\n   * or null if connection is not possible\r\n   */\r\n  connectMorph (args) {\r\n    // check arguments\r\n    if (!args ||\r\n      (!args.sourceShape && !args.sourceStencil &&\r\n        !args.targetShape && !args.targetStencil)) {\r\n      return false\r\n    }\r\n\r\n    // init arguments\r\n    if (args.sourceShape) {\r\n      args.sourceStencil = args.sourceShape.getStencil()\r\n    }\r\n    if (args.targetShape) {\r\n      args.targetStencil = args.targetShape.getStencil()\r\n    }\r\n\r\n    const incoming = this.incomingEdgeStencils(args)\r\n    const outgoing = this.outgoingEdgeStencils(args)\r\n\r\n    // intersection of sets\r\n    const edgeStencils = incoming.select(function (e) {\r\n      return outgoing.member(e)\r\n    })\r\n    // again: intersection of sets\r\n    const baseEdgeStencils = this.baseMorphs().select(function (e) {\r\n      return edgeStencils.member(e)\r\n    })\r\n\r\n    if (baseEdgeStencils.size() > 0) {\r\n      return baseEdgeStencils[0]\r\n      // return any of the possible base morphs\r\n    } else if (edgeStencils.size() > 0) {\r\n      return edgeStencils[0]\r\n      // return any of the possible stencils\r\n    }\r\n\r\n    //connection not possible\r\n    return null\r\n  }\r\n  /**\r\n   * Return true if the stencil should be located in the shape menu\r\n   * @param {ORYX.Core.StencilSet.Stencil} morph\r\n   * @return {Boolean} Returns true if the morphs in the morph group of the\r\n   * specified morph shall be displayed in the shape menu\r\n   */\r\n  showInShapeMenu (stencil) {\r\n    return this._stencilSets.any(function (ss) {\r\n      return ss.jsonRules().morphingRules\r\n        .any(function (r) {\r\n          return stencil.roles().include(ss.namespace() + r.role)\r\n            && r.showInShapeMenu !== false\r\n        })\r\n    })\r\n  }\r\n\r\n  preserveBounds (stencil) {\r\n    return this._stencilSets.any(function (ss) {\r\n      return ss.jsonRules().morphingRules.any(function (r) {\r\n        return stencil.roles().include(ss.namespace() + r.role)\r\n          && r.preserveBounds\r\n      })\r\n    })\r\n  }\r\n\r\n  /** End morphing rules' methods */\r\n\r\n  /** Begin layouting rules' methods */\r\n\r\n  /**\r\n   * Returns a set on \"in\" and \"out\" layouting rules for a given shape\r\n   * @param {Object} shape\r\n   * @param {Object} edgeShape (Optional)\r\n   * @return {Object} \"in\" and \"out\" with a default value of {\"t\":1, \"r\":1, \"b\":1, \"r\":1} if not specified in the json\r\n   */\r\n  getLayoutingRules (shape, edgeShape) {\r\n    if (!shape || !(shape instanceof ORYX_Shape)) {\r\n      return\r\n    }\r\n\r\n    let layout = { 'in': {}, 'out': {} }\r\n    const parseValues = function (o, v) {\r\n      if (o && o[v]) {\r\n        ['t', 'r', 'b', 'l'].each(function (d) {\r\n          layout[v][d] = Math.max(o[v][d], layout[v][d] || 0)\r\n        })\r\n      }\r\n      if (o && o[v + 's'] instanceof Array) {\r\n        ['t', 'r', 'b', 'l'].each(function (d) {\r\n          let defaultRule = o[v + 's'].find(function (e) {\r\n            return !e.edgeRole\r\n          })\r\n          let edgeRule\r\n          if (edgeShape instanceof ORYX_Edge) {\r\n            edgeRule = o[v + 's'].find(function (e) {\r\n              return this._hasRole(edgeShape, e.edgeRole)\r\n            }.bind(this))\r\n          }\r\n          layout[v][d] = Math.max(edgeRule ? edgeRule[d] : defaultRule[d], layout[v][d] || 0)\r\n        }.bind(this))\r\n      }\r\n    }.bind(this)\r\n\r\n    // For each role\r\n    shape.getStencil().roles().each(function (role) {\r\n      // check if there are layout information\r\n      if (this._layoutRules[role]) {\r\n        // if so, parse those information to the 'layout' variable\r\n        parseValues(this._layoutRules[role], 'in')\r\n        parseValues(this._layoutRules[role], 'out')\r\n      }\r\n    }.bind(this));\r\n\r\n    // Make sure, that every attribute has an value,\r\n    // otherwise set 1\r\n    ['in', 'out'].each(function (v) {\r\n      ['t', 'r', 'b', 'l'].each(function (d) {\r\n        layout[v][d] = layout[v][d] !== undefined ? layout[v][d] : 1\r\n      })\r\n    })\r\n\r\n    return layout\r\n  }\r\n\r\n  /** End layouting rules' methods */\r\n\r\n  /** Helper methods */\r\n\r\n  /**\r\n   * Checks wether a shape contains the given role or the role is equal the stencil id\r\n   * @param {ORYX.Core.Shape} shape\r\n   * @param {String} role\r\n   */\r\n  _hasRole (shape, role) {\r\n    if (!(shape instanceof ORYX_Shape) || !role) {\r\n      return\r\n    }\r\n    const isRole = shape.getStencil().roles().any(function (r) {\r\n      return r == role\r\n    })\r\n\r\n    return isRole || shape.getStencil().id() == (shape.getStencil().namespace() + role)\r\n  }\r\n  /**\r\n   *\r\n   * @param {String}\r\n   *            role\r\n   *\r\n   * @return {Array} Returns an array of stencils that can act as role.\r\n   */\r\n  _stencilsWithRole (role) {\r\n    return this._stencils.findAll(function (stencil) {\r\n      return (stencil.roles().member(role)) ? true : false\r\n    })\r\n  }\r\n  /**\r\n   *\r\n   * @param {String}\r\n   *            role\r\n   *\r\n   * @return {Array} Returns an array of stencils that can act as role and\r\n   *         have the type 'edge'.\r\n   */\r\n  _edgesWithRole (role) {\r\n    return this._stencils.findAll(function (stencil) {\r\n      return (stencil.roles().member(role) && stencil.type() === 'edge') ? true : false\r\n    })\r\n  }\r\n  /**\r\n   *\r\n   * @param {String}\r\n   *            role\r\n   *\r\n   * @return {Array} Returns an array of stencils that can act as role and\r\n   *         have the type 'node'.\r\n   */\r\n  _nodesWithRole (role) {\r\n    return this._stencils.findAll(function (stencil) {\r\n      return (stencil.roles().member(role) && stencil.type() === 'node') ? true : false\r\n    })\r\n  }\r\n  /**\r\n   *\r\n   * @param {ORYX.Core.StencilSet.Stencil}\r\n   *            parent\r\n   * @param {ORYX.Core.StencilSet.Stencil}\r\n   *            child\r\n   *\r\n   * @returns {Boolean} Returns the maximum occurrence of shapes of the\r\n   *          stencil's type inside the parent.\r\n   */\r\n  _getMaximumOccurrence (parent, child) {\r\n    let max\r\n    child.roles().each((function (role) {\r\n      let cardRule = this._cardinalityRules.get(role)\r\n      if (cardRule && cardRule.maximumOccurrence) {\r\n        if (max) {\r\n          max = Math.min(max, cardRule.maximumOccurrence)\r\n        } else {\r\n          max = cardRule.maximumOccurrence\r\n        }\r\n      }\r\n    }).bind(this))\r\n\r\n    return max\r\n  }\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args sourceStencil: ORYX.Core.Node edgeStencil:\r\n   *            ORYX.Core.StencilSet.Stencil\r\n   *\r\n   * @return {Boolean} Returns, the maximum number of outgoing edges of the\r\n   *         type specified by edgeStencil of the sourceShape.\r\n   */\r\n  _getMaximumNumberOfOutgoingEdge (args) {\r\n    if (!args ||\r\n      !args.sourceStencil ||\r\n      !args.edgeStencil) {\r\n      return false\r\n    }\r\n\r\n    let max\r\n    args.sourceStencil.roles().each((function (role) {\r\n      let cardRule = this._cardinalityRules.get(role)\r\n      if (cardRule && cardRule.outgoingEdges) {\r\n        args.edgeStencil.roles().each(function (edgeRole) {\r\n          let oe = cardRule.outgoingEdges[edgeRole]\r\n          if (oe && oe.maximum) {\r\n            if (max) {\r\n              max = Math.min(max, oe.maximum)\r\n            } else {\r\n              max = oe.maximum\r\n            }\r\n          }\r\n        })\r\n      }\r\n    }).bind(this))\r\n\r\n    return max\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object}\r\n   *            args targetStencil: ORYX.Core.StencilSet.Stencil edgeStencil:\r\n   *            ORYX.Core.StencilSet.Stencil\r\n   *\r\n   * @return {Boolean} Returns the maximum number of incoming edges of the\r\n   *         type specified by edgeStencil of the targetShape.\r\n   */\r\n  _getMaximumNumberOfIncomingEdge (args) {\r\n    if (!args ||\r\n      !args.targetStencil ||\r\n      !args.edgeStencil) {\r\n      return false\r\n    }\r\n\r\n    let max\r\n    args.targetStencil.roles().each((function (role) {\r\n      let cardRule = this._cardinalityRules[role]\r\n      if (cardRule && cardRule.incomingEdges) {\r\n        args.edgeStencil.roles().each(function (edgeRole) {\r\n          let ie = cardRule.incomingEdges[edgeRole]\r\n          if (ie && ie.maximum) {\r\n            if (max) {\r\n              max = Math.min(max, ie.maximum)\r\n            } else {\r\n              max = ie.maximum\r\n            }\r\n          }\r\n        })\r\n      }\r\n    }).bind(this))\r\n\r\n    return max\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {ORYX.Core.StencilSet.Stencil}\r\n   *            edgeStencil\r\n   *\r\n   * @return {Hash} Returns a hash map of all connection rules for\r\n   *         edgeStencil.\r\n   */\r\n  _getConnectionRulesOfEdgeStencil (edgeStencil) {\r\n    let edgeRules = new Hash()\r\n    edgeStencil.roles().each((function (role) {\r\n      if (this._connectionRules.get(role)) {\r\n        this._connectionRules.get(role).each(function (cr) {\r\n          if (edgeRules.get(cr.key)) {\r\n            edgeRules.set(cr.key, edgeRules.get([cr.key]).concat(cr.value))\r\n          } else {\r\n            edgeRules.set(cr.key, cr.value)\r\n          }\r\n        })\r\n      }\r\n    }).bind(this))\r\n\r\n    return edgeRules\r\n  }\r\n\r\n  _isRoleOfOtherNamespace (role) {\r\n    return (role.indexOf('#') > 0)\r\n  }\r\n\r\n  toString () {\r\n    return 'Rules'\r\n  }\r\n}","import ORYX_Log from '../../Log'\r\nimport Stencil from './Stencil'\r\n\r\nexport default class StencilSet {\r\n  /**\r\n   * @param source {URL} A reference to the stencil set specification.\r\n   *\r\n   */\r\n  constructor (baseUrl, data) {\r\n    this._extensions = new Hash()\r\n    this._baseUrl = baseUrl\r\n    this._jsonObject = {}\r\n    this._stencils = new Hash()\r\n    this._availableStencils = new Hash()\r\n\r\n    this._init(data)\r\n  }\r\n  /**\r\n   * Finds a root stencil in this stencil set. There may be many of these. If\r\n   * there are, the first one found will be used. In Firefox, this is the\r\n   * topmost definition in the stencil set description file.\r\n   */\r\n  findRootStencilName () {\r\n    // find any stencil that may be root.\r\n    let rootStencil = this._stencils.values().find(function (stencil) {\r\n      return stencil._jsonStencil.mayBeRoot\r\n    })\r\n\r\n    // if there is none, just guess the first.\r\n    if (!rootStencil) {\r\n      ORYX_Log.warn('Did not find any stencil that may be root. Taking a guess.')\r\n      rootStencil = this._stencils.values()[0]\r\n    }\r\n\r\n    // return its id.\r\n    return rootStencil.id()\r\n  }\r\n\r\n  /**\r\n   * @param {ORYX.Core.StencilSet.StencilSet} stencilSet\r\n   * @return {Boolean} True, if stencil set has the same namespace.\r\n   */\r\n  equals (stencilSet) {\r\n    return (this.namespace() === stencilSet.namespace())\r\n  }\r\n\r\n  /**\r\n   * @param {Oryx.Core.StencilSet.Stencil} rootStencil If rootStencil is defined, it only returns stencils\r\n   *      that could be (in)direct child of that stencil.\r\n   */\r\n  stencils (rootStencil, rules, sortByGroup) {\r\n    if (rootStencil && rules) {\r\n      const stencils = this._availableStencils.values()\r\n      let containers = [rootStencil]\r\n      let checkedContainers = []\r\n      let result = []\r\n\r\n      while (containers.size() > 0) {\r\n        let container = containers.pop()\r\n        checkedContainers.push(container)\r\n        let children = stencils.findAll(function (stencil) {\r\n          let args = {\r\n            containingStencil: container,\r\n            containedStencil: stencil\r\n          }\r\n          return rules.canContain(args)\r\n        })\r\n        for (let i = 0; i < children.size(); i++) {\r\n          if (!checkedContainers.member(children[i])) {\r\n            containers.push(children[i])\r\n          }\r\n        }\r\n        result = result.concat(children).uniq()\r\n      }\r\n\r\n      // Sort the result to the origin order\r\n      result = result.sortBy(function (stencil) {\r\n        return stencils.indexOf(stencil)\r\n      })\r\n\r\n      if (sortByGroup) {\r\n        result = result.sortBy(function (stencil) {\r\n          return stencil.groups().first()\r\n        })\r\n      }\r\n\r\n      let edges = stencils.findAll(function (stencil) {\r\n        return stencil.type() == 'edge'\r\n      })\r\n      result = result.concat(edges)\r\n\r\n      return result\r\n\r\n    } else {\r\n      if (sortByGroup) {\r\n        return this._availableStencils.values().sortBy(function (stencil) {\r\n          return stencil.groups().first()\r\n        })\r\n      } else {\r\n        return this._availableStencils.values()\r\n      }\r\n    }\r\n  }\r\n\r\n  nodes () {\r\n    return this._availableStencils.values().findAll(function (stencil) {\r\n      return (stencil.type() === 'node')\r\n    })\r\n  }\r\n\r\n  edges () {\r\n    return this._availableStencils.values().findAll(function (stencil) {\r\n      return (stencil.type() === 'edge')\r\n    })\r\n  }\r\n\r\n  stencil (id) {\r\n    return this._stencils.get(id)\r\n  }\r\n\r\n  title () {\r\n    return this._jsonObject.title\r\n  }\r\n\r\n  description () {\r\n    return this._jsonObject.description\r\n  }\r\n\r\n  namespace () {\r\n    return this._jsonObject ? this._jsonObject.namespace : null\r\n  }\r\n\r\n  jsonRules () {\r\n    return this._jsonObject ? this._jsonObject.rules : null\r\n  }\r\n\r\n  source () {\r\n    return this._source\r\n  }\r\n\r\n  extensions () {\r\n    return this._extensions\r\n  }\r\n\r\n  addExtension (url) {\r\n    new Ajax.Request(url, {\r\n      method: 'GET',\r\n      asynchronous: false,\r\n      onSuccess: (function (transport) {\r\n        this.addExtensionDirectly(transport.responseText)\r\n      }).bind(this),\r\n      onFailure: (function (transport) {\r\n        ORYX_Log.debug('Loading stencil set extension file failed. The request returned an error.' + transport)\r\n      }).bind(this),\r\n      onException: (function (transport) {\r\n        ORYX_Log.debug('Loading stencil set extension file failed. The request returned an error.' + transport)\r\n      }).bind(this)\r\n\r\n    })\r\n  }\r\n\r\n  addExtensionDirectly (str) {\r\n    try {\r\n      // eval('var jsonExtension = ' + str)\r\n      let jsonExtension = str\r\n\r\n      if (!(jsonExtension['extends'].endsWith('#'))) {\r\n        jsonExtension['extends'] += '#'\r\n      }\r\n\r\n      if (jsonExtension['extends'] == this.namespace()) {\r\n        this._extensions.set(jsonExtension.namespace, jsonExtension)\r\n\r\n        let defaultPosition = this._stencils.keys().size()\r\n        // load new stencils\r\n        if (jsonExtension.stencils) {\r\n          $A(jsonExtension.stencils).each(function (stencil) {\r\n            defaultPosition++\r\n            let oStencil = new Stencil(stencil, this.namespace(), this._baseUrl, this, undefined, defaultPosition)\r\n            this._stencils.set(oStencil.id(), oStencil)\r\n            this._availableStencils.set(oStencil.id(), oStencil)\r\n          }.bind(this))\r\n        }\r\n\r\n        // load additional properties\r\n        if (jsonExtension.properties) {\r\n          let stencils = this._stencils.values()\r\n          stencils.each(function (stencil) {\r\n            let roles = stencil.roles()\r\n\r\n            jsonExtension.properties.each(function (prop) {\r\n              prop.roles.any(function (role) {\r\n                role = jsonExtension['extends'] + role\r\n                if (roles.member(role)) {\r\n                  prop.properties.each(function (property) {\r\n                    stencil.addProperty(property, jsonExtension.namespace)\r\n                  })\r\n                  return true\r\n                }\r\n                else\r\n                  return false\r\n              })\r\n            })\r\n          }.bind(this))\r\n        }\r\n\r\n        // remove stencil properties\r\n        if (jsonExtension.removeproperties) {\r\n          jsonExtension.removeproperties.each(function (remprop) {\r\n            let stencil = this.stencil(jsonExtension['extends'] + remprop.stencil)\r\n            if (stencil) {\r\n              remprop.properties.each(function (propId) {\r\n                stencil.removeProperty(propId)\r\n              })\r\n            }\r\n          }.bind(this))\r\n        }\r\n\r\n        // remove stencils\r\n        if (jsonExtension.removestencils) {\r\n          $A(jsonExtension.removestencils).each(function (remstencil) {\r\n            delete this._availableStencils[jsonExtension['extends'] + remstencil]\r\n          }.bind(this))\r\n        }\r\n      }\r\n    } catch (e) {\r\n      ORYX_Log.debug('StencilSet.addExtension: Something went wrong when initialising the stencil set extension. ' + e)\r\n    }\r\n  }\r\n\r\n  removeExtension (namespace) {\r\n    let jsonExtension = this._extensions[namespace]\r\n    if (jsonExtension) {\r\n      //unload extension's stencils\r\n      if (jsonExtension.stencils) {\r\n        $A(jsonExtension.stencils).each(function (stencil) {\r\n          let oStencil = new Stencil(stencil, this.namespace(), this._baseUrl, this)\r\n          this._stencils.unset(oStencil.id())\r\n          this._availableStencils.unset(oStencil.id())\r\n        }.bind(this))\r\n      }\r\n\r\n      // unload extension's properties\r\n      if (jsonExtension.properties) {\r\n        let stencils = this._stencils.values()\r\n        stencils.each(function (stencil) {\r\n          let roles = stencil.roles()\r\n\r\n          jsonExtension.properties.each(function (prop) {\r\n            prop.roles.any(function (role) {\r\n              role = jsonExtension['extends'] + role\r\n              if (roles.member(role)) {\r\n                prop.properties.each(function (property) {\r\n                  stencil.removeProperty(property.id)\r\n                })\r\n                return true\r\n              }\r\n              else\r\n                return false\r\n            })\r\n          })\r\n        }.bind(this))\r\n      }\r\n\r\n      // restore removed stencil properties\r\n      if (jsonExtension.removeproperties) {\r\n        jsonExtension.removeproperties.each(function (remprop) {\r\n          let stencil = this.stencil(jsonExtension['extends'] + remprop.stencil)\r\n          if (stencil) {\r\n            let stencilJson = $A(this._jsonObject.stencils).find(function (s) {\r\n              return s.id == stencil.id()\r\n            })\r\n            remprop.properties.each(function (propId) {\r\n              let propertyJson = $A(stencilJson.properties).find(function (p) {\r\n                return p.id == propId\r\n              })\r\n              stencil.addProperty(propertyJson, this.namespace())\r\n            }.bind(this))\r\n          }\r\n        }.bind(this))\r\n      }\r\n\r\n      // restore removed stencils\r\n      if (jsonExtension.removestencils) {\r\n        $A(jsonExtension.removestencils).each(function (remstencil) {\r\n          let sId = jsonExtension['extends'] + remstencil\r\n          this._availableStencils.set(sId, this._stencils.get(sId))\r\n        }.bind(this))\r\n      }\r\n    }\r\n    delete this._extensions[namespace]\r\n  }\r\n\r\n  __handleStencilset (response) {\r\n    this._jsonObject = response\r\n    // assert it was parsed.\r\n    if (!this._jsonObject) {\r\n      throw 'Error evaluating stencilset. It may be corrupt.'\r\n    }\r\n\r\n    // assert there is a namespace.\r\n    if (!this._jsonObject.namespace || this._jsonObject.namespace === '')\r\n      throw 'Namespace definition missing in stencilset.'\r\n\r\n    if (!(this._jsonObject.stencils instanceof Array))\r\n      throw 'Stencilset corrupt.'\r\n\r\n    // assert namespace ends with '#'.\r\n    if (!this._jsonObject.namespace.endsWith('#'))\r\n      this._jsonObject.namespace = this._jsonObject.namespace + '#'\r\n\r\n    // assert title and description are strings.\r\n    if (!this._jsonObject.title) this._jsonObject.title = ''\r\n    if (!this._jsonObject.description) this._jsonObject.description = ''\r\n  }\r\n\r\n  /**\r\n   * This method is called when the HTTP request to get the requested stencil\r\n   * set succeeds. The response is supposed to be a JSON representation\r\n   * according to the stencil set specification.\r\n   * @param {Object} response The JSON representation according to the\r\n   *      stencil set specification.\r\n   */\r\n  _init (response) {\r\n    // init and check consistency.\r\n    this.__handleStencilset(response)\r\n\r\n    let pps = new Hash()\r\n\r\n    // init property packages\r\n    if (this._jsonObject.propertyPackages) {\r\n      $A(this._jsonObject.propertyPackages).each((function (pp) {\r\n        pps.set(pp.name, pp.properties)\r\n      }).bind(this))\r\n    }\r\n\r\n    let defaultPosition = 0\r\n    // init each stencil\r\n    $A(this._jsonObject.stencils).each((function (stencil) {\r\n      defaultPosition++\r\n      // instantiate normally.\r\n      let oStencil = new Stencil(stencil, this.namespace(), this._baseUrl, this, pps, defaultPosition)\r\n      this._stencils.set(oStencil.id(), oStencil)\r\n      this._availableStencils.set(oStencil.id(), oStencil)\r\n    }).bind(this))\r\n  }\r\n\r\n  _cancelInit (response) {\r\n    this.errornous = true\r\n  }\r\n\r\n  toString () {\r\n    return 'StencilSet ' + this.title() + ' (' + this.namespace() + ')'\r\n  }\r\n}","/**\r\n * This class represents a stencil set. It offers methods for accessing\r\n *  the attributes of the stencil set description JSON file and the stencil set's\r\n *  stencils.\r\n */\r\nimport Stencil from './Stencil'\r\nimport Property from './Property'\r\nimport PropertyItem from './PropertyItem'\r\nimport ComplexPropertyItem from './ComplexPropertyItem'\r\nimport Rules from './Rules'\r\nimport _StencilSet from './StencilSet'\r\nimport _Index from './_Index'\r\nimport ORYX_Log from '../../Log'\r\n\r\n\r\nconst StencilSet = {\r\n  Stencil: Stencil,\r\n  Property: Property,\r\n  PropertyItem: PropertyItem,\r\n  ComplexPropertyItem: ComplexPropertyItem,\r\n  Rules: Rules,\r\n  StencilSet: _StencilSet,\r\n  Index: _Index,\r\n  // storage for loaded stencil sets by namespace\r\n  _stencilSetsByNamespace: new Hash(),\r\n  // storage for stencil sets by url\r\n  _stencilSetsByUrl: new Hash(),\r\n  // storage for stencil set namespaces by editor instances\r\n  _StencilSetNSByEditorInstance: new Hash(),\r\n  // storage for rules by editor instances\r\n  _rulesByEditorInstance: new Hash(),\r\n\r\n  /**\r\n   *\r\n   * @param {String} namespace\r\n   *\r\n   * @return {ORYX.Core.StencilSet.StencilSet} Returns the stencil set with the specified\r\n   *                    namespace.\r\n   *\r\n   * The method can handle namespace strings like\r\n   *  http://www.example.org/stencilset\r\n   *  http://www.example.org/stencilset#\r\n   *  http://www.example.org/stencilset#ANode\r\n   */\r\n  stencilSet:function (namespace) {\r\n    ORYX_Log.trace('Getting stencil set %0', namespace)\r\n    let splitted = namespace.split('#', 1)\r\n    if (splitted.length === 1) {\r\n      ORYX_Log.trace('Getting stencil set %0', splitted[0])\r\n      return this._stencilSetsByNamespace.get(splitted[0] + '#')\r\n    } else {\r\n      return undefined\r\n    }\r\n  },\r\n  /**\r\n   *\r\n   * @param {String} editorId\r\n   *\r\n   * @return {Hash} Returns a hash map with all stencil sets that are loaded by\r\n   *          the editor with the editorId.\r\n   */\r\n  stencilSets:function (editorId) {\r\n    let stencilSetNSs = this._StencilSetNSByEditorInstance.get(editorId)\r\n    let stencilSets = new Hash()\r\n    const me = this\r\n    if (stencilSetNSs) {\r\n      stencilSetNSs.each(function (stencilSetNS) {\r\n        let stencilSet = me.stencilSet(stencilSetNS)\r\n        stencilSets.set(stencilSet.namespace(), stencilSet)\r\n      })\r\n    }\r\n    return stencilSets\r\n  },\r\n  /**\r\n   * @param {String} id\r\n   * @return {ORYX.Core.StencilSet.Stencil} Returns the stencil specified by the id.\r\n   *\r\n   * The id must be unique and contains the namespace of the stencil's stencil set.\r\n   * e.g. http://www.example.org/stencilset#ANode\r\n   */\r\n  stencil:function (id) {\r\n    ORYX_Log.trace('Getting stencil for %0', id)\r\n    let ss = this.stencilSet(id)\r\n    if (ss) {\r\n      return ss.stencil(id)\r\n    } else {\r\n      ORYX_Log.trace('Cannot fild stencil for %0', id)\r\n      return undefined\r\n    }\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param {String} editorId\r\n   *\r\n   * @return {ORYX.Core.StencilSet.Rules} Returns the rules object for the editor\r\n   *                  specified by its editor id.\r\n   */\r\n  rules:function (editorId) {\r\n    if (!this._rulesByEditorInstance.get(editorId)) {\r\n      this._rulesByEditorInstance.set(editorId, new Rules())\r\n    }\r\n    return this._rulesByEditorInstance.get(editorId)\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param {String} url\r\n   * @param {String} editorId\r\n   *\r\n   * Loads a stencil set from url, if it is not already loaded.\r\n   * It also stores which editor instance loads the stencil set and\r\n   * initializes the Rules object for the editor instance.\r\n   */\r\n  loadStencilSet:function (url, stencilSet, editorId) {\r\n    let namespace = stencilSet.namespace()\r\n\r\n    // store stencil set\r\n    this._stencilSetsByNamespace.set(namespace, stencilSet)\r\n    // store stencil set by url\r\n    this._stencilSetsByUrl.set(url, stencilSet)\r\n\r\n    // store which editorInstance loads the stencil set\r\n    if (this._StencilSetNSByEditorInstance.get(editorId)) {\r\n      this._StencilSetNSByEditorInstance.get(editorId).push(namespace)\r\n    } else {\r\n      this._StencilSetNSByEditorInstance.set(editorId, [namespace])\r\n    }\r\n\r\n    // store the rules for the editor instance\r\n    if (this._rulesByEditorInstance.get(editorId)) {\r\n      this._rulesByEditorInstance.get(editorId).initializeRules(stencilSet)\r\n    } else {\r\n      let rules = new Rules()\r\n      rules.initializeRules(stencilSet)\r\n      this._rulesByEditorInstance.set(editorId, rules)\r\n    }\r\n  }\r\n}\r\n\r\nexport default StencilSet","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGiSURBVDiNrZOxbhNBEIb//+QmBR1PkCIvYLtxKvqkgCDd3rmxKICO0FhCBClCQkoFoYMoitL4vJZAKXBPZSMU/AIpeIJ0NBTgj8Lr6CRiIQQjrXb23/lnZmdmDaguIYQN26WkZlqSNJM0A6oY40XdPlsqtl2W5a7tCbAGHEtqSWoBx8Ca7Umy8RUPkG3neT62fSPLst5gMPiqa6Tb7a7P5/NT4NtoNNoCMKCyLHeBV9eRVontx1VVHTrP8w3bE0k300UE3q4gPQBCOl4Cmw3bJXBiuy/pCOjZ/lxV1WGdnLK8I+lI0v3EKTItKj1NEc6AHeCgLMt+jdwHDoAd22cJnkpqZZKats+XxjHGse1tYL8oir2iKPaAfdvbMcZx7TnnkpqNP9TqWdp/rjJoaDEg7WVrQwhbtt9Jem77oyQBt4APIYS7WZb9SFjb9qyhxZR1Enjbdg94EmN8WQv0KYTw3fZ74DRhHUlffmujpJGkNysyfigpT/olsPnvg/RfRjl5dFEUj4CnwImk6bK9QFtSx/Y92y+Gw+FrEvHKwVL+9jv/AlqzAw70R2T4AAAAAElFTkSuQmCC\"","import ORYX_Utils from '../../Utils'\r\nimport ORYX_Log from '../../Log'\r\n\r\nimport StencilSet_Stencil from './Stencil'\r\n\r\nexport default class _Index {\r\n  /**\r\n   * Constructor\r\n   * @param source {URL} A reference to the stencil set specification.\r\n   *\r\n   */\r\n  constructor (baseUrl, data) {\r\n    this._extensions = new Hash()\r\n    this._baseUrl = baseUrl\r\n    this._jsonObject = {}\r\n    this._stencils = new Hash()\r\n    this._availableStencils = new Hash()\r\n    this._init(data)\r\n  }\r\n\r\n  /**\r\n   * Finds a root stencil in this stencil set. There may be many of these. If\r\n   * there are, the first one found will be used. In Firefox, this is the\r\n   * topmost definition in the stencil set description file.\r\n   */\r\n  findRootStencilName () {\r\n    // find any stencil that may be root.\r\n    let rootStencil = this._stencils.values().find(function (stencil) {\r\n      return stencil._jsonStencil.mayBeRoot\r\n    })\r\n\r\n    // if there is none, just guess the first.\r\n    if (!rootStencil) {\r\n      ORYX_Log.warn('Did not find any stencil that may be root. Taking a guess.')\r\n      rootStencil = this._stencils.values()[0]\r\n    }\r\n\r\n    // return its id.\r\n    return rootStencil.id()\r\n  }\r\n\r\n  /**\r\n   * @param {ORYX.Core.StencilSet.StencilSet} stencilSet\r\n   * @return {Boolean} True, if stencil set has the same namespace.\r\n   */\r\n  equals (stencilSet) {\r\n    return (this.namespace() === stencilSet.namespace())\r\n  }\r\n\r\n  /**\r\n   * @param {Oryx.Core.StencilSet.Stencil} rootStencil If rootStencil is defined, it only returns stencils\r\n   *      that could be (in)direct child of that stencil.\r\n   */\r\n  stencils (rootStencil, rules, sortByGroup) {\r\n    if (rootStencil && rules) {\r\n      let stencils = this._availableStencils.values()\r\n      let containers = [rootStencil]\r\n      let checkedContainers = []\r\n\r\n      let result = []\r\n\r\n      while (containers.size() > 0) {\r\n        let container = containers.pop()\r\n        checkedContainers.push(container)\r\n        let children = stencils.findAll(function (stencil) {\r\n          let args = {\r\n            containingStencil: container,\r\n            containedStencil: stencil\r\n          }\r\n          return rules.canContain(args)\r\n        })\r\n        for (let i = 0; i < children.size(); i++) {\r\n          if (!checkedContainers.member(children[i])) {\r\n            containers.push(children[i])\r\n          }\r\n        }\r\n        result = result.concat(children).uniq()\r\n      }\r\n\r\n      // Sort the result to the origin order\r\n      result = result.sortBy(function (stencil) {\r\n        return stencils.indexOf(stencil)\r\n      })\r\n\r\n\r\n      if (sortByGroup) {\r\n        result = result.sortBy(function (stencil) {\r\n          return stencil.groups().first()\r\n        })\r\n      }\r\n\r\n      let edges = stencils.findAll(function (stencil) {\r\n        return stencil.type() == 'edge'\r\n      })\r\n      result = result.concat(edges)\r\n\r\n      return result\r\n\r\n    } else {\r\n      if (sortByGroup) {\r\n        return this._availableStencils.values().sortBy(function (stencil) {\r\n          return stencil.groups().first()\r\n        })\r\n      } else {\r\n        return this._availableStencils.values()\r\n      }\r\n    }\r\n  }\r\n\r\n  nodes () {\r\n    return this._availableStencils.values().findAll(function (stencil) {\r\n      return (stencil.type() === 'node')\r\n    })\r\n  }\r\n\r\n  edges () {\r\n    return this._availableStencils.values().findAll(function (stencil) {\r\n      return (stencil.type() === 'edge')\r\n    })\r\n  }\r\n\r\n  stencil (id) {\r\n    return this._stencils.get(id)\r\n  }\r\n\r\n  title () {\r\n    return ORYX_Utils.getTranslation(this._jsonObject, 'title')\r\n  }\r\n\r\n  description () {\r\n    return ORYX_Utils.getTranslation(this._jsonObject, 'description')\r\n  }\r\n\r\n  namespace () {\r\n    return this._jsonObject ? this._jsonObject.namespace : null\r\n  }\r\n\r\n  jsonRules () {\r\n    return this._jsonObject ? this._jsonObject.rules : null\r\n  }\r\n\r\n  source () {\r\n    return this._source\r\n  }\r\n\r\n  extensions () {\r\n    return this._extensions\r\n  }\r\n\r\n  addExtension (url) {\r\n    new Ajax.Request(url, {\r\n      method: 'GET',\r\n      asynchronous: false,\r\n      onSuccess: (function (transport) {\r\n        this.addExtensionDirectly(transport.responseText)\r\n      }).bind(this),\r\n      onFailure: (function (transport) {\r\n        ORYX_Log.debug('Loading stencil set extension file failed. The request returned an error.' + transport)\r\n      }).bind(this),\r\n      onException: (function (transport) {\r\n        ORYX_Log.debug('Loading stencil set extension file failed. The request returned an error.' + transport)\r\n      }).bind(this)\r\n\r\n    })\r\n  }\r\n\r\n  addExtensionDirectly (str) {\r\n    try {\r\n      eval('var jsonExtension = ' + str)\r\n\r\n      if (!(jsonExtension['extends'].endsWith('#')))\r\n        jsonExtension['extends'] += '#'\r\n\r\n      if (jsonExtension['extends'] == this.namespace()) {\r\n        this._extensions.set(jsonExtension.namespace, jsonExtension)\r\n\r\n        let defaultPosition = this._stencils.keys().size()\r\n        // load new stencils\r\n        if (jsonExtension.stencils) {\r\n          $A(jsonExtension.stencils).each(function (stencil) {\r\n            defaultPosition++\r\n            var oStencil = new StencilSet_Stencil(stencil, this.namespace(), this._baseUrl, this, undefined, defaultPosition)\r\n            this._stencils.set(oStencil.id(), oStencil)\r\n            this._availableStencils.set(oStencil.id(), oStencil)\r\n          }.bind(this))\r\n        }\r\n\r\n        // load additional properties\r\n        if (jsonExtension.properties) {\r\n          let stencils = this._stencils.values()\r\n\r\n          stencils.each(function (stencil) {\r\n            let roles = stencil.roles()\r\n\r\n            jsonExtension.properties.each(function (prop) {\r\n              prop.roles.any(function (role) {\r\n                role = jsonExtension['extends'] + role\r\n                if (roles.member(role)) {\r\n                  prop.properties.each(function (property) {\r\n                    stencil.addProperty(property, jsonExtension.namespace)\r\n                  })\r\n\r\n                  return true\r\n                } else {\r\n                  return false\r\n                }\r\n              })\r\n            })\r\n          }.bind(this))\r\n        }\r\n\r\n        // remove stencil properties\r\n        if (jsonExtension.removeproperties) {\r\n          jsonExtension.removeproperties.each(function (remprop) {\r\n            let stencil = this.stencil(jsonExtension['extends'] + remprop.stencil)\r\n            if (stencil) {\r\n              remprop.properties.each(function (propId) {\r\n                stencil.removeProperty(propId)\r\n              })\r\n            }\r\n          }.bind(this))\r\n        }\r\n\r\n        // remove stencils\r\n        if (jsonExtension.removestencils) {\r\n          $A(jsonExtension.removestencils).each(function (remstencil) {\r\n            delete this._availableStencils[jsonExtension['extends'] + remstencil]\r\n          }.bind(this))\r\n        }\r\n      }\r\n    } catch (e) {\r\n      ORYX_Log.debug('StencilSet.addExtension: Something went wrong when initialising the stencil set extension. ' + e)\r\n    }\r\n  }\r\n\r\n  removeExtension (namespace) {\r\n    let jsonExtension = this._extensions[namespace]\r\n    if (jsonExtension) {\r\n\r\n      // unload extension's stencils\r\n      if (jsonExtension.stencils) {\r\n        $A(jsonExtension.stencils).each(function (stencil) {\r\n          let oStencil = new StencilSet_Stencil(stencil, this.namespace(), this._baseUrl, this)\r\n          this._stencils.unset(oStencil.id())\r\n          this._availableStencils.unset(oStencil.id())\r\n        }.bind(this))\r\n      }\r\n\r\n      // unload extension's properties\r\n      if (jsonExtension.properties) {\r\n        let stencils = this._stencils.values()\r\n\r\n        stencils.each(function (stencil) {\r\n          let roles = stencil.roles()\r\n\r\n          jsonExtension.properties.each(function (prop) {\r\n            prop.roles.any(function (role) {\r\n              role = jsonExtension['extends'] + role\r\n              if (roles.member(role)) {\r\n                prop.properties.each(function (property) {\r\n                  stencil.removeProperty(property.id)\r\n                })\r\n\r\n                return true\r\n              }\r\n              else {\r\n                return false\r\n              }\r\n            })\r\n          })\r\n        }.bind(this))\r\n      }\r\n\r\n      // restore removed stencil properties\r\n      if (jsonExtension.removeproperties) {\r\n        jsonExtension.removeproperties.each(function (remprop) {\r\n          let stencil = this.stencil(jsonExtension['extends'] + remprop.stencil)\r\n          if (stencil) {\r\n            let stencilJson = $A(this._jsonObject.stencils).find(function (s) {\r\n              return s.id == stencil.id()\r\n            })\r\n            remprop.properties.each(function (propId) {\r\n              let propertyJson = $A(stencilJson.properties).find(function (p) {\r\n                return p.id == propId\r\n              })\r\n              stencil.addProperty(propertyJson, this.namespace())\r\n            }.bind(this))\r\n          }\r\n        }.bind(this))\r\n      }\r\n\r\n      // restore removed stencils\r\n      if (jsonExtension.removestencils) {\r\n        $A(jsonExtension.removestencils).each(function (remstencil) {\r\n          let sId = jsonExtension['extends'] + remstencil\r\n          this._availableStencils.set(sId, this._stencils.get(sId))\r\n        }.bind(this))\r\n      }\r\n    }\r\n    delete this._extensions[namespace]\r\n  }\r\n\r\n  __handleStencilset (response) {\r\n    this._jsonObject = response\r\n    // assert it was parsed.\r\n    if (!this._jsonObject) {\r\n      throw 'Error evaluating stencilset. It may be corrupt.'\r\n    }\r\n\r\n    // assert there is a namespace.\r\n    if (!this._jsonObject.namespace || this._jsonObject.namespace === '')\r\n      throw 'Namespace definition missing in stencilset.'\r\n\r\n    if (!(this._jsonObject.stencils instanceof Array))\r\n      throw 'Stencilset corrupt.'\r\n\r\n    // assert namespace ends with '#'.\r\n    if (!this._jsonObject.namespace.endsWith('#'))\r\n      this._jsonObject.namespace += '#'\r\n\r\n    // assert title and description are strings.\r\n    if (!this._jsonObject.title) this._jsonObject.title = ''\r\n    if (!this._jsonObject.description) this._jsonObject.description = ''\r\n  }\r\n\r\n  /**\r\n   * This method is called when the HTTP request to get the requested stencil\r\n   * set succeeds. The response is supposed to be a JSON representation\r\n   * according to the stencil set specification.\r\n   * @param {Object} response The JSON representation according to the\r\n   *      stencil set specification.\r\n   */\r\n  _init (response) {\r\n    // init and check consistency.\r\n    this.__handleStencilset(response)\r\n\r\n    let pps = new Hash()\r\n    // init property packages\r\n    if (this._jsonObject.propertyPackages) {\r\n      $A(this._jsonObject.propertyPackages).each((function (pp) {\r\n        pps.set(pp.name, pp.properties)\r\n      }).bind(this))\r\n    }\r\n\r\n    let defaultPosition = 0\r\n\r\n    // init each stencil\r\n    $A(this._jsonObject.stencils).each((function (stencil) {\r\n      defaultPosition++\r\n\r\n      // instantiate normally.\r\n      let oStencil = new StencilSet_Stencil(stencil, this.namespace(), this._baseUrl, this, pps, defaultPosition)\r\n      this._stencils.set(oStencil.id(), oStencil)\r\n      this._availableStencils.set(oStencil.id(), oStencil)\r\n    }).bind(this))\r\n  }\r\n\r\n  _cancelInit (response) {\r\n    this.errornous = true\r\n  }\r\n\r\n  toString () {\r\n    return 'StencilSet ' + this.title() + ' (' + this.namespace() + ')'\r\n  }\r\n}","import AbstractShape from './AbstractShape'\r\nimport UIObject from './UIObject'\r\nimport ORYX_Canvas from './Canvas'\r\nimport ORYX_Controls from './Controls'\r\n\r\nimport ERDF from '../ERDF'\r\nimport ORYX_Utils from '../Utils'\r\nimport ORYX_Log from '../Log'\r\nimport ORYX_Config from '../CONFIG'\r\n\r\n/**\r\n * @classDescription Base class for Shapes.\r\n * @extends ORYX.Core.AbstractShape\r\n */\r\nexport default class Shape extends AbstractShape {\r\n  constructor (options, stencil, facade) {\r\n    super(...arguments)\r\n    this.facade = facade\r\n    this.dockers = []\r\n    this.magnets = []\r\n\r\n    this._defaultMagnet\r\n\r\n    this.incoming = []\r\n    this.outgoing = []\r\n    this.nodes = []\r\n    this._dockerChangedCallback = this._dockerChanged.bind(this)\r\n\r\n    // Hash map for all labels. Labels are not treated as children of shapes.\r\n    this._labels = new Hash()\r\n\r\n    // create SVG node\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/2000/svg',\r\n      null,\r\n      ['g', { id: 'svg-' + this.resourceId },\r\n        ['g', { 'class': 'stencils' },\r\n          ['g', { 'class': 'me' }],\r\n          ['g', { 'class': 'children', style: 'overflow:hidden' }],\r\n          ['g', { 'class': 'edge' }]\r\n        ],\r\n        ['g', { 'class': 'controls' },\r\n          ['g', { 'class': 'dockers' }],\r\n          ['g', { 'class': 'magnets' }]\r\n        ],\r\n        ['g', { 'class': 'helper' }]\r\n      ])\r\n  }\r\n\r\n  /**\r\n   * If changed flag is set, refresh method is called.\r\n   */\r\n  update () {\r\n    //if(this.isChanged) {\r\n    //this.layout();\r\n    //}\r\n  }\r\n\r\n  /**\r\n   * !!!Not called from any sub class!!!\r\n   */\r\n  _update () {\r\n\r\n  }\r\n\r\n  /**\r\n   * Calls the super class refresh method\r\n   *  and updates the svg elements that are referenced by a property.\r\n   */\r\n  refresh () {\r\n    // call base class refresh method\r\n    // arguments.callee.$.refresh.apply(this, arguments);\r\n    super.refresh()\r\n    if (this.node.ownerDocument) {\r\n      // adjust SVG to properties' values\r\n      const me = this\r\n      this.propertiesChanged.each((function (propChanged) {\r\n        if (propChanged.value) {\r\n          let prop = this.properties.get(propChanged.key)\r\n          let property = this.getStencil().property(propChanged.key)\r\n          if (property != undefined) {\r\n            this.propertiesChanged.set(propChanged.key, false)\r\n\r\n            // console.log('property', propChanged.key)\r\n            // handle choice properties\r\n            if (property.type() == ORYX_Config.TYPE_CHOICE) {\r\n              //iterate all references to SVG elements\r\n              property.refToView().each((function (ref) {\r\n                // if property is referencing a label, update the label\r\n                if (ref !== '') {\r\n                  let label = this._labels.get(this.id + ref)\r\n                  if (label && property.item(prop)) {\r\n                    label.text(property.item(prop).title())\r\n                  }\r\n                }\r\n              }).bind(this))\r\n\r\n              //if the choice's items are referencing SVG elements\r\n              // show the selected and hide all other referenced SVG\r\n              // elements\r\n              let refreshedSvgElements = new Hash()\r\n              property.items().each((function (item) {\r\n                item.refToView().each((function (itemRef) {\r\n                  if (itemRef == '') {\r\n                    return\r\n                  }\r\n\r\n                  let svgElem = this.node.ownerDocument.getElementById(this.id + itemRef)\r\n\r\n                  if (!svgElem) {\r\n                    return\r\n                  }\r\n\r\n                  /* Do not refresh the same svg element multiple times */\r\n                  if (!refreshedSvgElements.get(svgElem.id) || prop == item.value()) {\r\n                    svgElem.setAttributeNS(null, 'display', ((prop == item.value()) ? 'inherit' : 'none'))\r\n                    refreshedSvgElements.set(svgElem.id, svgElem)\r\n                  }\r\n\r\n                  // Reload the href if there is an image-tag\r\n                  if (ORYX_Utils.checkClassType(svgElem, SVGImageElement)) {\r\n                    svgElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', svgElem.getAttributeNS('http://www.w3.org/1999/xlink', 'href'))\r\n                  }\r\n                }).bind(this))\r\n              }).bind(this))\r\n\r\n            } else {\r\n              // handle properties that are not of type choice\r\n              // iterate all references to SVG elements\r\n              property.refToView().each((function (ref) {\r\n                // console.log('ref==========', ref)\r\n                // if the property does not reference an SVG element,\r\n                // do nothing\r\n                if (ref === '') {\r\n                  return\r\n                }\r\n\r\n                let refId = this.id + ref\r\n\r\n                // console.log(555, ref, refId, property.type())\r\n                if (property.type() === ORYX_Config.TYPE_FLOWABLE_MULTIINSTANCE) {\r\n                  // flowable-multiinstance\r\n\r\n                  if (ref === 'multiinstance') {\r\n                    let svgElemParallel = this.node.ownerDocument.getElementById(this.id + 'parallel')\r\n                    if (svgElemParallel) {\r\n                      if (prop === 'Parallel') {\r\n                        svgElemParallel.setAttributeNS(null, 'display', 'inherit')\r\n                      } else {\r\n                        svgElemParallel.setAttributeNS(null, 'display', 'none')\r\n                      }\r\n                    }\r\n\r\n                    let svgElemSequential = this.node.ownerDocument.getElementById(this.id + 'sequential')\r\n\r\n                    if (svgElemSequential) {\r\n                      if (prop === 'Sequential') {\r\n                        svgElemSequential.setAttributeNS(null, 'display', 'inherit')\r\n                      } else {\r\n                        svgElemSequential.setAttributeNS(null, 'display', 'none')\r\n                      }\r\n                    }\r\n                  }\r\n                  return\r\n\r\n                } else if (property.type() === 'cancelactivity') {\r\n                  let svgElemFrame = this.node.ownerDocument.getElementById(this.id + 'frame')\r\n                  let svgElemFrame2 = this.node.ownerDocument.getElementById(this.id + 'frame2')\r\n\r\n                  if (prop === 'true') {\r\n                    svgElemFrame.setAttributeNS(null, 'display', 'inherit')\r\n                    svgElemFrame2.setAttributeNS(null, 'display', 'inherit')\r\n                  } else {\r\n                    svgElemFrame.setAttributeNS(null, 'display', 'none')\r\n                    svgElemFrame2.setAttributeNS(null, 'display', 'none')\r\n                  }\r\n                } else if (property.type() === 'select') {\r\n                  if (ref === 'important_sign') {\r\n                    let svgElemParallel = this.node.ownerDocument.getElementById(this.id + 'important_sign')\r\n                    if (svgElemParallel) {\r\n                      if (prop === 'Parallel') {\r\n                        svgElemParallel.setAttributeNS(null, 'display', 'inherit')\r\n                        svgElemParallel.setAttributeNS(null, 'fill', 'red')\r\n                      } else if (prop === 'Sequential') {\r\n                        svgElemParallel.setAttributeNS(null, 'display', 'inherit')\r\n                        svgElemParallel.setAttributeNS(null, 'fill', 'orange')\r\n                      } else {\r\n                        svgElemParallel.setAttributeNS(null, 'display', 'none')\r\n                      }\r\n                    }\r\n                  }\r\n                  return\r\n                }\r\n\r\n                //get the SVG element\r\n                let svgElem = this.node.ownerDocument.getElementById(refId)\r\n\r\n                //if the SVG element can not be found\r\n                if (!svgElem || !(svgElem.ownerSVGElement)) {\r\n                  //if the referenced SVG element is a SVGAElement, it cannot\r\n                  // be found with getElementById (Firefox bug).\r\n                  // this is a work around\r\n                  if (property.type() === ORYX_Config.TYPE_URL ||\r\n                    property.type() === ORYX_Config.TYPE_DIAGRAM_LINK) {\r\n                    let svgElems = this.node.ownerDocument.getElementsByTagNameNS('http://www.w3.org/2000/svg', 'a')\r\n\r\n                    svgElem = $A(svgElems).find(function (elem) {\r\n                      return elem.getAttributeNS(null, 'id') === refId\r\n                    })\r\n\r\n                    if (!svgElem) {\r\n                      return\r\n                    }\r\n                  } else {\r\n                    //this.propertiesChanged[propChanged.key] = true;\r\n                    return\r\n                  }\r\n                }\r\n\r\n                if (property.complexAttributeToView()) {\r\n                  let label = this._labels.get(refId)\r\n\r\n                  if (label) {\r\n                    try {\r\n                      let propJson = prop.evalJSON()\r\n                      let value = propJson[property.complexAttributeToView()]\r\n                      label.text(value ? value : prop)\r\n                    } catch (e) {\r\n                      label.text(prop)\r\n                    }\r\n                  }\r\n\r\n                } else {\r\n                  switch (property.type()) {\r\n                    case ORYX_Config.TYPE_BOOLEAN: // boolean\r\n                      if (typeof prop == 'string') {\r\n                        prop = prop === 'true'\r\n                      }\r\n\r\n                      svgElem.setAttributeNS(null, 'display', (!(prop === property.inverseBoolean())) ? 'inherit' : 'none')\r\n\r\n                      break\r\n                    case ORYX_Config.TYPE_COLOR: // color\r\n                      if (property.fill()) {\r\n                        if (svgElem.tagName.toLowerCase() === 'stop') {\r\n                          if (prop) {\r\n                            if (property.lightness() && property.lightness() !== 1) {\r\n                              prop = ORYX_Utils.adjustLightness(prop, property.lightness())\r\n                            }\r\n\r\n                            svgElem.setAttributeNS(null, 'stop-color', prop)\r\n\r\n                            // Adjust stop color of the others\r\n                            if (svgElem.parentNode.tagName.toLowerCase() === 'radialgradient') {\r\n                              ORYX_Utils.adjustGradient(svgElem.parentNode, svgElem)\r\n                            }\r\n                          }\r\n\r\n                          // If there is no value, set opaque\r\n                          if (svgElem.parentNode.tagName.toLowerCase() === 'radialgradient') {\r\n                            $A(svgElem.parentNode.getElementsByTagName('stop')).each(function (stop) {\r\n                              stop.setAttributeNS(null, 'stop-opacity', prop ? stop.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'default-stop-opacity') || 1 : 0)\r\n                            }.bind(this))\r\n                          }\r\n                        } else {\r\n                          svgElem.setAttributeNS(null, 'fill', prop)\r\n                        }\r\n                      }\r\n                      if (property.stroke()) {\r\n                        svgElem.setAttributeNS(null, 'stroke', prop)\r\n                      }\r\n                      break\r\n                    case ORYX_Config.TYPE_STRING: // string\r\n                    case ORYX_Config.TYPE_EXPRESSION:\r\n                    case ORYX_Config.TYPE_DATASOURCE:\r\n                    case ORYX_Config.TYPE_INTEGER:\r\n                      let label = this._labels.get(refId)\r\n                      if (label) {\r\n                        label.text(prop)\r\n                      }\r\n                      break\r\n                    // case ORYX.CONFIG.TYPE_EXPRESSION:\r\n                    //   var label = this._labels.get(refId);\r\n                    //   if (label) {\r\n                    //     label.text(prop);\r\n                    //   }\r\n                    //   break;\r\n                    // case ORYX.CONFIG.TYPE_DATASOURCE:\r\n                    //   var label = this._labels.get(refId);\r\n                    //   if (label) {\r\n                    //     label.text(prop);\r\n                    //   }\r\n                    //   break;\r\n                    // case ORYX.CONFIG.TYPE_INTEGER:\r\n                    //   var label = this._labels.get(refId);\r\n                    //   if (label) {\r\n                    //     label.text(prop);\r\n                    //   }\r\n                    //   break;\r\n                    case ORYX_Config.TYPE_FLOAT:\r\n                      if (property.fillOpacity()) {\r\n                        svgElem.setAttributeNS(null, 'fill-opacity', prop)\r\n                      }\r\n                      if (property.strokeOpacity()) {\r\n                        svgElem.setAttributeNS(null, 'stroke-opacity', prop)\r\n                      }\r\n                      if (!property.fillOpacity() && !property.strokeOpacity()) {\r\n                        let label = this._labels.get(refId)\r\n                        if (label) {\r\n                          label.text(prop)\r\n                        }\r\n                      }\r\n                      break\r\n\r\n                    case ORYX_Config.TYPE_SUB_PROCESS_LINK: // subprocess-link\r\n                      if (ref == 'subprocesslink') {\r\n                        let onclickAttr = svgElem.getAttributeNodeNS('', 'onclick')\r\n                        let styleAttr = svgElem.getAttributeNodeNS('', 'style')\r\n\r\n                        if (onclickAttr) {\r\n                          if (prop && prop.id) {\r\n                            if (styleAttr) {\r\n                              styleAttr.textContent = 'cursor:pointer;'\r\n                            }\r\n                            onclickAttr.textContent = 'FLOWABLE.TOOLBAR.ACTIONS.navigateToProcess(' + prop.id + ');return false;'\r\n                          } else {\r\n                            if (styleAttr) {\r\n                              styleAttr.textContent = 'cursor:default;'\r\n                            }\r\n                            onclickAttr.textContent = 'return false;'\r\n                          }\r\n                        }\r\n                      }\r\n                      break\r\n\r\n                    case ORYX_Config.TYPE_URL:\r\n                      break\r\n\r\n                  }\r\n                }\r\n              }).bind(this))\r\n            }\r\n          }\r\n        }\r\n      }).bind(this))\r\n\r\n      // update labels\r\n      this._labels.values().each(function (label) {\r\n        label.update()\r\n      })\r\n    }\r\n\r\n    this.facade.raiseEvent({ type: 'shape_refreshed', option: this })\r\n  }\r\n\r\n  layout () {\r\n    let layoutEvents = this.getStencil().layout()\r\n    if (layoutEvents) {\r\n      layoutEvents.each(function (event) {\r\n        // setup additional attributes\r\n        event.shape = this\r\n        event.forceExecution = true\r\n\r\n        // do layouting\r\n        this._delegateEvent(event)\r\n      }.bind(this))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns an array of Label objects.\r\n   */\r\n  getLabels () {\r\n    return this._labels.values()\r\n  }\r\n\r\n  /**\r\n   * Returns the label for a given ref\r\n   * @return {ORYX.Core.Label} Returns null if there is no label\r\n   */\r\n  getLabel (ref) {\r\n    if (!ref) {\r\n      return null\r\n    }\r\n    return (this._labels.find(function (o) {\r\n      return o.key.endsWith(ref)\r\n    }) || {}).value || null\r\n  }\r\n\r\n  /**\r\n   * Hides all related labels\r\n   *\r\n   */\r\n  hideLabels () {\r\n    this.getLabels().invoke('hide')\r\n  }\r\n\r\n  /**\r\n   * Shows all related labels\r\n   *\r\n   */\r\n  showLabels () {\r\n    let labels = this.getLabels()\r\n    labels.invoke('show')\r\n    labels.each(function (label) {\r\n      label.update()\r\n    })\r\n  }\r\n\r\n  setOpacity (value, animate) {\r\n    value = Math.max(Math.min((typeof value == 'number' ? value : 1.0), 1.0), 0.0)\r\n\r\n    if (value !== 1.0) {\r\n      value = String(value)\r\n      this.node.setAttributeNS(null, 'fill-opacity', value)\r\n      this.node.setAttributeNS(null, 'stroke-opacity', value)\r\n    } else {\r\n      this.node.removeAttributeNS(null, 'fill-opacity')\r\n      this.node.removeAttributeNS(null, 'stroke-opacity')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns an array of dockers of this object.\r\n   */\r\n  getDockers () {\r\n    return this.dockers\r\n  }\r\n\r\n  getMagnets () {\r\n    return this.magnets\r\n  }\r\n\r\n  getDefaultMagnet () {\r\n    if (this._defaultMagnet) {\r\n      return this._defaultMagnet\r\n    } else if (this.magnets.length > 0) {\r\n      return this.magnets[0]\r\n    } else {\r\n      return undefined\r\n    }\r\n  }\r\n\r\n  getParentShape () {\r\n    return this.parent\r\n  }\r\n\r\n  getIncomingShapes (iterator) {\r\n    if (iterator) {\r\n      this.incoming.each(iterator)\r\n    }\r\n    return this.incoming\r\n  }\r\n\r\n  getIncomingNodes (iterator) {\r\n    return this.incoming.select(function (incoming) {\r\n      let isNode = incoming.getInstanceofType().includes('Node')\r\n      if (isNode && iterator) iterator(incoming)\r\n      return isNode\r\n    })\r\n  }\r\n\r\n  getOutgoingShapes (iterator) {\r\n    if (iterator) {\r\n      this.outgoing.each(iterator)\r\n    }\r\n    return this.outgoing\r\n  }\r\n\r\n  getOutgoingNodes (iterator) {\r\n    return this.outgoing.select(function (out) {\r\n      let isNode = out.getInstanceofType().includes('Node')\r\n      if (isNode && iterator) iterator(out)\r\n      return isNode\r\n    })\r\n  }\r\n\r\n  getAllDockedShapes (iterator) {\r\n    let result = this.incoming.concat(this.outgoing)\r\n    if (iterator) {\r\n      result.each(iterator)\r\n    }\r\n    return result\r\n  }\r\n\r\n  getCanvas () {\r\n    if (this.parent instanceof ORYX_Canvas) {\r\n      return this.parent\r\n    } else if (this.parent instanceof Shape) {\r\n      return this.parent.getCanvas()\r\n    } else {\r\n      return undefined\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object} deep\r\n   * @param {Object} iterator\r\n   */\r\n  getChildNodes (deep, iterator) {\r\n    if (!deep && !iterator) {\r\n      return this.nodes.clone()\r\n    } else {\r\n      let result = []\r\n      this.nodes.each(function (uiObject) {\r\n        if (!uiObject.isVisible) {\r\n          return\r\n        }\r\n        if (iterator) {\r\n          iterator(uiObject)\r\n        }\r\n        result.push(uiObject)\r\n\r\n        if (deep && uiObject instanceof Shape) {\r\n          result = result.concat(uiObject.getChildNodes(deep, iterator))\r\n        }\r\n      })\r\n\r\n      return result\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Overrides the UIObject.add method. Adds uiObject to the correct sub node.\r\n   * @param {UIObject} uiObject\r\n   * @param {Number} index\r\n   */\r\n  add (uiObject, index, silent) {\r\n    // parameter has to be an UIObject, but\r\n    // must not be an Edge.\r\n    if (uiObject instanceof UIObject && !(uiObject.getInstanceofType().includes('Edge'))) {\r\n\r\n      if (!(this.children.member(uiObject))) {\r\n        //if uiObject is child of another parent, remove it from that parent.\r\n        if (uiObject.parent) {\r\n          uiObject.parent.remove(uiObject, true)\r\n        }\r\n\r\n        // add uiObject to this Shape\r\n        if (index != undefined) {\r\n          this.children.splice(index, 0, uiObject)\r\n        } else {\r\n          this.children.push(uiObject)\r\n        }\r\n\r\n        //set parent reference\r\n        uiObject.parent = this\r\n\r\n        // add uiObject.node to this.node depending on the type of uiObject\r\n        let parent\r\n        let type = uiObject.getInstanceofType()\r\n        if (type.includes('Node')) {\r\n          parent = this.node.childNodes[0].childNodes[1]\r\n          this.nodes.push(uiObject)\r\n        } else if (uiObject instanceof ORYX_Controls.Control) {\r\n          let ctrls = this.node.childNodes[1]\r\n          if (uiObject instanceof ORYX_Controls.Docker) {\r\n            parent = ctrls.childNodes[0]\r\n            if (this.dockers.length >= 2) {\r\n              this.dockers.splice(index !== undefined ? Math.min(index, this.dockers.length - 1) :\r\n                this.dockers.length - 1, 0, uiObject)\r\n            } else {\r\n              this.dockers.push(uiObject)\r\n            }\r\n          } else if (uiObject instanceof ORYX_Controls.Magnet) {\r\n            parent = ctrls.childNodes[1]\r\n            this.magnets.push(uiObject)\r\n          } else {\r\n            parent = ctrls\r\n          }\r\n        } else {\t// UIObject\r\n          parent = this.node\r\n        }\r\n\r\n        if (index != undefined && index < parent.childNodes.length)\r\n          uiObject.node = parent.insertBefore(uiObject.node, parent.childNodes[index])\r\n        else\r\n          uiObject.node = parent.appendChild(uiObject.node)\r\n\r\n        this._changed()\r\n        //uiObject.bounds.registerCallback(this._changedCallback);\r\n\r\n\r\n        if (this.eventHandlerCallback && silent !== true)\r\n          this.eventHandlerCallback({ type: ORYX_Config.EVENT_SHAPEADDED, shape: uiObject })\r\n\r\n      } else {\r\n        ORYX_Log.warn('add: ORYX.Core.UIObject is already a child of this object.')\r\n      }\r\n    } else {\r\n      ORYX_Log.warn('add: Parameter is not of type ORYX.Core.UIObject.')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Overrides the UIObject.remove method. Removes uiObject.\r\n   * @param {UIObject} uiObject\r\n   */\r\n  remove (uiObject, silent) {\r\n    //if uiObject is a child of this object, remove it.\r\n    if (this.children.member(uiObject)) {\r\n      //remove uiObject from children\r\n      let parent = uiObject.parent\r\n\r\n      this.children = this.children.without(uiObject)\r\n\r\n      //delete parent reference of uiObject\r\n      uiObject.parent = undefined\r\n\r\n      //delete uiObject.node from this.node\r\n      if (uiObject instanceof Shape) {\r\n        let type = uiObject.getInstanceofType()\r\n        if (type.includes('Edge')) {\r\n          uiObject.removeMarkers()\r\n          uiObject.node = this.node.childNodes[0].childNodes[2].removeChild(uiObject.node)\r\n        } else {\r\n          uiObject.node = this.node.childNodes[0].childNodes[1].removeChild(uiObject.node)\r\n          this.nodes = this.nodes.without(uiObject)\r\n        }\r\n      } else if (uiObject instanceof ORYX_Controls.Control) {\r\n        if (uiObject instanceof ORYX_Controls.Docker) {\r\n          uiObject.node = this.node.childNodes[1].childNodes[0].removeChild(uiObject.node)\r\n          this.dockers = this.dockers.without(uiObject)\r\n        } else if (uiObject instanceof ORYX_Controls.Magnet) {\r\n          uiObject.node = this.node.childNodes[1].childNodes[1].removeChild(uiObject.node)\r\n          this.magnets = this.magnets.without(uiObject)\r\n        } else {\r\n          uiObject.node = this.node.childNodes[1].removeChild(uiObject.node)\r\n        }\r\n      }\r\n\r\n      if (this.eventHandlerCallback && silent !== true)\r\n        this.eventHandlerCallback({ type: ORYX_Config.EVENT_SHAPEREMOVED, shape: uiObject, parent: parent })\r\n\r\n      this._changed()\r\n      //uiObject.bounds.unregisterCallback(this._changedCallback);\r\n    } else {\r\n      ORYX_Log.warn('remove: ORYX.Core.UIObject is not a child of this object.')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calculate the Border Intersection Point between two points\r\n   * @param {PointA}\r\n   * @param {PointB}\r\n   */\r\n  getIntersectionPoint () {\r\n    let pointAX, pointAY, pointBX, pointBY\r\n\r\n    // Get the the two Points\r\n    switch (arguments.length) {\r\n      case 2:\r\n        pointAX = arguments[0].x\r\n        pointAY = arguments[0].y\r\n        pointBX = arguments[1].x\r\n        pointBY = arguments[1].y\r\n        break\r\n      case 4:\r\n        pointAX = arguments[0]\r\n        pointAY = arguments[1]\r\n        pointBX = arguments[2]\r\n        pointBY = arguments[3]\r\n        break\r\n      default:\r\n        throw 'getIntersectionPoints needs two or four arguments'\r\n    }\r\n\r\n    // Defined an include and exclude point\r\n    let includePointX, includePointY, excludePointX, excludePointY\r\n    let bounds = this.absoluteBounds()\r\n\r\n    if (this.isPointIncluded(pointAX, pointAY, bounds)) {\r\n      includePointX = pointAX\r\n      includePointY = pointAY\r\n    } else {\r\n      excludePointX = pointAX\r\n      excludePointY = pointAY\r\n    }\r\n\r\n    if (this.isPointIncluded(pointBX, pointBY, bounds)) {\r\n      includePointX = pointBX\r\n      includePointY = pointBY\r\n    } else {\r\n      excludePointX = pointBX\r\n      excludePointY = pointBY\r\n    }\r\n\r\n    // If there is no inclue or exclude Shape, than return\r\n    if (!includePointX || !includePointY || !excludePointX || !excludePointY) {\r\n      return undefined\r\n    }\r\n\r\n    let midPointX = 0\r\n    let midPointY = 0\r\n    let refPointX, refPointY\r\n    // Get the UpperLeft and LowerRight\r\n    //var ul = bounds.upperLeft();\r\n    //var lr = bounds.lowerRight();\r\n\r\n\r\n    while (true) {\r\n      // Calculate the midpoint of the current to points\r\n      let midPointX = Math.min(includePointX, excludePointX) +\r\n        ((Math.max(includePointX, excludePointX) - Math.min(includePointX, excludePointX)) / 2.0)\r\n      let midPointY = Math.min(includePointY, excludePointY) +\r\n        ((Math.max(includePointY, excludePointY) - Math.min(includePointY, excludePointY)) / 2.0)\r\n\r\n      // Set the new midpoint by the means of the include of the bounds\r\n      if (this.isPointIncluded(midPointX, midPointY, bounds)) {\r\n        includePointX = midPointX\r\n        includePointY = midPointY\r\n      } else {\r\n        excludePointX = midPointX\r\n        excludePointY = midPointY\r\n      }\r\n\r\n      // Calc the length of the line\r\n      let length = Math.sqrt(Math.pow(includePointX - excludePointX, 2) + Math.pow(includePointY - excludePointY, 2))\r\n      // Calc a point one step from the include point\r\n      refPointX = includePointX + ((excludePointX - includePointX) / length)\r\n      refPointY = includePointY + ((excludePointY - includePointY) / length)\r\n\r\n      // If the reference point not in the bounds, break\r\n      if (!this.isPointIncluded(refPointX, refPointY, bounds)) {\r\n        break\r\n      }\r\n\r\n    }\r\n\r\n    // Return the last includepoint\r\n    return { x: refPointX, y: refPointY }\r\n  }\r\n\r\n  /**\r\n   * Calculate if the point is inside the Shape\r\n   * @param {PointX}\r\n   * @param {PointY}\r\n   */\r\n  isPointIncluded () {\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Returns TRUE if the given node\r\n   * is a child node of the shapes node\r\n   * @param {Element} node\r\n   * @return {Boolean}\r\n   *\r\n   */\r\n  containsNode (node) {\r\n    let me = this.node.firstChild.firstChild\r\n    while (node) {\r\n      if (node == me) {\r\n        return true\r\n      }\r\n      node = node.parentNode\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Calculate if the point is over an special offset area\r\n   * @param {Point}\r\n   */\r\n  isPointOverOffset () {\r\n    return this.isPointIncluded.apply(this, arguments)\r\n  }\r\n\r\n  _dockerChanged () {\r\n\r\n  }\r\n\r\n  /**\r\n   * Create a Docker for this Edge\r\n   *\r\n   */\r\n  createDocker (index, position) {\r\n    let docker = new ORYX_Controls.Docker({ eventHandlerCallback: this.eventHandlerCallback })\r\n    docker.bounds.registerCallback(this._dockerChangedCallback)\r\n    if (position) {\r\n      docker.bounds.centerMoveTo(position)\r\n    }\r\n    this.add(docker, index)\r\n\r\n    return docker\r\n  }\r\n\r\n  /**\r\n   * Get the serialized object\r\n   * return Array with hash-entrees (prefix, name, value)\r\n   * Following values will given:\r\n   *    Bounds\r\n   *    Outgoing Shapes\r\n   *    Parent\r\n   */\r\n  serialize () {\r\n    // var serializedObject = arguments.callee.$.serialize.apply(this);\r\n    let serializedObject = super.serialize()\r\n\r\n    // Add the bounds\r\n    serializedObject.push({ name: 'bounds', prefix: 'oryx', value: this.bounds.serializeForERDF(), type: 'literal' })\r\n\r\n    // Add the outgoing shapes\r\n    this.getOutgoingShapes().each((function (followingShape) {\r\n      serializedObject.push({\r\n        name: 'outgoing',\r\n        prefix: 'raziel',\r\n        value: '#' + ERDF.__stripHashes(followingShape.resourceId),\r\n        type: 'resource'\r\n      })\r\n    }).bind(this))\r\n\r\n    // Add the parent shape, if the parent not the canvas\r\n    //if(this.parent instanceof ORYX.Core.Shape){\r\n    serializedObject.push({\r\n      name: 'parent',\r\n      prefix: 'raziel',\r\n      value: '#' + ERDF.__stripHashes(this.parent.resourceId),\r\n      type: 'resource'\r\n    })\r\n    //}\r\n\r\n    return serializedObject\r\n  }\r\n\r\n  deserialize (serialize, json) {\r\n    // arguments.callee.$.deserialize.apply(this, arguments);\r\n    super.deserialize(serialize, json)\r\n    // Set the Bounds\r\n    let bounds = serialize.find(function (ser) {\r\n      return 'oryx-bounds' === (ser.prefix + '-' + ser.name)\r\n    })\r\n    if (bounds) {\r\n      let b = bounds.value.replace(/,/g, ' ').split(' ').without('')\r\n      let type = this.getInstanceofType()\r\n      if (type.includes('Edge')) {\r\n        if (!this.dockers.first().isChanged)\r\n          this.dockers.first().bounds.centerMoveTo(parseFloat(b[0]), parseFloat(b[1]))\r\n        if (!this.dockers.last().isChanged)\r\n          this.dockers.last().bounds.centerMoveTo(parseFloat(b[2]), parseFloat(b[3]))\r\n      } else {\r\n        this.bounds.set(parseFloat(b[0]), parseFloat(b[1]), parseFloat(b[2]), parseFloat(b[3]))\r\n      }\r\n    }\r\n\r\n    if (json && json.labels instanceof Array) {\r\n      json.labels.each(function (slabel) {\r\n        let label = this.getLabel(slabel.ref)\r\n        if (label) {\r\n          label.deserialize(slabel, this)\r\n        }\r\n      }.bind(this))\r\n    }\r\n  }\r\n\r\n  toJSON () {\r\n    // var json = arguments.callee.$.toJSON.apply(this, arguments);\r\n    let json = super.toJSON()\r\n\r\n    let labels = [], id = this.id\r\n    this._labels.each(function (obj) {\r\n      let slabel = obj.value.serialize()\r\n      if (slabel) {\r\n        slabel.ref = obj.key.replace(id, '')\r\n        labels.push(slabel)\r\n      }\r\n    })\r\n\r\n    if (labels.length > 0) {\r\n      json.labels = labels\r\n    }\r\n    return json\r\n  }\r\n\r\n  /**\r\n   * Private methods.\r\n   */\r\n\r\n  /**\r\n   * Child classes have to overwrite this method for initializing a loaded\r\n   * SVG representation.\r\n   * @param {SVGDocument} svgDocument\r\n   */\r\n  _init (svgDocument) {\r\n    // adjust ids\r\n    this._adjustIds(svgDocument, 0)\r\n  }\r\n\r\n  _adjustIds(element, idIndex) {\r\n    if (element instanceof Element) {\r\n      let eid = element.getAttributeNS(null, 'id')\r\n      if (eid && eid !== '') {\r\n        element.setAttributeNS(null, 'id', this.id + eid)\r\n      } else {\r\n        element.setAttributeNS(null, 'id', this.id + '_' + this.id + '_' + idIndex)\r\n        idIndex++\r\n      }\r\n\r\n      // Replace URL in fill attribute\r\n      let fill = element.getAttributeNS(null, 'fill')\r\n      if (fill && fill.include('url(#')) {\r\n        fill = fill.replace(/url\\(#/g, 'url(#' + this.id)\r\n        element.setAttributeNS(null, 'fill', fill)\r\n      }\r\n\r\n      if (element.hasChildNodes()) {\r\n        for (let i = 0; i < element.childNodes.length; i++) {\r\n          idIndex = this._adjustIds(element.childNodes[i], idIndex)\r\n        }\r\n      }\r\n    }\r\n    return idIndex\r\n  }\r\n\r\n  toString() {\r\n    return 'ORYX.Core.Shape ' + this.getId()\r\n  }\r\n  getInstanceofType () {\r\n    return 'Shape'\r\n  }\r\n}\r\n\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACtSURBVDiN3VPLDcIwDH1GHOgCHDoA28SWGIFF+EhswRLJPGzRQ3uI9DhAqiqQqNAbT7L0rDhPz44jJLEE69KBmR1I3gAIAIjI2Xt/yutWlctHEdmFECTGuCW5N7M3AUktqGoPYPOF+yGE0IDkGM45TvNSTOs+tvByU+XVGWStlHhVYDb+WGCYwZ/I3rdT1ba2A6raOue6lOd/4UryrqpNxXUP4JKScZV/xeIhPgDQV4uNISNl9gAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACXSURBVDiN3ZPBDcMwDAPJwjO1nw6QEWyt0QE6QdaQV+gAfXkp9hMDRRDHafwrAX0M8SwCEiVhRAEAzOwuaQZwPegrJB/u/g4AIGkm+XT31xG3mU3LhzdIQoxRkvBLVc/lVPAv/QEgrB9SSs3FyDmzC2g1tsC7Efam6QKquQdpAmqMrThbgGJmUwuy1tJbAICSho6Jo+f8AdOMbQxHjdBVAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGPSURBVDiNpZO9bhNBFIW/u8ZoaBCuUQTiT8pbIJHgRLHSxfZ63KyAp+A9UtBstd6RUwJSfhQpbwEFRVK4ThfGWLND4RmzNjiKxJFW2nv33J9zZke89/wP7q37kGWZstZeAyilWnme23/xknrQ6/W20jTdALDWdgAFqOl0ugOgtX6itW7XayRK0Fq3q6r6CvwCzoE20Ay8GXACvAHuJ0myVxTFyaqE76H4AdBZ2bRZy/0M3GUJRVFchckRE+BjeCa1/Hng/pEQDOsAozBt4px7PR6PfwB0u90XjUbjAngc5AyUUl/yPLdJMOwaOKppPozFAOH9sCbnKJ5QlCB1wd77pXhdbtHAOdeqqmqbuYmIyIcsyx5F0nA4fCgi70M4Aw6UUq2FBxH9fv9YROI5X4rIpzD5HfAs5I/LstxdMhEgTdOnwDfmP89tsMBmWZaXCwlh7ZfMDbrx3n8Oq0bMQu4GaHrvXy15ADAajc6SJNlzzm0aY/aBQa3BwBiz75x7LiJvjTGnf0lYxV0v09oGd8Vv1suvbQxAOuoAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAI3SURBVDiNdZNPiI5RFMZ/54pJmh0hu4lpym6+YaHIykSzpHnv9w4xFixkKNmMkFJYYNiQv9H3npmNmprMQinDzBRmpaaJKKWYshAp/3ofi++O3o27ubdzn+e559zzHJNEdWVZ1m5mDaAFWJ7CM8CMpGJ4ePh1FR8WDmZm9Xr9iJlNA13AWmAH0CXppqSlZjaZMPaPJwkzs97e3jEzawVGgd3APPDB3fcvgPM8byvL8q6kFkl9IyMjbwJAjHHAzFo7Ojq2AjVgHDgK9MUYOxcEGo3GuxDCHjOrhRDOAIQsy9olDYYQ9s7NzQFsAx66+yxwDbhUrbksy6vAIqA7y7L2YGZ1SbcbjcY7YGO6nE7408D6GOPOlOkuoAeYl3TDzGJIKU8lwnbgEbA6xngI+AqcBC7EGFcBV9LfPE2crgDUzOxFRWAcuAVcBfYA14HvwHPgPfAGmEic2r82xhhXAJ3AmrSfAE6lkgaAn8Dh1OKJBV6gaZANQDfwGTiWgOeBX8ABd3/s7uuAxcAP4FXizASaLtuU0l8JPHH3wt3/pPoHY4zL0oObgUl3LxPnZZBUmFl/EvgCHKx0bQT4lDIC2AJM5HneZmb9ktwkUa/XL0o6amb9RVHcqQgQY+wB7tO09lsz2yHpnJk9KIricgAoy/IZ8FHSvjzP26oC7j4GzAL3gCWSzkv65u5DkGYBmsMUYxyQNCjpNjBVae9e4Czw28yOu/uQEtH+M851mgarpfAM0A6MuvvxKv4vcuLvYtMimB8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAMdJREFUeNpi/P//PwMlgImBQsACIqKiomyALukFMs2I1HeKkZGxeNmyZUfABkA1dy9fvnwNMbqBFnpA9ZiDNDNERET8B9GkYJgeisOAOoGIDlQUFF2AlDEQ37vz4P5qJHFBIP89XgOAikKB1Cok/j0g1QnEII3lQGxCyAtKQOwKtIkRSIdBxWZCDT1L0AtAjZ1IbJDzVwNdYQzlnyUqDLAYepZmsQAz4BQodRGrCar2FNwLoHQNSpqRkZHbSckLYL2UZmeAAAMA4FN1yCrxB9oAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFUSURBVDjLrZM/SAJxGIZdWwuDlnCplkAEm1zkaIiGFFpyMIwGK5KGoK2lphDKkMDg3LLUSIJsSKhIi+684CokOtTiMizCGuzEU5K3vOEgKvtBDe/2Pc8H3x8NAM1fQlx4H9M3pcOWp6TXWmM8A7j0629v1nraiAVC0IrrwATKIgs5xyG5QiE+Z4iQdoeU2oAsnqCSO1NSTu+D9VhqRLD8nIB8F0Q2MgmJDyipCzjvYJkIfpN2UBLG8MpP4dxvQ3ZzGuyyBQ2H+AnOOCBd9aL6soh81A5hyYSGWyCFvxUcerqI4S+CvYVOFPMHxLAq8I3qdHVY5LbBhJzEsCrwutpRFBlUHy6wO2tEYtWAzLELPN2P03kjfj3luqDycV2F8AgefWbEnVqEHa2IznSD6BdsVDNStB0lfh0FPoQjdx8RrAqGzC0YprSgxzsUMOY2bf37N/6Ud1Vc9yYcH50CAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABLSURBVDiN7ZOxDcAwDMPoIkfKF/pMdUrmNs4YAQa8iNDCsE0nAyAzf1OqKgCwjSTb5utJ8uw8rf1wARdwBjDms+PDWrDE2Eh0dX4BeZA7CahpiqQAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFLSURBVDiNjZM9agMxEIXfSIUZ8AF8CJ9iTQI2mHSLnSJF6hxiD5E6RSBZ0DYOCzEk2Bfa1sZqZidFtKCsV3YEKvTzvpl5GpGqIjXW63UBAGVZFqk75oo4A5B1oH8DgmAmIgsRWQCYpSBngEg8d84dnHMHEZmnICYlbprGd/tN0/gUhDoTYzGAJyK6OZ1OSwBg5lpVvwE8W2u3AHadsaYvrqrqSERTABkz18xcA8iIaFpV1bGfCa1WqwJAJiIL59wBAPI8t8aYV1W9BwAiem/b9sE5J+F8bK39BLAffAXv/UhVJ91aVSfe+9HQXRNq2Vtrt3mej4mImHmD3x54CzNj5g0RUYi+BbAvy7IYNNEYc6eqt6r6GEp4IaKvtm0/+iZS3Mr9HohTjSLv4tb+40E42HXlXBOfZTCUCQCkxElADAnLQfFFQAS5+J1/AFhv2s5fwbLfAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG6SURBVDiNpVMxixNBFP6+2YgEDCmsrrU4thRSHOQsUocrzsJsZiNExD6CpdUW6ZVrQ0gCm52kUvAnmJMTYyukCFjZiCB2QuazuF1ZJHcg98HAe/Pe92Z473uUhDK63e4hyRhAIz8AsAawljR3zm3K+aYwSDKO4+ckV5KqkkYADgAcSBpJqpJc5Tn8y5MEkoyi6B3JmjHmSZqmW+xBr9e7572fSPq1WCxOJMkAgLV2QLIWhmHrKjIApGm6DcOwRbJmrR0AAKMoOiS5MsYcXUcGgDiOHwP4TnLjvb+QdFwhGUsaX0fudDrVIAjOALQkdZxz2263OyZpK3mnR3teewDglaRbQRDcAfB5t9s1lsvlzzzlHMCzCoAGyRMALBeQdAbgfu5+zbLsUTlO8g2AbwZX43fJrrbb7dv7kgwuBXL6b4DkCwAfSa4BfKnX6x/6/f7d0g9PAawruFRZE8DbcoH5fP4ewFHhW2sfzmazH9PptLhqAvj0X2MskAvqQtKxcc5tSA6995MkSa7rCQAgSRLjvZ+QHDrnNjeWMottJElr7UDSS0ljAOf5qIqGNUk+JTnMsuy1ciJvus5/AKMw7BIT3RiXAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJoSURBVDiNlVNNSFRRGD3nGx/oYqQicFr0s3qOYJE4MWSLnL2LEvI5s0poF4JBIdSiFv1Aq6BoIaLhYnyD4CJE2gRtFMwEF2k2i1AimVoqYTDz7mnzRkarRQc+uFy+c+7lO+ejJDRicHDQJ1kA0B0XAKwAWJFUDMOw3Nhv9QNJFgqFEZILklokjQPIAMhIGpfUQnIh7uEBAZIMgmBOUr+ZZcMwHG1qavpSqVR+mNkegM0wDEfNLCupPwiCuboIJaFQKIxI6k+n071ra2tpMwtJrprZVBRF30iOATgq6VpHR8fnjY2NdyRni8XiMwZB4JNcMLNsFEVHALwl+bJSqdxPpVLvJW3t7OwMtra2PiJ5Q9LlRCKx65xbknTJSBYkTfi+v0lyjOSt6enpe6lUKg+gi+SVZDKZCcPwNoA7JMd839+UNEEyb/GkF9fX1y8CaG9ubg6HhoaaATzcH5TZUwDwPK8IoLNcLmcALALIGIBuksskzwGYn5yc/LW3tzcM4FSDWz35fP7q1NTUTwDzkrpILgPotoZXqpK2BwYGjgG4i0Mg+SSXyzUBqEiq1e8TnZ2dvZK+k1wDIDMLSOYOCwA4nkwmtwF4URS9IXmW5AmLU9bT3t7+sVqtLgC4+RcyAEDSA8/zXszMzHwC0APgwwEbnXOOZPpfAgBQq9VWPM9L1m38I0jlcvlMFEXPAZwEsBTzsgC+JhKJYd/3Nw8ESdJ+lEkmzex6tVrdMrMLJM/HX191zi17nnfaOfdK0m6pVOqTJIsbVCqV+kjOOueWzOwxgDYAr+NqM7PHzrklkrN1MhDvQiP+d51/A+QbNf6ycvA4AAAAAElFTkSuQmCC\"","import ERDF from './ERDF'\r\nimport ORYX_CONFIG from './CONFIG'\r\nimport ORYX_Canvas from './core/Canvas'\r\n\r\n//TODO kann kickstart sich vielleicht auch um die erzeugung von paketen/\r\n// namespaces k�mmern? z.b. requireNamespace(\"ORYX.Core.SVG\");\r\nconst Kickstart = {\r\n  started: false,\r\n  callbacks: [],\r\n  alreadyLoaded: [],\r\n  PATH: '',\r\n  load: function () {\r\n    Kickstart.kick()\r\n  },\r\n\r\n  kick: function () {\r\n    //console.profile(\"loading\");\r\n    if (!Kickstart.started) {\r\n      Kickstart.started = true\r\n      Kickstart.callbacks.each(function (callback) {\r\n        // call the registered callback asynchronously.\r\n        window.setTimeout(callback, 1)\r\n      })\r\n    }\r\n  },\r\n\r\n  register: function (callback) {\r\n    //TODO Add some mutual exclusion between kick and register calls.\r\n    // with (Kickstart) {\r\n    //   if (started) window.setTimeout(callback, 1);\r\n    //   else Kickstart.callbacks.push(callback)\r\n    // }\r\n\r\n    if (Kickstart.started) {\r\n      window.setTimeout(callback, 1)\r\n    } else {\r\n      Kickstart.callbacks.push(callback)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Loads a js, assuring that it has only been downloaded once.\r\n   * 加载JS，确保只下载一次\r\n   * @param {String} url the script to load.\r\n   */\r\n  require: function (url) {\r\n    // if not already loaded, include it.\r\n    if (Kickstart.alreadyLoaded.member(url))\r\n      return false\r\n    return Kickstart.include(url)\r\n  },\r\n\r\n  /**\r\n   * Loads a js, regardless of whether it has only been already downloaded.\r\n   * 加载JS，不管它是否已经下载。\r\n   * @param {String} url the script to load.\r\n   */\r\n  include: function (url) {\r\n    // prepare a script tag and place it in html head.\r\n    var head = document.getElementsByTagNameNS(ORYX_CONFIG.XMLNS.XHTML, 'head')[0]\r\n    var s = document.createElementNS(ORYX_CONFIG.XMLNS.XHTML, 'script')\r\n    s.setAttributeNS(ORYX_CONFIG.XMLNS.XHTML, 'type', 'text/javascript')\r\n    s.src = Kickstart.PATH + url\r\n\r\n    //TODO macht es sinn, dass neue skript als letztes kind in den head\r\n    // einzubinden (stichwort reihenfolge der skript tags)?\r\n    head.appendChild(s)\r\n\r\n    // remember this url.\r\n    Kickstart.alreadyLoaded.push(url)\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nconst idCounter = 0\r\nconst ID_PREFIX = 'resource'\r\nconst PROCESSDATA_REF = 'processdata'\r\n/*\r\n * Back end specific workarounds.\r\n */\r\nconst USE_ARESS_WORKAROUNDS = true\r\nconst SHOW_DEBUG_ALERTS_WHEN_SAVING = false\r\nconst SHOW_EXTENDED_DEBUG_INFORMATION = false\r\n/*\r\n * Save and triple generation behaviour. Use this area to configure\r\n * data management to your needs.\r\n */\r\nconst USE_ASYNCHRONOUS_REQUESTS = true\r\nconst DISCARD_UNUSED_TRIPLES = true\r\nconst PREFER_SPANS_OVER_DIVS = true\r\nconst PREFER_TITLE_OVER_TEXTNODE = false\r\nconst RESOURCE_ID_PREFIX = 'resource'\r\n// Resource constants\r\nconst RESOURCE_CREATED = 0x01\r\nconst RESOURCE_REMOVED = 0x02\r\nconst RESOURCE_SAVED = 0x04\r\nconst RESOURCE_RELOADED = 0x08\r\nconst RESOURCE_SYNCHRONIZED = 0x10\r\n\r\nconst ResourceManager = {\r\n  __corrupt: false,\r\n  __latelyCreatedResource: undefined,\r\n  __listeners: $H(),\r\n  __token: 1,\r\n\r\n  addListener: function (listener, mask) {\r\n    if (!(listener instanceof Function))\r\n      throw 'Resource event listener is not a function!'\r\n    if (!(mask))\r\n      throw 'Invalid mask for resource event listener registration.'\r\n\r\n    // construct controller and token.\r\n    let controller = { listener: listener, mask: mask }\r\n    let token = ResourceManager.__token++\r\n\r\n    // add new listener.\r\n    ResourceManager.__listeners[token] = controller\r\n\r\n    // return the token generated.\r\n    return token\r\n  },\r\n\r\n  removeListener: function (token) {\r\n    // remove the listener with the token and return it.\r\n    return ResourceManager.__listners.remove(token)\r\n  },\r\n\r\n  __Event: function (action, resourceId) {\r\n    this.action = action\r\n    this.resourceId = resourceId\r\n  },\r\n\r\n  __dispatchEvent: function (event) {\r\n    // get all listeners. for each listener, ...\r\n    ResourceManager.__listeners.values().each(function (controller) {\r\n\r\n      // .. if listener subscribed to this type of event ...\r\n      if (event.action & controller.mask)\r\n        return controller.listener(event)\r\n    })\r\n  },\r\n\r\n  getResource: function (id) {\r\n    // get all possible resources for this.\r\n    id = ERDF.__stripHashes(id)\r\n    let resources = DataManager.query(\r\n      new ERDF.Resource('#' + id),\r\n      { prefix: 'raziel', name: 'entry' },\r\n      undefined\r\n    )\r\n\r\n    // check for consistency.\r\n    if ((resources.length == 1) && (resources[0].object.isResource())) {\r\n      let entryUrl = resources[0].object.value\r\n      return new ResourceManager.__Resource(id, entryUrl)\r\n    }\r\n\r\n    // else throw an error message.\r\n    throw ('Resource with id ' + id + ' not recognized as such. ' +\r\n      ((resources.length > 1) ?\r\n        ' There is more than one raziel:entry URL.' :\r\n        ' There is no raziel:entry URL.'))\r\n\r\n    return false\r\n  },\r\n\r\n  __createResource: function (alternativeDiv) {\r\n    let collectionUrls = DataManager.query(\r\n      new ERDF.Resource(''),\r\n      // TODO This will become raziel:collection in near future.\r\n      { prefix: 'raziel', name: 'collection' },\r\n      undefined\r\n    )\r\n\r\n    // check for consistency.\r\n\r\n    if ((collectionUrls.length == 1) &&\r\n      (collectionUrls[0].object.isResource())) {\r\n      // get the collection url.\r\n      let collectionUrl = collectionUrls[0].object.value\r\n      let resource = undefined\r\n\r\n      // if there is an old id, serialize the dummy div from there,\r\n      // otherwise create a dummy div on the fly.\r\n\r\n      let serialization = alternativeDiv ? alternativeDiv :\r\n        '<div xmlns=\"http://www.w3.org/1999/xhtml\"></div>'\r\n\r\n      ResourceManager.__request(\r\n        'POST', collectionUrl, serialization,\r\n        // on success\r\n        function () {\r\n          // get div and id that have been generated by the server.\r\n          let response = (this.responseXML)\r\n          let div = response.childNodes[0]\r\n          let id = div.getAttribute('id')\r\n\r\n          // store div in DOM\r\n          if (!$$('.' + PROCESSDATA_REF)[0])\r\n            DataManager.graft(ORYX_CONFIG.XMLNS.XHTML,\r\n              document.getElementsByTagNameNS(ORYX_CONFIG.XMLNS.XHTML, 'body').item(0), ['div', {\r\n                'class': PROCESSDATA_REF,\r\n                'style': 'display:none;'\r\n              }])\r\n\r\n          $$('.' + PROCESSDATA_REF)[0].appendChild(div.cloneNode(true))\r\n\r\n          // parse local erdf data once more.\r\n\r\n          DataManager.__synclocal()\r\n\r\n          // get new resource object.\r\n\r\n          resource = new ResourceManager.getResource(id)\r\n\r\n          // set up an action informing of the creation.\r\n\r\n          ResourceManager.__resourceActionSucceeded(\r\n            this, RESOURCE_CREATED, undefined)\r\n        },\r\n\r\n        function () {\r\n          ResourceManager.__resourceActionFailed(\r\n            this, RESOURCE_CREATED, undefined)\r\n        },\r\n        false\r\n      )\r\n\r\n      return resource\r\n    }\r\n\r\n    // else\r\n    throw 'Could not create resource! raziel:collection URL is missing!'\r\n    return false\r\n\r\n  },\r\n\r\n  __Resource: function (id, url) {\r\n    this.__id = id\r\n    this.__url = url\r\n\r\n    /*\r\n     * Process URL is no longer needed to refer to the shape element on the\r\n     * canvas. AReSS uses the id's to gather information on fireing\r\n     * behaviour now.\r\n     */\r\n\r\n    //\t\t// find the process url.\r\n    //\t\tvar processUrl = undefined;\r\n    //\r\n    //\t\tvar urls = DataManager.query(\r\n    //\t\t\tnew ERDF.Resource('#'+this.__id),\r\n    //\t\t\t{prefix: 'raziel', name: 'process'},\r\n    //\t\t\tundefined\r\n    //\t\t);\r\n    //\r\n    //\t\tif(urls.length == 0) { throw 'The resource with the id ' +id+ ' has no process url.'};\r\n    //\r\n    //\t\turls.each( function(triple) {\r\n    //\r\n    //\t\t\t// if there are more urls, use the last one.\r\n    //\t\t\tprocessUrl = triple.object.value;\r\n    //\t\t});\r\n    //\r\n    //\t\tthis.__processUrl = processUrl;\r\n    //\r\n    //\t\t// convenience function for getting the process url.\r\n    //\t\tthis.processUrl = function() {\r\n    //\t\t\treturn this.__processUrl;\r\n    //\t\t}\r\n\r\n    // convenience finction for getting the id.\r\n    this.id = function () {\r\n      return this.__id\r\n    }\r\n\r\n    // convenience finction for getting the entry url.\r\n    this.url = function () {\r\n      return this.__url\r\n    }\r\n\r\n    this.reload = function () {\r\n      let _url = this.__url\r\n      let _id = this.__id\r\n      ResourceManager.__request(\r\n        'GET', _url, null,\r\n        function () {\r\n          ResourceManager.__resourceActionSucceeded(\r\n            this, RESOURCE_RELOADED, _id)\r\n        },\r\n        function () {\r\n          ResourceManager.__resourceActionFailed(\r\n            this, RESURCE_RELOADED, _id)\r\n        },\r\n        USE_ASYNCHRONOUS_REQUESTS\r\n      )\r\n    }\r\n\r\n    this.save = function (synchronize) {\r\n      let _url = this.__url\r\n      let _id = this.__id\r\n      let data = DataManager.serialize($(_id))\r\n      ResourceManager.__request(\r\n        'PUT', _url, data,\r\n        function () {\r\n          ResourceManager.__resourceActionSucceeded(\r\n            this, synchronize ? RESOURCE_SAVED | RESOURCE_SYNCHRONIZED : RESOURCE_SAVED, _id)\r\n        },\r\n        function () {\r\n          ResourceManager.__resourceActionFailed(\r\n            this, synchronize ? RESOURCE_SAVED | RESOURCE_SYNCHRONIZED : RESOURCE.SAVED, _id)\r\n        },\r\n        USE_ASYNCHRONOUS_REQUESTS\r\n      )\r\n    }\r\n\r\n    this.remove = function () {\r\n      let _url = this.__url\r\n      let _id = this.__id\r\n      ResourceManager.__request(\r\n        'DELETE', _url, null,\r\n        function () {\r\n          ResourceManager.__resourceActionSucceeded(\r\n            this, RESOURCE_REMOVED, _id)\r\n        },\r\n        function () {\r\n          ResourceManager.__resourceActionFailed(\r\n            this, RESOURCE_REMOVED, _id)\r\n        },\r\n        USE_ASYNCHRONOUS_REQUESTS\r\n      )\r\n    }\r\n  },\r\n\r\n  request: function (url, requestOptions) {\r\n    let options = {\r\n      method: 'get',\r\n      asynchronous: true,\r\n      parameters: {}\r\n    }\r\n\r\n    Object.extend(options, requestOptions || {})\r\n\r\n    let params = Hash.toQueryString(options.parameters)\r\n    if (params)\r\n      url += (url.include('?') ? '&' : '?') + params\r\n\r\n    return ResourceManager.__request(\r\n      options.method,\r\n      url,\r\n      options.data,\r\n      (options.onSuccess instanceof Function ? function () {\r\n        options.onSuccess(this)\r\n      } : undefined),\r\n      (options.onFailure instanceof Function ? function () {\r\n        options.onFailure(this)\r\n      } : undefined),\r\n      options.asynchronous && USE_ASYNCHRONOUS_REQUESTS,\r\n      options.headers)\r\n  },\r\n\r\n  __request: function (method, url, data, success, error, async, headers) {\r\n    // get a request object\r\n    let httpRequest = Try.these(\r\n      /* do the Mozilla/Safari/Opera stuff */\r\n      function () {\r\n        return new XMLHttpRequest()\r\n      },\r\n\r\n      /* do the IE stuff */\r\n      function () {\r\n        return new ActiveXObject('Msxml2.XMLHTTP')\r\n      },\r\n      function () {\r\n        return new ActiveXObject('Microsoft.XMLHTTP')\r\n      }\r\n    )\r\n\r\n    // if there is no request object ...\r\n    if (!httpRequest) {\r\n      if (!this.__corrupt)\r\n        throw 'This browser does not provide any AJAX functionality. You will not be able to use the software provided with the page you are viewing. Please consider installing appropriate extensions.'\r\n      this.__corrupt = true\r\n      return false\r\n    }\r\n\r\n    if (success instanceof Function)\r\n      httpRequest.onload = success\r\n    if (error instanceof Function) {\r\n      httpRequest.onerror = error\r\n    }\r\n\r\n    let h = $H(headers)\r\n    h.keys().each(function (key) {\r\n      httpRequest.setRequestHeader(key, h[key])\r\n    })\r\n\r\n    try {\r\n      if (SHOW_DEBUG_ALERTS_WHEN_SAVING)\r\n        alert(method + ' ' + url + '\\n' +\r\n        SHOW_EXTENDED_DEBUG_INFORMATION ? data : '')\r\n\r\n      // TODO Remove synchronous calls to the server as soon as xenodot\r\n      // handles asynchronous requests without failure.\r\n      httpRequest.open(method, url, !async ? false : true)\r\n      httpRequest.send(data)\r\n\r\n    } catch (e) {\r\n      return false\r\n    }\r\n    return true\r\n  },\r\n\r\n  __resourceActionSucceeded: function (transport, action, id) {\r\n    let status = transport.status\r\n    let response = transport.responseText\r\n\r\n    if (SHOW_DEBUG_ALERTS_WHEN_SAVING) {\r\n      alert(status + ' ' + url + '\\n' +\r\n      SHOW_EXTENDED_DEBUG_INFORMATION ? data : '')\r\n    }\r\n\r\n    // if the status code is not in 2xx, throw an error.\r\n    if (status >= 300) {\r\n      throw 'The server responded with an error: ' + status + '\\n' + (SHOW_EXTENDED_DEBUG_INFORMATION ? +data : 'If you need additional information here, including the data sent by the server, consider setting SHOW_EXTENDED_DEBUG_INFORMATION to true.')\r\n    }\r\n\r\n    let response_s, div, localDiv\r\n    switch (action) {\r\n      case RESOURCE_REMOVED:\r\n        // get div and id\r\n        response_s = (transport.responseXML)\r\n        div = response_s.childNodes[0]\r\n        id = div.getAttribute('id')\r\n\r\n        // remove the resource from DOM\r\n        localDiv = document.getElementById(id)\r\n        localDiv.parentNode.removeChild(localDiv)\r\n        break\r\n\r\n      case RESOURCE_CREATED:\r\n        // nothing remains to be done.\r\n        break\r\n      case RESOURCE_SAVED | RESOURCE_SYNCHRONIZED:\r\n        DataManager.__synclocal()\r\n      case RESOURCE_SAVED:\r\n        // nothing remains to be done.\r\n        break\r\n      case RESOURCE_RELOADED:\r\n        // get div and id\r\n        response_s = (transport.responseXML)\r\n        div = response_s.childNodes[0]\r\n        id = div.getAttribute('id')\r\n\r\n        // remove the local resource representation from DOM\r\n        localDiv = document.getElementById(id)\r\n        localDiv.parentNode.removeChild(localDiv)\r\n\r\n        // store div in DOM\r\n        if (!$$(PROCESSDATA_REF)[0]) {\r\n          DataManager.graft(ORYX_CONFIG.XMLNS.XHTML,\r\n            document.getElementsByTagNameNS(ORYX_CONFIG.XMLNS.XHTML, 'body').item(0), ['div', {\r\n              'class': PROCESSDATA_REF,\r\n              'style': 'display:none;'\r\n            }])\r\n        }\r\n\r\n        $$(PROCESSDATA_REF)[0].appendChild(div.cloneNode(true))\r\n        DataManager.__synclocal()\r\n        break\r\n\r\n      default:\r\n        DataManager.__synclocal()\r\n\r\n    }\r\n\r\n    // dispatch to all listeners ...\r\n    ResourceManager.__dispatchEvent(\r\n      // ... an event describing the change that happened here.\r\n      new ResourceManager.__Event(action, id)\r\n    )\r\n  },\r\n\r\n  __resourceActionFailed: function (transport, action, id) {\r\n    throw 'Fatal: Resource action failed. There is something horribly ' +\r\n    'wrong with either the server, the transport protocol or your ' +\r\n    'online status. Sure you\\'re online?'\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * The Data Management object. Use this one when interacting with page internal\r\n * 数据管理对象。与页面内部交互时使用此选项\r\n * data. Initialize data management by DataManager.init();\r\n * @class DataManager\r\n */\r\nconst DataManager = {\r\n\r\n  /**\r\n   * The init method should be called once in the DataManagers lifetime.\r\n   * It causes the DataManager to initialize itself, the erdf parser, do all\r\n   * neccessary registrations and configurations, to run the parser and\r\n   * from then on deliver all resulting triples.\r\n   * No parameters needed are needed in a call to this method.\r\n   */\r\n  init: function () {\r\n    ERDF.init(DataManager._registerTriple)\r\n    DataManager.__synclocal()\r\n  },\r\n\r\n  /**\r\n   * This triple array is meant to be the whole knowledge of the DataManager.\r\n   */\r\n  _triples: [],\r\n\r\n  /**\r\n   * This method is meant for callback from erdf parsing. It is not to be\r\n   * used in another way than to add triples to the triple store.\r\n   * @param {Object} triple the triple to add to the triple store.\r\n   */\r\n  _registerTriple: function (triple) {\r\n    DataManager._triples.push(triple)\r\n  },\r\n\r\n  /**\r\n   * The __synclocal method is for internal usage only.\r\n   * It performs synchronization with the local document, that is, the triple\r\n   * store is adjustet to the content of the document, which could have been\r\n   * changed by any other applications running on the same page.\r\n   */\r\n  __synclocal: function () {\r\n    DataManager._triples = []\r\n    ERDF.run()\r\n  },\r\n\r\n  /**\r\n   * Makes the shape passed into this method synchronize itself with the DOM.\r\n   * This method returns the shapes resource object for further manipulation.\r\n   * @param {Object} shape\r\n   */\r\n  __synchronizeShape: function (shape) {\r\n\r\n    var r = ResourceManager.getResource(shape.resourceId)\r\n    var serialize = shape.serialize()\r\n\r\n    // store all serialize values\r\n    serialize.each(function (ser) {\r\n\r\n      var resource = (ser.type == 'resource')\r\n      var _triple = new ERDF.Triple(\r\n        new ERDF.Resource(shape.resourceId),\r\n        { prefix: ser.prefix, name: ser.name },\r\n        resource ?\r\n          new ERDF.Resource(ser.value) :\r\n          new ERDF.Literal(ser.value)\r\n      )\r\n      DataManager.setObject(_triple)\r\n    })\r\n\r\n    return r\r\n  },\r\n\r\n  __storeShape: function (shape) {\r\n\r\n    // first synchronize the shape,\r\n    var resource = DataManager.__synchronizeShape(shape)\r\n\r\n    // then save the synchronized dom.\r\n    resource.save()\r\n  },\r\n\r\n  __forceExistance: function (shape) {\r\n\r\n    if (!$(shape.resourceId)) {\r\n\r\n      if (!$$('.' + PROCESSDATA_REF)[0])\r\n        DataManager.graft(ORYX_CONFIG.XMLNS.XHTML,\r\n          document.getElementsByTagNameNS(ORYX_CONFIG.XMLNS.XHTML, 'body').item(0), ['div', {\r\n            'class': PROCESSDATA_REF,\r\n            'style': 'display:none;'\r\n          }])\r\n\r\n      // object is literal\r\n      DataManager.graft(ORYX_CONFIG.XMLNS.XHTML,\r\n        $$('.' + PROCESSDATA_REF)[0], [\r\n\r\n          'div', {\r\n            'id': shape.resourceId,\r\n            //This should be done in a more dynamic way!!!!!\r\n            'class': (shape instanceof ORYX_Canvas) ? '-oryx-canvas' : undefined\r\n          }\r\n        ])\r\n\r\n    } else {\r\n      var resource = $(shape.resourceId)\r\n      var children = $A(resource.childNodes)\r\n      children.each(function (child) {\r\n        resource.removeChild(child)\r\n      })\r\n    }\r\n\r\n  },\r\n\r\n  __persistShape: function (shape) {\r\n\r\n    // a shape serialization.\r\n    var shapeData = shape.serialize()\r\n\r\n    // initialize a triple array and construct a shape resource\r\n    // to be used in triple generation.\r\n    var triplesArray = []\r\n    var shapeResource = new ERDF.Resource(shape.resourceId)\r\n\r\n    // remove all triples for this particular shape's resource\r\n    DataManager.removeTriples(DataManager.query(\r\n      shapeResource, undefined, undefined))\r\n\r\n    // for each data set in the shape's serialization\r\n    shapeData.each(function (data) {\r\n\r\n      // construct a triple's value\r\n      var value = (data.type == 'resource') ?\r\n        new ERDF.Resource(data.value) :\r\n        new ERDF.Literal(data.value)\r\n\r\n      // construct triple and add it to the DOM.\r\n      DataManager.addTriple(new ERDF.Triple(\r\n        shapeResource,\r\n        { prefix: data.prefix, name: data.name },\r\n        value\r\n      ))\r\n    })\r\n  },\r\n\r\n  __persistDOM: function (facade) {\r\n    // getChildShapes gets all shapes (nodes AND edges), deep flag\r\n    // makes it return a flattened child hierarchy.\r\n    const shapes = facade.getCanvas().getChildShapes(true)\r\n    let result = ''\r\n    // persist all shapes.\r\n    shapes.each(function (shape) {\r\n      DataManager.__forceExistance(shape)\r\n    })\r\n    //DataManager.__synclocal();\r\n\r\n    DataManager.__renderCanvas(facade)\r\n    result += DataManager.serialize(\r\n      $(ERDF.__stripHashes(facade.getCanvas().resourceId)), true)\r\n\r\n    shapes.each(function (shape) {\r\n\r\n      DataManager.__persistShape(shape)\r\n      result += DataManager.serialize(\r\n        $(ERDF.__stripHashes(shape.resourceId)), true)\r\n    })\r\n\r\n    // result += DataManager.__renderCanvas(facade);\r\n    return result\r\n  },\r\n\r\n  __renderCanvas: function (facade) {\r\n    const canvas = facade.getCanvas()\r\n    const stencilSets = facade.getStencilSets()\r\n    const shapes = canvas.getChildShapes(true)\r\n\r\n    DataManager.__forceExistance(canvas)\r\n    DataManager.__persistShape(canvas)\r\n    const shapeResource = new ERDF.Resource(canvas.resourceId)\r\n    // remove all triples for this particular shape's resource\r\n    DataManager.removeTriples(DataManager.query(\r\n      shapeResource, undefined, undefined))\r\n\r\n    DataManager.addTriple(new ERDF.Triple(\r\n      shapeResource,\r\n      { prefix: 'oryx', name: 'mode' },\r\n      new ERDF.Literal('writable')\r\n    ))\r\n\r\n    DataManager.addTriple(new ERDF.Triple(\r\n      shapeResource,\r\n      { prefix: 'oryx', name: 'mode' },\r\n      new ERDF.Literal('fullscreen')\r\n    ))\r\n\r\n    stencilSets.values().each(function (stencilset) {\r\n      DataManager.addTriple(new ERDF.Triple(\r\n        shapeResource,\r\n        { prefix: 'oryx', name: 'stencilset' },\r\n        new ERDF.Resource(stencilset.source().replace(/&/g, '%26'))\r\n      ))\r\n\r\n      DataManager.addTriple(new ERDF.Triple(\r\n        shapeResource,\r\n        { prefix: 'oryx', name: 'ssnamespace' },\r\n        new ERDF.Resource(stencilset.namespace())\r\n      ))\r\n\r\n      stencilset.extensions().keys().each(function (extension) {\r\n        DataManager.addTriple(new ERDF.Triple(\r\n          shapeResource,\r\n          { prefix: 'oryx', name: 'ssextension' },\r\n          new ERDF.Literal(extension)\r\n        ))\r\n      })\r\n    })\r\n\r\n    shapes.each(function (shape) {\r\n      DataManager.addTriple(new ERDF.Triple(\r\n        shapeResource,\r\n        { prefix: 'oryx', name: 'render' },\r\n        new ERDF.Resource('#' + shape.resourceId)\r\n      ))\r\n    })\r\n  },\r\n\r\n  __counter: 0,\r\n  __provideId: function () {\r\n\r\n    while ($(RESOURCE_ID_PREFIX + DataManager.__counter))\r\n      DataManager.__counter++\r\n\r\n    return RESOURCE_ID_PREFIX + DataManager.__counter\r\n  },\r\n\r\n  serializeDOM: function (facade) {\r\n\r\n    return DataManager.__persistDOM(facade)\r\n  },\r\n\r\n  syncGlobal: function (facade) {\r\n\r\n    return DataManager.__syncglobal(facade)\r\n  },\r\n\r\n  /**\r\n   * This method is used to synchronize local DOM with remote resources.\r\n   * Local changes are commited to the server, and remote changes are\r\n   * performed to the local document.\r\n   * @param {Object} facade The facade of the editor that holds certain\r\n   * resource representations as shapes.\r\n   */\r\n  __syncglobal: function (facade) {\r\n    // getChildShapes gets all shapes (nodes AND edges), deep flag\r\n    // makes it return a flattened child hierarchy.\r\n    const canvas = facade.getCanvas()\r\n    const shapes = canvas.getChildShapes(true)\r\n\r\n    // create dummy resource representations in the dom\r\n    // for all shapes that were newly created.\r\n\r\n    shapes.select(function (shape) {\r\n\r\n      // select shapes without resource id.\r\n\r\n      return !($(shape.resourceId))\r\n\r\n    }).each(function (shape) {\r\n\r\n      // create new resources for them.\r\n      if (USE_ARESS_WORKAROUNDS) {\r\n\r\n        /*\r\n         * This is a workaround due to a bug in aress. Resources are\r\n         * ignoring changes to raziel:type property once they are\r\n         * created. As long as this is not fixed, the resource is now\r\n         * being created using a randomly guessed id, this temporary id\r\n         * is then used in references and the appropriate div is being\r\n         * populated with properties.\r\n         *\r\n         * AFTER THIS PHASE THE DATA IS INCONSISTENT AS REFERENCES POINT\r\n         * TO IDS THAT ARE UNKNOWN TO THE BACK END.\r\n         *\r\n         * After the resource is actually created in aress, it gets an id\r\n         * that is persistent. All shapes are then being populated with the\r\n         * correct id references and stored on the server.\r\n         *\r\n         * AFTER THE SAVE PROCESS HAS RETURNED, THE DATA IS CONSISTENT\r\n         * REGARDING THE ID REFERENCES AGAIN.\r\n         */\r\n\r\n        var razielType = shape.properties['raziel-type']\r\n\r\n        var div = '<div xmlns=\"http://www.w3.org/1999/xhtml\">' +\r\n          '<span class=\"raziel-type\">' + razielType + '</span></div>'\r\n\r\n        var r = ResourceManager.__createResource(div)\r\n        shape.resourceId = r.id()\r\n\r\n      } else {\r\n\r\n        var r = ResourceManager.__createResource()\r\n        shape.resourceId = r.id()\r\n      }\r\n\r\n    })\r\n\r\n    shapes.each(function (shape) {\r\n\r\n      // store all shapes.\r\n      DataManager.__storeShape(shape)\r\n    })\r\n  },\r\n\r\n  /**\r\n   * This method serializes a single div into a string that satisfies the\r\n   * client/server communication protocol. It ingnores all elements that have\r\n   * an attribute named class that includes 'transient'.\r\n   * @param {Object} node the element to serialize.\r\n   * @param {Object} preserveNamespace whether to preserve the parent's\r\n   *                 namespace. If you are not sure about namespaces, provide\r\n   *                 just the element to be serialized.\r\n   */\r\n  serialize: function (node, preserveNamespace) {\r\n\r\n    if (node.nodeType == node.ELEMENT_NODE) {\r\n      // serialize an element node.\r\n\r\n      var children = $A(node.childNodes)\r\n      var attributes = $A(node.attributes)\r\n      var clazz = new String(node.getAttribute('class'))\r\n      var ignore = clazz.split(' ').member('transient')\r\n\r\n      // ignore transients.\r\n\r\n      if (ignore)\r\n        return ''\r\n\r\n      // start serialization.\r\n\r\n      var result = '<' + node.nodeName\r\n\r\n      // preserve namespace?\r\n      if (!preserveNamespace)\r\n        result += ' xmlns=\"' + (node.namespaceURI ? node.namespaceURI : ORYX_CONFIG.XMLNS.XHTML) + '\" xmlns:oryx=\"http://oryx-editor.org\"'\r\n\r\n      // add all attributes.\r\n\r\n      attributes.each(function (attribute) {\r\n        result += ' ' + attribute.nodeName + '=\"' +\r\n          attribute.nodeValue + '\"'\r\n      })\r\n\r\n      // close if no children.\r\n\r\n      if (children.length == 0)\r\n        result += '/>'\r\n\r\n      else {\r\n\r\n        // serialize all children.\r\n\r\n        result += '>'\r\n        children.each(function (_node) {\r\n          result += DataManager.serialize(_node, true)\r\n        })\r\n        result += '</' + node.nodeName + '>'\r\n      }\r\n\r\n      return result\r\n\r\n    } else if (node.nodeType == node.TEXT_NODE) {\r\n\r\n      // serialize a text node.\r\n      return node.nodeValue\r\n    }\r\n\r\n    //TODO serialize cdata areas also.\r\n    //TODO work on namespace awareness.\r\n  },\r\n\r\n  addTriple: function (triple) {\r\n\r\n    // assert the subject is a resource\r\n\r\n    if (!triple.subject.type == ERDF.LITERAL)\r\n      throw 'Cannot add the triple ' + triple.toString() +\r\n      ' because the subject is not a resource.'\r\n\r\n    // get the element which represents this triple's subject.\r\n    var elementId = ERDF.__stripHashes(triple.subject.value)\r\n    var element = $(elementId)\r\n\r\n    // assert the subject is inside this document.\r\n    if (!element)\r\n      throw 'Cannot add the triple ' + triple.toString() +\r\n      ' because the subject \"' + elementId + '\" is not in the document.'\r\n\r\n    if (triple.object.type == ERDF.LITERAL)\r\n\r\n    // object is literal\r\n      DataManager.graft(ORYX_CONFIG.XMLNS.XHTML, element, [\r\n        'span', {\r\n          'class': (triple.predicate.prefix + '-' +\r\n            triple.predicate.name)\r\n        }, triple.object.value.escapeHTML()\r\n      ])\r\n\r\n    else {\r\n\r\n      // object is resource\r\n      DataManager.graft(ORYX_CONFIG.XMLNS.XHTML, element, [\r\n        'a', {\r\n          'rel': (triple.predicate.prefix + '-' +\r\n            triple.predicate.name), 'href': triple.object.value\r\n        }\r\n      ])\r\n\r\n    }\r\n\r\n    return true\r\n  },\r\n\r\n  removeTriples: function (triples) {\r\n\r\n    // alert('Removing ' +triples.length+' triples.');\r\n\r\n    // from all the triples select those ...\r\n    var removed = triples.select(\r\n      function (triple) {\r\n\r\n        // TODO remove also from triple store.\r\n        // ... that were actually removed.\r\n        return DataManager.__removeTriple(triple)\r\n      })\r\n\r\n    // sync and return removed triples.\r\n    // DataManager.__synclocal();\r\n    return removed\r\n  },\r\n\r\n  removeTriple: function (triple) {\r\n\r\n    // remember whether the triple was actually removed.\r\n    var result = DataManager.__removeTriple(triple)\r\n\r\n    // sync and return removed triples.\r\n    // DataManager.__synclocal();\r\n    return result\r\n  },\r\n\r\n  __removeTriple: function (triple) {\r\n\r\n    // assert the subject is a resource\r\n    if (!triple.subject.type == ERDF.LITERAL)\r\n\r\n      throw 'Cannot remove the triple ' + triple.toString() +\r\n      ' because the subject is not a resource.'\r\n\r\n    // get the element which represents this triple's subject.\r\n    var elementId = ERDF.__stripHashes(triple.subject.value)\r\n    var element = $(elementId)\r\n\r\n    // assert the subject is inside this document.\r\n    if (!element)\r\n\r\n      throw 'Cannot remove the triple ' + triple.toString() +\r\n      ' because the subject is not in the document.'\r\n\r\n    if (triple.object.type == ERDF.LITERAL) {\r\n\r\n      // continue searching actively for the triple.\r\n      var result = DataManager.__removeTripleRecursively(triple, element)\r\n      return result\r\n    }\r\n  },\r\n\r\n  __removeTripleRecursively: function (triple, continueFrom) {\r\n\r\n    // return when this node is not an element node.\r\n    if (continueFrom.nodeType != continueFrom.ELEMENT_NODE)\r\n      return false\r\n\r\n    var classes = new String(continueFrom.getAttribute('class'))\r\n    var children = $A(continueFrom.childNodes)\r\n\r\n    if (classes.include(triple.predicate.prefix + '-' + triple.predicate.name)) {\r\n\r\n      var content = continueFrom.textContent\r\n      if ((triple.object.type == ERDF.LITERAL) &&\r\n        (triple.object.value == content))\r\n\r\n        continueFrom.parentNode.removeChild(continueFrom)\r\n\r\n      return true\r\n\r\n    } else {\r\n\r\n      children.each(function (_node) {\r\n        DataManager.__removeTripleRecursively(triple, _node)\r\n      })\r\n      return false\r\n    }\r\n\r\n  },\r\n\r\n  /**\r\n   * graft() function\r\n   * Originally by Sean M. Burke from interglacial.com, altered for usage with\r\n   * SVG and namespace (xmlns) support. Be sure you understand xmlns before\r\n   * using this funtion, as it creates all grafted elements in the xmlns\r\n   * provided by you and all element's attribures in default xmlns. If you\r\n   * need to graft elements in a certain xmlns and wish to assign attributes\r\n   * in both that and another xmlns, you will need to do stepwise grafting,\r\n   * adding non-default attributes yourself or you'll have to enhance this\r\n   * function. Latter, I would appreciate: martin�apfelfabrik.de\r\n   * @param {Object} namespace The namespace in which\r\n   *          elements should be grafted.\r\n   * @param {Object} parent The element that should contain the grafted\r\n   *          structure after the function returned.\r\n   * @param {Object} t the crafting structure.\r\n   * @param {Object} doc the document in which grafting is performed.\r\n   */\r\n  graft: function (namespace, parent, t, doc) {\r\n\r\n    doc = (doc || (parent && parent.ownerDocument) || document)\r\n    var e\r\n    if (t === undefined) {\r\n      echo('Can\\'t graft an undefined value')\r\n    } else if (t.constructor == String) {\r\n      e = doc.createTextNode(t)\r\n    } else {\r\n      for (let i = 0; i < t.length; i++) {\r\n        if (i === 0 && t[i].constructor == String) {\r\n          var snared = t[i].match(/^([a-z][a-z0-9]*)\\.([^\\s\\.]+)$/i)\r\n          if (snared) {\r\n            e = doc.createElementNS(namespace, snared[1])\r\n            e.setAttributeNS(null, 'class', snared[2])\r\n            continue\r\n          }\r\n          snared = t[i].match(/^([a-z][a-z0-9]*)$/i)\r\n          if (snared) {\r\n            e = doc.createElementNS(namespace, snared[1])  // but no class\r\n            continue\r\n          }\r\n\r\n          // Otherwise:\r\n          e = doc.createElementNS(namespace, 'span')\r\n          e.setAttribute(null, 'class', 'namelessFromLOL')\r\n        }\r\n\r\n        if (t[i] === undefined) {\r\n          echo('Can\\'t graft an undefined value in a list!')\r\n        } else if (t[i].constructor == String || t[i].constructor == Array) {\r\n          this.graft(namespace, e, t[i], doc)\r\n        } else if (t[i].constructor == Number) {\r\n          this.graft(namespace, e, t[i].toString(), doc)\r\n        } else if (t[i].constructor == Object) {\r\n          // hash's properties => element's attributes\r\n          for (var k in t[i]) {\r\n            e.setAttributeNS(null, k, t[i][k])\r\n          }\r\n        } else if (t[i].constructor == Boolean) {\r\n          this.graft(namespace, e, t[i] ? 'true' : 'false', doc)\r\n        } else\r\n          throw 'Object ' + t[i] + ' is inscrutable as an graft arglet.'\r\n      }\r\n    }\r\n\r\n    if (parent) parent.appendChild(e)\r\n\r\n    return Element.extend(e) // return the topmost created node\r\n  },\r\n\r\n  setObject: function (triple) {\r\n\r\n    /**\r\n     * Erwartungen von Arvid an diese Funktion:\r\n     * - Es existiert genau ein triple mit dem Subjekt und Praedikat,\r\n     *   das uebergeben wurde, und dieses haelt uebergebenes Objekt.\r\n     */\r\n\r\n    var triples = DataManager.query(\r\n      triple.subject,\r\n      triple.predicate,\r\n      undefined\r\n    )\r\n\r\n    DataManager.removeTriples(triples)\r\n\r\n    DataManager.addTriple(triple)\r\n\r\n    return true\r\n  },\r\n\r\n  query: function (subject, predicate, object) {\r\n\r\n    /*\r\n     * Typical triple.\r\n     *\t{value: subject, type: subjectType},\r\n     *\t{prefix: schema.prefix, name: property},\r\n     *\t{value: object, type: objectType});\r\n     */\r\n\r\n    return DataManager._triples.select(function (triple) {\r\n\r\n      var select = ((subject) ?\r\n        (triple.subject.type == subject.type) &&\r\n        (triple.subject.value == subject.value) : true)\r\n      if (predicate) {\r\n        select = select && ((predicate.prefix) ?\r\n          (triple.predicate.prefix == predicate.prefix) : true)\r\n        select = select && ((predicate.name) ?\r\n          (triple.predicate.name == predicate.name) : true)\r\n      }\r\n      select = select && ((object) ?\r\n        (triple.object.type == object.type) &&\r\n        (triple.object.value == object.value) : true)\r\n      return select\r\n    })\r\n  }\r\n}\r\n\r\n// register kickstart as the new onload event listener on current window.\r\n// 在当前窗口上将kickstart注册为新的onload事件侦听器。\r\n// previous listener(s) are triggered to launch with kickstart.\r\nEvent.observe(window, 'load', Kickstart.load)\r\n\r\n\r\nKickstart.register(DataManager.init)\r\n\r\nexport {\r\n  DataManager\r\n}","import ORYX_Command from '../core/Command'\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Log from '../Log'\r\nimport ORYX_Editor from '../Editor'\r\nimport { DataManager } from '../Kickstart'\r\nimport ORYX_Node from '../core/Node'\r\n\r\n/**\r\n This abstract plugin class can be used to build plugins on.\r\n It provides some more basic functionality like registering events (on*-handlers)...\r\n @example\r\n ORYX.Plugins.MyPlugin = ORYX.Plugins.AbstractPlugin.extend({\r\n        construct: function() {\r\n            // Call super class constructor\r\n            arguments.callee.$.construct.apply(this, arguments);\r\n\r\n            [...]\r\n        },\r\n        [...]\r\n    });\r\n\r\n @class ORYX.Plugins.AbstractPlugin\r\n @constructor Creates a new instance\r\n @author Willi Tscheschner\r\n */\r\nexport default class AbstractPlugin {\r\n  /**\r\n   * The facade which offer editor-specific functionality\r\n   * @type Facade\r\n   * @memberOf ORYX.Plugins.AbstractPlugin.prototype\r\n   */\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_LOADED, this.onLoaded.bind(this))\r\n  }\r\n\r\n  /**\r\n   Overwrite to handle load event. TODO: Document params!!!\r\n   @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   */\r\n  onLoaded () {\r\n  }\r\n\r\n  /**\r\n   Overwrite to handle selection changed event. TODO: Document params!!!\r\n   @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   */\r\n  onSelectionChanged () {\r\n  }\r\n\r\n  /**\r\n   Show overlay on given shape.\r\n   @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   @example\r\n   showOverlay(\r\n   myShape,\r\n   { stroke: \"green\" },\r\n   ORYX.Editor.graft(\"http://www.w3.org/2000/svg\", null, ['path', {\r\n               \"title\": \"Click the element to execute it!\",\r\n               \"stroke-width\": 2.0,\r\n               \"stroke\": \"black\",\r\n               \"d\": \"M0,-5 L5,0 L0,5 Z\",\r\n               \"line-captions\": \"round\"\r\n           }])\r\n   )\r\n   @param {Oryx.XXX.Shape[]} shapes One shape or array of shapes the overlay should be put on\r\n   @param {Oryx.XXX.Attributes} attributes some attributes...\r\n   @param {Oryx.svg.node} svgNode The svg node which should be used as overlay\r\n   @param {String} [svgNode=\"NW\"] The svg node position where the overlay should be placed\r\n   */\r\n  showOverlay (shapes, attributes, svgNode, svgNodePosition) {\r\n\r\n    if (!(shapes instanceof Array)) {\r\n      shapes = [shapes]\r\n    }\r\n\r\n    // Define Shapes\r\n    shapes = shapes.map(function (shape) {\r\n      let el = shape\r\n      if (typeof shape == 'string') {\r\n        el = this.facade.getCanvas().getChildShapeByResourceId(shape)\r\n        el = el || this.facade.getCanvas().getChildById(shape, true)\r\n      }\r\n      return el\r\n    }.bind(this)).compact()\r\n\r\n    // Define unified id\r\n    if (!this.overlayID) {\r\n      this.overlayID = this.type + ORYX_Editor.provideId()\r\n    }\r\n\r\n    this.facade.raiseEvent({\r\n      type: ORYX_Config.EVENT_OVERLAY_SHOW,\r\n      id: this.overlayID,\r\n      shapes: shapes,\r\n      attributes: attributes,\r\n      node: svgNode,\r\n      nodePosition: svgNodePosition || 'NW'\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   Hide current overlay.\r\n   @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   */\r\n  hideOverlay () {\r\n    this.facade.raiseEvent({\r\n      type: ORYX_Config.EVENT_OVERLAY_HIDE,\r\n      id: this.overlayID\r\n    })\r\n  }\r\n\r\n  /**\r\n   Does a transformation with the given xslt stylesheet.\r\n   @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   @param {String} data The data (e.g. eRDF) which should be transformed\r\n   @param {String} stylesheet URL of a stylesheet which should be used for transforming data.\r\n   */\r\n  doTransform (data, stylesheet) {\r\n\r\n    if (!stylesheet || !data) {\r\n      return ''\r\n    }\r\n\r\n    let parser = new DOMParser()\r\n    let parsedData = parser.parseFromString(data, 'text/xml')\r\n    let source = stylesheet\r\n    let xsl\r\n    new Ajax.Request(source, {\r\n      asynchronous: false,\r\n      method: 'get',\r\n      onSuccess: function (transport) {\r\n        xsl = transport.responseText\r\n      }.bind(this),\r\n      onFailure: (function (transport) {\r\n        ORYX_Log.error('XSL load failed' + transport)\r\n      }).bind(this)\r\n    })\r\n    let xsltProcessor = new XSLTProcessor()\r\n    let domParser = new DOMParser()\r\n    let xslObject = domParser.parseFromString(xsl, 'text/xml')\r\n    xsltProcessor.importStylesheet(xslObject)\r\n\r\n    try {\r\n      let newData = xsltProcessor.transformToFragment(parsedData, document)\r\n      let serializedData = (new XMLSerializer()).serializeToString(newData)\r\n\r\n      /* Firefox 2 to 3 problem?! */\r\n      serializedData = !serializedData.startsWith('<?xml') ? '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + serializedData : serializedData\r\n\r\n      return serializedData\r\n\r\n    } catch (error) {\r\n      return -1\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Opens a new window that shows the given XML content.\r\n   * @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   * @param {Object} content The XML content to be shown.\r\n   * @example\r\n   * openDownloadWindow( \"my.xml\", \"<exampleXML />\" );\r\n   */\r\n  openXMLWindow (content) {\r\n    let win = window.open(\r\n      'data:application/xml,' + encodeURIComponent(\r\n      content\r\n      ),\r\n      '_blank', 'resizable=yes,width=600,height=600,toolbar=0,scrollbars=yes'\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Opens a download window for downloading the given content.\r\n   * @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   * @param {String} filename The content's file name\r\n   * @param {String} content The content to download\r\n   */\r\n  openDownloadWindow (filename, content) {\r\n    let win = window.open('')\r\n    if (win != null) {\r\n      win.document.open()\r\n      win.document.write('<html><body>')\r\n      let submitForm = win.document.createElement('form')\r\n      win.document.body.appendChild(submitForm)\r\n\r\n      let createHiddenElement = function (name, value) {\r\n        let newElement = document.createElement('input')\r\n        newElement.name = name\r\n        newElement.type = 'hidden'\r\n        newElement.value = value\r\n        return newElement\r\n      }\r\n\r\n      submitForm.appendChild(createHiddenElement('download', content))\r\n      submitForm.appendChild(createHiddenElement('file', filename))\r\n\r\n\r\n      submitForm.method = 'POST'\r\n      win.document.write('</body></html>')\r\n      win.document.close()\r\n      submitForm.action = ORYX_Config.PATH + '/download'\r\n      submitForm.submit()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Serializes DOM.\r\n   * @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   * @type {String} Serialized DOM\r\n   */\r\n  getSerializedDOM () {\r\n    // Force to set all resource IDs\r\n    let serializedDOM = DataManager.serializeDOM(this.facade)\r\n\r\n    // add namespaces\r\n    serializedDOM = '<?xml version=\"1.0\" encoding=\"utf-8\"?>' +\r\n      '<html xmlns=\"http://www.w3.org/1999/xhtml\" ' +\r\n      'xmlns:b3mn=\"http://b3mn.org/2007/b3mn\" ' +\r\n      'xmlns:ext=\"http://b3mn.org/2007/ext\" ' +\r\n      'xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" ' +\r\n      'xmlns:atom=\"http://b3mn.org/2007/atom+xhtml\">' +\r\n      '<head profile=\"http://purl.org/NET/erdf/profile\">' +\r\n      '<link rel=\"schema.dc\" href=\"http://purl.org/dc/elements/1.1/\" />' +\r\n      '<link rel=\"schema.dcTerms\" href=\"http://purl.org/dc/terms/ \" />' +\r\n      '<link rel=\"schema.b3mn\" href=\"http://b3mn.org\" />' +\r\n      '<link rel=\"schema.oryx\" href=\"http://oryx-editor.org/\" />' +\r\n      '<link rel=\"schema.raziel\" href=\"http://raziel.org/\" />' +\r\n      '<base href=\"' +\r\n      location.href.split('?')[0] +\r\n      '\" />' +\r\n      '</head><body>' +\r\n      serializedDOM +\r\n      '</body></html>'\r\n\r\n    return serializedDOM\r\n  }\r\n\r\n  /**\r\n   * Sets the editor in read only mode: Edges/ dockers cannot be moved anymore,\r\n   * shapes cannot be selected anymore.\r\n   * @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   */\r\n  enableReadOnlyMode () {\r\n    //Edges cannot be moved anymore\r\n    this.facade.disableEvent(ORYX_Config.EVENT_MOUSEDOWN)\r\n\r\n    // Stop the user from editing the diagram while the plugin is active\r\n    this._stopSelectionChange = function () {\r\n      if (this.facade.getSelection().length > 0) {\r\n        this.facade.setSelection([])\r\n      }\r\n    }\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_SELECTION_CHANGED, this._stopSelectionChange.bind(this))\r\n  }\r\n\r\n  /**\r\n   * Disables read only mode, see @see\r\n   * @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   * @see ORYX.Plugins.AbstractPlugin.prototype.enableReadOnlyMode\r\n   */\r\n  disableReadOnlyMode () {\r\n    // Edges can be moved now again\r\n    this.facade.enableEvent(ORYX_Config.EVENT_MOUSEDOWN)\r\n\r\n    if (this._stopSelectionChange) {\r\n      this.facade.unregisterOnEvent(ORYX_Config.EVENT_SELECTION_CHANGED, this._stopSelectionChange.bind(this))\r\n      this._stopSelectionChange = undefined\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts RDF from DOM.\r\n   * @methodOf ORYX.Plugins.AbstractPlugin.prototype\r\n   * @type {String} Extracted RFD. Null if there are transformation errors.\r\n   */\r\n  getRDFFromDOM () {\r\n    //convert to RDF\r\n    try {\r\n      let xsl = ''\r\n      let source = ORYX_Config.PATH + 'lib/extract-rdf.xsl'\r\n      new Ajax.Request(source, {\r\n        asynchronous: false,\r\n        method: 'get',\r\n        onSuccess: function (transport) {\r\n          xsl = transport.responseText\r\n        }.bind(this),\r\n        onFailure: (function (transport) {\r\n          ORYX_Log.error('XSL load failed' + transport)\r\n        }).bind(this)\r\n      })\r\n\r\n      let domParser = new DOMParser()\r\n      let xmlObject = domParser.parseFromString(this.getSerializedDOM(), 'text/xml')\r\n      let xslObject = domParser.parseFromString(xsl, 'text/xml')\r\n      let xsltProcessor = new XSLTProcessor()\r\n      xsltProcessor.importStylesheet(xslObject)\r\n      let result = xsltProcessor.transformToFragment(xmlObject, document)\r\n      let serializer = new XMLSerializer()\r\n\r\n      return serializer.serializeToString(result)\r\n    } catch (e) {\r\n      console.log('error serializing ' + e)\r\n      return ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks if a certain stencil set is loaded right now.\r\n   *\r\n   */\r\n  isStencilSetExtensionLoaded (stencilSetExtensionNamespace) {\r\n    return this.facade.getStencilSets().values().any(\r\n      function (ss) {\r\n        return ss.extensions().keys().any(\r\n          function (extensionKey) {\r\n            return extensionKey == stencilSetExtensionNamespace\r\n          }.bind(this)\r\n        )\r\n      }.bind(this)\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Raises an event so that registered layouters does\r\n   * have the posiblility to layout the given shapes\r\n   * For further reading, have a look into the AbstractLayouter\r\n   * class\r\n   * @param {Object} shapes\r\n   */\r\n  doLayout (shapes) {\r\n    // Raises a do layout event\r\n    if (this.facade.raiseEvent) {\r\n      this.facade.raiseEvent({\r\n        type: ORYX_Config.EVENT_LAYOUT,\r\n        shapes: shapes\r\n      })\r\n    } else {\r\n      this.facade.handleEvents({\r\n        type: ORYX_Config.EVENT_LAYOUT,\r\n        shapes: shapes\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Does a primitive layouting with the incoming/outgoing\r\n   * edges (set the dockers to the right position) and if\r\n   * necessary, it will be called the real layouting\r\n   * @param {ORYX.Core.Node} node\r\n   * @param {Array} edges\r\n   */\r\n  layoutEdges (node, allEdges, offset) {\r\n    if (!this.facade.isExecutingCommands()) {\r\n      return\r\n    }\r\n\r\n    class Command extends ORYX_Command{\r\n      constructor (edges, node, offset, plugin) {\r\n        super()\r\n        this.edges = edges\r\n        this.node = node\r\n        this.plugin = plugin\r\n        this.offset = offset\r\n\r\n        // Get the new absolute center\r\n        let center = node.absoluteXY()\r\n        this.ulo = { x: center.x - offset.x, y: center.y - offset.y }\r\n      }\r\n      execute () {\r\n        if (this.changes) {\r\n          this.executeAgain()\r\n          return\r\n        } else {\r\n          this.changes = []\r\n          this.edges.each(function (edge) {\r\n            this.changes.push({\r\n              edge: edge,\r\n              oldDockerPositions: edge.dockers.map(function (r) {\r\n                return r.bounds.center()\r\n              })\r\n            })\r\n          }.bind(this))\r\n        }\r\n\r\n        // Find all edges, which are related to the node and\r\n        // have more than two dockers\r\n        this.edges\r\n        // Find all edges with more than two dockers\r\n          .findAll(function (r) {\r\n            return r.dockers.length > 2\r\n          }.bind(this))\r\n          // For every edge, check second and one before last docker\r\n          // if there are horizontal/vertical on the same level\r\n          // and if so, align the the bounds\r\n          .each(function (edge) {\r\n            if (edge.dockers.first().getDockedShape() === this.node) {\r\n              var second = edge.dockers[1]\r\n              if (this.align(second.bounds, edge.dockers.first())) {\r\n                second.update()\r\n              }\r\n            } else if (edge.dockers.last().getDockedShape() === this.node) {\r\n              var beforeLast = edge.dockers[edge.dockers.length - 2]\r\n              if (this.align(beforeLast.bounds, edge.dockers.last())) {\r\n                beforeLast.update()\r\n              }\r\n            }\r\n            edge._update(true)\r\n            edge.removeUnusedDockers()\r\n            if (this.isBendPointIncluded(edge)) {\r\n              this.plugin.doLayout(edge)\r\n              return\r\n            }\r\n          }.bind(this))\r\n\r\n\r\n        // Find all edges, which have only to dockers\r\n        // and is located horizontal/vertical.\r\n        // Do layout with those edges\r\n        this.edges\r\n        // Find all edges with exactly two dockers\r\n          .each(function (edge) {\r\n            if (edge.dockers.length == 2) {\r\n              var p1 = edge.dockers.first().getAbsoluteReferencePoint() || edge.dockers.first().bounds.center()\r\n              var p2 = edge.dockers.last().getAbsoluteReferencePoint() || edge.dockers.first().bounds.center()\r\n              // Find all horizontal/vertical edges\r\n              if (Math.abs(-Math.abs(p1.x - p2.x) + Math.abs(this.offset.x)) < 2 || Math.abs(-Math.abs(p1.y - p2.y) + Math.abs(this.offset.y)) < 2) {\r\n                this.plugin.doLayout(edge)\r\n              }\r\n            }\r\n          }.bind(this))\r\n\r\n        this.edges.each(function (edge, i) {\r\n          this.changes[i].dockerPositions = edge.dockers.map(function (r) {\r\n            return r.bounds.center()\r\n          })\r\n        }.bind(this))\r\n\r\n      }\r\n      /**\r\n       * Align the bounds if the center is\r\n       * the same than the old center\r\n       * @params {Object} bounds\r\n       * @params {Object} bounds2\r\n       */\r\n      align (bounds, refDocker) {\r\n        let abRef = refDocker.getAbsoluteReferencePoint() || refDocker.bounds.center()\r\n        let xdif = bounds.center().x - abRef.x\r\n        let ydif = bounds.center().y - abRef.y\r\n        if (Math.abs(-Math.abs(xdif) + Math.abs(this.offset.x)) < 3 && this.offset.xs === undefined) {\r\n          bounds.moveBy({ x: -xdif, y: 0 })\r\n        }\r\n        if (Math.abs(-Math.abs(ydif) + Math.abs(this.offset.y)) < 3 && this.offset.ys === undefined) {\r\n          bounds.moveBy({ y: -ydif, x: 0 })\r\n        }\r\n\r\n        if (this.offset.xs !== undefined || this.offset.ys !== undefined) {\r\n          let absPXY = refDocker.getDockedShape().absoluteXY()\r\n          xdif = bounds.center().x - (absPXY.x + ((abRef.x - absPXY.x) / this.offset.xs))\r\n          ydif = bounds.center().y - (absPXY.y + ((abRef.y - absPXY.y) / this.offset.ys))\r\n\r\n          if (Math.abs(-Math.abs(xdif) + Math.abs(this.offset.x)) < 3) {\r\n            bounds.moveBy({ x: -(bounds.center().x - abRef.x), y: 0 })\r\n          }\r\n\r\n          if (Math.abs(-Math.abs(ydif) + Math.abs(this.offset.y)) < 3) {\r\n            bounds.moveBy({ y: -(bounds.center().y - abRef.y), x: 0 })\r\n          }\r\n        }\r\n      }\r\n      /**\r\n       * Returns a TRUE if there are bend point which overlay the shape\r\n       */\r\n      isBendPointIncluded (edge) {\r\n        // Get absolute bounds\r\n        let ab = edge.dockers.first().getDockedShape()\r\n        let bb = edge.dockers.last().getDockedShape()\r\n\r\n        if (ab) {\r\n          ab = ab.absoluteBounds()\r\n          ab.widen(5)\r\n        }\r\n\r\n        if (bb) {\r\n          bb = bb.absoluteBounds()\r\n          bb.widen(20) // Wide with 20 because of the arrow from the edge\r\n        }\r\n\r\n        return edge.dockers\r\n          .any(function (docker, i) {\r\n            let c = docker.bounds.center()\r\n            // Dont count first and last\r\n            return i != 0 && i != edge.dockers.length - 1 &&\r\n              // Check if the point is included to the absolute bounds\r\n              ((ab && ab.isIncluded(c)) || (bb && bb.isIncluded(c)))\r\n          })\r\n      }\r\n\r\n      removeAllDocker(edge) {\r\n        edge.dockers.slice(1, edge.dockers.length - 1).each(function (docker) {\r\n          edge.removeDocker(docker)\r\n        })\r\n      }\r\n      executeAgain () {\r\n        this.changes.each(function (change) {\r\n          // Reset the dockers\r\n          this.removeAllDocker(change.edge)\r\n          change.dockerPositions.each(function (pos, i) {\r\n            if (i == 0 || i == change.dockerPositions.length - 1) {\r\n              return\r\n            }\r\n            let docker = change.edge.createDocker(undefined, pos)\r\n            docker.bounds.centerMoveTo(pos)\r\n            docker.update()\r\n          }.bind(this))\r\n          change.edge._update(true)\r\n        }.bind(this))\r\n      }\r\n      rollback () {\r\n        this.changes.each(function (change) {\r\n          // Reset the dockers\r\n          this.removeAllDocker(change.edge)\r\n          change.oldDockerPositions.each(function (pos, i) {\r\n            if (i == 0 || i == change.oldDockerPositions.length - 1) {\r\n              return\r\n            }\r\n            let docker = change.edge.createDocker(undefined, pos)\r\n            docker.bounds.centerMoveTo(pos)\r\n            docker.update()\r\n          }.bind(this))\r\n          change.edge._update(true)\r\n        }.bind(this))\r\n      }\r\n    }\r\n\r\n    this.facade.executeCommands([new Command(allEdges, node, offset, this)])\r\n  }\r\n\r\n}","import AbstractPlugin from './AbstractPlugin'\r\nimport ORYX_Config from '../CONFIG'\r\n\r\n/**\r\n This abstract plugin implements the core behaviour of layout\r\n @class ORYX.Plugins.AbstractLayouter\r\n @constructor Creates a new instance\r\n @author Willi Tscheschner\r\n */\r\nexport default class AbstractLayouter extends AbstractPlugin {\r\n  /**\r\n   * 'layouted' defined all types of shapes which will be layouted.\r\n   * It can be one value or an array of values. The value\r\n   * can be a Stencil ID (as String) or an class type of either\r\n   * a ORYX.Core.Node or ORYX.Core.Edge\r\n   * @type Array|String|Object\r\n   * @memberOf ORYX.Plugins.AbstractLayouter.prototype\r\n   */\r\n\r\n  /**\r\n   * Constructor\r\n   * @param {Object} facade\r\n   * @memberOf ORYX.Plugins.AbstractLayouter.prototype\r\n   */\r\n  constructor (facade) {\r\n    super(facade)\r\n    this.layouted = []\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_LAYOUT, this._initLayout.bind(this))\r\n  }\r\n\r\n  /**\r\n   * Proofs if this shape should be layouted or not\r\n   * @param {Object} shape\r\n   * @memberOf ORYX.Plugins.AbstractLayouter.prototype\r\n   */\r\n  isIncludedInLayout (shape) {\r\n    if (!(this.layouted instanceof Array)) {\r\n      this.layouted = [this.layouted].compact()\r\n    }\r\n\r\n    // If there are no elements\r\n    if (this.layouted.length <= 0) {\r\n      // Return TRUE\r\n      return true\r\n    }\r\n\r\n    // Return TRUE if there is any correlation between\r\n    // the 'layouted' attribute and the shape themselve.\r\n    return this.layouted.any(function (s) {\r\n      if (typeof s === 'string') {\r\n        return shape.getStencil().id().include(s)\r\n      } else {\r\n        return shape instanceof s\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Callback to start the layouting\r\n   * @param {Object} event Layout event\r\n   * @param {Object} shapes Given shapes\r\n   * @memberOf ORYX.Plugins.AbstractLayouter.prototype\r\n   */\r\n  _initLayout (event) {\r\n    // Get the shapes\r\n    let shapes = [event.shapes].flatten().compact()\r\n\r\n    // Find all shapes which should be layouted\r\n    let toLayout = shapes.findAll(function (shape) {\r\n      return this.isIncludedInLayout(shape)\r\n    }.bind(this))\r\n\r\n    // If there are shapes left\r\n    if (toLayout.length > 0) {\r\n      // Do layout\r\n      this.layout(toLayout)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Implementation of layouting a set on shapes\r\n   * @param {Object} shapes Given shapes\r\n   * @memberOf ORYX.Plugins.AbstractLayouter.prototype\r\n   */\r\n  layout (shapes) {\r\n    throw new Error('Layouter has to implement the layout function.')\r\n  }\r\n}\r\n","import Command from '../core/Command'\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Utils from '../Utils'\r\nimport ORYX_Edge from '../core/Edge'\r\nimport ORYX_Node from '../core/Node'\r\n\r\nclass ClipBoard {\r\n  constructor () {\r\n    this.shapesAsJson = []\r\n    this.selection = []\r\n    this.SSnamespace = ''\r\n    this.useOffset = true\r\n  }\r\n\r\n  isOccupied () {\r\n    return this.shapesAsJson.length > 0\r\n  }\r\n\r\n  refresh (selection, shapes, namespace, useNoOffset) {\r\n    this.selection = selection\r\n    this.SSnamespace = namespace\r\n    // Store outgoings, targets and parents to restore them later on\r\n    this.outgoings = {}\r\n    this.parents = {}\r\n    this.targets = {}\r\n    this.useOffset = useNoOffset !== true\r\n\r\n    this.shapesAsJson = shapes.map(function (shape) {\r\n      let s = shape.toJSON()\r\n      s.parent = { resourceId: shape.getParentShape().resourceId }\r\n      s.parentIndex = shape.getParentShape().getChildShapes().indexOf(shape)\r\n      return s\r\n    })\r\n  }\r\n}\r\n\r\nclass DeleteCommand extends Command {\r\n  constructor (clipboard, facade) {\r\n    super()\r\n    this.clipboard = clipboard\r\n    this.shapesAsJson = clipboard.shapesAsJson\r\n    this.facade = facade\r\n\r\n    // Store dockers of deleted shapes to restore connections\r\n    this.dockers = this.shapesAsJson.map(function (shapeAsJson) {\r\n      let shape = shapeAsJson.getShape()\r\n      let incomingDockers = shape.getIncomingShapes().map(function (s) {\r\n        return s.getDockers().last()\r\n      })\r\n      let outgoingDockers = shape.getOutgoingShapes().map(function (s) {\r\n        return s.getDockers().first()\r\n      })\r\n      let dockers = shape.getDockers().concat(incomingDockers, outgoingDockers).compact().map(function (docker) {\r\n        return {\r\n          object: docker,\r\n          referencePoint: docker.referencePoint,\r\n          dockedShape: docker.getDockedShape()\r\n        }\r\n      })\r\n      return dockers\r\n    }).flatten()\r\n  }\r\n\r\n  execute () {\r\n    this.shapesAsJson.each(function (shapeAsJson) {\r\n      // Delete shape\r\n      this.facade.deleteShape(shapeAsJson.getShape())\r\n    }.bind(this))\r\n\r\n    this.facade.setSelection([])\r\n    this.facade.getCanvas().update()\r\n    this.facade.updateSelection()\r\n    this.facade.handleEvents({ type: ORYX_Config.ACTION_DELETE_COMPLETED })\r\n\r\n  }\r\n\r\n  rollback () {\r\n    this.shapesAsJson.each(function (shapeAsJson) {\r\n      let shape = shapeAsJson.getShape()\r\n      let parent = this.facade.getCanvas().getChildShapeByResourceId(shapeAsJson.parent.resourceId) || this.facade.getCanvas()\r\n      parent.add(shape, shape.parentIndex)\r\n    }.bind(this))\r\n\r\n    //reconnect shapes\r\n    this.dockers.each(function (d) {\r\n      d.object.setDockedShape(d.dockedShape)\r\n      d.object.setReferencePoint(d.referencePoint)\r\n    }.bind(this))\r\n\r\n    this.facade.setSelection(this.selectedShapes)\r\n    this.facade.getCanvas().update()\r\n    this.facade.updateSelection()\r\n\r\n  }\r\n}\r\n\r\nexport default class Edit {\r\n  ClipBoard = ClipBoard\r\n  DeleteCommand = DeleteCommand\r\n\r\n  I18N = {\r\n    Edit: {\r\n      group: 'Edit',\r\n      cut: 'Cut',\r\n      cutDesc: 'Cuts the selection into an Oryx clipboard',\r\n      copy: 'Copy',\r\n      copyDesc: 'Copies the selection into an Oryx clipboard',\r\n      paste: 'Paste',\r\n      pasteDesc: 'Pastes the Oryx clipboard to the canvas',\r\n      del: 'Delete',\r\n      delDesc: 'Deletes all selected shapes',\r\n    }\r\n  }\r\n\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    this.clipboard = new this.ClipBoard()\r\n\r\n    // this.facade.registerOnEvent(ORYX.CONFIG.EVENT_KEYDOWN, this.keyHandler.bind(this));\r\n\r\n    this.facade.offer({\r\n      name: this.I18N.Edit.cut,\r\n      description: this.I18N.Edit.cutDesc,\r\n      icon: ORYX_Config.PATH + 'images/cut.png',\r\n      keyCodes: [{\r\n        metaKeys: [ORYX_Config.META_KEY_META_CTRL],\r\n        keyCode: 88,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.callEdit.bind(this, this.editCut),\r\n      group: this.I18N.Edit.group,\r\n      index: 1,\r\n      minShape: 1\r\n    })\r\n\r\n    this.facade.offer({\r\n      name: this.I18N.Edit.copy,\r\n      description: this.I18N.Edit.copyDesc,\r\n      icon: ORYX_Config.PATH + 'images/page_copy.png',\r\n      keyCodes: [{\r\n        metaKeys: [ORYX_Config.META_KEY_META_CTRL],\r\n        keyCode: 67,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.callEdit.bind(this, this.editCopy, [true, false]),\r\n      group: this.I18N.Edit.group,\r\n      index: 2,\r\n      minShape: 1\r\n    })\r\n\r\n    this.facade.offer({\r\n      name: this.I18N.Edit.paste,\r\n      description: this.I18N.Edit.pasteDesc,\r\n      icon: ORYX_Config.PATH + 'images/page_paste.png',\r\n      keyCodes: [{\r\n        metaKeys: [ORYX_Config.META_KEY_META_CTRL],\r\n        keyCode: 86,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.callEdit.bind(this, this.editPaste),\r\n      isEnabled: this.clipboard.isOccupied.bind(this.clipboard),\r\n      group: this.I18N.Edit.group,\r\n      index: 3,\r\n      minShape: 0,\r\n      maxShape: 0\r\n    })\r\n\r\n    this.facade.offer({\r\n      name: this.I18N.Edit.del,\r\n      description: this.I18N.Edit.delDesc,\r\n      icon: ORYX_Config.PATH + 'images/cross.png',\r\n      keyCodes: [{\r\n        metaKeys: [ORYX_Config.META_KEY_META_CTRL],\r\n        keyCode: 8,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      },\r\n        {\r\n          keyCode: 46,\r\n          keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n        }\r\n      ],\r\n      functionality: this.callEdit.bind(this, this.editDelete),\r\n      group: this.I18N.Edit.group,\r\n      index: 4,\r\n      minShape: 1\r\n    })\r\n  }\r\n\r\n  callEdit (fn, args) {\r\n    window.setTimeout(function () {\r\n      fn.apply(this, (args instanceof Array ? args : []))\r\n    }.bind(this), 1)\r\n  }\r\n\r\n  /**\r\n   * Handles the mouse down event and starts the copy-move-paste action, if\r\n   * control or meta key is pressed.\r\n   */\r\n  handleMouseDown (event) {\r\n    if (this._controlPressed) {\r\n      this._controlPressed = false\r\n      this.editCopy()\r\n      //\t\t\tconsole.log(\"copiedEle: %0\",this.clipboard.shapesAsJson)\r\n      //\t\t\tconsole.log(\"mousevent: %o\",event)\r\n      this.editPaste()\r\n      event.forceExecution = true\r\n      this.facade.raiseEvent(event, this.clipboard.shapesAsJson)\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The key handler for this plugin. Every action from the set of cut, copy,\r\n   * paste and delete should be accessible trough simple keyboard shortcuts.\r\n   * This method checks whether any event triggers one of those actions.\r\n   *\r\n   * @param {Object} event The keyboard event that should be analysed for\r\n   *     triggering of this plugin.\r\n   */\r\n  //    keyHandler: function(event){\r\n  //        //TODO document what event.which is.\r\n  //\r\n  //        ORYX.Log.debug(\"edit.js handles a keyEvent.\");\r\n  //\r\n  //        // assure we have the current event.\r\n  //        if (!event)\r\n  //            event = window.event;\r\n  //\r\n  //\r\n  //        // get the currently pressed key and state of control key.\r\n  //        var pressedKey = event.which || event.keyCode;\r\n  //        var ctrlPressed = event.ctrlKey;\r\n  //\r\n  //        // if the object is to be deleted, do so, and return immediately.\r\n  //        if ((pressedKey == ORYX.CONFIG.KEY_CODE_DELETE) ||\r\n  //        ((pressedKey == ORYX.CONFIG.KEY_CODE_BACKSPACE) &&\r\n  //        (event.metaKey || event.appleMetaKey))) {\r\n  //\r\n  //            ORYX.Log.debug(\"edit.js deletes the shape.\");\r\n  //            this.editDelete();\r\n  //            return;\r\n  //        }\r\n  //\r\n  //         // if control key is not pressed, we're not interested anymore.\r\n  //         if (!ctrlPressed)\r\n  //         return;\r\n  //\r\n  //         // when ctrl is pressed, switch trough the possibilities.\r\n  //         switch (pressedKey) {\r\n  //\r\n  //\t         // cut.\r\n  //\t         case ORYX.CONFIG.KEY_CODE_X:\r\n  //\t         this.editCut();\r\n  //\t         break;\r\n  //\r\n  //\t         // copy.\r\n  //\t         case ORYX.CONFIG.KEY_CODE_C:\r\n  //\t         this.editCopy();\r\n  //\t         break;\r\n  //\r\n  //\t         // paste.\r\n  //\t         case ORYX.CONFIG.KEY_CODE_V:\r\n  //\t         this.editPaste();\r\n  //\t         break;\r\n  //         }\r\n  //    },\r\n\r\n  /**\r\n   * Returns a list of shapes which should be considered while copying.\r\n   * Besides the shapes of given ones, edges and attached nodes are added to the result set.\r\n   * If one of the given shape is a child of another given shape, it is not put into the result.\r\n   */\r\n  getAllShapesToConsider (shapes) {\r\n    let shapesToConsider = [] // only top-level shapes\r\n    let childShapesToConsider = [] // all child shapes of top-level shapes\r\n\r\n    shapes.each(function (shape) {\r\n      // Throw away these shapes which have a parent in given shapes\r\n      let isChildShapeOfAnother = shapes.any(function (s2) {\r\n        return s2.hasChildShape(shape)\r\n      })\r\n      if (isChildShapeOfAnother) return\r\n\r\n      // This shape should be considered\r\n      shapesToConsider.push(shape)\r\n      // Consider attached nodes (e.g. intermediate events)\r\n      if (shape instanceof ORYX_Node) {\r\n        let attached = shape.getOutgoingNodes()\r\n        attached = attached.findAll(function (a) {\r\n          return !shapes.include(a)\r\n        })\r\n        shapesToConsider = shapesToConsider.concat(attached)\r\n      }\r\n\r\n      childShapesToConsider = childShapesToConsider.concat(shape.getChildShapes(true))\r\n    }.bind(this))\r\n\r\n    // All edges between considered child shapes should be considered\r\n    // Look for these edges having incoming and outgoing in childShapesToConsider\r\n    let edgesToConsider = this.facade.getCanvas().getChildEdges().select(function (edge) {\r\n      // Ignore if already added\r\n      if (shapesToConsider.include(edge)) return false\r\n      // Ignore if there are no docked shapes\r\n      if (edge.getAllDockedShapes().size() === 0) return false\r\n      // True if all docked shapes are in considered child shapes\r\n      return edge.getAllDockedShapes().all(function (shape) {\r\n        // Remember: Edges can have other edges on outgoing, that is why edges must not be included in\r\n        // childShapesToConsider\r\n        return shape instanceof ORYX_Edge || childShapesToConsider.include(shape)\r\n      })\r\n    })\r\n    shapesToConsider = shapesToConsider.concat(edgesToConsider)\r\n\r\n    return shapesToConsider\r\n  }\r\n\r\n  /**\r\n   * Performs the cut operation by first copy-ing and then deleting the\r\n   * current selection.\r\n   */\r\n  editCut () {\r\n    //TODO document why this returns false.\r\n    //TODO document what the magic boolean parameters are supposed to do.\r\n\r\n    this.editCopy(false, true)\r\n    this.editDelete(true)\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Performs the copy operation.\r\n   * @param {Object} will_not_update ??\r\n   */\r\n  editCopy (will_update, useNoOffset) {\r\n    let selection = this.facade.getSelection()\r\n\r\n    //if the selection is empty, do not remove the previously copied elements\r\n    if (selection.length == 0) return\r\n\r\n    this.clipboard.refresh(selection, this.getAllShapesToConsider(selection), this.facade.getCanvas().getStencil().stencilSet().namespace(), useNoOffset)\r\n\r\n    if (will_update) this.facade.updateSelection()\r\n  }\r\n\r\n  /**\r\n   * Performs the paste operation.\r\n   */\r\n  editPaste () {\r\n    // Create a new canvas with childShapes\r\n    // and stencilset namespace to be JSON Import conform\r\n    let canvas = {\r\n      childShapes: this.clipboard.shapesAsJson,\r\n      stencilset: {\r\n        namespace: this.clipboard.SSnamespace\r\n      }\r\n    }\r\n    // Apply json helper to iterate over json object\r\n    jQuery.extend(canvas, ORYX_Utils.JSONHelper)\r\n\r\n    let childShapeResourceIds = canvas.getChildShapes(true).pluck('resourceId')\r\n    // console.log(2, getChildShapes)\r\n    // let childShapeResourceIds = getChildShapes.getChildShapes(canvas, true).pluck('resourceId')\r\n    let outgoings = {}\r\n    // Iterate over all shapes\r\n    canvas.eachChild(function (shape, parent) {\r\n      // Throw away these references where referenced shape isn't copied\r\n      shape.outgoing = shape.outgoing.select(function (out) {\r\n        return childShapeResourceIds.include(out.resourceId)\r\n      })\r\n      shape.outgoing.each(function (out) {\r\n        if (!outgoings[out.resourceId]) {\r\n          outgoings[out.resourceId] = []\r\n        }\r\n        outgoings[out.resourceId].push(shape)\r\n      })\r\n\r\n      return shape\r\n    }.bind(this), true, true)\r\n\r\n\r\n    // Iterate over all shapes\r\n    canvas.eachChild(function (shape, parent) {\r\n\r\n      // Check if there has a valid target\r\n      if (shape.target && !(childShapeResourceIds.include(shape.target.resourceId))) {\r\n        shape.target = undefined\r\n        shape.targetRemoved = true\r\n      }\r\n\r\n      // Check if the first docker is removed\r\n      if (shape.dockers &&\r\n        shape.dockers.length >= 1 &&\r\n        shape.dockers[0].getDocker &&\r\n        ((shape.dockers[0].getDocker().getDockedShape() &&\r\n          !childShapeResourceIds.include(shape.dockers[0].getDocker().getDockedShape().resourceId)) ||\r\n          !shape.getShape().dockers[0].getDockedShape() && !outgoings[shape.resourceId])) {\r\n\r\n        shape.sourceRemoved = true\r\n      }\r\n\r\n      return shape\r\n    }.bind(this), true, true)\r\n\r\n\r\n    // Iterate over top-level shapes\r\n    canvas.eachChild(function (shape, parent) {\r\n      // All top-level shapes should get an offset in their bounds\r\n      // Move the shape occording to COPY_MOVE_OFFSET\r\n      if (this.clipboard.useOffset) {\r\n        shape.bounds = {\r\n          lowerRight: {\r\n            x: shape.bounds.lowerRight.x + ORYX_Config.CustomConfigs.COPY_MOVE_OFFSET,\r\n            y: shape.bounds.lowerRight.y + ORYX_Config.CustomConfigs.COPY_MOVE_OFFSET\r\n          },\r\n          upperLeft: {\r\n            x: shape.bounds.upperLeft.x + ORYX_Config.CustomConfigs.COPY_MOVE_OFFSET,\r\n            y: shape.bounds.upperLeft.y + ORYX_Config.CustomConfigs.COPY_MOVE_OFFSET\r\n          }\r\n        }\r\n      }\r\n      // Only apply offset to shapes with a target\r\n      if (shape.dockers) {\r\n        shape.dockers = shape.dockers.map(function (docker, i) {\r\n          // If shape had a target but the copied does not have anyone anymore,\r\n          // migrate the relative dockers to absolute ones.\r\n          if ((shape.targetRemoved === true && i == shape.dockers.length - 1 && docker.getDocker) ||\r\n            (shape.sourceRemoved === true && i == 0 && docker.getDocker)) {\r\n\r\n            docker = docker.getDocker().bounds.center()\r\n          }\r\n\r\n          // If it is the first docker and it has a docked shape,\r\n          // just return the coordinates\r\n          if ((i == 0 && docker.getDocker instanceof Function &&\r\n            shape.sourceRemoved !== true &&\r\n            (docker.getDocker().getDockedShape() ||\r\n              ((outgoings[shape.resourceId] || []).length > 0 &&\r\n                (!(shape.getShape() instanceof ORYX_Node) ||\r\n                  outgoings[shape.resourceId][0].getShape() instanceof ORYX_Node)))) ||\r\n            (i == shape.dockers.length - 1 && docker.getDocker instanceof Function &&\r\n              shape.targetRemoved !== true && (docker.getDocker().getDockedShape() || shape.target))) {\r\n\r\n            return {\r\n              x: docker.x,\r\n              y: docker.y,\r\n              getDocker: docker.getDocker\r\n            }\r\n          } else if (this.clipboard.useOffset) {\r\n            return {\r\n              x: docker.x + ORYX_Config.CustomConfigs.COPY_MOVE_OFFSET,\r\n              y: docker.y + ORYX_Config.CustomConfigs.COPY_MOVE_OFFSET,\r\n              getDocker: docker.getDocker\r\n            }\r\n          } else {\r\n            return {\r\n              x: docker.x,\r\n              y: docker.y,\r\n              getDocker: docker.getDocker\r\n            }\r\n          }\r\n        }.bind(this))\r\n\r\n      } else if (shape.getShape() instanceof ORYX_Node && shape.dockers && shape.dockers.length > 0 && (!shape.dockers.first().getDocker || shape.sourceRemoved === true || !(shape.dockers.first().getDocker().getDockedShape() || outgoings[shape.resourceId]))) {\r\n\r\n        shape.dockers = shape.dockers.map(function (docker, i) {\r\n\r\n          if ((shape.sourceRemoved === true && i == 0 && docker.getDocker)) {\r\n            docker = docker.getDocker().bounds.center()\r\n          }\r\n\r\n          if (this.clipboard.useOffset) {\r\n            return {\r\n              x: docker.x + ORYX_Config.CustomConfigs.COPY_MOVE_OFFSET,\r\n              y: docker.y + ORYX_Config.CustomConfigs.COPY_MOVE_OFFSET,\r\n              getDocker: docker.getDocker\r\n            }\r\n          } else {\r\n            return {\r\n              x: docker.x,\r\n              y: docker.y,\r\n              getDocker: docker.getDocker\r\n            }\r\n          }\r\n        }.bind(this))\r\n      }\r\n\r\n      return shape\r\n    }.bind(this), false, true)\r\n\r\n    this.clipboard.useOffset = true\r\n    this.facade.importJSON(canvas)\r\n  }\r\n\r\n  /**\r\n   * Performs the delete operation. No more asking.\r\n   */\r\n  editDelete () {\r\n    var selection = this.facade.getSelection()\r\n\r\n    if (selection.length > 0) {\r\n      //only update the command stack if something was performed...\r\n      let clipboard = new this.ClipBoard()\r\n      clipboard.refresh(selection, this.getAllShapesToConsider(selection))\r\n\r\n      const command = new this.DeleteCommand(clipboard, this.facade)\r\n\r\n      this.facade.executeCommands([command])\r\n    }\r\n  }\r\n}\r\n\r\n","import ORYX_Config from '../CONFIG'\r\n\r\n/**\r\n * The view plugin offers all of zooming functionality accessible over the\r\n * tool bar. This are zoom in, zoom out, zoom to standard, zoom fit to model.\r\n *\r\n * @class ORYX.Plugins.View\r\n * @extends Clazz\r\n * @param {Object} facade The editor facade for plugins.\r\n */\r\nexport default class View {\r\n  I18N = {\r\n    View: {\r\n      group: 'Zoom',\r\n      zoomIn: 'Zoom In',\r\n      zoomInDesc: 'Zoom into the model',\r\n      zoomOut: 'Zoom Out',\r\n      zoomOutDesc: 'Zoom out of the model',\r\n      zoomStandard: 'Zoom Standard',\r\n      zoomStandardDesc: 'Zoom to the standard level',\r\n      zoomFitToModel: 'Zoom fit to model',\r\n      zoomFitToModelDesc: 'Zoom to fit the model size',\r\n    }\r\n  }\r\n  /** @lends ORYX.Plugins.View.prototype */\r\n  constructor (facade, ownPluginData) {\r\n    this.facade = facade\r\n    // Standard Values\r\n    this.zoomLevel = 1.0\r\n    this.maxFitToScreenLevel = 1.5\r\n    this.minZoomLevel = 0.1\r\n    this.maxZoomLevel = 2.5\r\n    this.diff = 5 //difference between canvas and view port, s.th. like toolbar??\r\n\r\n    // Read properties\r\n    if (ownPluginData !== undefined && ownPluginData !== null) {\r\n      ownPluginData.get('properties').each(function (property) {\r\n        if (property.zoomLevel) {\r\n          this.zoomLevel = Number(1.0)\r\n        }\r\n        if (property.maxFitToScreenLevel) {\r\n          this.maxFitToScreenLevel = Number(property.maxFitToScreenLevel)\r\n        }\r\n        if (property.minZoomLevel) {\r\n          this.minZoomLevel = Number(property.minZoomLevel)\r\n        }\r\n        if (property.maxZoomLevel) {\r\n          this.maxZoomLevel = Number(property.maxZoomLevel)\r\n        }\r\n      }.bind(this))\r\n    }\r\n\r\n    /* Register zoom in */\r\n    this.facade.offer({\r\n      'name': this.I18N.View.zoomIn,\r\n      'functionality': this.zoom.bind(this, [1.0 + ORYX_Config.CustomConfigs.ZOOM_OFFSET]),\r\n      'group': this.I18N.View.group,\r\n      'icon': ORYX_Config.PATH + 'images/magnifier_zoom_in.png',\r\n      'description': this.I18N.View.zoomInDesc,\r\n      'index': 1,\r\n      'minShape': 0,\r\n      'maxShape': 0,\r\n      'isEnabled': function () {\r\n        return this.zoomLevel < this.maxZoomLevel\r\n      }.bind(this)\r\n    })\r\n\r\n    /* Register zoom out */\r\n    this.facade.offer({\r\n      'name': this.I18N.View.zoomOut,\r\n      'functionality': this.zoom.bind(this, [1.0 - ORYX_Config.CustomConfigs.ZOOM_OFFSET]),\r\n      'group': this.I18N.View.group,\r\n      'icon': ORYX_Config.PATH + 'images/magnifier_zoom_out.png',\r\n      'description': this.I18N.View.zoomOutDesc,\r\n      'index': 2,\r\n      'minShape': 0,\r\n      'maxShape': 0,\r\n      'isEnabled': function () {\r\n        return this._checkSize()\r\n      }.bind(this)\r\n    })\r\n\r\n    /* Register zoom standard */\r\n    this.facade.offer({\r\n      'name': this.I18N.View.zoomStandard,\r\n      'functionality': this.setAFixZoomLevel.bind(this, 1),\r\n      'group': this.I18N.View.group,\r\n      'icon': ORYX_Config.PATH + 'images/zoom_standard.png',\r\n      'cls': 'icon-large',\r\n      'description': this.I18N.View.zoomStandardDesc,\r\n      'index': 3,\r\n      'minShape': 0,\r\n      'maxShape': 0,\r\n      'isEnabled': function () {\r\n        return this.zoomLevel != 1\r\n      }.bind(this)\r\n    })\r\n\r\n    /* Register zoom fit to model */\r\n    this.facade.offer({\r\n      'name': this.I18N.View.zoomFitToModel,\r\n      'functionality': this.zoomFitToModel.bind(this),\r\n      'group': this.I18N.View.group,\r\n      'icon': ORYX_Config.PATH + 'images/image.png',\r\n      'description': this.I18N.View.zoomFitToModelDesc,\r\n      'index': 4,\r\n      'minShape': 0,\r\n      'maxShape': 0\r\n    })\r\n  }\r\n\r\n  /**\r\n   * It sets the zoom level to a fix value and call the zooming function.\r\n   *\r\n   * @param {Number} zoomLevel\r\n   *      the zoom level\r\n   */\r\n  setAFixZoomLevel (zoomLevel) {\r\n    this.zoomLevel = zoomLevel\r\n    this._checkZoomLevelRange()\r\n    this.zoom(1)\r\n  }\r\n\r\n  /**\r\n   * It does the actual zooming. It changes the viewable size of the canvas\r\n   * and all to its child elements.\r\n   *\r\n   * @param {Number} factor\r\n   *    the factor to adjust the zoom level\r\n   */\r\n  zoom (factor) {\r\n    // TODO: Zoomen auf allen Objekten im SVG-DOM\r\n\r\n    this.zoomLevel *= factor\r\n    let scrollNode = this.facade.getCanvas().getHTMLContainer().parentNode.parentNode\r\n    let canvas = this.facade.getCanvas()\r\n    let newWidth = canvas.bounds.width() * this.zoomLevel\r\n    let newHeight = canvas.bounds.height() * this.zoomLevel\r\n\r\n    /* Set new top offset */\r\n    let offsetTop = (canvas.node.parentNode.parentNode.parentNode.offsetHeight - newHeight) / 2.0\r\n    offsetTop = offsetTop > 20 ? offsetTop - 20 : 0\r\n    canvas.node.parentNode.parentNode.style.marginTop = offsetTop + 'px'\r\n    offsetTop += 5\r\n    canvas.getHTMLContainer().style.top = offsetTop + 'px'\r\n\r\n    /*readjust scrollbar*/\r\n    let newScrollTop = scrollNode.scrollTop - Math.round((canvas.getHTMLContainer().parentNode.getHeight() - newHeight) / 2) + this.diff\r\n    let newScrollLeft = scrollNode.scrollLeft - Math.round((canvas.getHTMLContainer().parentNode.getWidth() - newWidth) / 2) + this.diff\r\n\r\n    /* Set new Zoom-Level */\r\n    canvas.setSize({ width: newWidth, height: newHeight }, true)\r\n\r\n    /* Set Scale-Factor */\r\n    canvas.node.setAttributeNS(null, 'transform', 'scale(' + this.zoomLevel + ')')\r\n\r\n    /* Refresh the Selection */\r\n    this.facade.updateSelection()\r\n    scrollNode.scrollTop = newScrollTop\r\n    scrollNode.scrollLeft = newScrollLeft\r\n\r\n    /* Update the zoom-level*/\r\n    canvas.zoomLevel = this.zoomLevel\r\n  }\r\n\r\n  /**\r\n   * It calculates the zoom level to fit whole model into the visible area\r\n   * of the canvas. Than the model gets zoomed and the position of the\r\n   * scroll bars are adjusted.\r\n   *\r\n   */\r\n  zoomFitToModel () {\r\n    /* Get the size of the visible area of the canvas */\r\n    let scrollNode = this.facade.getCanvas().getHTMLContainer().parentNode.parentNode\r\n    let visibleHeight = scrollNode.getHeight() - 30\r\n    let visibleWidth = scrollNode.getWidth() - 30\r\n    let nodes = this.facade.getCanvas().getChildShapes()\r\n\r\n    if (!nodes || nodes.length < 1) {\r\n      return false\r\n    }\r\n\r\n    /* Calculate size of canvas to fit the model */\r\n    let bounds = nodes[0].absoluteBounds().clone()\r\n    nodes.each(function (node) {\r\n      bounds.include(node.absoluteBounds().clone())\r\n    })\r\n\r\n    /* Set new Zoom Level */\r\n    let scaleFactorWidth = visibleWidth / bounds.width()\r\n    let scaleFactorHeight = visibleHeight / bounds.height()\r\n\r\n    /* Choose the smaller zoom level to fit the whole model */\r\n    let zoomFactor = scaleFactorHeight < scaleFactorWidth ? scaleFactorHeight : scaleFactorWidth\r\n\r\n    /*Test if maximum zoom is reached*/\r\n    if (zoomFactor > this.maxFitToScreenLevel) {\r\n      zoomFactor = this.maxFitToScreenLevel\r\n    }\r\n    /* Do zooming */\r\n    this.setAFixZoomLevel(zoomFactor)\r\n\r\n    /* Set scroll bar position */\r\n    scrollNode.scrollTop = Math.round(bounds.upperLeft().y * this.zoomLevel) - 5\r\n    scrollNode.scrollLeft = Math.round(bounds.upperLeft().x * this.zoomLevel) - 5\r\n  }\r\n\r\n  /**\r\n   * It checks if the zoom level is less or equal to the level, which is required\r\n   * to schow the whole canvas.\r\n   *\r\n   * @private\r\n   */\r\n  _checkSize () {\r\n    let canvasParent = this.facade.getCanvas().getHTMLContainer().parentNode\r\n    let minForCanvas = Math.min((canvasParent.parentNode.getWidth() / canvasParent.getWidth()), (canvasParent.parentNode.getHeight() / canvasParent.getHeight()))\r\n    return 1.05 > minForCanvas\r\n  }\r\n\r\n  /**\r\n   * It checks if the zoom level is included in the definined zoom\r\n   * level range.\r\n   *\r\n   * @private\r\n   */\r\n  _checkZoomLevelRange () {\r\n    /*var canvasParent=this.facade.getCanvas().getHTMLContainer().parentNode;\r\n     var maxForCanvas= Math.max((canvasParent.parentNode.getWidth()/canvasParent.getWidth()),(canvasParent.parentNode.getHeight()/canvasParent.getHeight()));\r\n     if(this.zoomLevel > maxForCanvas) {\r\n     this.zoomLevel = maxForCanvas;\r\n     }*/\r\n    if (this.zoomLevel < this.minZoomLevel) {\r\n      this.zoomLevel = this.minZoomLevel\r\n    }\r\n\r\n    if (this.zoomLevel > this.maxZoomLevel) {\r\n      this.zoomLevel = this.maxZoomLevel\r\n    }\r\n  }\r\n}\r\n\r\n","import ORYX_Config from '../CONFIG'\r\nimport ORYX_Utils from '../Utils'\r\n\r\n/**\r\n * This plugin is responsible for displaying loading indicators and to prevent\r\n * the user from accidently unloading the page by, e.g., pressing the backspace\r\n * button and returning to the previous site in history.\r\n * @param {Object} facade The editor plugin facade to register enhancements with.\r\n */\r\nexport default class Loading {\r\n  constructor (facade) {\r\n    this.facade = facade\r\n\r\n    // The parent Node\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/1999/xhtml',\r\n      this.facade.getCanvas().getHTMLContainer().parentNode, ['div', {\r\n      'class': 'LoadingIndicator'\r\n    }, ''])\r\n\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_LOADING_ENABLE, this.enableLoading.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_LOADING_DISABLE, this.disableLoading.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_LOADING_STATUS, this.showStatus.bind(this))\r\n\r\n    this.disableLoading()\r\n  }\r\n\r\n  enableLoading (options) {\r\n    if (options.text)\r\n      this.node.innerHTML = options.text + '...'\r\n    else\r\n      this.node.innerHTML = 'Please wait...'\r\n    this.node.removeClassName('StatusIndicator')\r\n    this.node.addClassName('LoadingIndicator')\r\n    this.node.style.display = 'block'\r\n\r\n    let pos = this.facade.getCanvas().rootNode.parentNode.parentNode.parentNode.parentNode\r\n\r\n    this.node.style.top = pos.offsetTop + 'px'\r\n    this.node.style.left = pos.offsetLeft + 'px'\r\n  }\r\n\r\n  disableLoading () {\r\n    this.node.style.display = 'none'\r\n  }\r\n\r\n  showStatus (options) {\r\n    if (options.text) {\r\n      this.node.innerHTML = options.text\r\n      this.node.addClassName('StatusIndicator')\r\n      this.node.removeClassName('LoadingIndicator')\r\n      this.node.style.display = 'block'\r\n\r\n      let pos = this.facade.getCanvas().rootNode.parentNode.parentNode.parentNode.parentNode\r\n\r\n      this.node.style.top = pos.offsetTop + 'px'\r\n      this.node.style.left = pos.offsetLeft + 'px'\r\n\r\n      let tout = options.timeout ? options.timeout : 2000\r\n\r\n      window.setTimeout((function () {\r\n\r\n        this.disableLoading()\r\n\r\n      }).bind(this), tout)\r\n    }\r\n\r\n  }\r\n}\r\n\r\n","import ORYX_Utils from '../Utils'\r\nimport ORYX_Config from '../CONFIG'\r\n\r\nexport default class CanvasResizeButton {\r\n  I18N = {\r\n    RESIZE: {\r\n      // tipGrow: 'Increase canvas size:',\r\n      // tipShrink: 'Decrease canvas size:',\r\n      tipGrow: '增加画布尺寸:',\r\n      tipShrink: '减小画布尺寸:',\r\n      N: 'Top',\r\n      W: 'Left',\r\n      S: 'Down',\r\n      E: 'Right'\r\n    }\r\n  }\r\n\r\n  constructor (canvas, position, callback) {\r\n    this.canvas = canvas\r\n    let parentNode = canvas.getHTMLContainer().parentNode\r\n    // window.myParent = parentNode\r\n\r\n    let actualScrollNode = jQuery('#canvasSection')[0]\r\n    let scrollNode = actualScrollNode\r\n    let canvasNode = $$('#canvasSection .ORYX_Editor')[0]\r\n    let svgRootNode = canvasNode.children[0]\r\n\r\n    let iconClass = 'glyphicon glyphicon-chevron-'\r\n    let iconClassShrink = 'glyphicon glyphicon-chevron-'\r\n    if (position === 'N') {\r\n      iconClass += 'up'\r\n      iconClassShrink += 'down'\r\n    } else if (position == 'S') {\r\n      iconClass += 'down'\r\n      iconClassShrink += 'up'\r\n    } else if (position == 'E') {\r\n      iconClass += 'right'\r\n      iconClassShrink += 'left'\r\n    } else if (position == 'W') {\r\n      iconClass += 'left'\r\n      iconClassShrink += 'right'\r\n    }\r\n\r\n    // The buttons\r\n    let idGrow = 'canvas-shrink-' + position\r\n    let idShrink = 'canvas-grow-' + position\r\n\r\n    const buttonGrow = ORYX_Utils.graft('http://www.w3.org/1999/xhtml', parentNode.parentNode, ['div', {\r\n      'class': 'canvas_resize_indicator canvas_resize_indicator_grow' + ' ' + position,\r\n      'id': idGrow,\r\n      'title': this.I18N.RESIZE.tipGrow + this.I18N.RESIZE[position]\r\n    },\r\n      ['i', { 'class': iconClass }]\r\n    ])\r\n    const buttonShrink = ORYX_Utils.graft('http://www.w3.org/1999/xhtml', parentNode.parentNode, ['div', {\r\n      'class': 'canvas_resize_indicator canvas_resize_indicator_shrink' + ' ' + position,\r\n      'id': idShrink,\r\n      'title': this.I18N.RESIZE.tipShrink + this.I18N.RESIZE[position]\r\n    },\r\n      ['i', { 'class': iconClassShrink }]\r\n    ])\r\n    // Defines a callback which gives back\r\n    // a boolean if the current mouse event\r\n    // is over the particular button area\r\n    let offSetWidth = 60\r\n    const isOverOffset = function (event) {\r\n      let isOverButton = event.target.id.indexOf('canvas-shrink') !== -1\r\n        || event.target.id.indexOf('canvas-grow') !== -1\r\n        || event.target.parentNode.id.indexOf('canvas-shrink') !== -1\r\n        || event.target.parentNode.id.indexOf('canvas-grow') !== -1\r\n      if (isOverButton) {\r\n        if (event.target.id === idGrow || event.target.id === idShrink ||\r\n          event.target.parentNode.id === idGrow || event.target.parentNode.id === idShrink) {\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      }\r\n\r\n      if (event.target !== parentNode &&\r\n        event.target !== scrollNode &&\r\n        event.target !== scrollNode.firstChild &&\r\n        event.target !== svgRootNode &&\r\n        event.target !== scrollNode) {\r\n        return false\r\n      }\r\n\r\n      // if(inCanvas){offSetWidth=30}else{offSetWidth=30*2}\r\n      // Safari work around\r\n      let X = event.offsetX !== undefined ? event.offsetX : event.layerX\r\n      let Y = event.offsetY !== undefined ? event.offsetY : event.layerY\r\n      let canvasOffset = 0\r\n      if (canvasNode.clientWidth < actualScrollNode.clientWidth) {\r\n        let widthDiff = actualScrollNode.clientWidth - canvasNode.clientWidth\r\n        canvasOffset = widthDiff / 2\r\n      }\r\n\r\n      // Adjust to relative location to the actual viewport\r\n      Y = Y - actualScrollNode.scrollTop\r\n      X = X - actualScrollNode.scrollLeft\r\n\r\n      if (position === 'N') {\r\n        return Y < offSetWidth\r\n      } else if (position === 'W') {\r\n        return X < offSetWidth + canvasOffset\r\n      } else if (position === 'E') {\r\n        return actualScrollNode.clientWidth - X < offSetWidth + canvasOffset\r\n      } else if (position === 'S') {\r\n        return actualScrollNode.clientHeight - Y < offSetWidth\r\n      }\r\n\r\n      return false\r\n    }\r\n\r\n    const showButtons = (function () {\r\n      buttonGrow.show()\r\n      let w = canvas.bounds.width()\r\n      let h = canvas.bounds.height()\r\n\r\n      if (position === 'N' && (h - ORYX_Config.CustomConfigs.CANVAS_RESIZE_INTERVAL > ORYX_Config.CustomConfigs.CANVAS_MIN_HEIGHT)) buttonShrink.show()\r\n      else if (position === 'E' && (w - ORYX_Config.CustomConfigs.CANVAS_RESIZE_INTERVAL > ORYX_Config.CustomConfigs.CANVAS_MIN_WIDTH)) buttonShrink.show()\r\n      else if (position === 'S' && (h - ORYX_Config.CustomConfigs.CANVAS_RESIZE_INTERVAL > ORYX_Config.CustomConfigs.CANVAS_MIN_HEIGHT)) buttonShrink.show()\r\n      else if (position === 'W' && (w - ORYX_Config.CustomConfigs.CANVAS_RESIZE_INTERVAL > ORYX_Config.CANVAS_MIN_WIDTH)) buttonShrink.show()\r\n      else buttonShrink.hide()\r\n    }).bind(this)\r\n\r\n    const hideButtons = function () {\r\n      buttonGrow.hide()\r\n      buttonShrink.hide()\r\n    }\r\n\r\n    // If the mouse move is over the button area, show the button\r\n    parentNode.parentNode.addEventListener(ORYX_Config.EVENT_MOUSEMOVE, function (event) {\r\n      if (isOverOffset(event)) {\r\n        showButtons()\r\n      } else {\r\n        hideButtons()\r\n      }\r\n    }, false)\r\n    // If the mouse is over the button, show them\r\n    buttonGrow.addEventListener(ORYX_Config.EVENT_MOUSEOVER, function (event) {\r\n      showButtons()\r\n    }, true)\r\n    buttonShrink.addEventListener(ORYX_Config.EVENT_MOUSEOVER, function (event) {\r\n      showButtons()\r\n    }, true)\r\n    // If the mouse is out, hide the button\r\n    // scrollNode.addEventListener(\t\tORYX.CONFIG.EVENT_MOUSEOUT, \tfunction(event){button.hide()}, true )\r\n    parentNode.parentNode.addEventListener(ORYX_Config.EVENT_MOUSEOUT, function (event) {\r\n      hideButtons()\r\n    }, true)\r\n    // svgRootNode.addEventListener(\tORYX.CONFIG.EVENT_MOUSEOUT, \tfunction(event){ inCanvas = false } , true );\r\n\r\n    // Hide the button initialy\r\n    hideButtons()\r\n\r\n    // Add the callbacks\r\n    buttonGrow.addEventListener('click', function () {\r\n      callback(position)\r\n      showButtons()\r\n    }, true)\r\n    buttonShrink.addEventListener('click', function () {\r\n      callback(position, true)\r\n      showButtons()\r\n    }, true)\r\n  }\r\n}\r\n","import CanvasResizeButton from './CanvasResizeButton'\r\nimport ORYX_Command from '../core/Command'\r\nimport ORYX_Config from '../CONFIG'\r\n\r\n/**\r\n * This plugin is responsible for resizing the canvas.\r\n * @param {Object} facade The editor plugin facade to register enhancements with.\r\n */\r\n\r\nfunction resizeCanvas(position, extentionSize, facade) {\r\n  let canvas = facade.getCanvas()\r\n  let b = canvas.bounds\r\n  let scrollNode = facade.getCanvas().getHTMLContainer().parentNode.parentNode\r\n\r\n  if (position === 'E' || position === 'W') {\r\n    canvas.setSize({\r\n      width: (b.width() + extentionSize) * canvas.zoomLevel,\r\n      height: (b.height()) * canvas.zoomLevel\r\n    })\r\n\r\n  } else if (position === 'S' || position === 'N') {\r\n    canvas.setSize({\r\n      width: (b.width()) * canvas.zoomLevel,\r\n      height: (b.height() + extentionSize) * canvas.zoomLevel\r\n    })\r\n  }\r\n\r\n  if (position === 'N' || position === 'W') {\r\n    let move = position === 'N' ? { x: 0, y: extentionSize } : { x: extentionSize, y: 0 }\r\n\r\n    // Move all children\r\n    canvas.getChildNodes(false, function (shape) {\r\n      shape.bounds.moveBy(move)\r\n    })\r\n    // Move all dockers, when the edge has at least one docked shape\r\n    let edges = canvas.getChildEdges().findAll(function (edge) {\r\n      return edge.getAllDockedShapes().length > 0\r\n    })\r\n    let dockers = edges.collect(function (edge) {\r\n      return edge.dockers.findAll(function (docker) {\r\n        return !docker.getDockedShape()\r\n      })\r\n    }).flatten()\r\n    dockers.each(function (docker) {\r\n      docker.bounds.moveBy(move)\r\n    })\r\n  } else if (position === 'S') {\r\n    scrollNode.scrollTop += extentionSize\r\n  } else if (position === 'E') {\r\n    scrollNode.scrollLeft += extentionSize\r\n  }\r\n\r\n  // jQuery(window).trigger('resize')\r\n\r\n  canvas.update()\r\n  facade.updateSelection()\r\n}\r\n\r\nclass commandClass extends ORYX_Command {\r\n  constructor (position, extentionSize, facade) {\r\n    super()\r\n    this.position = position\r\n    this.extentionSize = extentionSize\r\n    this.facade = facade\r\n  }\r\n\r\n  execute () {\r\n    resizeCanvas(this.position, this.extentionSize, this.facade)\r\n  }\r\n\r\n  rollback () {\r\n    resizeCanvas(this.position, -this.extentionSize, this.facade)\r\n  }\r\n\r\n  update () {}\r\n}\r\n\r\nexport default class CanvasResize {\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    new CanvasResizeButton(this.facade.getCanvas(), 'N', this.resize.bind(this))\r\n    new CanvasResizeButton(this.facade.getCanvas(), 'W', this.resize.bind(this))\r\n    new CanvasResizeButton(this.facade.getCanvas(), 'E', this.resize.bind(this))\r\n    new CanvasResizeButton(this.facade.getCanvas(), 'S', this.resize.bind(this))\r\n\r\n    // window.setTimeout(function () {\r\n    //   jQuery(window).trigger('resize')\r\n    // })\r\n  }\r\n\r\n  resize (position, shrink) {\r\n    let extentionSize = ORYX_Config.CustomConfigs.CANVAS_RESIZE_INTERVAL\r\n    if (shrink) extentionSize = -extentionSize\r\n    const command = new commandClass(position, extentionSize, this.facade)\r\n    this.facade.executeCommands([command])\r\n  }\r\n}\r\n\r\n","(function($)\r\n{\r\n    /**\r\n     * Auto-growing textareas; technique ripped from Facebook\r\n     *\r\n     * http://github.com/jaz303/jquery-grab-bag/tree/master/javascripts/jquery.autogrow-textarea.js\r\n     */\r\n    $.fn.autogrow = function(options)\r\n    {\r\n        return this.filter('textarea').each(function()\r\n        {\r\n            var self         = this;\r\n            var $self        = $(self);\r\n            var minHeight    = $self.height();\r\n            var noFlickerPad = $self.hasClass('autogrow-short') ? 0 : parseInt($self.css('lineHeight')) || 0;\r\n\r\n            var shadow = $('<div></div>').css({\r\n                position:    'absolute',\r\n                top:         -10000,\r\n                left:        -10000,\r\n                width:       $self.width(),\r\n                fontSize:    $self.css('fontSize'),\r\n                fontFamily:  $self.css('fontFamily'),\r\n                fontWeight:  $self.css('fontWeight'),\r\n                lineHeight:  $self.css('lineHeight'),\r\n                resize:      'none',\r\n                            'word-wrap': 'break-word'\r\n            }).appendTo(document.body);\r\n\r\n            var update = function(event)\r\n            {\r\n                var times = function(string, number)\r\n                {\r\n                    for (var i=0, r=''; i<number; i++) r += string;\r\n                    return r;\r\n                };\r\n\r\n                var val = self.value.replace(/</g, '&lt;')\r\n                                    .replace(/>/g, '&gt;')\r\n                                    .replace(/&/g, '&amp;')\r\n                                    .replace(/\\n$/, '<br/>&nbsp;')\r\n                                    .replace(/\\n/g, '<br/>')\r\n                                    .replace(/ {2,}/g, function(space){ return times('&nbsp;', space.length - 1) + ' ' });\r\n\r\n                                // Did enter get pressed?  Resize in this keydown event so that the flicker doesn't occur.\r\n                                if (event && event.data && event.data.event === 'keydown' && event.keyCode === 13) {\r\n                                        val += '<br />';\r\n                                }\r\n\r\n                shadow.css('width', $self.width());\r\n                shadow.html(val + (noFlickerPad === 0 ? '...' : '')); // Append '...' to resize pre-emptively.\r\n                $self.height(Math.max(shadow.height() + noFlickerPad, minHeight));\r\n            }\r\n\r\n            $self.change(update).keyup(update).keydown({event:'keydown'},update);\r\n            $(window).resize(update);\r\n\r\n            update();\r\n        });\r\n    };\r\n})(jQuery);","import ORYX_Config from '../CONFIG'\r\nimport ORYX_Command from '../core/Command'\r\nimport ORYX_Shape from '../core/Shape'\r\nimport autogrow from 'src/libs/jquery.autogrow-textarea'\r\n\r\n// 双击修改名称\r\nexport default class RenameShapes {\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_CANVAS_SCROLL, this.hideField.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_DBLCLICK, this.actOnDBLClick.bind(this))\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        keyCode: 113, // F2-Key\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }],\r\n      functionality: this.renamePerF2.bind(this)\r\n    })\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_MOUSEDOWN, this.hide.bind(this), true)\r\n  }\r\n  /**\r\n   * This method handles the \"F2\" key down event. The selected shape are looked\r\n   * up and the editing of title/name of it gets started.\r\n   */\r\n  renamePerF2 () {\r\n    let selectedShapes = this.facade.getSelection()\r\n    this.actOnDBLClick(undefined, selectedShapes.first())\r\n  }\r\n\r\n  actOnDBLClick (evt, shape) {\r\n    if (!(shape instanceof ORYX_Shape)) {\r\n      return\r\n    }\r\n\r\n    // Destroys the old input, if there is one\r\n    this.destroy()\r\n\r\n    // Get all properties which where at least one ref to view is set\r\n    let props = shape.getStencil().properties().findAll(function (item) {\r\n      return (item.refToView() && item.refToView().length > 0 && item.directlyEditable())\r\n    })\r\n    // from these, get all properties where write access are and the type is String or Expression\r\n    props = props.findAll(function (item) {\r\n      return !item.readonly() &&\r\n        (item.type() == ORYX_Config.TYPE_STRING ||\r\n          item.type() == ORYX_Config.TYPE_EXPRESSION || item.type() == ORYX_Config.TYPE_DATASOURCE)\r\n    })\r\n\r\n    // Get all ref ids\r\n    let allRefToViews = props.collect(function (prop) {\r\n      return prop.refToView()\r\n    }).flatten().compact()\r\n    // Get all labels from the shape with the ref ids\r\n\r\n    let labels = shape.getLabels().findAll(function (label) {\r\n      return allRefToViews.any(function (toView) {\r\n        return label.id.endsWith(toView)\r\n      })\r\n    })\r\n    // If there are no referenced labels --> return\r\n    if (labels.length == 0) {\r\n      return\r\n    }\r\n\r\n    // Define the nearest label\r\n    let nearestLabel = labels.length <= 1 ? labels[0] : null\r\n    if (!nearestLabel) {\r\n      nearestLabel = labels.find(function (label) {\r\n        let el = label.id.split('_')\r\n        return el[el.length - 1] === 'name'\r\n      })\r\n    }\r\n    if (!nearestLabel) {\r\n      nearestLabel = labels.find(function (label) {\r\n        return label.node == evt.target || label.node == evt.target.parentNode\r\n      })\r\n      if (!nearestLabel) {\r\n        let evtCoord = this.facade.eventCoordinates(evt)\r\n        console.log('evtCoord', evtCoord)\r\n\r\n        let additionalIEZoom = 1\r\n        if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n          let ua = navigator.userAgent\r\n          if (ua.indexOf('MSIE') >= 0) {\r\n            //IE 10 and below\r\n            let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n            if (zoom !== 100) {\r\n              additionalIEZoom = zoom / 100\r\n            }\r\n          }\r\n        }\r\n\r\n        if (additionalIEZoom !== 1) {\r\n          evtCoord.x = evtCoord.x / additionalIEZoom\r\n          evtCoord.y = evtCoord.y / additionalIEZoom\r\n        }\r\n\r\n        evtCoord.y += $('editor-header').clientHeight - $('canvasSection').scrollTop - 5\r\n\r\n        evtCoord.x -= $('canvasSection').scrollLeft\r\n\r\n        let trans = this.facade.getCanvas().rootNode.lastChild.getScreenCTM()\r\n        evtCoord.x *= trans.a\r\n        evtCoord.y *= trans.d\r\n\r\n        let diff = labels.collect(function (label) {\r\n          let center = this.getCenterPosition(label.node)\r\n          let len = Math.sqrt(Math.pow(center.x - evtCoord.x, 2) + Math.pow(center.y - evtCoord.y, 2))\r\n          return { diff: len, label: label }\r\n        }.bind(this))\r\n\r\n        diff.sort(function (a, b) {\r\n          return a.diff > b.diff\r\n        })\r\n\r\n        nearestLabel = diff[0].label\r\n      }\r\n    }\r\n\r\n    // Get the particular property for the label\r\n    let prop = props.find(function (item) {\r\n      return item.refToView().any(function (toView) {\r\n        return nearestLabel.id == shape.id + toView\r\n      })\r\n    })\r\n\r\n    // Get the center position from the nearest label\r\n    let width = Math.min(Math.max(100, shape.bounds.width()), 200)\r\n    let center = this.getCenterPosition(nearestLabel.node, shape)\r\n    center.x -= (width / 2)\r\n    let propId = prop.prefix() + '-' + prop.id()\r\n    let textInput = document.createElement('textarea')\r\n    textInput.id = 'shapeTextInput'\r\n    textInput.style.position = 'absolute'\r\n    textInput.style.width = width + 'px'\r\n    textInput.style.left = (center.x < 10) ? 10 : center.x + 'px'\r\n    textInput.style.top = (center.y - 15) + 'px'\r\n    textInput.className = 'x-form-textarea x-form-field x_form_text_set_absolute'\r\n    textInput.value = shape.properties.get(propId)\r\n    this.oldValueText = shape.properties.get(propId)\r\n    document.getElementById('canvasSection').appendChild(textInput)\r\n    this.shownTextField = textInput\r\n\r\n\r\n    // Value change listener needs to be defined now since we reference it in the text field\r\n    this.updateValueFunction = function (newValue, oldValue) {\r\n      let currentEl = shape\r\n      let facade = this.facade\r\n\r\n      if (oldValue != newValue) {\r\n        // Implement the specific command for property change\r\n        class commandClass extends ORYX_Command{\r\n          constructor () {\r\n            super()\r\n            this.el = currentEl\r\n            this.propId = propId\r\n            this.oldValue = oldValue\r\n            this.newValue = newValue\r\n            this.facade = facade\r\n          }\r\n          execute () {\r\n            this.el.setProperty(this.propId, this.newValue)\r\n            //this.el.update();\r\n            this.facade.setSelection([this.el])\r\n            this.facade.getCanvas().update()\r\n            this.facade.updateSelection()\r\n          }\r\n          rollback () {\r\n            this.el.setProperty(this.propId, this.oldValue)\r\n            //this.el.update();\r\n            this.facade.setSelection([this.el])\r\n            this.facade.getCanvas().update()\r\n            this.facade.updateSelection()\r\n          }\r\n        }\r\n        // Instantiated the class\r\n        const command = new commandClass()\r\n\r\n        // Execute the command\r\n        this.facade.executeCommands([command])\r\n      }\r\n    }.bind(this)\r\n\r\n    jQuery('#shapeTextInput').focus()\r\n    jQuery('#shapeTextInput').autogrow()\r\n\r\n    // Disable the keydown in the editor (that when hitting the delete button, the shapes not get deleted)\r\n    this.facade.disableEvent(ORYX_Config.EVENT_KEYDOWN)\r\n  }\r\n\r\n  getCenterPosition (svgNode, shape) {\r\n    if (!svgNode) {\r\n      return { x: 0, y: 0 }\r\n    }\r\n\r\n    let scale = this.facade.getCanvas().node.getScreenCTM()\r\n    let absoluteXY = shape.bounds.upperLeft()\r\n\r\n    let hasParent = true\r\n    let searchShape = shape\r\n    while (hasParent) {\r\n      if (searchShape.getParentShape().getStencil().idWithoutNs() === 'BPMNDiagram' || searchShape.getParentShape().getStencil().idWithoutNs() === 'CMMNDiagram') {\r\n        hasParent = false\r\n      } else {\r\n        let parentXY = searchShape.getParentShape().bounds.upperLeft()\r\n        absoluteXY.x += parentXY.x\r\n        absoluteXY.y += parentXY.y\r\n        searchShape = searchShape.getParentShape()\r\n      }\r\n    }\r\n\r\n    let center = shape.bounds.midPoint()\r\n    center.x += absoluteXY.x + scale.e\r\n    center.y += absoluteXY.y + scale.f\r\n\r\n    center.x *= scale.a\r\n    center.y *= scale.d\r\n\r\n    let additionalIEZoom = 1\r\n    if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n      let ua = navigator.userAgent\r\n      if (ua.indexOf('MSIE') >= 0) {\r\n        //IE 10 and below\r\n        let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n        if (zoom !== 100) {\r\n          additionalIEZoom = zoom / 100\r\n        }\r\n      }\r\n    }\r\n\r\n    if (additionalIEZoom === 1) {\r\n      center.y = center.y - jQuery('#canvasSection').offset().top + 5\r\n      center.x -= jQuery('#canvasSection').offset().left\r\n    } else {\r\n      let canvasOffsetLeft = jQuery('#canvasSection').offset().left\r\n      let canvasScrollLeft = jQuery('#canvasSection').scrollLeft()\r\n      let canvasScrollTop = jQuery('#canvasSection').scrollTop()\r\n\r\n      let offset = scale.e - (canvasOffsetLeft * additionalIEZoom)\r\n      let additionaloffset = 0\r\n      if (offset > 10) {\r\n        additionaloffset = (offset / additionalIEZoom) - offset\r\n      }\r\n      center.y = center.y - (jQuery('#canvasSection').offset().top * additionalIEZoom) + 5 + ((canvasScrollTop * additionalIEZoom) - canvasScrollTop)\r\n      center.x = center.x - (canvasOffsetLeft * additionalIEZoom) + additionaloffset + ((canvasScrollLeft * additionalIEZoom) - canvasScrollLeft)\r\n    }\r\n\r\n    return center\r\n  }\r\n\r\n  hide (e) {\r\n    if (this.shownTextField && (!e || e.target !== this.shownTextField)) {\r\n      let newValue = this.shownTextField.value\r\n      if (newValue !== this.oldValueText) {\r\n        this.updateValueFunction(newValue, this.oldValueText)\r\n      }\r\n      this.destroy()\r\n    }\r\n  }\r\n\r\n  hideField (e) {\r\n    if (this.shownTextField) {\r\n      this.destroy()\r\n    }\r\n  }\r\n\r\n  destroy (e) {\r\n    let textInputComp = jQuery('#shapeTextInput')\r\n    if (textInputComp) {\r\n      textInputComp.remove()\r\n      delete this.shownTextField\r\n\r\n      this.facade.enableEvent(ORYX_Config.EVENT_KEYDOWN)\r\n    }\r\n  }\r\n}\r\n","import ORYX_Config from '../CONFIG'\r\nimport ORYX_Utils from '../Utils'\r\n\r\nimport ORYX_Node from '../core/Node'\r\n\r\n/**\r\n * Supports EPCs by offering a syntax check and export and import ability..\r\n *\r\n *\r\n */\r\nexport default class ProcessLink {\r\n  /**\r\n   * Offers the plugin functionality:\r\n   *\r\n   */\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_PROPERTY_CHANGED, this.propertyChanged.bind(this))\r\n  }\r\n\r\n\r\n  /**\r\n   *\r\n   * @param {Object} option\r\n   */\r\n  propertyChanged (option, node) {\r\n    if (option.name !== 'oryx-refuri' || !node instanceof ORYX_Node) {\r\n      return\r\n    }\r\n\r\n    if (option.value && option.value.length > 0 && option.value != 'undefined') {\r\n      this.show(node, option.value)\r\n    } else {\r\n      this.hide(node)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Shows the Link for a particular shape with a specific url\r\n   *\r\n   * @param {Object} shape\r\n   * @param {Object} url\r\n   */\r\n  show (shape, url) {\r\n    // Generate the svg-representation of a link\r\n    let link = ORYX_Utils.graft('http://www.w3.org/2000/svg', null,\r\n      ['a',\r\n        { 'target': '_blank' },\r\n        ['path',\r\n          {\r\n            'stroke-width': 1.0,\r\n            'stroke': '#00DD00',\r\n            'fill': '#00AA00',\r\n            'd': 'M3,3 l0,-2.5 l7.5,0 l0,-2.5 l7.5,4.5 l-7.5,3.5 l0,-2.5 l-8,0',\r\n            'line-captions': 'round'\r\n          }\r\n        ]\r\n      ])\r\n\r\n    link = ORYX_Utils.graft('http://www.w3.org/2000/svg', null,\r\n      ['a',\r\n        { 'target': '_blank' },\r\n        ['path', {\r\n          'style': 'fill:#92BFFC;stroke:#000000;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.72',\r\n          'd': 'M0 1.44 L0 15.05 L11.91 15.05 L11.91 5.98 L7.37 1.44 L0 1.44 Z'\r\n        }],\r\n        ['path', {\r\n          'style': 'stroke:#000000;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.72;fill:none;',\r\n          'transform': 'translate(7.5, -8.5)',\r\n          'd': 'M0 10.51 L0 15.05 L4.54 15.05'\r\n        }],\r\n        ['path', {\r\n          'style': 'fill:#f28226;stroke:#000000;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.72',\r\n          'transform': 'translate(-3, -1)',\r\n          'd': 'M0 8.81 L0 13.06 L5.95 13.06 L5.95 15.05 A50.2313 50.2313 -175.57 0 0 10.77 11.08 A49.9128 49.9128 -1.28 0 0 5.95 6.54 L5.95 8.81 L0 8.81 Z'\r\n        }]\r\n      ])\r\n\r\n    /*\r\n     *\r\n     * \t\t\t\t\t[ 'a',\r\n     {'target': '_blank'},\r\n     ['path', { \"style\": \"fill:none;stroke-width:0.5px; stroke:#000000\", \"d\": \"M7,4 l0,2\"}],\r\n     ['path', { \"style\": \"fill:none;stroke-width:0.5px; stroke:#000000\", \"d\": \"M4,8 l-2,0 l0,6\"}],\r\n     ['path', { \"style\": \"fill:none;stroke-width:0.5px; stroke:#000000\", \"d\": \"M10,8 l2,0 l0,6\"}],\r\n     ['rect', { \"style\": \"fill:#96ff96;stroke:#000000;stroke-width:1\", \"width\": 6, \"height\": 4, \"x\": 4, \"y\": 0}],\r\n     ['rect', { \"style\": \"fill:#ffafff;stroke:#000000;stroke-width:1\", \"width\": 6, \"height\": 4, \"x\": 4, \"y\": 6}],\r\n     ['rect', { \"style\": \"fill:#96ff96;stroke:#000000;stroke-width:1\", \"width\": 6, \"height\": 4, \"x\": 0, \"y\": 12}],\r\n     ['rect', { \"style\": \"fill:#96ff96;stroke:#000000;stroke-width:1\", \"width\": 6, \"height\": 4, \"x\": 8, \"y\": 12}],\r\n     ['rect', { \"style\": \"fill:none;stroke:none;pointer-events:all\", \"width\": 14, \"height\": 16, \"x\": 0, \"y\": 0}]\r\n     ]);\r\n     */\r\n\r\n    // Set the link with the special namespace\r\n    link.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', url)\r\n\r\n\r\n    // Shows the link in the overlay\r\n    this.facade.raiseEvent({\r\n      type: ORYX_Config.EVENT_OVERLAY_SHOW,\r\n      id: 'arissupport.urlref_' + shape.id,\r\n      shapes: [shape],\r\n      node: link,\r\n      nodePosition: 'SE'\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * Hides the Link for a particular shape\r\n   *\r\n   * @param {Object} shape\r\n   */\r\n  hide (shape) {\r\n\r\n    this.facade.raiseEvent({\r\n      type: ORYX_Config.EVENT_OVERLAY_HIDE,\r\n      id: 'arissupport.urlref_' + shape.id\r\n    })\r\n\r\n  }\r\n}\r\n","import ORYX_Config from '../CONFIG'\r\n\r\nexport default class Save {\r\n  changeSymbol = '*'\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    document.addEventListener('keydown', function (e) {\r\n      if (e.ctrlKey && e.keyCode === 83) {\r\n        Event.stop(e)\r\n      }\r\n    }, false)\r\n\r\n    window.onbeforeunload = this.onUnLoad.bind(this)\r\n\r\n    this.changeDifference = 0\r\n\r\n    // Register on event for executing commands --> store all commands in a stack\r\n    // --> Execute\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_UNDO_EXECUTE, function () {\r\n      this.changeDifference++\r\n      this.updateTitle()\r\n    }.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_EXECUTE_COMMANDS, function () {\r\n      this.changeDifference++\r\n      this.updateTitle()\r\n    }.bind(this))\r\n    // --> Saved from other places in the editor\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_SAVED, function () {\r\n      this.changeDifference = 0\r\n      this.updateTitle()\r\n    }.bind(this))\r\n\r\n    // --> Rollback\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_UNDO_ROLLBACK, function () {\r\n      this.changeDifference--\r\n      this.updateTitle()\r\n    }.bind(this))\r\n\r\n    //TODO very critical for load time performance!!!\r\n    //this.serializedDOM = DataManager.__persistDOM(this.facade);\r\n\r\n    this.hasChanges = this._hasChanges.bind(this)\r\n  }\r\n\r\n  updateTitle () {\r\n    let value = window.document.title || document.getElementsByTagName('title')[0].childNodes[0].nodeValue\r\n\r\n    if (this.changeDifference === 0 && value.startsWith(this.changeSymbol)) {\r\n      window.document.title = value.slice(1)\r\n    } else if (this.changeDifference !== 0 && !value.startsWith(this.changeSymbol)) {\r\n      window.document.title = this.changeSymbol + '' + value\r\n    }\r\n  }\r\n\r\n  _hasChanges () {\r\n    return this.changeDifference !== 0 ||\r\n      (this.facade.getModelMetaData()['new'] && this.facade.getCanvas().getChildShapes().size() > 0)\r\n  }\r\n\r\n  onUnLoad () {\r\n    if (this._hasChanges()) {\r\n      // return ORYX.I18N.Save.unsavedData\r\n      return 'There are unsaved data, please save before you leave, otherwise your changes get lost!'\r\n    }\r\n  }\r\n}","import ORYX_Utils from '../Utils'\r\nimport ORYX_Config from '../CONFIG'\r\n\r\nexport default class SelectedRect {\r\n  constructor (parentId) {\r\n    this.parentId = parentId\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/2000/svg', $(parentId),\r\n      ['g'])\r\n    this.dashedArea = ORYX_Utils.graft('http://www.w3.org/2000/svg', this.node,\r\n      ['rect', {\r\n        x: 0, y: 0,\r\n        'stroke-width': 1, stroke: '#777777', fill: 'none',\r\n        'stroke-dasharray': '2,2',\r\n        'pointer-events': 'none'\r\n      }])\r\n\r\n    this.hide()\r\n  }\r\n\r\n  hide () {\r\n    this.node.setAttributeNS(null, 'display', 'none')\r\n  }\r\n\r\n  show () {\r\n    this.node.setAttributeNS(null, 'display', '')\r\n  }\r\n\r\n  resize (bounds) {\r\n    let upL = bounds.upperLeft()\r\n    let padding = ORYX_Config.CustomConfigs.SELECTED_AREA_PADDING\r\n\r\n    this.dashedArea.setAttributeNS(null, 'width', bounds.width() + 2 * padding)\r\n    this.dashedArea.setAttributeNS(null, 'height', bounds.height() + 2 * padding)\r\n    this.node.setAttributeNS(null, 'transform', 'translate(' + (upL.x - padding) + ', ' + (upL.y - padding) + ')')\r\n  }\r\n}\r\n","import ORYX_Utils from '../Utils'\r\n\r\nexport default class GridLine {\r\n  DIR_HORIZONTAL = 'hor'\r\n  DIR_VERTICAL = 'ver'\r\n\r\n  constructor (parentId, direction) {\r\n    if (this.DIR_HORIZONTAL !== direction && this.DIR_VERTICAL !== direction) {\r\n      direction = this.DIR_HORIZONTAL\r\n    }\r\n\r\n    this.parent = $(parentId)\r\n    this.direction = direction\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/2000/svg', this.parent,\r\n      ['g'])\r\n\r\n    this.line = ORYX_Utils.graft('http://www.w3.org/2000/svg', this.node,\r\n      ['path', {\r\n        'stroke-width': 1, stroke: 'silver', fill: 'none',\r\n        'stroke-dasharray': '5,5',\r\n        'pointer-events': 'none'\r\n      }])\r\n\r\n    this.hide()\r\n  }\r\n\r\n  hide () {\r\n    this.node.setAttributeNS(null, 'display', 'none')\r\n  }\r\n\r\n  show () {\r\n    this.node.setAttributeNS(null, 'display', '')\r\n  }\r\n\r\n  getScale () {\r\n    try {\r\n      return this.parent.parentNode.transform.baseVal.getItem(0).matrix.a\r\n    } catch (e) {\r\n      return 1\r\n    }\r\n  }\r\n\r\n  update (pos) {\r\n    if (this.direction === this.DIR_HORIZONTAL) {\r\n      let y = pos instanceof Object ? pos.y : pos\r\n      let cWidth = this.parent.parentNode.parentNode.width.baseVal.value / this.getScale()\r\n      this.line.setAttributeNS(null, 'd', 'M 0 ' + y + ' L ' + cWidth + ' ' + y)\r\n    } else {\r\n      let x = pos instanceof Object ? pos.x : pos\r\n      let cHeight = this.parent.parentNode.parentNode.height.baseVal.value / this.getScale()\r\n      this.line.setAttributeNS(null, 'd', 'M' + x + ' 0 L ' + x + ' ' + cHeight)\r\n    }\r\n    this.show()\r\n  }\r\n}\r\n","import ORYX_Config from '../CONFIG'\r\nimport ORYX_Utils from '../Utils'\r\n\r\n// 拖拽改变尺寸\r\nexport default class Resizer {\r\n  constructor (parentId, orientation, facade) {\r\n    this.parentId = parentId\r\n    this.orientation = orientation\r\n    this.facade = facade\r\n\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/1999/xhtml', $('canvasSection'),\r\n      ['div', { 'class': 'resizer_' + this.orientation, style: 'left:0px; top:0px;position:absolute;' }])\r\n\r\n    this.node.addEventListener(ORYX_Config.EVENT_MOUSEDOWN, this.handleMouseDown.bind(this), true)\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_MOUSEUP, this.handleMouseUp.bind(this), true)\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_MOUSEMOVE, this.handleMouseMove.bind(this), false)\r\n\r\n    this.dragEnable = false\r\n    this.offSetPosition = { x: 0, y: 0 }\r\n    this.bounds = undefined\r\n\r\n    this.canvasNode = this.facade.getCanvas().node\r\n\r\n    this.minSize = undefined\r\n    this.maxSize = undefined\r\n\r\n    this.aspectRatio = undefined\r\n\r\n    this.resizeCallbacks = []\r\n    this.resizeStartCallbacks = []\r\n    this.resizeEndCallbacks = []\r\n    this.hide()\r\n\r\n    // Calculate the Offset\r\n    this.scrollNode = this.node.parentNode.parentNode.parentNode\r\n  }\r\n\r\n  handleMouseDown (event) {\r\n    this.dragEnable = true\r\n    this.offsetScroll = { x: this.scrollNode.scrollLeft, y: this.scrollNode.scrollTop }\r\n\r\n    this.offSetPosition = {\r\n      x: Event.pointerX(event) - this.position.x,\r\n      y: Event.pointerY(event) - this.position.y\r\n    }\r\n\r\n    this.resizeStartCallbacks.each((function (value) {\r\n      value(this.bounds)\r\n    }).bind(this))\r\n\r\n  }\r\n\r\n  handleMouseUp (event) {\r\n    this.dragEnable = false\r\n    this.containmentParentNode = null\r\n    this.resizeEndCallbacks.each((function (value) {\r\n      value(this.bounds)\r\n    }).bind(this))\r\n  }\r\n\r\n  handleMouseMove (event) {\r\n    if (!this.dragEnable) {\r\n      return\r\n    }\r\n\r\n    if (event.shiftKey || event.ctrlKey) {\r\n      this.aspectRatio = this.bounds.width() / this.bounds.height()\r\n    } else {\r\n      this.aspectRatio = undefined\r\n    }\r\n\r\n    let position = {\r\n      x: Event.pointerX(event) - this.offSetPosition.x,\r\n      y: Event.pointerY(event) - this.offSetPosition.y\r\n    }\r\n\r\n    position.x -= this.offsetScroll.x - this.scrollNode.scrollLeft\r\n    position.y -= this.offsetScroll.y - this.scrollNode.scrollTop\r\n\r\n    position.x = Math.min(position.x, this.facade.getCanvas().bounds.width())\r\n    position.y = Math.min(position.y, this.facade.getCanvas().bounds.height())\r\n\r\n    let offset = {\r\n      x: position.x - this.position.x,\r\n      y: position.y - this.position.y\r\n    }\r\n\r\n    if (this.aspectRatio) {\r\n      // fixed aspect ratio\r\n      let newAspectRatio = (this.bounds.width() + offset.x) / (this.bounds.height() + offset.y)\r\n      if (newAspectRatio > this.aspectRatio) {\r\n        offset.x = this.aspectRatio * (this.bounds.height() + offset.y) - this.bounds.width()\r\n      } else if (newAspectRatio < this.aspectRatio) {\r\n        offset.y = (this.bounds.width() + offset.x) / this.aspectRatio - this.bounds.height()\r\n      }\r\n    }\r\n\r\n    // respect minimum and maximum sizes of stencil\r\n    if (this.orientation === 'northwest' || this.orientation === 'north' || this.orientation === 'west') {\r\n      if (this.bounds.width() - offset.x > this.maxSize.width) {\r\n        offset.x = -(this.maxSize.width - this.bounds.width())\r\n        if (this.aspectRatio)\r\n          offset.y = this.aspectRatio * offset.x\r\n      }\r\n      if (this.bounds.width() - offset.x < this.minSize.width) {\r\n        offset.x = -(this.minSize.width - this.bounds.width())\r\n        if (this.aspectRatio)\r\n          offset.y = this.aspectRatio * offset.x\r\n      }\r\n      if (this.bounds.height() - offset.y > this.maxSize.height) {\r\n        offset.y = -(this.maxSize.height - this.bounds.height())\r\n        if (this.aspectRatio)\r\n          offset.x = offset.y / this.aspectRatio\r\n      }\r\n      if (this.bounds.height() - offset.y < this.minSize.height) {\r\n        offset.y = -(this.minSize.height - this.bounds.height())\r\n        if (this.aspectRatio)\r\n          offset.x = offset.y / this.aspectRatio\r\n      }\r\n\r\n    } else {\r\n      // defaults to southeast\r\n      if (this.bounds.width() + offset.x > this.maxSize.width) {\r\n        offset.x = this.maxSize.width - this.bounds.width()\r\n        if (this.aspectRatio)\r\n          offset.y = this.aspectRatio * offset.x\r\n      }\r\n      if (this.bounds.width() + offset.x < this.minSize.width) {\r\n        offset.x = this.minSize.width - this.bounds.width()\r\n        if (this.aspectRatio)\r\n          offset.y = this.aspectRatio * offset.x\r\n      }\r\n      if (this.bounds.height() + offset.y > this.maxSize.height) {\r\n        offset.y = this.maxSize.height - this.bounds.height()\r\n        if (this.aspectRatio)\r\n          offset.x = offset.y / this.aspectRatio\r\n      }\r\n      if (this.bounds.height() + offset.y < this.minSize.height) {\r\n        offset.y = this.minSize.height - this.bounds.height()\r\n        if (this.aspectRatio)\r\n          offset.x = offset.y / this.aspectRatio\r\n      }\r\n    }\r\n\r\n    // if (this.orientation === 'northwest') {\r\n    //   this.bounds.extend({ x: -offset.x, y: -offset.y })\r\n    //   this.bounds.moveBy(offset)\r\n    // } else { // defaults to southeast\r\n    //   this.bounds.extend(offset)\r\n    // }\r\n\r\n    switch (this.orientation) {\r\n      case 'northwest':\r\n        this.bounds.extend({ x: -offset.x, y: -offset.y })\r\n        this.bounds.moveBy(offset)\r\n        break\r\n      case 'southeast':\r\n        this.bounds.extend(offset)\r\n        break\r\n      case 'north':\r\n        this.bounds.extend({ x: 0, y: -offset.y })\r\n        this.bounds.moveBy({ x: 0, y: offset.y })\r\n        break\r\n      case 'south':\r\n        this.bounds.extend({ x: 0, y: offset.y })\r\n        break\r\n      case 'west':\r\n        this.bounds.extend({ x: -offset.x, y: 0 })\r\n        this.bounds.moveBy({ x: offset.x, y: 0 })\r\n        break\r\n      case 'east':\r\n        this.bounds.extend({ x: offset.x, y: 0 })\r\n        break\r\n    }\r\n    this.update()\r\n\r\n    this.resizeCallbacks.each((function (value) {\r\n      value(this.bounds)\r\n    }).bind(this))\r\n\r\n    Event.stop(event)\r\n  }\r\n\r\n  registerOnResizeStart (callback) {\r\n    if (!this.resizeStartCallbacks.member(callback)) {\r\n      this.resizeStartCallbacks.push(callback)\r\n    }\r\n  }\r\n\r\n  unregisterOnResizeStart (callback) {\r\n    if (this.resizeStartCallbacks.member(callback)) {\r\n      this.resizeStartCallbacks = this.resizeStartCallbacks.without(callback)\r\n    }\r\n  }\r\n\r\n  registerOnResizeEnd (callback) {\r\n    if (!this.resizeEndCallbacks.member(callback)) {\r\n      this.resizeEndCallbacks.push(callback)\r\n    }\r\n  }\r\n\r\n  unregisterOnResizeEnd (callback) {\r\n    if (this.resizeEndCallbacks.member(callback)) {\r\n      this.resizeEndCallbacks = this.resizeEndCallbacks.without(callback)\r\n    }\r\n  }\r\n\r\n  registerOnResize (callback) {\r\n    if (!this.resizeCallbacks.member(callback)) {\r\n      this.resizeCallbacks.push(callback)\r\n    }\r\n  }\r\n\r\n  unregisterOnResize (callback) {\r\n    if (this.resizeCallbacks.member(callback)) {\r\n      this.resizeCallbacks = this.resizeCallbacks.without(callback)\r\n    }\r\n  }\r\n\r\n  hide () {\r\n    this.node.style.display = 'none'\r\n  }\r\n\r\n  show () {\r\n    if (this.bounds)\r\n      this.node.style.display = ''\r\n  }\r\n\r\n  setBounds (bounds, min, max, aspectRatio) {\r\n    this.bounds = bounds\r\n\r\n    if (!min) {\r\n      min = { width: ORYX_Config.CustomConfigs.MINIMUM_SIZE, height: ORYX_Config.CustomConfigs.MINIMUM_SIZE }\r\n    }\r\n\r\n    if (!max) {\r\n      max = { width: ORYX_Config.MAXIMUM_SIZE, height: ORYX_Config.MAXIMUM_SIZE }\r\n    }\r\n\r\n    this.minSize = min\r\n    this.maxSize = max\r\n\r\n    this.aspectRatio = aspectRatio\r\n    this.update()\r\n  }\r\n\r\n  update () {\r\n    if (!this.bounds) {\r\n      return\r\n    }\r\n\r\n    let upL = this.bounds.upperLeft()\r\n\r\n    if (this.bounds.width() < this.minSize.width) {\r\n      this.bounds.set(upL.x, upL.y, upL.x + this.minSize.width, upL.y + this.bounds.height())\r\n    }\r\n    if (this.bounds.height() < this.minSize.height) {\r\n      this.bounds.set(upL.x, upL.y, upL.x + this.bounds.width(), upL.y + this.minSize.height)\r\n    }\r\n    if (this.bounds.width() > this.maxSize.width) {\r\n      this.bounds.set(upL.x, upL.y, upL.x + this.maxSize.width, upL.y + this.bounds.height())\r\n    }\r\n    if (this.bounds.height() > this.maxSize.height) {\r\n      this.bounds.set(upL.x, upL.y, upL.x + this.bounds.width(), upL.y + this.maxSize.height)\r\n    }\r\n\r\n    let a = this.canvasNode.getScreenCTM()\r\n\r\n    upL.x *= a.a\r\n    upL.y *= a.d\r\n\r\n    let additionalIEZoom = 1\r\n    if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n      let ua = navigator.userAgent\r\n      if (ua.indexOf('MSIE') >= 0) {\r\n        //IE 10 and below\r\n        let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n        if (zoom !== 100) {\r\n          additionalIEZoom = zoom / 100\r\n        }\r\n      }\r\n    }\r\n\r\n    if (additionalIEZoom === 1) {\r\n      upL.y = upL.y - jQuery('#canvasSection').offset().top + a.f\r\n      upL.x = upL.x - jQuery('#canvasSection').offset().left + a.e\r\n    } else {\r\n      let canvasOffsetLeft = jQuery('#canvasSection').offset().left\r\n      let canvasScrollLeft = jQuery('#canvasSection').scrollLeft()\r\n      let canvasScrollTop = jQuery('#canvasSection').scrollTop()\r\n\r\n      let offset = a.e - (canvasOffsetLeft * additionalIEZoom)\r\n      let additionaloffset = 0\r\n      if (offset > 10) {\r\n        additionaloffset = (offset / additionalIEZoom) - offset\r\n      }\r\n      upL.y = upL.y - (jQuery('#canvasSection').offset().top * additionalIEZoom) + ((canvasScrollTop * additionalIEZoom) - canvasScrollTop) + a.f\r\n      upL.x = upL.x - (canvasOffsetLeft * additionalIEZoom) + additionaloffset + ((canvasScrollLeft * additionalIEZoom) - canvasScrollLeft) + a.e\r\n    }\r\n\r\n    switch (this.orientation) {\r\n      case 'northwest':\r\n        upL.x -= 13\r\n        upL.y -= 13\r\n        break\r\n      case 'southeast':\r\n        upL.x += (a.a * this.bounds.width()) + 3\r\n        upL.y += (a.d * this.bounds.height()) + 3\r\n        break\r\n      case 'north':\r\n        upL.x = 0\r\n        upL.y -= 3\r\n        break\r\n      case 'south':\r\n        upL.x = 0\r\n        upL.y += (a.d * this.bounds.height()) - 3\r\n        break\r\n      case 'west':\r\n        upL.x -= 3\r\n        upL.y = 0\r\n        break\r\n      case 'east':\r\n        upL.x += (a.a * this.bounds.width()) - 3\r\n        upL.y = 0\r\n        break\r\n    }\r\n\r\n    this.position = upL\r\n\r\n    this.node.style.left = this.position.x + 'px'\r\n    this.node.style.top = this.position.y + 'px'\r\n  }\r\n}\r\n","import AbstractPlugin from './AbstractPlugin'\r\nimport SelectedRect from './SelectedRect'\r\nimport GridLine from './GridLine'\r\nimport Resizer from './Resizer'\r\nimport ORYX_Edge from '../core/Edge'\r\nimport ORYX_Node from '../core/Node'\r\nimport ORYX_Shape from '../core/Shape'\r\nimport ORYX_Canvas from '../core/Canvas'\r\nimport ORYX_Command from '../core/Command'\r\nimport ORYX_Command_Move from '../core/Move'\r\nimport ORYX_Controls from '../core/Controls/index'\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Utils from '../Utils'\r\n\r\nexport default class DragDropResize extends AbstractPlugin {\r\n  /**\r\n   *  @param {Object} Facade: The Facade of the Editor\r\n   */\r\n  constructor (facade) {\r\n    super(facade)\r\n    this.facade = facade\r\n    // Initialize variables\r\n    this.currentShapes = []\t\t\t// Current selected Shapes\r\n    //this.pluginsData \t\t= [];\t\t\t// Available Plugins\r\n    this.toMoveShapes = []\t\t\t// Shapes there will be moved\r\n    this.distPoints = []\t\t\t// Distance Points for Snap on Grid\r\n    this.isResizing = false\t\t// Flag: If there was currently resized\r\n    this.dragEnable = false\t\t// Flag: If Dragging is enabled\r\n    this.dragIntialized = false\t\t// Flag: If the Dragging is initialized\r\n    this.edgesMovable = true\t\t\t// Flag: If an edge is docked it is not movable\r\n    this.offSetPosition = { x: 0, y: 0 }\t// Offset of the Dragging\r\n    this.faktorXY = { x: 1, y: 1 }\t// The Current Zoom-Faktor\r\n    this.containmentParentNode\t\t\t\t// the current future parent node for the dragged shapes\r\n    this.isAddingAllowed = false\t\t// flag, if adding current selected shapes to containmentParentNode is allowed\r\n    this.isAttachingAllowed = false\t\t// flag, if attaching to the current shape is allowed\r\n\r\n    this.callbackMouseMove = this.handleMouseMove.bind(this)\r\n    this.callbackMouseUp = this.handleMouseUp.bind(this)\r\n\r\n    // Get the SVG-Containernode\r\n    let containerNode = this.facade.getCanvas().getSvgContainer()\r\n    // Create the Selected Rectangle in the SVG\r\n    this.selectedRect = new SelectedRect(containerNode)\r\n\r\n    // Show grid line if enabled\r\n    if (ORYX_Config.SHOW_GRIDLINE) {\r\n      this.vLine = new GridLine(containerNode, GridLine.DIR_VERTICAL)\r\n      this.hLine = new GridLine(containerNode, GridLine.DIR_HORIZONTAL)\r\n    }\r\n\r\n    // Get a HTML-ContainerNode\r\n    containerNode = this.facade.getCanvas().getHTMLContainer()\r\n\r\n    this.scrollNode = this.facade.getCanvas().rootNode.parentNode.parentNode\r\n\r\n    // Create the southeastern button for resizing\r\n    this.resizerSE = new Resizer(containerNode, 'southeast', this.facade)\r\n    this.resizerSE.registerOnResize(this.onResize.bind(this)) // register the resize callback\r\n    this.resizerSE.registerOnResizeEnd(this.onResizeEnd.bind(this)) // register the resize end callback\r\n    this.resizerSE.registerOnResizeStart(this.onResizeStart.bind(this)) // register the resize start callback\r\n\r\n    // Create the northwestern button for resizing\r\n    this.resizerNW = new Resizer(containerNode, 'northwest', this.facade)\r\n    this.resizerNW.registerOnResize(this.onResize.bind(this)) // register the resize callback\r\n    this.resizerNW.registerOnResizeEnd(this.onResizeEnd.bind(this)) // register the resize end callback\r\n    this.resizerNW.registerOnResizeStart(this.onResizeStart.bind(this)) // register the resize start callback\r\n\r\n    this.resizerSouth = new Resizer(containerNode, 'south', this.facade)\r\n    this.resizerSouth.registerOnResize(this.onResize.bind(this))\r\n    this.resizerSouth.registerOnResizeEnd(this.onResizeEnd.bind(this))\r\n    this.resizerSouth.registerOnResizeStart(this.onResizeStart.bind(this))\r\n    this.resizerNorth = new Resizer(containerNode, 'north', this.facade)\r\n    this.resizerNorth.registerOnResize(this.onResize.bind(this))\r\n    this.resizerNorth.registerOnResizeEnd(this.onResizeEnd.bind(this))\r\n    this.resizerNorth.registerOnResizeStart(this.onResizeStart.bind(this))\r\n    this.resizerEast = new Resizer(containerNode, 'east', this.facade)\r\n    this.resizerEast.registerOnResize(this.onResize.bind(this))\r\n    this.resizerEast.registerOnResizeEnd(this.onResizeEnd.bind(this))\r\n    this.resizerEast.registerOnResizeStart(this.onResizeStart.bind(this))\r\n    this.resizerWest = new Resizer(containerNode, 'west', this.facade)\r\n    this.resizerWest.registerOnResize(this.onResize.bind(this))\r\n    this.resizerWest.registerOnResizeEnd(this.onResizeEnd.bind(this))\r\n    this.resizerWest.registerOnResizeStart(this.onResizeStart.bind(this))\r\n\r\n    // For the Drag and Drop\r\n    // Register on MouseDown-Event on a Shape\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_MOUSEDOWN, this.handleMouseDown.bind(this))\r\n  }\r\n\r\n  /**\r\n   * On the Selection-Changed\r\n   */\r\n  onSelectionChanged (event) {\r\n    let elements = event.elements\r\n\r\n    // Reset the drag-variables\r\n    this.dragEnable = false\r\n    this.dragIntialized = false\r\n    this.resizerSE.hide()\r\n    this.resizerNW.hide()\r\n    this.resizerSouth.hide()\r\n    this.resizerNorth.hide()\r\n    this.resizerEast.hide()\r\n    this.resizerWest.hide()\r\n\r\n    // If there is no elements\r\n    if (!elements || elements.length == 0) {\r\n      // Hide all things and reset all variables\r\n      this.selectedRect.hide()\r\n      this.currentShapes = []\r\n      this.toMoveShapes = []\r\n      this.dragBounds = undefined\r\n      this.oldDragBounds = undefined\r\n    } else {\r\n      // Set the current Shapes\r\n      this.currentShapes = elements\r\n\r\n      // Get all shapes with the highest parent in object hierarchy (canvas is the top most parent)\r\n      let topLevelElements = this.facade.getCanvas().getShapesWithSharedParent(elements)\r\n      this.toMoveShapes = topLevelElements\r\n\r\n      this.toMoveShapes = this.toMoveShapes.findAll(function (shape) {\r\n        return shape instanceof ORYX_Node &&\r\n          (shape.dockers.length === 0 || !elements.member(shape.dockers.first().getDockedShape())) &&\r\n          !shape.getStencil().id().endsWith('Lane')\r\n      })\r\n\r\n      elements.each((function (shape) {\r\n        if (!(shape instanceof ORYX_Edge)) {\r\n          return\r\n        }\r\n\r\n        let dks = shape.getDockers()\r\n\r\n        let hasF = elements.member(dks.first().getDockedShape())\r\n        let hasL = elements.member(dks.last().getDockedShape())\r\n\r\n        //\t\t\t\tif(!hasL) {\r\n        //\t\t\t\t\tthis.toMoveShapes.push(dks.last());\r\n        //\t\t\t\t}\r\n        //\t\t\t\tif(!hasF){\r\n        //\t\t\t\t\tthis.toMoveShapes.push(dks.first())\r\n        //\t\t\t\t}\r\n        /* Enable movement of undocked edges */\r\n        if (!hasF && !hasL) {\r\n          let isUndocked = !dks.first().getDockedShape() && !dks.last().getDockedShape()\r\n          if (isUndocked) {\r\n            this.toMoveShapes = this.toMoveShapes.concat(dks)\r\n          }\r\n        }\r\n\r\n        if (shape.dockers.length > 2 && hasF && hasL) {\r\n          this.toMoveShapes = this.toMoveShapes.concat(dks.findAll(function (el, index) {\r\n            return index > 0 && index < dks.length - 1\r\n          }))\r\n        }\r\n\r\n      }).bind(this))\r\n\r\n      // Calculate the new area-bounds of the selection\r\n      let newBounds = undefined\r\n      this.toMoveShapes.each(function (value) {\r\n        let shape = value\r\n        if (value instanceof ORYX_Controls.Docker) {\r\n          /* Get the Shape */\r\n          shape = value.parent\r\n        }\r\n\r\n        if (!newBounds) {\r\n          newBounds = shape.absoluteBounds()\r\n        } else {\r\n          newBounds.include(shape.absoluteBounds())\r\n        }\r\n      }.bind(this))\r\n\r\n      if (!newBounds) {\r\n        elements.each(function (value) {\r\n          if (!newBounds) {\r\n            newBounds = value.absoluteBounds()\r\n          } else {\r\n            newBounds.include(value.absoluteBounds())\r\n          }\r\n        })\r\n      }\r\n\r\n      let elementInLane = []\r\n      this.toMoveShapes.map((shape) => {\r\n        if (shape instanceof ORYX_Node) {\r\n          let box = {a: {}, b: {}}\r\n          if (shape.getStencil().idWithoutNs() === 'Pool') {\r\n            box = shape.bounds.clone()\r\n            box.a.x += 30\r\n            elementInLane = this.findChindsInBound(box)\r\n          } else if (shape.getStencil().idWithoutNs() === 'V-Pool') {\r\n            box = shape.bounds.clone()\r\n            box.a.y += 30\r\n            elementInLane = this.findChindsInBound(box)\r\n          } else if (shape.getStencil().id().endsWith('Lane')) {\r\n            box = shape.bounds.clone()\r\n            elementInLane = this.findChindsInBound(box)\r\n          }\r\n        }\r\n      })\r\n      this.toMoveShapes = this.toMoveShapes.concat(elementInLane)\r\n\r\n      // Set the new bounds\r\n      this.dragBounds = newBounds\r\n      this.oldDragBounds = newBounds.clone()\r\n\r\n      // Update and show the rectangle\r\n      this.resizeRectangle(newBounds)\r\n      this.selectedRect.show()\r\n\r\n      // Show the resize button, if there is only one element and this is resizeable\r\n      if (elements.length == 1 && elements[0].isResizable) {\r\n        let aspectRatio = elements[0].getStencil().fixedAspectRatio() ?\r\n          elements[0].bounds.width() / elements[0].bounds.height() : undefined\r\n        let id = elements[0].getStencil().idWithoutNs()\r\n        // .getStencil().stencilSet().namespace()\r\n        if (id === 'Pool' || id === 'Lane') {\r\n          // 只能垂直拉伸\r\n          this.resizerSouth.setBounds(this.dragBounds, elements[0].minimumSize, elements[0].maximumSize, aspectRatio)\r\n          // this.resizerSouth.setFullLineBounds(this.dragBounds)\r\n          this.resizerSouth.show()\r\n          this.resizerNorth.setBounds(this.dragBounds, elements[0].minimumSize, elements[0].maximumSize, aspectRatio)\r\n          // this.resizerNorth.setFullLineBounds(this.dragBounds)\r\n          this.resizerNorth.show()\r\n        } else if (id === 'V-Pool' || id === 'V-Lane') {\r\n          this.resizerEast.setBounds(this.dragBounds, elements[0].minimumSize, elements[0].maximumSize, aspectRatio)\r\n          this.resizerEast.show()\r\n          this.resizerWest.setBounds(this.dragBounds, elements[0].minimumSize, elements[0].maximumSize, aspectRatio)\r\n          this.resizerWest.show()\r\n        } else {\r\n          // this.resizerSE.setBounds(this.dragBounds, elements[0].minimumSize, elements[0].maximumSize, aspectRatio)\r\n          // this.resizerSE.show()\r\n          // this.resizerNW.setBounds(this.dragBounds, elements[0].minimumSize, elements[0].maximumSize, aspectRatio)\r\n          // this.resizerNW.show()\r\n        }\r\n      } else {\r\n        this.resizerSE.setBounds(undefined)\r\n        this.resizerNW.setBounds(undefined)\r\n        this.resizerSouth.setBounds(undefined)\r\n        this.resizerNorth.setBounds(undefined)\r\n        this.resizerEast.setBounds(undefined)\r\n        this.resizerWest.setBounds(undefined)\r\n      }\r\n\r\n      // If Snap-To-Grid is enabled, the Snap-Point will be calculate\r\n      if (ORYX_Config.CustomConfigs.GRID_ENABLED) {\r\n        // Reset all points\r\n        this.distPoints = []\r\n\r\n        if (this.distPointTimeout) {\r\n          window.clearTimeout(this.distPointTimeout)\r\n        }\r\n\r\n        this.distPointTimeout = window.setTimeout(function () {\r\n          // Get all the shapes, there will consider at snapping\r\n          // Consider only those elements who shares the same parent element\r\n          let distShapes = this.facade.getCanvas().getChildShapes(true).findAll(function (value) {\r\n            let parentShape = value.parent\r\n            while (parentShape) {\r\n              if (elements.member(parentShape)) return false\r\n              parentShape = parentShape.parent\r\n            }\r\n            return true\r\n          })\r\n\r\n          // The current selection will delete from this array\r\n          //elements.each(function(shape) {\r\n          //\tdistShapes = distShapes.without(shape);\r\n          //});\r\n\r\n          // For all these shapes\r\n          distShapes.each((function (value) {\r\n            if (!(value instanceof ORYX_Edge)) {\r\n              let ul = value.absoluteXY()\r\n              let width = value.bounds.width()\r\n              let height = value.bounds.height()\r\n\r\n              // Add the upperLeft, center and lowerRight - Point to the distancePoints\r\n              this.distPoints.push({\r\n                ul: {\r\n                  x: ul.x,\r\n                  y: ul.y\r\n                },\r\n                c: {\r\n                  x: ul.x + (width / 2),\r\n                  y: ul.y + (height / 2)\r\n                },\r\n                lr: {\r\n                  x: ul.x + width,\r\n                  y: ul.y + height\r\n                }\r\n              })\r\n            }\r\n          }).bind(this))\r\n\r\n        }.bind(this), 10)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * On Mouse Down\r\n   */\r\n  handleMouseDown (event, uiObj) {\r\n    // If the selection Bounds not intialized and the uiObj is not member of current selectio\r\n    // then return\r\n    if (!this.dragBounds || !this.currentShapes.member(uiObj) || !this.toMoveShapes.length) {\r\n      return\r\n    }\r\n\r\n    // Start Dragging\r\n    this.dragEnable = true\r\n    this.dragIntialized = true\r\n    this.edgesMovable = true\r\n\r\n    // Calculate the current zoom factor\r\n    let a = this.facade.getCanvas().node.getScreenCTM()\r\n    this.faktorXY.x = a.a\r\n    this.faktorXY.y = a.d\r\n\r\n    let eventX = Event.pointerX(event)\r\n    let eventY = Event.pointerY(event)\r\n\r\n    // Set the offset position of dragging\r\n    let upL = this.dragBounds.upperLeft()\r\n    this.offSetPosition = {\r\n      x: eventX - (upL.x * this.faktorXY.x),\r\n      y: eventY - (upL.y * this.faktorXY.y)\r\n    }\r\n\r\n    this.offsetScroll = { x: this.scrollNode.scrollLeft, y: this.scrollNode.scrollTop }\r\n\r\n    // Register on Global Mouse-MOVE Event\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_MOUSEMOVE, this.callbackMouseMove, false)\r\n    // Register on Global Mouse-UP Event\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_MOUSEUP, this.callbackMouseUp, true)\r\n\r\n    return\r\n  }\r\n\r\n  /**\r\n   * On Key Mouse Up\r\n   */\r\n  handleMouseUp (event) {\r\n    // disable containment highlighting\r\n    this.facade.raiseEvent({\r\n      type: ORYX_Config.EVENT_HIGHLIGHT_HIDE,\r\n      highlightId: 'dragdropresize.contain'\r\n    })\r\n\r\n    this.facade.raiseEvent({\r\n      type: ORYX_Config.EVENT_HIGHLIGHT_HIDE,\r\n      highlightId: 'dragdropresize.attached'\r\n    })\r\n\r\n    // If Dragging is finished\r\n    if (this.dragEnable) {\r\n      // and update the current selection\r\n      if (!this.dragIntialized) {\r\n        // Do Method after Dragging\r\n        this.afterDrag()\r\n\r\n        // Check if the Shape is allowed to dock to the other Shape\r\n        if (this.isAttachingAllowed &&\r\n          this.toMoveShapes.length == 1 && this.toMoveShapes[0] instanceof ORYX_Node &&\r\n          this.toMoveShapes[0].dockers.length > 0) {\r\n\r\n          // Get the position and the docker\r\n          let position = this.facade.eventCoordinates(event)\r\n          let docker = this.toMoveShapes[0].dockers[0]\r\n\r\n\r\n          // Command-Pattern for dragging several Shapes\r\n          class dockCommand extends ORYX_Command{\r\n            constructor (docker, position, newDockedShape, facade) {\r\n              super()\r\n              this.docker = docker\r\n              this.newPosition = position\r\n              this.newDockedShape = newDockedShape\r\n              this.newParent = newDockedShape.parent || facade.getCanvas()\r\n              this.oldPosition = docker.parent.bounds.center()\r\n              this.oldDockedShape = docker.getDockedShape()\r\n              this.oldParent = docker.parent.parent || facade.getCanvas()\r\n              this.facade = facade\r\n\r\n              if (this.oldDockedShape) {\r\n                this.oldPosition = docker.parent.absoluteBounds().center()\r\n              }\r\n            }\r\n            execute() {\r\n              this.dock(this.newDockedShape, this.newParent, this.newPosition)\r\n              // Raise Event for having the docked shape on top of the other shape\r\n              this.facade.raiseEvent({ type: ORYX_Config.EVENT_ARRANGEMENT_TOP, excludeCommand: true })\r\n            }\r\n            rollback () {\r\n              this.dock(this.oldDockedShape, this.oldParent, this.oldPosition)\r\n            }\r\n            dock (toDockShape, parent, pos) {\r\n              // Add to the same parent Shape\r\n              parent.add(this.docker.parent)\r\n              // Set the Docker to the new Shape\r\n              this.docker.setDockedShape(undefined)\r\n              this.docker.bounds.centerMoveTo(pos)\r\n              this.docker.setDockedShape(toDockShape)\r\n              // this.docker.update();\r\n\r\n              this.facade.setSelection([this.docker.parent])\r\n              this.facade.getCanvas().update()\r\n              this.facade.updateSelection()\r\n            }\r\n          }\r\n          // Instanziate the dockCommand\r\n          const commands = [new dockCommand(docker, position, this.containmentParentNode, this.facade)]\r\n          this.facade.executeCommands(commands)\r\n          // Check if adding is allowed to the other Shape\r\n        } else if (this.isAddingAllowed) {\r\n          // Refresh all Shapes --> Set the new Bounds\r\n          this.refreshSelectedShapes()\r\n        }\r\n\r\n        this.facade.updateSelection()\r\n\r\n        // this.currentShapes.each(function(shape) {shape.update()})\r\n        // Raise Event: Dragging is finished\r\n        this.facade.raiseEvent({ type: ORYX_Config.EVENT_DRAGDROP_END })\r\n      }\r\n      if (this.vLine)\r\n        this.vLine.hide()\r\n      if (this.hLine)\r\n        this.hLine.hide()\r\n    }\r\n\r\n    // Disable\r\n    this.dragEnable = false\r\n\r\n    // UnRegister on Global Mouse-UP/-Move Event\r\n    document.documentElement.removeEventListener(ORYX_Config.EVENT_MOUSEUP, this.callbackMouseUp, true)\r\n    document.documentElement.removeEventListener(ORYX_Config.EVENT_MOUSEMOVE, this.callbackMouseMove, false)\r\n\r\n    return\r\n  }\r\n\r\n  /**\r\n   * On Key Mouse Move\r\n   */\r\n  handleMouseMove (event) {\r\n    // If dragging is not enabled, go return\r\n    if (!this.dragEnable) {\r\n      return\r\n    }\r\n\r\n    // If Dragging is initialized\r\n    if (this.dragIntialized) {\r\n      // Raise Event: Drag will be started\r\n      this.facade.raiseEvent({ type: ORYX_Config.EVENT_DRAGDROP_START })\r\n      this.dragIntialized = false\r\n\r\n      // And hide the resizers and the highlighting\r\n      this.resizerSE.hide()\r\n      this.resizerNW.hide()\r\n      this.resizerSouth.hide()\r\n      this.resizerNorth.hide()\r\n      this.resizerEast.hide()\r\n      this.resizerWest.hide()\r\n\r\n      // if only edges are selected, containmentParentNode must be the canvas\r\n      this._onlyEdges = this.currentShapes.all(function (currentShape) {\r\n        return (currentShape instanceof ORYX_Edge)\r\n      })\r\n\r\n      // Do method before Drag\r\n      this.beforeDrag()\r\n\r\n      this._currentUnderlyingNodes = []\r\n    }\r\n\r\n    // Calculate the new position\r\n    let position = {\r\n      x: Event.pointerX(event) - this.offSetPosition.x,\r\n      y: Event.pointerY(event) - this.offSetPosition.y\r\n    }\r\n\r\n    position.x -= this.offsetScroll.x - this.scrollNode.scrollLeft\r\n    position.y -= this.offsetScroll.y - this.scrollNode.scrollTop\r\n\r\n    // If not the Control-Key are pressed\r\n    let modifierKeyPressed = event.shiftKey || event.ctrlKey\r\n    if (ORYX_Config.CustomConfigs.GRID_ENABLED && !modifierKeyPressed) {\r\n      // Snap the current position to the nearest Snap-Point 辅助线吸附\r\n      position = this.snapToGrid(position)\r\n    } else {\r\n      if (this.vLine)\r\n        this.vLine.hide()\r\n      if (this.hLine)\r\n        this.hLine.hide()\r\n    }\r\n\r\n    // Adjust the point by the zoom faktor\r\n    position.x /= this.faktorXY.x\r\n    position.y /= this.faktorXY.y\r\n\r\n    // Set that the position is not lower than zero\r\n    position.x = Math.max(0, position.x)\r\n    position.y = Math.max(0, position.y)\r\n\r\n    // Set that the position is not bigger than the canvas\r\n    let c = this.facade.getCanvas()\r\n    position.x = Math.min(c.bounds.width() - this.dragBounds.width(), position.x)\r\n    position.y = Math.min(c.bounds.height() - this.dragBounds.height(), position.y)\r\n\r\n    // Drag this bounds\r\n    this.dragBounds.moveTo(position)\r\n\r\n    // Update all selected shapes and the selection rectangle\r\n    this.resizeRectangle(this.dragBounds)\r\n\r\n    this.isAttachingAllowed = false\r\n\r\n    // check, if a node can be added to the underlying node\r\n    let eventCoordinates = this.facade.eventCoordinates(event)\r\n\r\n    let additionalIEZoom = 1\r\n    additionalIEZoom = ORYX_Utils.IEZoomBelow10(additionalIEZoom)\r\n\r\n    if (additionalIEZoom !== 1) {\r\n      eventCoordinates.x = eventCoordinates.x / additionalIEZoom\r\n      eventCoordinates.y = eventCoordinates.y / additionalIEZoom\r\n    }\r\n\r\n    let underlyingNodes = $A(this.facade.getCanvas().getAbstractShapesAtPosition(eventCoordinates))\r\n\r\n    let checkIfAttachable = this.toMoveShapes.length === 1 &&\r\n      this.toMoveShapes[0] instanceof ORYX_Node &&\r\n      this.toMoveShapes[0].dockers.length > 0\r\n    // console.log(233, checkIfAttachable, underlyingNodes, this._currentUnderlyingNodes)\r\n\r\n    checkIfAttachable = checkIfAttachable && underlyingNodes.length != 1\r\n\r\n    if (!checkIfAttachable &&\r\n      underlyingNodes.length === this._currentUnderlyingNodes.length &&\r\n      underlyingNodes.all(function (node, index) {\r\n        return this._currentUnderlyingNodes[index] === node\r\n      }.bind(this))) {\r\n\r\n      return\r\n\r\n    } else if (this._onlyEdges) {\r\n      this.isAddingAllowed = true\r\n      this.containmentParentNode = this.facade.getCanvas()\r\n    } else {\r\n      /* Check the containment and connection rules */\r\n      let options = {\r\n        event: event,\r\n        underlyingNodes: underlyingNodes,\r\n        checkIfAttachable: checkIfAttachable\r\n      }\r\n      this.checkRules(options)\r\n    }\r\n\r\n    this._currentUnderlyingNodes = underlyingNodes.reverse()\r\n\r\n    // visualize the containment result\r\n    if (this.isAttachingAllowed) {\r\n      this.facade.raiseEvent({\r\n        type: ORYX_Config.EVENT_HIGHLIGHT_SHOW,\r\n        highlightId: 'dragdropresize.attached',\r\n        elements: [this.containmentParentNode],\r\n        style: ORYX_Config.SELECTION_HIGHLIGHT_STYLE_RECTANGLE,\r\n        color: ORYX_Config.SELECTION_VALID_COLOR\r\n      })\r\n\r\n    } else {\r\n      this.facade.raiseEvent({\r\n        type: ORYX_Config.EVENT_HIGHLIGHT_HIDE,\r\n        highlightId: 'dragdropresize.attached'\r\n      })\r\n    }\r\n\r\n    if (!this.isAttachingAllowed) {\r\n      if (this.isAddingAllowed) {\r\n        this.facade.raiseEvent({\r\n          type: ORYX_Config.EVENT_HIGHLIGHT_SHOW,\r\n          highlightId: 'dragdropresize.contain',\r\n          elements: [this.containmentParentNode],\r\n          color: ORYX_Config.SELECTION_VALID_COLOR\r\n        })\r\n\r\n      } else {\r\n        this.facade.raiseEvent({\r\n          type: ORYX_Config.EVENT_HIGHLIGHT_SHOW,\r\n          highlightId: 'dragdropresize.contain',\r\n          elements: [this.containmentParentNode],\r\n          color: ORYX_Config.SELECTION_INVALID_COLOR\r\n        })\r\n      }\r\n    } else {\r\n      this.facade.raiseEvent({\r\n        type: ORYX_Config.EVENT_HIGHLIGHT_HIDE,\r\n        highlightId: 'dragdropresize.contain'\r\n      })\r\n    }\r\n\r\n    // Stop the Event\r\n    // Event.stop(event);\r\n    return\r\n  }\r\n\r\n  //\t/**\r\n  //\t * Rollbacks the docked shape of an edge, if the edge is not movable.\r\n  //\t */\r\n  //\tredockEdges: function() {\r\n  //\t\tthis._undockedEdgesCommand.dockers.each(function(el){\r\n  //\t\t\tel.docker.setDockedShape(el.dockedShape);\r\n  //\t\t\tel.docker.setReferencePoint(el.refPoint);\r\n  //\t\t})\r\n  //\t},\r\n\r\n  findChindsInBound (bound) {\r\n    // Calculate the elements from the childs of the canvas\r\n    let elements = this.facade.getCanvas().getChildShapes(true).findAll(function (value) {\r\n      if (value instanceof ORYX_Node) {\r\n        let absBounds = value.absoluteBounds()\r\n        let bA = absBounds.upperLeft()\r\n        let bB = absBounds.lowerRight()\r\n        if (bA.x > bound.a.x && bA.y > bound.a.y && bB.x < bound.b.x && bB.y < bound.b.y) {\r\n          return true\r\n        }\r\n      }\r\n\r\n      return false\r\n    })\r\n\r\n    return elements\r\n  }\r\n  /**\r\n   *  Checks the containment and connection rules for the selected shapes.\r\n   */\r\n  checkRules (options) {\r\n    let event = options.event\r\n    let underlyingNodes = options.underlyingNodes\r\n    let checkIfAttachable = options.checkIfAttachable\r\n    let noEdges = options.noEdges\r\n\r\n    // get underlying node that is not the same than one of the currently selected shapes or\r\n    // a child of one of the selected shapes with the highest z Order.\r\n    // The result is a shape or the canvas\r\n    this.containmentParentNode = underlyingNodes.reverse().find((function (node) {\r\n      return (node instanceof ORYX_Canvas) ||\r\n        (((node instanceof ORYX_Node) || ((node instanceof ORYX_Edge) && !noEdges))\r\n          && (!(this.currentShapes.member(node) ||\r\n            this.currentShapes.any(function (shape) {\r\n              return (shape.children.length > 0 && shape.getChildNodes(true).member(node))\r\n            }))) && !(node.getStencil().id().endsWith('Lane') || node.getStencil().id().endsWith('Pool')))\r\n        // && !(node.getStencil().id().endsWith('Lane') || node.getStencil().id().endsWith('Pool'))\r\n    }).bind(this))\r\n\r\n    if (checkIfAttachable) {\r\n      this.isAttachingAllowed = this.facade.getRules().canConnect({\r\n        sourceShape: this.containmentParentNode,\r\n        edgeShape: this.toMoveShapes[0],\r\n        targetShape: this.toMoveShapes[0]\r\n      })\r\n\r\n      if (this.isAttachingAllowed) {\r\n        let point = this.facade.eventCoordinates(event)\r\n        this.isAttachingAllowed = this.containmentParentNode.isPointOverOffset(point.x, point.y)\r\n      }\r\n    }\r\n\r\n    if (!this.isAttachingAllowed) {\r\n      // check all selected shapes, if they can be added to containmentParentNode\r\n      this.isAddingAllowed = this.toMoveShapes.all((function (currentShape) {\r\n        if (currentShape instanceof ORYX_Edge ||\r\n          currentShape instanceof ORYX_Controls.Docker ||\r\n          this.containmentParentNode === currentShape.parent) {\r\n          return true\r\n        } else if (this.containmentParentNode !== currentShape) {\r\n          if (!(this.containmentParentNode instanceof ORYX_Edge) || !noEdges) {\r\n            if (this.facade.getRules().canContain({\r\n              containingShape: this.containmentParentNode,\r\n              containedShape: currentShape\r\n            })) {\r\n              return true\r\n            }\r\n          }\r\n        }\r\n        return false\r\n      }).bind(this))\r\n    }\r\n\r\n    if (!this.isAttachingAllowed && !this.isAddingAllowed &&\r\n      (this.containmentParentNode instanceof ORYX_Edge)) {\r\n      options.noEdges = true\r\n      options.underlyingNodes.reverse()\r\n      this.checkRules(options)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Redraw the selected Shapes.\r\n   */\r\n  refreshSelectedShapes () {\r\n    // If the selection bounds not initialized, return\r\n    if (!this.dragBounds) {\r\n      return\r\n    }\r\n\r\n    // Calculate the offset between the bounds and the old bounds\r\n    let upL = this.dragBounds.upperLeft()\r\n    let oldUpL = this.oldDragBounds.upperLeft()\r\n    let offset = {\r\n      x: upL.x - oldUpL.x,\r\n      y: upL.y - oldUpL.y\r\n    }\r\n\r\n    console.log('toMoveShapes', this.toMoveShapes, offset, this.containmentParentNode, this.currentShapes)\r\n    // Instanciate the dragCommand\r\n    const commands = [new ORYX_Command_Move(\r\n      this.toMoveShapes, offset, this.containmentParentNode, this.currentShapes, this\r\n    )]\r\n    // this.toMoveShapes.concat(this.elementsMoveWithLane)\r\n    // If the undocked edges command is setted, add this command\r\n    if (this._undockedEdgesCommand instanceof ORYX_Command) {\r\n      commands.unshift(this._undockedEdgesCommand)\r\n    }\r\n    // Execute the commands\r\n    this.facade.executeCommands(commands)\r\n\r\n    // copy the bounds to the old bounds\r\n    if (this.dragBounds) {\r\n      this.oldDragBounds = this.dragBounds.clone()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Callback for Resize\r\n   */\r\n  onResize (bounds) {\r\n    // If the selection bounds not initialized, return\r\n    if (!this.dragBounds) {\r\n      return\r\n    }\r\n\r\n    this.dragBounds = bounds\r\n    this.isResizing = true\r\n\r\n    // Update the rectangle\r\n    this.resizeRectangle(this.dragBounds)\r\n  }\r\n\r\n  onResizeStart () {\r\n    this.facade.raiseEvent({ type: ORYX_Config.EVENT_RESIZE_START })\r\n  }\r\n\r\n  onResizeEnd () {\r\n    if (!(this.currentShapes instanceof Array) || this.currentShapes.length <= 0) {\r\n      return\r\n    }\r\n\r\n    // If Resizing finished, the Shapes will be resize\r\n    if (this.isResizing) {\r\n      class commandClass extends ORYX_Command{\r\n        constructor (shape, newBounds, plugin) {\r\n          super()\r\n          this.shape = shape\r\n          this.oldBounds = shape.bounds.clone()\r\n          this.newBounds = newBounds\r\n          this.plugin = plugin\r\n        }\r\n        execute () {\r\n          this.shape.bounds.set(this.newBounds.a, this.newBounds.b)\r\n          this.update(this.getOffset(this.oldBounds, this.newBounds))\r\n        }\r\n        rollback () {\r\n          this.shape.bounds.set(this.oldBounds.a, this.oldBounds.b)\r\n          this.update(this.getOffset(this.newBounds, this.oldBounds))\r\n        }\r\n        getOffset(b1, b2) {\r\n          return {\r\n            x: b2.a.x - b1.a.x,\r\n            y: b2.a.y - b1.a.y,\r\n            xs: b2.width() / b1.width(),\r\n            ys: b2.height() / b1.height()\r\n          }\r\n        }\r\n        update (offset) {\r\n          this.shape.getLabels().each(function (label) {\r\n            label.changed()\r\n          })\r\n\r\n          let allEdges = [].concat(this.shape.getIncomingShapes())\r\n            .concat(this.shape.getOutgoingShapes())\r\n            // Remove all edges which are included in the selection from the list\r\n            .findAll(function (r) {\r\n              return r instanceof ORYX_Edge\r\n            }.bind(this))\r\n\r\n          this.plugin.layoutEdges(this.shape, allEdges, offset)\r\n          this.plugin.facade.setSelection([this.shape])\r\n          this.plugin.facade.getCanvas().update()\r\n          this.plugin.facade.updateSelection()\r\n        }\r\n      }\r\n\r\n      let bounds = this.dragBounds.clone()\r\n      let shape = this.currentShapes[0]\r\n\r\n      if (shape.parent) {\r\n        let parentPosition = shape.parent.absoluteXY()\r\n        bounds.moveBy(-parentPosition.x, -parentPosition.y)\r\n      }\r\n\r\n      let command = new commandClass(shape, bounds, this)\r\n\r\n      this.facade.executeCommands([command])\r\n      this.isResizing = false\r\n      this.facade.raiseEvent({ type: ORYX_Config.EVENT_RESIZE_END })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Prepare the Dragging\r\n   */\r\n  beforeDrag () {\r\n    class undockEdgeCommand extends ORYX_Command{\r\n      constructor (moveShapes) {\r\n        super()\r\n        this.dockers = moveShapes.collect(function (shape) {\r\n          return shape instanceof ORYX_Controls.Docker ? {\r\n            docker: shape,\r\n            dockedShape: shape.getDockedShape(),\r\n            refPoint: shape.referencePoint\r\n          } : undefined\r\n        }).compact()\r\n      }\r\n      execute () {\r\n        this.dockers.each(function (el) {\r\n          el.docker.setDockedShape(undefined)\r\n        })\r\n      }\r\n      rollback () {\r\n        this.dockers.each(function (el) {\r\n          el.docker.setDockedShape(el.dockedShape)\r\n          el.docker.setReferencePoint(el.refPoint)\r\n          //el.docker.update();\r\n        })\r\n      }\r\n    }\r\n\r\n    this._undockedEdgesCommand = new undockEdgeCommand(this.toMoveShapes)\r\n    this._undockedEdgesCommand.execute()\r\n  }\r\n\r\n  hideAllLabels (shape) {\r\n    // Hide all labels from the shape\r\n    shape.getLabels().each(function (label) {\r\n      label.hide()\r\n    })\r\n    // Hide all labels from docked shapes\r\n    shape.getAllDockedShapes().each(function (dockedShape) {\r\n      let labels = dockedShape.getLabels()\r\n      if (labels.length > 0) {\r\n        labels.each(function (label) {\r\n          label.hide()\r\n        })\r\n      }\r\n    })\r\n\r\n    // Do this recursive for all child shapes\r\n    // EXP-NICO use getShapes\r\n    shape.getChildren().each((function (value) {\r\n      if (value instanceof ORYX_Shape)\r\n        this.hideAllLabels(value)\r\n    }).bind(this))\r\n  }\r\n\r\n  /**\r\n   * Finished the Dragging\r\n   */\r\n  afterDrag () {\r\n\r\n  }\r\n\r\n  /**\r\n   * Show all Labels at these shape\r\n   */\r\n  showAllLabels (shape) {\r\n    // Show the label of these shape\r\n    //shape.getLabels().each(function(label) {\r\n    for (let i = 0; i < shape.length; i++) {\r\n      let label = shape[i]\r\n      label.show()\r\n    }//);\r\n    // Show all labels at docked shapes\r\n    //shape.getAllDockedShapes().each(function(dockedShape) {\r\n    let allDockedShapes = shape.getAllDockedShapes()\r\n    for (let i = 0; i < allDockedShapes.length; i++) {\r\n      let dockedShape = allDockedShapes[i]\r\n      let labels = dockedShape.getLabels()\r\n      if (labels.length > 0) {\r\n        labels.each(function (label) {\r\n          label.show()\r\n        })\r\n      }\r\n    }//);\r\n\r\n    // Do this recursive\r\n    //shape.children.each((function(value) {\r\n    for (let i = 0; i < shape.children.length; i++) {\r\n      var value = shape.children[i]\r\n      if (value instanceof ORYX_Shape)\r\n        this.showAllLabels(value)\r\n    }//).bind(this));\r\n  }\r\n\r\n  /**\r\n   * Intialize Method, if there are new Plugins\r\n   *\r\n   */\r\n\r\n  /*registryChanged: function(pluginsData) {\r\n   // Save all new Plugin, sorted by group and index\r\n   this.pluginsData = pluginsData.sortBy( function(value) {\r\n   return (value.group + \"\" + value.index);\r\n   });\r\n   },*/\r\n\r\n  /**\r\n   * Adjust an Point to the Snap Points\r\n   * 将点调整到捕捉点\r\n   */\r\n  snapToGrid (position) {\r\n    // Get the current Bounds\r\n    let bounds = this.dragBounds\r\n\r\n    let point = {}\r\n    let ulThres = 6\r\n    let cThres = 10\r\n    let lrThres = 6\r\n\r\n    let scale = this.vLine ? this.vLine.getScale() : 1\r\n\r\n    let ul = { x: (position.x / scale), y: (position.y / scale) }\r\n    let c = { x: (position.x / scale) + (bounds.width() / 2), y: (position.y / scale) + (bounds.height() / 2) }\r\n    let lr = { x: (position.x / scale) + (bounds.width()), y: (position.y / scale) + (bounds.height()) }\r\n\r\n    let offsetX, offsetY\r\n    let gridX, gridY\r\n\r\n    // For each distant point\r\n    this.distPoints.each(function (value) {\r\n      let x, y, gx, gy\r\n      if (Math.abs(value.c.x - c.x) < cThres) {\r\n        x = value.c.x - c.x\r\n        gx = value.c.x\r\n      }\r\n      /* else if (Math.abs(value.ul.x-ul.x) < ulThres){\r\n       x = value.ul.x-ul.x;\r\n       gx = value.ul.x;\r\n       } else if (Math.abs(value.lr.x-lr.x) < lrThres){\r\n       x = value.lr.x-lr.x;\r\n       gx = value.lr.x;\r\n       } */\r\n\r\n      if (Math.abs(value.c.y - c.y) < cThres) {\r\n        y = value.c.y - c.y\r\n        gy = value.c.y\r\n      }\r\n      /* else if (Math.abs(value.ul.y-ul.y) < ulThres){\r\n       y = value.ul.y-ul.y;\r\n       gy = value.ul.y;\r\n       } else if (Math.abs(value.lr.y-lr.y) < lrThres){\r\n       y = value.lr.y-lr.y;\r\n       gy = value.lr.y;\r\n       } */\r\n\r\n      if (x !== undefined) {\r\n        offsetX = offsetX === undefined ? x : (Math.abs(x) < Math.abs(offsetX) ? x : offsetX)\r\n        if (offsetX === x)\r\n          gridX = gx\r\n      }\r\n\r\n      if (y !== undefined) {\r\n        offsetY = offsetY === undefined ? y : (Math.abs(y) < Math.abs(offsetY) ? y : offsetY)\r\n        if (offsetY === y)\r\n          gridY = gy\r\n      }\r\n    })\r\n\r\n    if (offsetX !== undefined) {\r\n      ul.x += offsetX\r\n      ul.x *= scale\r\n      if (this.vLine && gridX)\r\n        this.vLine.update(gridX)\r\n    } else {\r\n      ul.x = (position.x - (position.x % (ORYX_Config.CustomConfigs.GRID_DISTANCE / 2)))\r\n      if (this.vLine)\r\n        this.vLine.hide()\r\n    }\r\n\r\n    if (offsetY !== undefined) {\r\n      ul.y += offsetY\r\n      ul.y *= scale\r\n      if (this.hLine && gridY)\r\n        this.hLine.update(gridY)\r\n    } else {\r\n      ul.y = (position.y - (position.y % (ORYX_Config.CustomConfigs.GRID_DISTANCE / 2)))\r\n      if (this.hLine)\r\n        this.hLine.hide()\r\n    }\r\n\r\n    return ul\r\n  }\r\n\r\n  showGridLine () {\r\n\r\n  }\r\n\r\n  /**\r\n   * 重新绘制所选区域的矩形\r\n   * @param {Object} bounds\r\n   */\r\n  resizeRectangle (bounds) {\r\n    this.selectedRect.resize(bounds)\r\n  }\r\n\r\n}\r\n","import ORYX_Config from '../CONFIG'\r\nimport ORYX_Utils from '../Utils'\r\nimport ORYX_Edge from '../core/Edge'\r\n\r\n\r\nexport default class ShapeHighlighting {\r\n  constructor (facade) {\r\n    this.parentNode = facade.getCanvas().getSvgContainer()\r\n    // The parent Node\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/2000/svg', this.parentNode,\r\n      ['g'])\r\n\r\n    this.highlightNodes = {}\r\n    facade.registerOnEvent(ORYX_Config.EVENT_HIGHLIGHT_SHOW, this.setHighlight.bind(this))\r\n    facade.registerOnEvent(ORYX_Config.EVENT_HIGHLIGHT_HIDE, this.hideHighlight.bind(this))\r\n  }\r\n\r\n  setHighlight (options) {\r\n    if (options && options.highlightId) {\r\n      let node = this.highlightNodes[options.highlightId]\r\n\r\n      if (!node) {\r\n        node = ORYX_Utils.graft('http://www.w3.org/2000/svg', this.node,\r\n          ['path', {\r\n            'stroke-width': 2.0, 'fill': 'none'\r\n          }])\r\n\r\n        this.highlightNodes[options.highlightId] = node\r\n      }\r\n\r\n      if (options.elements && options.elements.length > 0) {\r\n        this.setAttributesByStyle(node, options)\r\n        this.show(node)\r\n      } else {\r\n        this.hide(node)\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  hideHighlight (options) {\r\n    if (options && options.highlightId && this.highlightNodes[options.highlightId]) {\r\n      this.hide(this.highlightNodes[options.highlightId])\r\n    }\r\n  }\r\n\r\n  hide (node) {\r\n    node.setAttributeNS(null, 'display', 'none')\r\n  }\r\n\r\n  show (node) {\r\n    node.setAttributeNS(null, 'display', '')\r\n  }\r\n\r\n  setAttributesByStyle (node, options) {\r\n    // If the style say, that it should look like a rectangle\r\n    if (options.style && options.style == ORYX_Config.SELECTION_HIGHLIGHT_STYLE_RECTANGLE) {\r\n\r\n      // Set like this\r\n      let bo = options.elements[0].absoluteBounds()\r\n      let strWidth = options.strokewidth ? options.strokewidth : ORYX_Config.CustomConfigs.BORDER_OFFSET\r\n\r\n      node.setAttributeNS(null, 'd', this.getPathRectangle(bo.a, bo.b, strWidth))\r\n      node.setAttributeNS(null, 'stroke', options.color ? options.color : ORYX_Config.SELECTION_HIGHLIGHT_COLOR)\r\n      node.setAttributeNS(null, 'stroke-opacity', options.opacity ? options.opacity : 0.2)\r\n      node.setAttributeNS(null, 'stroke-width', strWidth)\r\n\r\n    } else if (options.elements.length == 1\r\n      && options.elements[0] instanceof ORYX_Edge &&\r\n      options.highlightId != 'selection') {\r\n\r\n      /* Highlight containment of edge's childs */\r\n      let path = this.getPathEdge(options.elements[0].dockers)\r\n      if (path && path.length > 0) {\r\n        node.setAttributeNS(null, 'd', path)\r\n      }\r\n      node.setAttributeNS(null, 'stroke', options.color ? options.color : ORYX_Config.SELECTION_HIGHLIGHT_COLOR)\r\n      node.setAttributeNS(null, 'stroke-opacity', options.opacity ? options.opacity : 0.2)\r\n      node.setAttributeNS(null, 'stroke-width', ORYX_Config.CustomConfigs.OFFSET_EDGE_BOUNDS)\r\n    } else {\r\n      // If not, set just the corners\r\n      let path = this.getPathByElements(options.elements)\r\n      if (path && path.length > 0) {\r\n        node.setAttributeNS(null, 'd', path)\r\n      }\r\n      node.setAttributeNS(null, 'stroke', options.color ? options.color : ORYX_Config.SELECTION_HIGHLIGHT_COLOR)\r\n      node.setAttributeNS(null, 'stroke-opacity', options.opacity ? options.opacity : 1.0)\r\n      node.setAttributeNS(null, 'stroke-width', options.strokewidth ? options.strokewidth : 2.0)\r\n\r\n    }\r\n  }\r\n\r\n  getPathByElements (elements) {\r\n    if (!elements || elements.length <= 0) {\r\n      return undefined\r\n    }\r\n\r\n    // Get the padding and the size\r\n    let padding = ORYX_Config.CustomConfigs.SELECTED_AREA_PADDING\r\n    let path = ''\r\n\r\n    // Get thru all Elements\r\n    elements.each((function (element) {\r\n      if (!element) {\r\n        return\r\n      }\r\n      // Get the absolute Bounds and the two Points\r\n      let bounds = element.absoluteBounds()\r\n      bounds.widen(padding)\r\n      let a = bounds.upperLeft()\r\n      let b = bounds.lowerRight()\r\n\r\n      path = path + this.getPath(a, b)\r\n\r\n    }).bind(this))\r\n\r\n    return path\r\n  }\r\n\r\n  getPath (a, b) {\r\n    return this.getPathCorners(a, b)\r\n  }\r\n\r\n  getPathCorners (a, b) {\r\n    let size = ORYX_Config.SELECTION_HIGHLIGHT_SIZE\r\n    let path = ''\r\n    // Set: Upper left\r\n    path = path + 'M' + a.x + ' ' + (a.y + size) + ' l0 -' + size + ' l' + size + ' 0 '\r\n    // Set: Lower left\r\n    path = path + 'M' + a.x + ' ' + (b.y - size) + ' l0 ' + size + ' l' + size + ' 0 '\r\n    // Set: Lower right\r\n    path = path + 'M' + b.x + ' ' + (b.y - size) + ' l0 ' + size + ' l-' + size + ' 0 '\r\n    // Set: Upper right\r\n    path = path + 'M' + b.x + ' ' + (a.y + size) + ' l0 -' + size + ' l-' + size + ' 0 '\r\n    return path\r\n  }\r\n\r\n  getPathRectangle (a, b, strokeWidth) {\r\n    let size = ORYX_Config.SELECTION_HIGHLIGHT_SIZE\r\n    let path = ''\r\n    let offset = strokeWidth / 2.0\r\n\r\n    // Set: Upper left\r\n    path = path + 'M' + (a.x + offset) + ' ' + (a.y)\r\n    path = path + ' L' + (a.x + offset) + ' ' + (b.y - offset)\r\n    path = path + ' L' + (b.x - offset) + ' ' + (b.y - offset)\r\n    path = path + ' L' + (b.x - offset) + ' ' + (a.y + offset)\r\n    path = path + ' L' + (a.x + offset) + ' ' + (a.y + offset)\r\n\r\n    return path\r\n  }\r\n\r\n  getPathEdge (edgeDockers) {\r\n    let length = edgeDockers.length\r\n    let path = 'M' + edgeDockers[0].bounds.center().x + ' '\r\n      + edgeDockers[0].bounds.center().y\r\n\r\n    for (let i = 1; i < length; i++) {\r\n      let dockerPoint = edgeDockers[i].bounds.center()\r\n      path = path + ' L' + dockerPoint.x + ' ' + dockerPoint.y\r\n    }\r\n\r\n    return path\r\n  }\r\n\r\n}\r\n","import ORYX_Config from '../CONFIG'\r\n\r\nexport default class HighlightingSelectedShapes {\r\n  constructor(facade) {\r\n    this.facade = facade;\r\n    this.opacityFull = 0.9;\r\n    this.opacityLow = 0.4;\r\n\r\n    // Register on Dragging-Events for show/hide of ShapeMenu\r\n    //this.facade.registerOnEvent(ORYX.CONFIG.EVENT_DRAGDROP_START, this.hide.bind(this));\r\n    //this.facade.registerOnEvent(ORYX.CONFIG.EVENT_DRAGDROP_END,  this.show.bind(this));\r\n  }\r\n\r\n  /**\r\n   * On the Selection-Changed\r\n   *\r\n   */\r\n  onSelectionChanged (event) {\r\n    if (event.elements && event.elements.length > 1) {\r\n      this.facade.raiseEvent({\r\n        type: ORYX_Config.EVENT_HIGHLIGHT_SHOW,\r\n        highlightId: 'selection',\r\n        elements: event.elements.without(event.subSelection),\r\n        color: ORYX_Config.SELECTION_HIGHLIGHT_COLOR,\r\n        opacity: !event.subSelection ? this.opacityFull : this.opacityLow\r\n      });\r\n\r\n      if (event.subSelection) {\r\n        this.facade.raiseEvent({\r\n          type: ORYX_Config.EVENT_HIGHLIGHT_SHOW,\r\n          highlightId: 'subselection',\r\n          elements: [event.subSelection],\r\n          color: ORYX_Config.SELECTION_HIGHLIGHT_COLOR,\r\n          opacity: this.opacityFull\r\n        });\r\n      } else {\r\n        this.facade.raiseEvent({type: ORYX_Config.EVENT_HIGHLIGHT_HIDE, highlightId: 'subselection'});\r\n      }\r\n    } else {\r\n      this.facade.raiseEvent({type: ORYX_Config.EVENT_HIGHLIGHT_HIDE, highlightId: 'selection'});\r\n      this.facade.raiseEvent({type: ORYX_Config.EVENT_HIGHLIGHT_HIDE, highlightId: 'subselection'});\r\n    }\r\n  }\r\n}","import ORYX_Config from '../CONFIG'\r\nimport ORYX_Controls from '../core/Controls/index'\r\nimport ORYX_Edge from '../core/Edge'\r\nimport ORYX_Node from '../core/Node'\r\nimport ORYX_Shape from '../core/Shape'\r\nimport ORYX_Canvas from '../core/Canvas'\r\nimport ORYX_Command from '../core/Command'\r\nimport ORYX_Math from '../core/Math'\r\n\r\nimport UIDragFunction from '../core/UIEnableDrag'\r\n\r\nexport default class DragDocker {\r\n  /**\r\n   *  Constructor\r\n   *  @param {Object} Facade: The Facade of the Editor\r\n   */\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    // Set the valid and invalid color\r\n    this.VALIDCOLOR = ORYX_Config.SELECTION_VALID_COLOR\r\n    this.INVALIDCOLOR = ORYX_Config.SELECTION_INVALID_COLOR\r\n\r\n    // Define Variables\r\n    this.shapeSelection = undefined\r\n    this.docker = undefined\r\n    this.dockerParent = undefined\r\n    this.dockerSource = undefined\r\n    this.dockerTarget = undefined\r\n    this.lastUIObj = undefined\r\n    this.isStartDocker = undefined\r\n    this.isEndDocker = undefined\r\n    this.undockTreshold = 10\r\n    this.initialDockerPosition = undefined\r\n    this.outerDockerNotMoved = undefined\r\n    this.isValid = false\r\n\r\n    // For the Drag and Drop\r\n    // Register on MouseDown-Event on a Docker\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_MOUSEDOWN, this.handleMouseDown.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_DOCKERDRAG, this.handleDockerDrag.bind(this))\r\n\r\n\r\n    // Register on over/out to show / hide a docker\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_MOUSEOVER, this.handleMouseOver.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_MOUSEOUT, this.handleMouseOut.bind(this))\r\n  }\r\n\r\n  /**\r\n   * MouseOut Handler\r\n   *\r\n   */\r\n  handleMouseOut (event, uiObj) {\r\n    // If there is a Docker, hide this\r\n    if (!this.docker && uiObj instanceof ORYX_Controls.Docker) {\r\n      uiObj.hide()\r\n    } else if (!this.docker && uiObj instanceof ORYX_Edge) {\r\n      uiObj.dockers.each(function (docker) {\r\n        docker.hide()\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * MouseOver Handler\r\n   *\r\n   */\r\n  handleMouseOver (event, uiObj) {\r\n    // If there is a Docker, show this\r\n    if (!this.docker && uiObj instanceof ORYX_Controls.Docker) {\r\n      uiObj.show()\r\n    } else if (!this.docker && uiObj instanceof ORYX_Edge) {\r\n      uiObj.dockers.each(function (docker) {\r\n        docker.show()\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * DockerDrag Handler\r\n   * delegates the uiEvent of the drag event to the mouseDown function\r\n   */\r\n  handleDockerDrag (event, uiObj) {\r\n    this.handleMouseDown(event.uiEvent, uiObj)\r\n  }\r\n\r\n  /**\r\n   * MouseDown Handler\r\n   *\r\n   */\r\n  handleMouseDown (event, uiObj) {\r\n    // If there is a Docker\r\n    if (uiObj instanceof ORYX_Controls.Docker && uiObj.isMovable) {\r\n\r\n      /* Buffering shape selection and clear selection*/\r\n      this.shapeSelection = this.facade.getSelection()\r\n      this.facade.setSelection()\r\n\r\n      this.docker = uiObj\r\n      this.initialDockerPosition = this.docker.bounds.center()\r\n      this.outerDockerNotMoved = false\r\n      this.dockerParent = uiObj.parent\r\n\r\n      // Define command arguments\r\n      this._commandArg = {\r\n        docker: uiObj,\r\n        dockedShape: uiObj.getDockedShape(),\r\n        refPoint: uiObj.referencePoint || uiObj.bounds.center()\r\n      }\r\n\r\n      // Show the Docker\r\n      this.docker.show()\r\n\r\n      // If the Dockers Parent is an Edge,\r\n      //  and the Docker is either the first or last Docker of the Edge\r\n      if (uiObj.parent instanceof ORYX_Edge &&\r\n        (uiObj.parent.dockers.first() == uiObj || uiObj.parent.dockers.last() == uiObj)) {\r\n\r\n        // Get the Edge Source or Target\r\n        if (uiObj.parent.dockers.first() == uiObj && uiObj.parent.dockers.last().getDockedShape()) {\r\n          this.dockerTarget = uiObj.parent.dockers.last().getDockedShape()\r\n        } else if (uiObj.parent.dockers.last() == uiObj && uiObj.parent.dockers.first().getDockedShape()) {\r\n          this.dockerSource = uiObj.parent.dockers.first().getDockedShape()\r\n        }\r\n\r\n      } else {\r\n        // If there parent is not an Edge, undefined the Source and Target\r\n        this.dockerSource = undefined\r\n        this.dockerTarget = undefined\r\n      }\r\n\r\n      this.isStartDocker = this.docker.parent.dockers.first() === this.docker\r\n      this.isEndDocker = this.docker.parent.dockers.last() === this.docker\r\n\r\n      // add to canvas while dragging\r\n      this.facade.getCanvas().add(this.docker.parent)\r\n\r\n      // Hide all Labels from Docker\r\n      this.docker.parent.getLabels().each(function (label) {\r\n        label.hide()\r\n      })\r\n\r\n      let eventCoordinates = this.facade.eventCoordinates(event)\r\n      let additionalIEZoom = 1\r\n      if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n        let ua = navigator.userAgent\r\n        if (ua.indexOf('MSIE') >= 0) {\r\n          //IE 10 and below\r\n          let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n          if (zoom !== 100) {\r\n            additionalIEZoom = zoom / 100\r\n          }\r\n        }\r\n      }\r\n\r\n      if (additionalIEZoom !== 1) {\r\n        eventCoordinates.x = eventCoordinates.x / additionalIEZoom\r\n        eventCoordinates.y = eventCoordinates.y / additionalIEZoom\r\n      }\r\n\r\n      // Undocked the Docker from current Shape\r\n      if ((!this.isStartDocker && !this.isEndDocker) || !this.docker.isDocked()) {\r\n        this.docker.setDockedShape(undefined)\r\n        // Set the Docker to the center of the mouse pointer\r\n        this.docker.bounds.centerMoveTo(eventCoordinates)\r\n        this.dockerParent._update()\r\n      } else {\r\n        this.outerDockerNotMoved = true\r\n      }\r\n\r\n      let option = { movedCallback: this.dockerMoved.bind(this), upCallback: this.dockerMovedFinished.bind(this) }\r\n      this.startEventPos = eventCoordinates\r\n\r\n      // Enable the Docker for Drag'n'Drop, give the mouseMove and mouseUp-Callback with\r\n      UIDragFunction.UIEnableDrag(event, uiObj, option)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Docker MouseMove Handler\r\n   *\r\n   */\r\n  dockerMoved (event) {\r\n    this.outerDockerNotMoved = false\r\n    let snapToMagnet = undefined\r\n\r\n    if (this.docker.parent) {\r\n      if (this.isStartDocker || this.isEndDocker) {\r\n        // Get the EventPosition and all Shapes on these point\r\n        let evPos = this.facade.eventCoordinates(event)\r\n        let additionalIEZoom = 1\r\n        if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n          let ua = navigator.userAgent\r\n          if (ua.indexOf('MSIE') >= 0) {\r\n            //IE 10 and below\r\n            let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n            if (zoom !== 100) {\r\n              additionalIEZoom = zoom / 100\r\n            }\r\n          }\r\n        }\r\n\r\n        if (additionalIEZoom !== 1) {\r\n          evPos.x = evPos.x / additionalIEZoom\r\n          evPos.y = evPos.y / additionalIEZoom\r\n        }\r\n\r\n        if (this.docker.isDocked()) {\r\n          /* Only consider start/end dockers if they are moved over a treshold */\r\n          let distanceDockerPointer =\r\n            ORYX_Math.getDistancePointToPoint(evPos, this.initialDockerPosition)\r\n          if (distanceDockerPointer < this.undockTreshold) {\r\n            this.outerDockerNotMoved = true\r\n            return\r\n          }\r\n\r\n          /* Undock the docker */\r\n          this.docker.setDockedShape(undefined)\r\n          // Set the Docker to the center of the mouse pointer\r\n          //this.docker.bounds.centerMoveTo(evPos);\r\n          this.dockerParent._update()\r\n        }\r\n\r\n        let shapes = this.facade.getCanvas().getAbstractShapesAtPosition(evPos)\r\n\r\n        // Get the top level Shape on these, but not the same as Dockers parent\r\n        let uiObj = shapes.pop()\r\n        if (this.docker.parent === uiObj) {\r\n          uiObj = shapes.pop()\r\n        }\r\n\r\n        // If the top level Shape the same as the last Shape, then return\r\n        if (this.lastUIObj == uiObj) {\r\n          //return;\r\n\r\n          // If the top level uiObj instance of Shape and this isn't the parent of the docker\r\n        } else if (uiObj instanceof ORYX_Shape) {\r\n\r\n          // Ask by the StencilSet if the source, the edge and the target valid connections.\r\n          if (this.docker.parent instanceof ORYX_Edge) {\r\n            let highestParent = this.getHighestParentBeforeCanvas(uiObj)\r\n            /* Ensure that the shape to dock is not a child shape\r\n             * of the same edge.\r\n             */\r\n            if (highestParent instanceof ORYX_Edge && this.docker.parent === highestParent) {\r\n              this.isValid = false\r\n              this.dockerParent._update()\r\n              return\r\n            }\r\n            this.isValid = false\r\n            let curObj = uiObj, orgObj = uiObj\r\n            while (!this.isValid && curObj && !(curObj instanceof ORYX_Canvas)) {\r\n              uiObj = curObj\r\n              this.isValid = this.facade.getRules().canConnect({\r\n                sourceShape: this.dockerSource ? // Is there a docked source\r\n                  this.dockerSource : // than set this\r\n                  (this.isStartDocker ? // if not and if the Docker is the start docker\r\n                    uiObj : // take the last uiObj\r\n                    undefined), // if not set it to undefined;\r\n                edgeShape: this.docker.parent,\r\n                targetShape: this.dockerTarget ? // Is there a docked target\r\n                  this.dockerTarget : // than set this\r\n                  (this.isEndDocker ? // if not and if the Docker is not the start docker\r\n                    uiObj : // take the last uiObj\r\n                    undefined) // if not set it to undefined;\r\n              })\r\n              curObj = curObj.parent\r\n            }\r\n\r\n            // Reset uiObj if no\r\n            // valid parent is found\r\n            if (!this.isValid) {\r\n              uiObj = orgObj\r\n            }\r\n\r\n          } else {\r\n            this.isValid = this.facade.getRules().canConnect({\r\n              sourceShape: uiObj,\r\n              edgeShape: this.docker.parent,\r\n              targetShape: this.docker.parent\r\n            })\r\n          }\r\n\r\n          // If there is a lastUIObj, hide the magnets\r\n          if (this.lastUIObj) {\r\n            this.hideMagnets(this.lastUIObj)\r\n          }\r\n\r\n          // If there is a valid connection, show the magnets\r\n          if (this.isValid) {\r\n            this.showMagnets(uiObj)\r\n          }\r\n\r\n          // Set the Highlight Rectangle by these value\r\n          this.showHighlight(uiObj, this.isValid ? this.VALIDCOLOR : this.INVALIDCOLOR)\r\n\r\n          // Buffer the current Shape\r\n          this.lastUIObj = uiObj\r\n        } else {\r\n          // If there is no top level Shape, then hide the highligting of the last Shape\r\n          this.hideHighlight()\r\n          this.lastUIObj ? this.hideMagnets(this.lastUIObj) : null\r\n          this.lastUIObj = undefined\r\n          this.isValid = false\r\n        }\r\n\r\n        // Snap to the nearest Magnet\r\n        if (this.lastUIObj && this.isValid && !(event.shiftKey || event.ctrlKey)) {\r\n          snapToMagnet = this.lastUIObj.magnets.find(function (magnet) {\r\n            return magnet.absoluteBounds().isIncluded(evPos)\r\n          })\r\n\r\n          if (snapToMagnet) {\r\n            this.docker.bounds.centerMoveTo(snapToMagnet.absoluteCenterXY())\r\n            //this.docker.update()\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Snap to on the nearest Docker of the same parent\r\n    if (!(event.shiftKey || event.ctrlKey) && !snapToMagnet) {\r\n      let minOffset = ORYX_Config.DOCKER_SNAP_OFFSET\r\n      let nearestX = minOffset + 1\r\n      let nearestY = minOffset + 1\r\n      let dockerCenter = this.docker.bounds.center()\r\n\r\n      if (this.docker.parent) {\r\n        this.docker.parent.dockers.each((function (docker) {\r\n          if (this.docker == docker) {\r\n            return\r\n          }\r\n\r\n          let center = docker.referencePoint ? docker.getAbsoluteReferencePoint() : docker.bounds.center()\r\n\r\n          nearestX = Math.abs(nearestX) > Math.abs(center.x - dockerCenter.x) ? center.x - dockerCenter.x : nearestX\r\n          nearestY = Math.abs(nearestY) > Math.abs(center.y - dockerCenter.y) ? center.y - dockerCenter.y : nearestY\r\n\r\n        }).bind(this))\r\n\r\n        if (Math.abs(nearestX) < minOffset || Math.abs(nearestY) < minOffset) {\r\n          nearestX = Math.abs(nearestX) < minOffset ? nearestX : 0\r\n          nearestY = Math.abs(nearestY) < minOffset ? nearestY : 0\r\n\r\n          this.docker.bounds.centerMoveTo(dockerCenter.x + nearestX, dockerCenter.y + nearestY)\r\n          //this.docker.update()\r\n        } else {\r\n          let previous = this.docker.parent.dockers[Math.max(this.docker.parent.dockers.indexOf(this.docker) - 1, 0)]\r\n          let next = this.docker.parent.dockers[Math.min(this.docker.parent.dockers.indexOf(this.docker) + 1, this.docker.parent.dockers.length - 1)]\r\n\r\n          if (previous && next && previous !== this.docker && next !== this.docker) {\r\n            let cp = previous.bounds.center()\r\n            let cn = next.bounds.center()\r\n            let cd = this.docker.bounds.center()\r\n\r\n            // Checks if the point is on the line between previous and next\r\n            if (ORYX_Math.isPointInLine(cd.x, cd.y, cp.x, cp.y, cn.x, cn.y, 10)) {\r\n              // Get the rise\r\n              let raise = (Number(cn.y) - Number(cp.y)) / (Number(cn.x) - Number(cp.x))\r\n              // Calculate the intersection point\r\n              let intersecX = ((cp.y - (cp.x * raise)) - (cd.y - (cd.x * (-Math.pow(raise, -1))))) / ((-Math.pow(raise, -1)) - raise)\r\n              let intersecY = (cp.y - (cp.x * raise)) + (raise * intersecX)\r\n\r\n              if (isNaN(intersecX) || isNaN(intersecY)) {\r\n                return\r\n              }\r\n\r\n              this.docker.bounds.centerMoveTo(intersecX, intersecY)\r\n            }\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n    //this.facade.getCanvas().update();\r\n    this.dockerParent._update()\r\n  }\r\n\r\n  /**\r\n   * Docker MouseUp Handler\r\n   *\r\n   */\r\n  dockerMovedFinished (event) {\r\n    /* Reset to buffered shape selection */\r\n    this.facade.setSelection(this.shapeSelection)\r\n\r\n    // Hide the border\r\n    this.hideHighlight()\r\n\r\n    // Show all Labels from Docker\r\n    this.dockerParent.getLabels().each(function (label) {\r\n      label.show()\r\n      //label.update();\r\n    })\r\n\r\n    // If there is a last top level Shape\r\n    if (this.lastUIObj && (this.isStartDocker || this.isEndDocker)) {\r\n      // If there is a valid connection, the set as a docked Shape to them\r\n      if (this.isValid) {\r\n        this.docker.setDockedShape(this.lastUIObj)\r\n\r\n        this.facade.raiseEvent({\r\n          type: ORYX_Config.EVENT_DRAGDOCKER_DOCKED,\r\n          docker: this.docker,\r\n          parent: this.docker.parent,\r\n          target: this.lastUIObj\r\n        })\r\n      }\r\n\r\n      this.hideMagnets(this.lastUIObj)\r\n    }\r\n\r\n    // Hide the Docker\r\n    this.docker.hide()\r\n\r\n    if (this.outerDockerNotMoved) {\r\n      // Get the EventPosition and all Shapes on these point\r\n      let evPos = this.facade.eventCoordinates(event)\r\n      let shapes = this.facade.getCanvas().getAbstractShapesAtPosition(evPos)\r\n\r\n      /* Remove edges from selection */\r\n      let shapeWithoutEdges = shapes.findAll(function (node) {\r\n        return node instanceof ORYX_Node\r\n      })\r\n      shapes = shapeWithoutEdges.length ? shapeWithoutEdges : shapes\r\n      this.facade.setSelection(shapes)\r\n    } else {\r\n      // Command-Pattern for dragging one docker\r\n      class dragDockerCommand extends ORYX_Command{\r\n        constructor (docker, newPos, oldPos, newDockedShape, oldDockedShape, facade) {\r\n          super()\r\n          this.docker = docker\r\n          this.index = docker.parent.dockers.indexOf(docker)\r\n          this.newPosition = newPos\r\n          this.newDockedShape = newDockedShape\r\n          this.oldPosition = oldPos\r\n          this.oldDockedShape = oldDockedShape\r\n          this.facade = facade\r\n          this.index = docker.parent.dockers.indexOf(docker)\r\n          this.shape = docker.parent\r\n        }\r\n        execute () {\r\n          if (!this.docker.parent) {\r\n            this.docker = this.shape.dockers[this.index]\r\n          }\r\n          this.dock(this.newDockedShape, this.newPosition)\r\n          this.removedDockers = this.shape.removeUnusedDockers()\r\n          this.facade.updateSelection()\r\n        }\r\n        rollback () {\r\n          this.dock(this.oldDockedShape, this.oldPosition);\r\n          (this.removedDockers || $H({})).each(function (d) {\r\n            this.shape.add(d.value, Number(d.key))\r\n            this.shape._update(true)\r\n          }.bind(this))\r\n          this.facade.updateSelection()\r\n        }\r\n        dock (toDockShape, pos) {\r\n          // Set the Docker to the new Shape\r\n          this.docker.setDockedShape(undefined)\r\n          if (toDockShape) {\r\n            this.docker.setDockedShape(toDockShape)\r\n            this.docker.setReferencePoint(pos)\r\n            //this.docker.update();\r\n            //this.docker.parent._update();\r\n          } else {\r\n            this.docker.bounds.centerMoveTo(pos)\r\n          }\r\n          this.facade.getCanvas().update()\r\n        }\r\n      }\r\n\r\n      if (this.docker.parent) {\r\n        // Instanziate the dockCommand\r\n        const command = new dragDockerCommand(this.docker, this.docker.getDockedShape() ? this.docker.referencePoint : this.docker.bounds.center(), this._commandArg.refPoint, this.docker.getDockedShape(), this._commandArg.dockedShape, this.facade)\r\n        this.facade.executeCommands([command])\r\n      }\r\n    }\r\n\r\n    // Update all Shapes\r\n    //this.facade.updateSelection();\r\n\r\n    // Undefined all variables\r\n    this.docker = undefined\r\n    this.dockerParent = undefined\r\n    this.dockerSource = undefined\r\n    this.dockerTarget = undefined\r\n    this.lastUIObj = undefined\r\n  }\r\n\r\n  /**\r\n   * Hide the highlighting\r\n   */\r\n  hideHighlight () {\r\n    this.facade.raiseEvent({ type: ORYX_Config.EVENT_HIGHLIGHT_HIDE, highlightId: 'validDockedShape' })\r\n  }\r\n\r\n  /**\r\n   * Show the highlighting\r\n   *\r\n   */\r\n  showHighlight (uiObj, color) {\r\n    this.facade.raiseEvent({\r\n      type: ORYX_Config.EVENT_HIGHLIGHT_SHOW,\r\n      highlightId: 'validDockedShape',\r\n      elements: [uiObj],\r\n      color: color\r\n    })\r\n  }\r\n\r\n  showMagnets (uiObj) {\r\n    uiObj.magnets.each(function (magnet) {\r\n      magnet.show()\r\n    })\r\n  }\r\n\r\n  hideMagnets (uiObj) {\r\n    uiObj.magnets.each(function (magnet) {\r\n      magnet.hide()\r\n    })\r\n  }\r\n\r\n  getHighestParentBeforeCanvas (shape) {\r\n    if (!(shape instanceof ORYX_Shape)) {\r\n      return undefined\r\n    }\r\n\r\n    let parent = shape.parent\r\n    while (parent && !(parent.parent instanceof ORYX_Canvas)) {\r\n      parent = parent.parent\r\n    }\r\n\r\n    return parent\r\n  }\r\n\r\n}","import ORYX_Config from '../CONFIG'\r\n\r\nimport ORYX_Command from '../core/Command'\r\nimport ORYX_Controls from '../core/Controls/index'\r\nimport ORYX_Edge from '../core/Edge'\r\n\r\nexport default class AddDocker {\r\n\r\n  /**\r\n   *  Constructor\r\n   *  @param {Object} Facade: The Facade of the Editor\r\n   */\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    this.enableAdd = false\r\n    this.enableRemove = false\r\n\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_MOUSEDOWN, this.handleMouseDown.bind(this))\r\n  }\r\n\r\n  setEnableAdd (enable) {\r\n    this.enableAdd = enable\r\n\r\n    if (this.enableAdd) {\r\n      jQuery('#add-bendpoint-button').addClass('pressed')\r\n    } else {\r\n      jQuery('#add-bendpoint-button').removeClass('pressed')\r\n      jQuery('#add-bendpoint-button').blur()\r\n    }\r\n  }\r\n\r\n  setEnableRemove (enable) {\r\n    this.enableRemove = enable\r\n\r\n    if (this.enableRemove) {\r\n      jQuery('#remove-bendpoint-button').addClass('pressed')\r\n    } else {\r\n      jQuery('#remove-bendpoint-button').removeClass('pressed')\r\n      jQuery('#remove-bendpoint-button').blur()\r\n    }\r\n  }\r\n\r\n  enabledAdd (enable) {\r\n    return this.enableAdd\r\n  }\r\n\r\n  enabledRemove () {\r\n    return this.enableRemove\r\n  }\r\n\r\n  /**\r\n   * MouseDown Handler\r\n   *\r\n   */\r\n  handleMouseDown (event, uiObj) {\r\n    if (this.enabledAdd() && uiObj instanceof ORYX_Edge) {\r\n      this.newDockerCommand({\r\n        edge: uiObj,\r\n        position: this.facade.eventCoordinates(event)\r\n      })\r\n      this.setEnableAdd(false)\r\n\r\n    } else if (this.enabledRemove() &&\r\n      uiObj instanceof ORYX_Controls.Docker &&\r\n      uiObj.parent instanceof ORYX_Edge) {\r\n      this.newDockerCommand({\r\n        edge: uiObj.parent,\r\n        docker: uiObj\r\n      })\r\n      this.setEnableRemove(false)\r\n    }\r\n    document.body.style.cursor = 'default'\r\n  }\r\n\r\n  // Options: edge (required), position (required if add), docker (required if delete)\r\n  newDockerCommand (options) {\r\n    if (!options.edge)\r\n      return\r\n\r\n    class commandClass extends ORYX_Command{\r\n      constructor(addEnabled, deleteEnabled, edge, docker, pos, facade) {\r\n        super()\r\n        this.addEnabled = addEnabled\r\n        this.deleteEnabled = deleteEnabled\r\n        this.edge = edge\r\n        this.docker = docker\r\n        this.pos = pos\r\n        this.facade = facade\r\n      }\r\n      execute() {\r\n        if (this.addEnabled) {\r\n          if (!this.docker) {\r\n            this.docker = this.edge.addDocker(this.pos)\r\n            this.index = this.edge.dockers.indexOf(this.docker)\r\n          } else {\r\n            this.edge.add(this.docker, this.index)\r\n          }\r\n        }\r\n        else if (this.deleteEnabled) {\r\n          this.index = this.edge.dockers.indexOf(this.docker)\r\n          this.pos = this.docker.bounds.center()\r\n          this.edge.removeDocker(this.docker)\r\n        }\r\n        this.edge.getLabels().invoke('show')\r\n        this.facade.getCanvas().update()\r\n        this.facade.updateSelection()\r\n      }\r\n      rollback () {\r\n        if (this.addEnabled) {\r\n          if (this.docker instanceof ORYX_Controls.Docker) {\r\n            this.edge.removeDocker(this.docker)\r\n          }\r\n        } else if (this.deleteEnabled) {\r\n          this.edge.add(this.docker, this.index)\r\n        }\r\n        this.edge.getLabels().invoke('show')\r\n        this.facade.getCanvas().update()\r\n        this.facade.updateSelection()\r\n      }\r\n    }\r\n\r\n    let command = new commandClass(this.enabledAdd(), this.enabledRemove(), options.edge, options.docker, options.position, this.facade)\r\n\r\n    this.facade.executeCommands([command])\r\n  }\r\n}","import ORYX_Config from '../CONFIG'\r\nimport ORYX_Utils from '../Utils'\r\nimport ORYX_Canvas from '../core/Canvas'\r\n\r\nexport default class SelectionFrame {\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    // Register on MouseEvents\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_MOUSEDOWN, this.handleMouseDown.bind(this))\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_MOUSEUP, this.handleMouseUp.bind(this), true)\r\n\r\n    // Some initiale variables\r\n    this.position = { x: 0, y: 0 }\r\n    this.size = { width: 0, height: 0 }\r\n    this.offsetPosition = { x: 0, y: 0 }\r\n\r\n    // (Un)Register Mouse-Move Event\r\n    this.moveCallback = undefined\r\n    this.offsetScroll = { x: 0, y: 0 }\r\n    // HTML-Node of Selection-Frame\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/1999/xhtml', $('canvasSection'),\r\n      ['div', { 'class': 'Oryx_SelectionFrame' }])\r\n\r\n    this.hide()\r\n  }\r\n\r\n  handleMouseDown (event, uiObj) {\r\n    // If there is the Canvas\r\n    if (uiObj instanceof ORYX_Canvas) {\r\n      // Calculate the Offset\r\n      let scrollNode = uiObj.rootNode.parentNode.parentNode\r\n      let a = this.facade.getCanvas().node.getScreenCTM()\r\n      this.offsetPosition = {\r\n        x: a.e,\r\n        y: a.f\r\n      }\r\n\r\n      // Set the new Position\r\n      this.setPos({\r\n        x: Event.pointerX(event) - jQuery('#canvasSection').offset().left,\r\n        y: Event.pointerY(event) - jQuery('#canvasSection').offset().top + 5\r\n      })\r\n\r\n      // Reset the size\r\n      this.resize({ width: 0, height: 0 })\r\n      this.moveCallback = this.handleMouseMove.bind(this)\r\n\r\n      // Register Mouse-Move Event\r\n      document.documentElement.addEventListener(ORYX_Config.EVENT_MOUSEMOVE, this.moveCallback, false)\r\n\r\n      this.offsetScroll = { x: scrollNode.scrollLeft, y: scrollNode.scrollTop }\r\n\r\n      // Show the Frame\r\n      this.show()\r\n    }\r\n\r\n    Event.stop(event)\r\n  }\r\n\r\n  handleMouseUp (event) {\r\n    // If there was an MouseMoving\r\n    if (this.moveCallback) {\r\n      // Hide the Frame\r\n      this.hide()\r\n\r\n      // Unregister Mouse-Move\r\n      document.documentElement.removeEventListener(ORYX_Config.EVENT_MOUSEMOVE, this.moveCallback, false)\r\n\r\n      this.moveCallback = undefined\r\n      let corrSVG = this.facade.getCanvas().node.getScreenCTM()\r\n      // Calculate the positions of the Frame\r\n      let a = {\r\n        x: this.size.width > 0 ? this.position.x : this.position.x + this.size.width,\r\n        y: this.size.height > 0 ? this.position.y : this.position.y + this.size.height\r\n      }\r\n      let b = {\r\n        x: a.x + Math.abs(this.size.width),\r\n        y: a.y + Math.abs(this.size.height)\r\n      }\r\n\r\n      let additionalIEZoom = 1\r\n      additionalIEZoom = ORYX_Utils.IEZoomBelow10(additionalIEZoom)\r\n\r\n      if (additionalIEZoom === 1) {\r\n        a.x = a.x - (corrSVG.e - jQuery('#canvasSection').offset().left)\r\n        a.y = a.y - (corrSVG.f - jQuery('#canvasSection').offset().top)\r\n        b.x = b.x - (corrSVG.e - jQuery('#canvasSection').offset().left)\r\n        b.y = b.y - (corrSVG.f - jQuery('#canvasSection').offset().top)\r\n      } else {\r\n        let canvasOffsetLeft = jQuery('#canvasSection').offset().left\r\n        let canvasScrollLeft = jQuery('#canvasSection').scrollLeft()\r\n        let canvasScrollTop = jQuery('#canvasSection').scrollTop()\r\n\r\n        let offset = a.e - (canvasOffsetLeft * additionalIEZoom)\r\n        let additionaloffset = 0\r\n        if (offset > 10) {\r\n          additionaloffset = (offset / additionalIEZoom) - offset\r\n        }\r\n\r\n        a.x = a.x - (corrSVG.e - (canvasOffsetLeft * additionalIEZoom) + additionaloffset + ((canvasScrollLeft * additionalIEZoom) - canvasScrollLeft))\r\n        a.y = a.y - (corrSVG.f - (jQuery('#canvasSection').offset().top * additionalIEZoom) + ((canvasScrollTop * additionalIEZoom) - canvasScrollTop))\r\n        b.x = b.x - (corrSVG.e - (canvasOffsetLeft * additionalIEZoom) + additionaloffset + ((canvasScrollLeft * additionalIEZoom) - canvasScrollLeft))\r\n        b.y = b.y - (corrSVG.f - (jQuery('#canvasSection').offset().top * additionalIEZoom) + ((canvasScrollTop * additionalIEZoom) - canvasScrollTop))\r\n      }\r\n      // Fit to SVG-Coordinates\r\n      a.x /= corrSVG.a\r\n      a.y /= corrSVG.d\r\n      b.x /= corrSVG.a\r\n      b.y /= corrSVG.d\r\n\r\n      // Calculate the elements from the childs of the canvas\r\n      let elements = this.facade.getCanvas().getChildShapes(true).findAll(function (value) {\r\n        let absBounds = value.absoluteBounds()\r\n        let bA = absBounds.upperLeft()\r\n        let bB = absBounds.lowerRight()\r\n        if (bA.x > a.x && bA.y > a.y && bB.x < b.x && bB.y < b.y) {\r\n          return true\r\n        }\r\n        return false\r\n      })\r\n\r\n      // Set the selection\r\n      this.facade.setSelection(elements)\r\n    }\r\n  }\r\n\r\n  handleMouseMove (event) {\r\n    // Calculate the size\r\n    let size = {\r\n      width: Event.pointerX(event) - this.position.x - jQuery('#canvasSection').offset().left,\r\n      height: Event.pointerY(event) - this.position.y - jQuery('#canvasSection').offset().top + 5\r\n    }\r\n\r\n    let scrollNode = this.facade.getCanvas().rootNode.parentNode.parentNode\r\n    size.width -= this.offsetScroll.x - scrollNode.scrollLeft\r\n    size.height -= this.offsetScroll.y - scrollNode.scrollTop\r\n\r\n    // Set the size\r\n    this.resize(size)\r\n    Event.stop(event)\r\n  }\r\n\r\n  hide () {\r\n    this.node.style.display = 'none'\r\n  }\r\n\r\n  show () {\r\n    this.node.style.display = ''\r\n  }\r\n\r\n  setPos (pos) {\r\n    // Set the Position\r\n    this.node.style.top = pos.y + 'px'\r\n    this.node.style.left = pos.x + 'px'\r\n    this.position = pos\r\n  }\r\n\r\n  resize (size) {\r\n    // Calculate the negative offset\r\n    this.setPos(this.position)\r\n    this.size = Object.clone(size)\r\n\r\n    if (size.width < 0) {\r\n      this.node.style.left = (this.position.x + size.width) + 'px'\r\n      size.width = -size.width\r\n    }\r\n    if (size.height < 0) {\r\n      this.node.style.top = (this.position.y + size.height) + 'px'\r\n      size.height = -size.height\r\n    }\r\n\r\n    // Set the size\r\n    this.node.style.width = size.width + 'px'\r\n    this.node.style.height = size.height + 'px'\r\n  }\r\n\r\n}","import ORYX_Config from '../CONFIG'\r\nimport ORYX_Edge from '../core/Edge'\r\nimport ORYX_Node from '../core/Node'\r\nimport ORYX_Shape from '../core/Shape'\r\n\r\nexport default class Overlay {\r\n  constructor (facade) {\r\n    this.facade = facade\r\n    this.changes = []\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_OVERLAY_SHOW, this.show.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_OVERLAY_HIDE, this.hide.bind(this))\r\n\r\n    this.styleNode = document.createElement('style')\r\n    this.styleNode.setAttributeNS(null, 'type', 'text/css')\r\n\r\n    document.getElementsByTagName('head')[0].appendChild(this.styleNode)\r\n  }\r\n\r\n  /**\r\n   * Show the overlay for specific nodes\r\n   * @param {Object} options\r\n   *\r\n   *  String        options.id    - MUST - Define the id of the overlay (is needed for the hiding of this overlay)\r\n   *  ORYX.Core.Shape[]  options.shapes  - MUST - Define the Shapes for the changes\r\n   *  attr-name:value    options.changes  - Defines all the changes which should be shown\r\n   *\r\n   *\r\n   */\r\n  show (options) {\r\n    // Checks if all arguments are available\r\n    if (!options ||\r\n      !options.shapes || !options.shapes instanceof Array ||\r\n      !options.id || !options.id instanceof String || options.id.length == 0) {\r\n      return\r\n    }\r\n\r\n    //if( this.changes[options.id]){\r\n    //\tthis.hide( options )\r\n    //}\r\n\r\n\r\n    // Checked if attributes are setted\r\n    if (options.attributes) {\r\n\r\n      // FOR EACH - Shape\r\n      options.shapes.each(function (el) {\r\n\r\n        // Checks if the node is a Shape\r\n        if (!el instanceof ORYX_Shape) {\r\n          return\r\n        }\r\n\r\n        this.setAttributes(el.node, options.attributes)\r\n\r\n      }.bind(this))\r\n\r\n    }\r\n\r\n    var isSVG = true\r\n    try {\r\n      isSVG = options.node && options.node instanceof SVGElement\r\n    } catch (e) {\r\n    }\r\n\r\n    // Checks if node is setted and if this is an SVGElement\r\n    if (options.node && isSVG) {\r\n\r\n      options['_temps'] = []\r\n\r\n      // FOR EACH - Node\r\n      options.shapes.each(function (el, index) {\r\n\r\n        // Checks if the node is a Shape\r\n        if (!el instanceof ORYX_Shape) {\r\n          return\r\n        }\r\n\r\n        var _temp = {}\r\n        _temp.svg = options.dontCloneNode ? options.node : options.node.cloneNode(true)\r\n\r\n        // Add the svg node to the ORYX-Shape\r\n        el.node.firstChild.appendChild(_temp.svg)\r\n\r\n        // If\r\n        if (el instanceof ORYX_Edge && !options.nodePosition) {\r\n          options['nodePosition'] = 'START'\r\n        }\r\n\r\n        // If the node position is setted, it has to be transformed\r\n        if (options.nodePosition) {\r\n\r\n          var b = el.bounds\r\n          var p = options.nodePosition.toUpperCase()\r\n\r\n          // Check the values of START and END\r\n          if (el instanceof ORYX_Node && p == 'START') {\r\n            p = 'NW'\r\n          } else if (el instanceof ORYX_Node && p == 'END') {\r\n            p = 'SE'\r\n          } else if (el instanceof ORYX_Edge && p == 'START') {\r\n            b = el.getDockers().first().bounds\r\n          } else if (el instanceof ORYX_Edge && p == 'END') {\r\n            b = el.getDockers().last().bounds\r\n          }\r\n\r\n          // Create a callback for the changing the position\r\n          // depending on the position string\r\n          _temp.callback = function () {\r\n\r\n            var x = 0\r\n            var y = 0\r\n\r\n            if (p == 'NW') {\r\n              // Do Nothing\r\n            } else if (p == 'N') {\r\n              x = b.width() / 2\r\n            } else if (p == 'NE') {\r\n              x = b.width()\r\n            } else if (p == 'E') {\r\n              x = b.width()\r\n              y = b.height() / 2\r\n            } else if (p == 'SE') {\r\n              x = b.width()\r\n              y = b.height()\r\n            } else if (p == 'S') {\r\n              x = b.width() / 2\r\n              y = b.height()\r\n            } else if (p == 'SW') {\r\n              y = b.height()\r\n            } else if (p == 'W') {\r\n              y = b.height() / 2\r\n            } else if (p == 'START' || p == 'END') {\r\n              x = b.width() / 2\r\n              y = b.height() / 2\r\n            } else {\r\n              return\r\n            }\r\n\r\n            if (el instanceof ORYX_Edge) {\r\n              x += b.upperLeft().x\r\n              y += b.upperLeft().y\r\n            }\r\n\r\n            _temp.svg.setAttributeNS(null, 'transform', 'translate(' + x + ', ' + y + ')')\r\n\r\n          }.bind(this)\r\n\r\n          _temp.element = el\r\n          _temp.callback()\r\n\r\n          b.registerCallback(_temp.callback)\r\n\r\n        }\r\n\r\n\r\n        options._temps.push(_temp)\r\n\r\n      }.bind(this))\r\n\r\n\r\n    }\r\n\r\n\r\n    // Store the changes\r\n    if (!this.changes[options.id]) {\r\n      this.changes[options.id] = []\r\n    }\r\n\r\n    this.changes[options.id].push(options)\r\n\r\n  }\r\n\r\n  /**\r\n   * Hide the overlay with the spefic id\r\n   * @param {Object} options\r\n   */\r\n  hide (options) {\r\n    // Checks if all arguments are available\r\n    if (!options ||\r\n      !options.id || !options.id instanceof String || options.id.length == 0 ||\r\n      !this.changes[options.id]) {\r\n      return\r\n    }\r\n\r\n\r\n    // Delete all added attributes\r\n    // FOR EACH - Shape\r\n    this.changes[options.id].each(function (option) {\r\n\r\n      option.shapes.each(function (el, index) {\r\n\r\n        // Checks if the node is a Shape\r\n        if (!el instanceof ORYX_Shape) {\r\n          return\r\n        }\r\n\r\n        this.deleteAttributes(el.node)\r\n\r\n      }.bind(this))\r\n\r\n\r\n      if (option._temps) {\r\n\r\n        option._temps.each(function (tmp) {\r\n          // Delete the added Node, if there is one\r\n          if (tmp.svg && tmp.svg.parentNode) {\r\n            tmp.svg.parentNode.removeChild(tmp.svg)\r\n          }\r\n\r\n          // If\r\n          if (tmp.callback && tmp.element) {\r\n            // It has to be unregistered from the edge\r\n            tmp.element.bounds.unregisterCallback(tmp.callback)\r\n          }\r\n\r\n        }.bind(this))\r\n\r\n      }\r\n\r\n\r\n    }.bind(this))\r\n\r\n\r\n    this.changes[options.id] = null\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * Set the given css attributes to that node\r\n   * @param {HTMLElement} node\r\n   * @param {Object} attributes\r\n   */\r\n  setAttributes (node, attributes) {\r\n    // Get all the childs from ME\r\n    let childs = this.getAllChilds(node.firstChild.firstChild)\r\n    let ids = []\r\n\r\n    // Add all Attributes which have relation to another node in this document and concate the pure id out of it\r\n    // This is for example important for the markers of a edge\r\n    childs.each(function (e) {\r\n      ids.push($A(e.attributes).findAll(function (attr) {\r\n        return attr.nodeValue.startsWith('url(#')\r\n      }))\r\n    })\r\n    ids = ids.flatten().compact()\r\n    ids = ids.collect(function (s) {\r\n      return s.nodeValue\r\n    }).uniq()\r\n    ids = ids.collect(function (s) {\r\n      return s.slice(5, s.length - 1)\r\n    })\r\n\r\n    // Add the node ID to the id\r\n    ids.unshift(node.id + ' .me')\r\n\r\n    let attr = $H(attributes)\r\n    let attrValue = attr.toJSON().gsub(',', ';').gsub('\"', '')\r\n    let attrMarkerValue = attributes.stroke ? attrValue.slice(0, attrValue.length - 1) + '; fill:' + attributes.stroke + ';}' : attrValue\r\n    let attrTextValue\r\n    if (attributes.fill) {\r\n      let copyAttr = Object.clone(attributes)\r\n      copyAttr.fill = 'black'\r\n      attrTextValue = $H(copyAttr).toJSON().gsub(',', ';').gsub('\"', '')\r\n    }\r\n\r\n    // Create the CSS-Tags Style out of the ids and the attributes\r\n    let csstags = ids.collect(function (s, i) {\r\n      return '#' + s + ' * ' + (!i ? attrValue : attrMarkerValue) + '' + (attrTextValue ? ' #' + s + ' text * ' + attrTextValue : '')\r\n    })\r\n\r\n    // Join all the tags\r\n    let s = csstags.join(' ') + '\\n'\r\n\r\n    // And add to the end of the style tag\r\n    this.styleNode.appendChild(document.createTextNode(s))\r\n  }\r\n\r\n  /**\r\n   * Deletes all attributes which are\r\n   * added in a special style sheet for that node\r\n   * @param {HTMLElement} node\r\n   */\r\n  deleteAttributes (node) {\r\n    // Get all children which contains the node id\r\n    let delEl = $A(this.styleNode.childNodes)\r\n      .findAll(function (e) {\r\n        return e.textContent.include('#' + node.id)\r\n      })\r\n\r\n    // Remove all of them\r\n    delEl.each(function (el) {\r\n      el.parentNode.removeChild(el)\r\n    })\r\n  }\r\n\r\n  getAllChilds (node) {\r\n    let childs = $A(node.childNodes)\r\n\r\n    $A(node.childNodes).each(function (e) {\r\n      childs.push(this.getAllChilds(e))\r\n    }.bind(this))\r\n\r\n    return childs.flatten()\r\n  }\r\n\r\n}","import AbstractPlugin from './AbstractPlugin'\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Edge from '../core/Edge'\r\nimport ORYX_Node from '../core/Node'\r\nimport ORYX_Command from '../core/Command'\r\nimport ORYX_Move from '../core/Move'\r\nimport ORYX_Controls from '../core/Controls/index'\r\n\r\nexport default class KeysMove extends AbstractPlugin {\r\n  constructor (facade) {\r\n    super(facade)\r\n    this.facade = facade\r\n    this.copyElements = []\r\n\r\n    // this.facade.registerOnEvent(ORYX.CONFIG.EVENT_KEYDOWN, this.keyHandler.bind(this));\r\n\r\n    // 参数\r\n    // SELECT ALL\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        metaKeys: [ORYX_Config.META_KEY_META_CTRL],\r\n        keyCode: 65,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.selectAll.bind(this)\r\n    })\r\n\r\n    // MOVE LEFT SMALL\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        metaKeys: [ORYX_Config.META_KEY_META_CTRL],\r\n        keyCode: ORYX_Config.KEY_CODE_LEFT,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.move.bind(this, ORYX_Config.KEY_CODE_LEFT, false)\r\n    })\r\n\r\n    // MOVE LEFT\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        keyCode: ORYX_Config.KEY_CODE_LEFT,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.move.bind(this, ORYX_Config.KEY_CODE_LEFT, true)\r\n    })\r\n\r\n    // MOVE RIGHT SMALL\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        metaKeys: [ORYX_Config.META_KEY_META_CTRL],\r\n        keyCode: ORYX_Config.KEY_CODE_RIGHT,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.move.bind(this, ORYX_Config.KEY_CODE_RIGHT, false)\r\n    })\r\n\r\n    // MOVE RIGHT\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        keyCode: ORYX_Config.KEY_CODE_RIGHT,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.move.bind(this, ORYX_Config.KEY_CODE_RIGHT, true)\r\n    })\r\n\r\n    // MOVE UP SMALL\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        metaKeys: [ORYX_Config.META_KEY_META_CTRL],\r\n        keyCode: ORYX_Config.KEY_CODE_UP,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.move.bind(this, ORYX_Config.KEY_CODE_UP, false)\r\n    })\r\n\r\n    // MOVE UP\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        keyCode: ORYX_Config.KEY_CODE_UP,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.move.bind(this, ORYX_Config.KEY_CODE_UP, true)\r\n    })\r\n\r\n    // MOVE DOWN SMALL\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        metaKeys: [ORYX_Config.META_KEY_META_CTRL],\r\n        keyCode: ORYX_Config.KEY_CODE_DOWN,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.move.bind(this, ORYX_Config.KEY_CODE_DOWN, false)\r\n    })\r\n\r\n    // MOVE DOWN\r\n    this.facade.offer({\r\n      keyCodes: [{\r\n        keyCode: ORYX_Config.KEY_CODE_DOWN,\r\n        keyAction: ORYX_Config.KEY_ACTION_DOWN\r\n      }\r\n      ],\r\n      functionality: this.move.bind(this, ORYX_Config.KEY_CODE_DOWN, true)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Select all shapes in the editor\r\n   *\r\n   */\r\n  selectAll (e) {\r\n    Event.stop(e.event)\r\n    this.facade.setSelection(this.facade.getCanvas().getChildShapes(true))\r\n  }\r\n\r\n  move (key, far, e) {\r\n    Event.stop(e.event)\r\n    // calculate the distance to move the objects and get the selection.\r\n    let distance = far ? 20 : 5\r\n    let selection = this.facade.getSelection()\r\n    let currentSelection = this.facade.getSelection()\r\n    let p = { x: 0, y: 0 }\r\n\r\n    // switch on the key pressed and populate the point to move by.\r\n    switch (key) {\r\n      case ORYX_Config.KEY_CODE_LEFT:\r\n        p.x = -1 * distance\r\n        break\r\n      case ORYX_Config.KEY_CODE_RIGHT:\r\n        p.x = distance\r\n        break\r\n      case ORYX_Config.KEY_CODE_UP:\r\n        p.y = -1 * distance\r\n        break\r\n      case ORYX_Config.KEY_CODE_DOWN:\r\n        p.y = distance\r\n        break\r\n    }\r\n\r\n    // move each shape in the selection by the point calculated and update it.\r\n    selection = selection.findAll(function (shape) {\r\n      // Check if this shape is docked to an shape in the selection\r\n      if (shape instanceof ORYX_Node && shape.dockers.length == 1 && selection.include(shape.dockers.first().getDockedShape())) {\r\n        return false\r\n      }\r\n\r\n      // Check if any of the parent shape is included in the selection\r\n      let s = shape.parent\r\n      do {\r\n        if (selection.include(s)) {\r\n          return false\r\n        }\r\n      } while (s = s.parent)\r\n\r\n      // Otherwise, return true\r\n      return true\r\n    })\r\n\r\n    /* Edges must not be movable, if only edges are selected and at least\r\n     * one of them is docked.\r\n     */\r\n    let edgesMovable = true\r\n    let onlyEdgesSelected = selection.all(function (shape) {\r\n      if (shape instanceof ORYX_Edge) {\r\n        if (shape.isDocked()) {\r\n          edgesMovable = false\r\n        }\r\n        return true\r\n      }\r\n      return false\r\n    })\r\n\r\n    if (onlyEdgesSelected && !edgesMovable) {\r\n      /* Abort moving shapes */\r\n      return\r\n    }\r\n\r\n    selection = selection.map(function (shape) {\r\n      if (shape instanceof ORYX_Node) {\r\n        /*if( shape.dockers.length == 1 ){\r\n         return shape.dockers.first()\r\n         } else {*/\r\n        return shape\r\n        //}\r\n      } else if (shape instanceof ORYX_Edge) {\r\n        let dockers = shape.dockers\r\n        if (selection.include(shape.dockers.first().getDockedShape())) {\r\n          dockers = dockers.without(shape.dockers.first())\r\n        }\r\n\r\n        if (selection.include(shape.dockers.last().getDockedShape())) {\r\n          dockers = dockers.without(shape.dockers.last())\r\n        }\r\n\r\n        return dockers\r\n      } else {\r\n        return null\r\n      }\r\n\r\n    }).flatten().compact()\r\n\r\n    if (selection.size() > 0) {\r\n      //Stop moving at canvas borders\r\n      let selectionBounds = [this.facade.getCanvas().bounds.lowerRight().x,\r\n        this.facade.getCanvas().bounds.lowerRight().y,\r\n        0,\r\n        0]\r\n      selection.each(function (s) {\r\n        selectionBounds[0] = Math.min(selectionBounds[0], s.bounds.upperLeft().x)\r\n        selectionBounds[1] = Math.min(selectionBounds[1], s.bounds.upperLeft().y)\r\n        selectionBounds[2] = Math.max(selectionBounds[2], s.bounds.lowerRight().x)\r\n        selectionBounds[3] = Math.max(selectionBounds[3], s.bounds.lowerRight().y)\r\n      })\r\n      if (selectionBounds[0] + p.x < 0)\r\n        p.x = -selectionBounds[0]\r\n      if (selectionBounds[1] + p.y < 0)\r\n        p.y = -selectionBounds[1]\r\n      if (selectionBounds[2] + p.x > this.facade.getCanvas().bounds.lowerRight().x)\r\n        p.x = this.facade.getCanvas().bounds.lowerRight().x - selectionBounds[2]\r\n      if (selectionBounds[3] + p.y > this.facade.getCanvas().bounds.lowerRight().y)\r\n        p.y = this.facade.getCanvas().bounds.lowerRight().y - selectionBounds[3]\r\n\r\n      if (p.x != 0 || p.y != 0) {\r\n        // Instantiate the moveCommand\r\n        const commands = [new ORYX_Move(selection, p, null, currentSelection, this)]\r\n        // Execute the commands\r\n        this.facade.executeCommands(commands)\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  getUndockedCommant (shapes) {\r\n    class undockEdgeCommand extends ORYX_Command{\r\n      constructor (moveShapes) {\r\n        super()\r\n        this.dockers = moveShapes.collect(function (shape) {\r\n          return shape instanceof ORYX_Controls.Docker ? {\r\n            docker: shape,\r\n            dockedShape: shape.getDockedShape(),\r\n            refPoint: shape.referencePoint\r\n          } : undefined\r\n        }).compact()\r\n      }\r\n      execute () {\r\n        this.dockers.each(function (el) {\r\n          el.docker.setDockedShape(undefined)\r\n        })\r\n      }\r\n      rollback () {\r\n        this.dockers.each(function (el) {\r\n          el.docker.setDockedShape(el.dockedShape)\r\n          el.docker.setReferencePoint(el.refPoint)\r\n          //el.docker.update();\r\n        })\r\n      }\r\n    }\r\n\r\n    const command = new undockEdgeCommand(shapes)\r\n    command.execute()\r\n    return command\r\n  }\r\n\r\n  //    /**\r\n  //     * The key handler for this plugin. Every action from the set of cut, copy,\r\n  //     * paste and delete should be accessible trough simple keyboard shortcuts.\r\n  //     * This method checks whether any event triggers one of those actions.\r\n  //     *\r\n  //     * @param {Object} event The keyboard event that should be analysed for\r\n  //     *     triggering of this plugin.\r\n  //     */\r\n  //    keyHandler: function(event){\r\n  //        //TODO document what event.which is.\r\n  //\r\n  //        ORYX.Log.debug(\"keysMove.js handles a keyEvent.\");\r\n  //\r\n  //        // assure we have the current event.\r\n  //        if (!event)\r\n  //            event = window.event;\r\n  //\r\n  //        // get the currently pressed key and state of control key.\r\n  //        var pressedKey = event.which || event.keyCode;\r\n  //        var ctrlPressed = event.ctrlKey;\r\n  //\r\n  //\t\t// if the key is one of the arrow keys, forward to move and return.\r\n  //\t\tif ([ORYX.CONFIG.KEY_CODE_LEFT, ORYX.CONFIG.KEY_CODE_RIGHT,\r\n  //\t\t\tORYX.CONFIG.KEY_CODE_UP, ORYX.CONFIG.KEY_CODE_DOWN].include(pressedKey)) {\r\n  //\r\n  //\t\t\tthis.move(pressedKey, !ctrlPressed);\r\n  //\t\t\treturn;\r\n  //\t\t}\r\n  //\r\n  //    }\r\n\r\n}\r\n","/**\r\n * Edge layouter is an implementation to layout an edge\r\n * @class ORYX.Plugins.Layouter.EdgeLayouter\r\n */\r\n\r\nimport AbstractLayouter from './AbstractLayouter'\r\nimport ORYX_Edge from '../core/Edge'\r\n\r\nclass EdgeLayouter extends AbstractLayouter {\r\n  /**\r\n   * Layout only Edges\r\n   */\r\n  layouted = ['http://b3mn.org/stencilset/bpmn1.1#SequenceFlow',\r\n    'http://b3mn.org/stencilset/bpmn1.1#MessageFlow',\r\n    'http://b3mn.org/stencilset/timjpdl3#SequenceFlow',\r\n    'http://b3mn.org/stencilset/jbpm4#SequenceFlow',\r\n    'http://b3mn.org/stencilset/bpmn2.0#MessageFlow',\r\n    'http://b3mn.org/stencilset/bpmn2.0#SequenceFlow',\r\n    'http://b3mn.org/stencilset/bpmn2.0choreography#MessageFlow',\r\n    'http://b3mn.org/stencilset/bpmn2.0choreography#SequenceFlow',\r\n    'http://b3mn.org/stencilset/bpmn2.0conversation#ConversationLink',\r\n    'http://b3mn.org/stencilset/epc#ControlFlow',\r\n    'http://www.signavio.com/stencilsets/processmap#ProcessLink',\r\n    'http://www.signavio.com/stencilsets/organigram#connection']\r\n\r\n  constructor (facade) {\r\n    super(facade)\r\n  }\r\n\r\n  /**\r\n   * Layout a set on edges\r\n   * @param {Object} edges\r\n   */\r\n  layout (edges) {\r\n    edges.each(function (edge) {\r\n      this.doLayout(edge)\r\n    }.bind(this))\r\n  }\r\n\r\n  /**\r\n   * Layout one edge\r\n   * @param {Object} edge\r\n   */\r\n  doLayout (edge) {\r\n    // Get from and to node\r\n    let from = edge.getIncomingNodes()[0]\r\n    let to = edge.getOutgoingNodes()[0]\r\n\r\n    // Return if one is null\r\n    if (!from || !to) return\r\n\r\n    let positions = this.getPositions(from, to, edge)\r\n    if (positions.length > 0) {\r\n      this.setDockers(edge, positions[0].a, positions[0].b)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a set on positions which are not containt either\r\n   * in the bounds in from or to.\r\n   * @param {Object} from Shape where the edge is come from\r\n   * @param {Object} to Shape where the edge is leading to\r\n   * @param {Object} edge Edge between from and to\r\n   */\r\n  getPositions (from, to, edge) {\r\n    // Get absolute bounds\r\n    let ab = from.absoluteBounds()\r\n    let bb = to.absoluteBounds()\r\n\r\n    // Get center from and to\r\n    let a = ab.center()\r\n    let b = bb.center()\r\n\r\n    let am = ab.midPoint()\r\n    let bm = bb.midPoint()\r\n\r\n    // Get first and last reference point\r\n    let first = Object.clone(edge.dockers.first().referencePoint)\r\n    let last = Object.clone(edge.dockers.last().referencePoint)\r\n    // Get the absolute one\r\n    let aFirst = edge.dockers.first().getAbsoluteReferencePoint()\r\n    let aLast = edge.dockers.last().getAbsoluteReferencePoint()\r\n\r\n    // IF ------>\r\n    // or  |\r\n    //     V\r\n    // Do nothing\r\n    if (Math.abs(aFirst.x - aLast.x) < 1 || Math.abs(aFirst.y - aLast.y) < 1) {\r\n      return []\r\n    }\r\n\r\n    // Calc center position, between a and b\r\n    // depending on there weight\r\n    let m = {}\r\n    m.x = a.x < b.x ?\r\n      (((b.x - bb.width() / 2) - (a.x + ab.width() / 2)) / 2) + (a.x + ab.width() / 2) :\r\n      (((a.x - ab.width() / 2) - (b.x + bb.width() / 2)) / 2) + (b.x + bb.width() / 2)\r\n\r\n    m.y = a.y < b.y ?\r\n      (((b.y - bb.height() / 2) - (a.y + ab.height() / 2)) / 2) + (a.y + ab.height() / 2) :\r\n      (((a.y - ab.height() / 2) - (b.y + bb.height() / 2)) / 2) + (b.y + bb.height() / 2)\r\n\r\n\r\n    // Enlarge both bounds with 10\r\n    ab.widen(5) // Wide the from less than\r\n    bb.widen(20) // the to because of the arrow from the edge\r\n\r\n    let positions = []\r\n    let off = this.getOffset.bind(this)\r\n\r\n    // Checks ----+\r\n    //            |\r\n    //            V\r\n    if (!ab.isIncluded(b.x, a.y) && !bb.isIncluded(b.x, a.y)) {\r\n      positions.push({\r\n        a: { x: b.x + off(last, bm, 'x'), y: a.y + off(first, am, 'y') },\r\n        z: this.getWeight(from, a.x < b.x ? 'r' : 'l', to, a.y < b.y ? 't' : 'b', edge)\r\n      })\r\n    }\r\n\r\n    // Checks |\r\n    //        +--->\r\n    if (!ab.isIncluded(a.x, b.y) && !bb.isIncluded(a.x, b.y)) {\r\n      positions.push({\r\n        a: { x: a.x + off(first, am, 'x'), y: b.y + off(last, bm, 'y') },\r\n        z: this.getWeight(from, a.y < b.y ? 'b' : 't', to, a.x < b.x ? 'l' : 'r', edge)\r\n      })\r\n    }\r\n\r\n    // Checks  --+\r\n    //           |\r\n    //           +--->\r\n    if (!ab.isIncluded(m.x, a.y) && !bb.isIncluded(m.x, b.y)) {\r\n      positions.push({\r\n        a: { x: m.x, y: a.y + off(first, am, 'y') },\r\n        b: { x: m.x, y: b.y + off(last, bm, 'y') },\r\n        z: this.getWeight(from, 'r', to, 'l', edge, a.x > b.x)\r\n      })\r\n    }\r\n\r\n    // Checks |\r\n    //        +---+\r\n    //            |\r\n    //            V\r\n    if (!ab.isIncluded(a.x, m.y) && !bb.isIncluded(b.x, m.y)) {\r\n      positions.push({\r\n        a: { x: a.x + off(first, am, 'x'), y: m.y },\r\n        b: { x: b.x + off(last, bm, 'x'), y: m.y },\r\n        z: this.getWeight(from, 'b', to, 't', edge, a.y > b.y)\r\n      })\r\n    }\r\n\r\n    // Sort DESC of weights\r\n    return positions.sort(function (a, b) {\r\n      return a.z < b.z ? 1 : (a.z == b.z ? -1 : -1)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Returns a offset for the pos to the center of the bounds\r\n   *\r\n   * @param {Object} val\r\n   * @param {Object} pos2\r\n   * @param {String} dir Direction x|y\r\n   */\r\n  getOffset (pos, pos2, dir) {\r\n    return pos[dir] - pos2[dir]\r\n  }\r\n\r\n  /**\r\n   * Returns a value which shows the weight for this configuration\r\n   *\r\n   * @param {Object} from Shape which is coming from\r\n   * @param {String} d1 Direction where is goes\r\n   * @param {Object} to Shape which goes to\r\n   * @param {String} d2 Direction where it comes to\r\n   * @param {Object} edge Edge between from and to\r\n   * @param {Boolean} reverse Reverse the direction (e.g. \"r\" -> \"l\")\r\n   */\r\n  getWeight (from, d1, to, d2, edge, reverse) {\r\n    d1 = (d1 || '').toLowerCase()\r\n    d2 = (d2 || '').toLowerCase()\r\n\r\n    if (!['t', 'r', 'b', 'l'].include(d1)) {\r\n      d1 = 'r'\r\n    }\r\n    if (!['t', 'r', 'b', 'l'].include(d2)) {\r\n      d1 = 'l'\r\n    }\r\n\r\n    // If reverse is set\r\n    if (reverse) {\r\n      // Reverse d1 and d2\r\n      d1 = d1 == 't' ? 'b' : (d1 == 'r' ? 'l' : (d1 == 'b' ? 't' : (d1 == 'l' ? 'r' : 'r')))\r\n      d2 = d2 == 't' ? 'b' : (d2 == 'r' ? 'l' : (d2 == 'b' ? 't' : (d2 == 'l' ? 'r' : 'r')))\r\n    }\r\n\r\n    // Get rules for from \"out\" and to \"in\"\r\n    let dr1 = this.facade.getRules().getLayoutingRules(from, edge)['out']\r\n    let dr2 = this.facade.getRules().getLayoutingRules(to, edge)['in']\r\n\r\n    let fromWeight = dr1[d1]\r\n    let toWeight = dr2[d2]\r\n\r\n    /**\r\n     * Return a true if the center 1 is in the same direction than center 2\r\n     * @param {Object} direction\r\n     * @param {Object} center1\r\n     * @param {Object} center2\r\n     */\r\n    let sameDirection = function (direction, center1, center2) {\r\n      switch (direction) {\r\n        case 't':\r\n          return Math.abs(center1.x - center2.x) < 2 && center1.y < center2.y\r\n        case 'r':\r\n          return center1.x > center2.x && Math.abs(center1.y - center2.y) < 2\r\n        case 'b':\r\n          return Math.abs(center1.x - center2.x) < 2 && center1.y > center2.y\r\n        case 'l':\r\n          return center1.x < center2.x && Math.abs(center1.y - center2.y) < 2\r\n        default:\r\n          return false\r\n      }\r\n    }\r\n\r\n    // Check if there are same incoming edges from 'from'\r\n    let sameIncomingFrom = from\r\n      .getIncomingShapes()\r\n      .findAll(function (a) {\r\n        return a instanceof ORYX_Edge\r\n      })\r\n      .any(function (e) {\r\n        return sameDirection(d1, e.dockers[e.dockers.length - 2].bounds.center(), e.dockers.last().bounds.center())\r\n      })\r\n\r\n    // Check if there are same outgoing edges from 'to'\r\n    let sameOutgoingTo = to\r\n      .getOutgoingShapes()\r\n      .findAll(function (a) {\r\n        return a instanceof ORYX_Edge\r\n      })\r\n      .any(function (e) {\r\n        return sameDirection(d2, e.dockers[1].bounds.center(), e.dockers.first().bounds.center())\r\n      })\r\n\r\n    // If there are equivalent edges, set 0\r\n    // fromWeight = sameIncomingFrom ? 0 : fromWeight;\r\n    // toWeight = sameOutgoingTo ? 0 : toWeight;\r\n\r\n    // Get the sum of \"out\" and the direction plus \"in\" and the direction\r\n    return (sameIncomingFrom || sameOutgoingTo ? 0 : fromWeight + toWeight)\r\n  }\r\n\r\n  /**\r\n   * Removes all current dockers from the node\r\n   * (except the start and end) and adds two new\r\n   * dockers, on the position a and b.\r\n   * @param {Object} edge\r\n   * @param {Object} a\r\n   * @param {Object} b\r\n   */\r\n  setDockers (edge, a, b) {\r\n    if (!edge) return\r\n\r\n    // Remove all dockers (implicit,\r\n    // start and end dockers will not removed)\r\n    edge.dockers.each(function (r) {\r\n      edge.removeDocker(r)\r\n    });\r\n\r\n    // For a and b (if exists), create\r\n    // a new docker and set position\r\n    [a, b].compact().each(function (pos) {\r\n      let docker = edge.createDocker(undefined, pos)\r\n      docker.bounds.centerMoveTo(pos)\r\n    })\r\n\r\n    // Update all dockers from the edge\r\n    edge.dockers.each(function (docker) {\r\n      docker.update()\r\n    })\r\n\r\n    // Update edge\r\n    // edge.refresh();\r\n    edge._update(true)\r\n  }\r\n}\r\n\r\nconst Layouter = {\r\n  EdgeLayouter: EdgeLayouter\r\n}\r\nexport default Layouter\r\n\r\n","import AbstractPlugin from './AbstractPlugin'\r\nimport ORYX_Config from '../CONFIG'\r\nimport Command from '../core/Command'\r\nimport ORYX_MoveDockersCommand from '../core/MoveDockersCommand'\r\nimport ORYX_Edge from '../core/Edge'\r\nimport ORYX_Node from '../core/Node'\r\nimport ORYX_Canvas from '../core/Canvas'\r\nimport ORYX_Controls from '../core/Controls'\r\nimport ORYX_Command_Move from '../core/Move'\r\n\r\nclass ResizeLanesCommand extends Command {\r\n  constructor (shape, parent, pool, plugin) {\r\n    super()\r\n    this.facade = plugin.facade\r\n    this.plugin = plugin\r\n    this.shape = shape\r\n    this.changes\r\n\r\n    this.pool = pool\r\n    this.parent = parent\r\n    this.shapeChildren = []\r\n\r\n    /*\r\n     * The Bounds have to be stored\r\n     * separate because they would\r\n     * otherwise also be influenced\r\n     */\r\n    this.shape.getChildShapes().each(function (childShape) {\r\n      this.shapeChildren.push({\r\n        shape: childShape,\r\n        bounds: {\r\n          a: {\r\n            x: childShape.bounds.a.x,\r\n            y: childShape.bounds.a.y\r\n          },\r\n          b: {\r\n            x: childShape.bounds.b.x,\r\n            y: childShape.bounds.b.y\r\n          }\r\n        }\r\n      })\r\n    }.bind(this))\r\n\r\n    this.shapeUpperLeft = this.shape.bounds.upperLeft()\r\n\r\n    // If there is no parent,\r\n    // correct the abs position with the parents abs.\r\n    /*if (!this.shape.parent) {\r\n     var pAbs = parent.absoluteXY();\r\n     this.shapeUpperLeft.x += pAbs.x;\r\n     this.shapeUpperLeft.y += pAbs.y;\r\n     }*/\r\n    this.parentHeight = this.parent.bounds.height()\r\n\r\n  }\r\n\r\n  getLeafLanes (lane) {\r\n    let childLanes = this.plugin.getLanes(lane).map(function (child) {\r\n      return this.getLeafLanes(child)\r\n    }.bind(this)).flatten()\r\n    return childLanes.length > 0 ? childLanes : [lane]\r\n  }\r\n\r\n  findNewLane () {\r\n    let lanes = this.plugin.getLanes(this.parent)\r\n    let leafLanes = this.getLeafLanes(this.parent)\r\n    /*leafLanes = leafLanes.sort(function(a,b){\r\n     var aupl = a.absoluteXY().y;\r\n     var bupl = b.absoluteXY().y;\r\n     return aupl < bupl ? -1 : (aupl > bupl ? 1 : 0)\r\n     })*/\r\n    this.lane = leafLanes.find(function (l) {\r\n      return l.bounds.upperLeft().y >= this.shapeUpperLeft.y\r\n    }.bind(this)) || leafLanes.last()\r\n    this.laneUpperLeft = this.lane.bounds.upperLeft()\r\n  }\r\n\r\n  execute () {\r\n    if (this.changes) {\r\n      this.executeAgain()\r\n      return\r\n    }\r\n\r\n    /*\r\n     * Rescue all ChildShapes of the deleted\r\n     * Shape into the lane that takes its\r\n     * place\r\n     */\r\n\r\n    if (!this.lane) {\r\n      this.findNewLane()\r\n    }\r\n\r\n    if (this.lane) {\r\n      let laUpL = this.laneUpperLeft\r\n      let shUpL = this.shapeUpperLeft\r\n      let depthChange = this.plugin.getDepth(this.lane, this.parent) - 1\r\n      this.changes = $H({})\r\n\r\n      // Selected lane is BELOW the removed lane\r\n      if (laUpL.y >= shUpL.y) {\r\n        this.lane.getChildShapes().each(function (childShape) {\r\n\r\n          /*\r\n           * Cache the changes for rollback\r\n           */\r\n          if (!this.changes[childShape.getId()]) {\r\n            this.changes[childShape.getId()] = this.computeChanges(childShape, this.lane, this.lane, this.shape.bounds.height())\r\n          }\r\n\r\n          childShape.bounds.moveBy(0, this.shape.bounds.height())\r\n        }.bind(this))\r\n\r\n        this.plugin.hashChildShapes(this.lane)\r\n        this.shapeChildren.each(function (shapeChild) {\r\n          shapeChild.shape.bounds.set(shapeChild.bounds)\r\n          shapeChild.shape.bounds.moveBy((shUpL.x - 30) - (depthChange * 30), 0)\r\n\r\n          /*\r\n           * Cache the changes for rollback\r\n           */\r\n          if (!this.changes[shapeChild.shape.getId()]) {\r\n            this.changes[shapeChild.shape.getId()] = this.computeChanges(shapeChild.shape, this.shape, this.lane, 0)\r\n          }\r\n\r\n          this.lane.add(shapeChild.shape)\r\n\r\n        }.bind(this))\r\n\r\n        this.lane.bounds.moveBy(0, shUpL.y - laUpL.y)\r\n\r\n        // Selected lane is ABOVE the removed lane\r\n      } else if (shUpL.y > laUpL.y) {\r\n        this.shapeChildren.each(function (shapeChild) {\r\n          shapeChild.shape.bounds.set(shapeChild.bounds)\r\n          shapeChild.shape.bounds.moveBy((shUpL.x - 30) - (depthChange * 30), this.lane.bounds.height())\r\n\r\n          /*\r\n           * Cache the changes for rollback\r\n           */\r\n          if (!this.changes[shapeChild.shape.getId()]) {\r\n            this.changes[shapeChild.shape.getId()] = this.computeChanges(shapeChild.shape, this.shape, this.lane, 0)\r\n          }\r\n\r\n          this.lane.add(shapeChild.shape)\r\n\r\n        }.bind(this))\r\n      }\r\n\r\n    }\r\n\r\n    /*\r\n     * Adjust the height of the lanes\r\n     */\r\n    // Get the height values\r\n    let oldHeight = this.lane.bounds.height()\r\n    let newHeight = this.lane.length === 1 ? this.parentHeight : this.lane.bounds.height() + this.shape.bounds.height()\r\n\r\n    // Set height\r\n    this.setHeight(newHeight, oldHeight, this.parent, this.parentHeight, true)\r\n\r\n    // Cache all sibling lanes\r\n    //this.changes[this.shape.getId()] = this.computeChanges(this.shape, this.parent, this.parent, 0);\r\n    this.plugin.getLanes(this.parent).each(function (childLane) {\r\n      if (!this.changes[childLane.getId()] && childLane !== this.lane && childLane !== this.shape) {\r\n        this.changes[childLane.getId()] = this.computeChanges(childLane, this.parent, this.parent, 0)\r\n      }\r\n    }.bind(this))\r\n\r\n    // Update\r\n    this.update()\r\n  }\r\n\r\n  setHeight (newHeight, oldHeight, parent, parentHeight, store) {\r\n    console.log('setHeight!!!!')\r\n    // Set heigh of the lane\r\n    this.plugin.setDimensions(this.lane, this.lane.bounds.width(), newHeight)\r\n    this.plugin.hashedBounds[this.pool.id][this.lane.id] = this.lane.absoluteBounds()\r\n\r\n    // Adjust child lanes\r\n    this.plugin.adjustHeight(this.plugin.getLanes(parent), this.lane)\r\n\r\n    if (store === true) {\r\n      // Store changes\r\n      this.changes[this.shape.getId()] = this.computeChanges(this.shape, parent, parent, 0, oldHeight, newHeight)\r\n    }\r\n\r\n    // Set parents height\r\n    this.plugin.setDimensions(parent, parent.bounds.width(), parentHeight)\r\n\r\n    if (parent !== this.pool) {\r\n      this.plugin.setDimensions(this.pool, this.pool.bounds.width(), this.pool.bounds.height() + (newHeight - oldHeight))\r\n    }\r\n  }\r\n\r\n  update () {\r\n\r\n    // Hack to prevent the updating of the dockers\r\n    this.plugin.hashedBounds[this.pool.id]['REMOVED'] = true\r\n    // Update\r\n    //this.facade.getCanvas().update();\r\n  }\r\n\r\n  rollback () {\r\n    let laUpL = this.laneUpperLeft\r\n    let shUpL = this.shapeUpperLeft\r\n\r\n    this.changes.each(function (pair) {\r\n      let parent = pair.value.oldParent\r\n      let shape = pair.value.shape\r\n      let parentHeight = pair.value.parentHeight\r\n      let oldHeight = pair.value.oldHeight\r\n      let newHeight = pair.value.newHeight\r\n\r\n      // Move siblings\r\n      if (shape.getStencil().id().endsWith('Lane')) {\r\n        shape.bounds.moveTo(pair.value.oldPosition)\r\n      }\r\n\r\n      // If lane\r\n      if (oldHeight) {\r\n        this.setHeight(oldHeight, newHeight, parent, parent.bounds.height() + (oldHeight - newHeight))\r\n        if (laUpL.y >= shUpL.y) {\r\n          this.lane.bounds.moveBy(0, this.shape.bounds.height() - 1)\r\n        }\r\n      } else {\r\n        parent.add(shape)\r\n        shape.bounds.moveTo(pair.value.oldPosition)\r\n\r\n      }\r\n\r\n\r\n    }.bind(this))\r\n\r\n    // Update\r\n    //this.update();\r\n\r\n  }\r\n\r\n  executeAgain () {\r\n    this.changes.each(function (pair) {\r\n      let parent = pair.value.newParent\r\n      let shape = pair.value.shape\r\n      let newHeight = pair.value.newHeight\r\n      let oldHeight = pair.value.oldHeight\r\n\r\n      // If lane\r\n      if (newHeight) {\r\n        let laUpL = this.laneUpperLeft.y\r\n        let shUpL = this.shapeUpperLeft.y\r\n\r\n        if (laUpL >= shUpL) {\r\n          this.lane.bounds.moveBy(0, shUpL - laUpL)\r\n        }\r\n        this.setHeight(newHeight, oldHeight, parent, parent.bounds.height() + (newHeight - oldHeight))\r\n      } else {\r\n        parent.add(shape)\r\n        shape.bounds.moveTo(pair.value.newPosition)\r\n      }\r\n\r\n    }.bind(this))\r\n\r\n    // Update\r\n    this.update()\r\n  }\r\n\r\n  computeChanges (shape, oldParent, parent, yOffset, oldHeight, newHeight) {\r\n\r\n    oldParent = this.changes[shape.getId()] ? this.changes[shape.getId()].oldParent : oldParent\r\n    let oldPosition = this.changes[shape.getId()] ? this.changes[shape.getId()].oldPosition : shape.bounds.upperLeft()\r\n\r\n    let sUl = shape.bounds.upperLeft()\r\n\r\n    let pos = { x: sUl.x, y: sUl.y + yOffset }\r\n\r\n    let changes = {\r\n      shape: shape,\r\n      parentHeight: oldParent.bounds.height(),\r\n      oldParent: oldParent,\r\n      oldPosition: oldPosition,\r\n      oldHeight: oldHeight,\r\n      newParent: parent,\r\n      newPosition: pos,\r\n      newHeight: newHeight\r\n    }\r\n\r\n    return changes\r\n  }\r\n\r\n}\r\n\r\nexport default class BPMN2_0 extends AbstractPlugin {\r\n  hashedPoolPositions = {}\r\n  hashedLaneDepth = {}\r\n  hashedBounds = {}\r\n  hashedPositions = {}\r\n  hashedSubProcesses = {}\r\n\r\n  /**\r\n   *  Constructor\r\n   *  @param {Object} Facade: The Facade of the Editor\r\n   */\r\n  constructor (facade) {\r\n    super(facade)\r\n    this.facade = facade\r\n\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_DRAGDOCKER_DOCKED, this.handleDockerDocked.bind(this))\r\n    this.facade.registerOnEvent('layout.bpmn2_0.pool', this.handleLayoutPool.bind(this))\r\n    this.facade.registerOnEvent('layout.bpmn2_0.subprocess', this.handleSubProcess.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_SHAPEREMOVED, this.handleShapeRemove.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_LOADED, this.afterLoad.bind(this))\r\n\r\n    this.namespace = undefined\r\n  }\r\n\r\n  /**\r\n   * Force to update every pool\r\n   */\r\n  afterLoad () {\r\n    this.facade.getCanvas().getChildNodes().each(function (shape) {\r\n      if (shape.getStencil().id().endsWith('Pool')) {\r\n        this.handleLayoutPool({\r\n          shape: shape\r\n        })\r\n      }\r\n    }.bind(this))\r\n  }\r\n\r\n  /**\r\n   * If a pool is selected and contains no lane,\r\n   * a lane is created automagically\r\n   */\r\n  onSelectionChanged (event) {\r\n    let selection = event.elements\r\n    this.currentSelection = selection\r\n    if (selection && selection.length === 1) {\r\n      let namespace = this.getNamespace()\r\n      let shape = selection[0]\r\n      let id = shape.getStencil().idWithoutNs()\r\n      // shape.getStencil().idWithoutNs() === 'Pool'\r\n      if (id.endsWith('Pool')) {\r\n        if (shape.getChildNodes().length === 0) {\r\n          // create a lane inside the selected pool\r\n          let laneName = 'Lane'\r\n          if (id === 'V-Pool') {\r\n            laneName = 'V-Lane'\r\n          }\r\n          let option = {\r\n            type: namespace + laneName,\r\n            position: { x: 0, y: 0 },\r\n            namespace: shape.getStencil().namespace(),\r\n            parent: shape\r\n          }\r\n          this.facade.createShape(option)\r\n          this.facade.getCanvas().update()\r\n          this.facade.setSelection([shape])\r\n        }\r\n      }\r\n    }\r\n\r\n    // Preventing selection of all lanes but not the pool\r\n    // if (selection.any(function (s) {\r\n    //   return s instanceof ORYX_Node && s.getStencil().id().endsWith('Lane')\r\n    // })) {\r\n    //   let lanes = selection.findAll(function (s) {\r\n    //     return s instanceof ORYX_Node && s.getStencil().id().endsWith('Lane')\r\n    //   })\r\n    //\r\n    //   let pools = []\r\n    //   let unselectLanes = []\r\n    //   lanes.each(function (lane) {\r\n    //     pools.push(this.getParentPool(lane))\r\n    //   }.bind(this))\r\n    //   pools = pools.uniq().findAll(function (pool) {\r\n    //     let childLanes = this.getLanes(pool, true)\r\n    //     if (childLanes.all(function (lane) {\r\n    //       return lanes.include(lane)\r\n    //     })) {\r\n    //       unselectLanes = unselectLanes.concat(childLanes)\r\n    //       return true\r\n    //     } else if (selection.include(pool) && childLanes.any(function (lane) {\r\n    //       return lanes.include(lane)\r\n    //     })) {\r\n    //       unselectLanes = unselectLanes.concat(childLanes)\r\n    //       return true\r\n    //     } else {\r\n    //       return false\r\n    //     }\r\n    //   }.bind(this))\r\n    //\r\n    //   if (unselectLanes.length > 0 && pools.length > 0) {\r\n    //     selection = selection.without.apply(selection, unselectLanes)\r\n    //     selection = selection.concat(pools)\r\n    //     this.facade.setSelection(selection.uniq())\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  handleShapeRemove (option) {\r\n    let sh = option.shape\r\n    let parent = option.parent\r\n\r\n    // if (sh instanceof ORYX_Node && sh.getStencil().idWithoutNs() === 'Lane' && this.facade.isExecutingCommands()) {\r\n    if (sh instanceof ORYX_Node && sh.getStencil().id().endsWith('Lane') && this.facade.isExecutingCommands()) {\r\n      let pool = this.getParentPool(parent)\r\n      if (pool && pool.parent) {\r\n\r\n        let isLeafFn = function (leaf) {\r\n          return !leaf.getChildNodes().any(function (r) {\r\n            // return r.getStencil().idWithoutNs() === 'Lane'\r\n            return r.getStencil().id().endsWith('Lane')\r\n          })\r\n        }\r\n\r\n        let isLeaf = isLeafFn(sh)\r\n        let parentHasMoreLanes = parent.getChildNodes().any(function (r) {\r\n          // return r.getStencil().idWithoutNs() === 'Lane'\r\n          return r.getStencil().id().endsWith('Lane')\r\n        })\r\n\r\n        if (isLeaf && parentHasMoreLanes) {\r\n          let command = new ResizeLanesCommand(sh, parent, pool, this)\r\n          this.facade.executeCommands([command])\r\n        } else if (!isLeaf &&\r\n          !this.facade.getSelection().any(function (select) { // Find one of the selection, which is a lane and child of \"sh\" and is a leaf lane\r\n            // return select instanceof ORYX_Node && select.getStencil().idWithoutNs() === 'Lane' &&\r\n            //   select.isParent(sh) && isLeafFn(select)\r\n            return select instanceof ORYX_Node && select.getStencil().id().endsWith('Lane') &&\r\n              select.isParent(sh) && isLeafFn(select)\r\n          })) {\r\n          class CommandB extends Command{\r\n            constructor (shape, facade) {\r\n              super()\r\n              this.children = shape.getChildNodes(true)\r\n              this.facade = facade\r\n            }\r\n            execute () {\r\n              this.children.each(function (child) {\r\n                child.bounds.moveBy(30, 0)\r\n              })\r\n              //this.facade.getCanvas().update();\r\n            }\r\n            rollback () {\r\n              this.children.each(function (child) {\r\n                child.bounds.moveBy(-30, 0)\r\n              })\r\n              //this.facade.getCanvas().update();\r\n            }\r\n          }\r\n          this.facade.executeCommands([new CommandB(sh, this.facade)])\r\n\r\n        } else if (isLeaf && !parentHasMoreLanes && parent == pool) {\r\n          parent.add(sh)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  hashChildShapes (shape) {\r\n    let children = shape.getChildNodes()\r\n    children.each(function (child) {\r\n      if (this.hashedSubProcesses[child.id]) {\r\n        this.hashedSubProcesses[child.id] = child.absoluteXY()\r\n        this.hashedSubProcesses[child.id].width = child.bounds.width()\r\n        this.hashedSubProcesses[child.id].height = child.bounds.height()\r\n        this.hashChildShapes(child)\r\n      }\r\n    }.bind(this))\r\n  }\r\n\r\n  /**\r\n   * Handle the layouting of a sub process.\r\n   * Mainly to adjust the child dockers of a sub process.\r\n   *\r\n   */\r\n  handleSubProcess (option) {\r\n    let sh = option.shape\r\n    if (!this.hashedSubProcesses[sh.id]) {\r\n      this.hashedSubProcesses[sh.id] = sh.absoluteXY()\r\n      this.hashedSubProcesses[sh.id].width = sh.bounds.width()\r\n      this.hashedSubProcesses[sh.id].height = sh.bounds.height()\r\n      return\r\n    }\r\n\r\n    let offset = sh.absoluteXY()\r\n    offset.x -= this.hashedSubProcesses[sh.id].x\r\n    offset.y -= this.hashedSubProcesses[sh.id].y\r\n\r\n    let resized = this.hashedSubProcesses[sh.id].width !== sh.bounds.width() || this.hashedSubProcesses[sh.id].height !== sh.bounds.height()\r\n\r\n    this.hashedSubProcesses[sh.id] = sh.absoluteXY()\r\n    this.hashedSubProcesses[sh.id].width = sh.bounds.width()\r\n    this.hashedSubProcesses[sh.id].height = sh.bounds.height()\r\n    this.hashChildShapes(sh)\r\n\r\n\r\n    // Move dockers only if currently is not resizing\r\n    if (this.facade.isExecutingCommands() && !resized) {\r\n      this.moveChildDockers(sh, offset)\r\n    }\r\n  }\r\n\r\n  moveChildDockers (shape, offset) {\r\n    if (!offset.x && !offset.y) {\r\n      return\r\n    }\r\n\r\n    let children = shape.getChildNodes(true)\r\n\r\n    // Get all nodes\r\n    let dockers = children\r\n    // Get all incoming and outgoing edges\r\n      .map(function (node) {\r\n        return [].concat(node.getIncomingShapes())\r\n          .concat(node.getOutgoingShapes())\r\n      })\r\n      // Flatten all including arrays into one\r\n      .flatten()\r\n      // Get every edge only once\r\n      .uniq()\r\n      // Get all dockers\r\n      .map(function (edge) {\r\n        return edge.dockers.length > 2 ?\r\n          edge.dockers.slice(1, edge.dockers.length - 1) :\r\n          []\r\n      })\r\n      // Flatten the dockers lists\r\n      .flatten()\r\n\r\n    let abs = shape.absoluteBounds()\r\n    abs.moveBy(-offset.x, -offset.y)\r\n    let obj = {}\r\n    dockers.each(function (docker) {\r\n\r\n      if (docker.isChanged) {\r\n        return\r\n      }\r\n\r\n      let off = Object.clone(offset)\r\n\r\n      if (!abs.isIncluded(docker.bounds.center())) {\r\n        let index = docker.parent.dockers.indexOf(docker)\r\n        let size = docker.parent.dockers.length\r\n        let from = docker.parent.getSource()\r\n        let to = docker.parent.getTarget()\r\n\r\n        let bothAreIncluded = children.include(from) && children.include(to)\r\n\r\n        if (!bothAreIncluded) {\r\n          let previousIsOver = index !== 0 ? abs.isIncluded(docker.parent.dockers[index - 1].bounds.center()) : false\r\n          let nextIsOver = index !== size - 1 ? abs.isIncluded(docker.parent.dockers[index + 1].bounds.center()) : false\r\n\r\n          if (!previousIsOver && !nextIsOver) {\r\n            return\r\n          }\r\n\r\n          let ref = docker.parent.dockers[previousIsOver ? index - 1 : index + 1]\r\n          if (Math.abs(-Math.abs(ref.bounds.center().x - docker.bounds.center().x)) < 2) {\r\n            off.y = 0\r\n          } else if (Math.abs(-Math.abs(ref.bounds.center().y - docker.bounds.center().y)) < 2) {\r\n            off.x = 0\r\n          } else {\r\n            return\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      obj[docker.getId()] = {\r\n        docker: docker,\r\n        offset: off\r\n      }\r\n    })\r\n\r\n    // Set dockers\r\n    this.facade.executeCommands([new ORYX_MoveDockersCommand(obj)])\r\n  }\r\n\r\n  /**\r\n   * DragDocker.Docked Handler\r\n   *\r\n   */\r\n  handleDockerDocked (options) {\r\n    let namespace = this.getNamespace()\r\n    let edge = options.parent\r\n    let edgeSource = options.target\r\n\r\n    if (edge.getStencil().id() === namespace + 'SequenceFlow') {\r\n      let isGateway = edgeSource.getStencil().groups().find(function (group) {\r\n        if (group == 'Gateways')\r\n          return group\r\n      })\r\n      if (!isGateway && (edge.properties['oryx-conditiontype'] == 'Expression'))\r\n      // show diamond on edge source\r\n        edge.setProperty('oryx-showdiamondmarker', true)\r\n      else\r\n      // do not show diamond on edge source\r\n        edge.setProperty('oryx-showdiamondmarker', false)\r\n\r\n      // update edge rendering\r\n      //edge.update();\r\n\r\n      this.facade.getCanvas().update()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handler for layouting event 'layout.bpmn2_0.pool'\r\n   * @param {Object} event\r\n   */\r\n  handleLayoutPool (event) {\r\n    let pool = event.shape\r\n    let selection = this.facade.getSelection()\r\n\r\n    let currentShape = selection.include(pool) ? pool : selection.first()\r\n    currentShape = currentShape || pool\r\n    this.currentPool = pool\r\n\r\n    // Check if it is a pool or a lane\r\n    if (!(currentShape.getStencil().id().endsWith('Pool') || currentShape.getStencil().id().endsWith('Lane'))) {\r\n      return\r\n    }\r\n\r\n    // Check if the lane is within the pool and is not removed lately\r\n    if (currentShape !== pool && !currentShape.isParent(pool) && !this.hashedBounds[pool.id][currentShape.id]) {\r\n      return\r\n    }\r\n\r\n    if (!this.hashedBounds[pool.id]) {\r\n      this.hashedBounds[pool.id] = {}\r\n    }\r\n\r\n    // Find all child lanes\r\n    let lanes = this.getLanes(pool)\r\n    if (lanes.length <= 0) {\r\n      return\r\n    }\r\n\r\n    let allLanes = this.getLanes(pool, true), hp\r\n    let considerForDockers = allLanes.clone()\r\n\r\n    let hashedPositions = new Hash()\r\n    allLanes.each(function (lane) {\r\n      hashedPositions.set(lane.id, lane.bounds.upperLeft())\r\n    })\r\n\r\n    // Show/hide caption regarding the number of lanes\r\n    if (lanes.length === 1 && this.getLanes(lanes.first()).length <= 0) {\r\n      // TRUE if there is a caption\r\n      let caption = lanes.first().properties.get('oryx-name').trim().length > 0\r\n      lanes.first().setProperty('oryx-showcaption', caption)\r\n      let rect = lanes.first().node.getElementsByTagName('rect')\r\n      rect[0].setAttributeNS(null, 'display', 'none')\r\n    } else {\r\n      allLanes.invoke('setProperty', 'oryx-showcaption', true)\r\n      allLanes.each(function (lane) {\r\n        let rect = lane.node.getElementsByTagName('rect')\r\n        rect[0].removeAttributeNS(null, 'display')\r\n      })\r\n    }\r\n\r\n    let deletedLanes = []\r\n    let addedLanes = []\r\n\r\n    // Get all new lanes\r\n    let i = -1\r\n    while (++i < allLanes.length) {\r\n      if (!this.hashedBounds[pool.id][allLanes[i].id]) {\r\n        addedLanes.push(allLanes[i])\r\n      }\r\n    }\r\n\r\n    if (addedLanes.length > 0) {\r\n      currentShape = addedLanes.first()\r\n    }\r\n\r\n    // Get all deleted lanes\r\n    let resourceIds = $H(this.hashedBounds[pool.id]).keys()\r\n    i = -1\r\n    while (++i < resourceIds.length) {\r\n      if (!allLanes.any(function (lane) {\r\n        return lane.id == resourceIds[i]\r\n      })) {\r\n        deletedLanes.push(this.hashedBounds[pool.id][resourceIds[i]])\r\n        selection = selection.without(function (r) {\r\n          return r.id == resourceIds[i]\r\n        })\r\n      }\r\n    }\r\n\r\n    let height, width, x, y\r\n    let effectBound\r\n    let moveOffset = {x: 0, y: 0}\r\n    let poolTypeId = pool.getStencil().idWithoutNs()\r\n    // 有新增或者删除 lane\r\n    if (deletedLanes.length > 0 || addedLanes.length > 0) {\r\n      if (addedLanes.length === 1 && this.getLanes(addedLanes[0].parent).length === 1 && poolTypeId === 'Pool') {\r\n        // Set height from the pool\r\n        height = this.adjustHeight(lanes, addedLanes[0].parent)\r\n      } else {\r\n        // Set height from the pool\r\n        height = this.updateHeight(pool)\r\n      }\r\n      // Set width from the pool\r\n      if (poolTypeId === 'V-Pool') {\r\n        width = this.updateVPoolWidth(lanes, pool)\r\n      } else {\r\n        width = this.adjustWidth(lanes, pool.bounds.width())\r\n      }\r\n      pool.update()\r\n    } else if (pool == currentShape) {\r\n      /**\r\n       * Set width/height depending on the pool\r\n       */\r\n      // if (selection.length === 1 && this.isResized(pool, this.hashedPoolPositions[pool.id])) {\r\n      //   let oldXY = this.hashedPoolPositions[pool.id].upperLeft()\r\n      //   let xy = pool.bounds.upperLeft()\r\n      //   // let oldXY = this.hashedPoolPositions[pool.id]\r\n      //   // let xy = pool.bounds\r\n      //   let scale = 0\r\n      //   if (this.shouldScale(pool)) {\r\n      //     let old = this.hashedPoolPositions[pool.id]\r\n      //     scale = old.height() / pool.bounds.height()\r\n      //   }\r\n      //   // this.adjustPoolBothendsLanes(pool, allLanes, oldXY, xy, scale)\r\n      //   this.adjustLanes(pool, allLanes, oldXY.x - xy.x, oldXY.y - xy.y, scale)\r\n      // }\r\n\r\n      let oldXY = this.hashedPoolPositions[pool.id]\r\n      let xy = pool.bounds\r\n      this.adjustPoolBothendsLanes(pool, lanes, oldXY, xy)\r\n\r\n      if (poolTypeId === 'V-Pool') {\r\n        // width = this.updateVPoolWidth(lanes, pool)\r\n        // width = this.adjustVLaneWidth(lanes, undefined, pool.bounds.width())\r\n        width = pool.bounds.width()\r\n      } else {\r\n        // Set height from the pool\r\n        // height = this.adjustHeight(lanes, undefined, pool.bounds.height())\r\n        height = pool.bounds.height()\r\n\r\n        // Set width from the pool\r\n        width = this.adjustWidth(lanes, pool.bounds.width())\r\n      }\r\n    } else {\r\n      /**‚\r\n       * Set width/height depending on containing lanes\r\n       */\r\n      // Reposition the pool if one shape is selected and the upperleft has changed\r\n      if (selection.length === 1 && this.isResized(currentShape, this.hashedBounds[pool.id][currentShape.id])) {\r\n        let oldXY = this.hashedBounds[pool.id][currentShape.id].upperLeft()\r\n        let xy = currentShape.absoluteXY()\r\n        x = oldXY.x - xy.x\r\n        y = oldXY.y - xy.y\r\n\r\n        // Adjust all other lanes beneath this lane\r\n        if (x || y) {\r\n          considerForDockers = considerForDockers.without(currentShape)\r\n          this.adjustLanes(pool, this.getAllExcludedLanes(pool, currentShape), x, 0)\r\n        }\r\n\r\n        // Adjust all child lanes\r\n        // let childLanes = this.getLanes(currentShape, true)\r\n        // if (childLanes.length > 0) {\r\n        //   if (this.shouldScale(currentShape)) {\r\n        //     let old = this.hashedBounds[pool.id][currentShape.id]\r\n        //     let scale = old.height() / currentShape.bounds.height()\r\n        //     this.adjustLanes(pool, childLanes, x, y, scale)\r\n        //   } else {\r\n        //     this.adjustLanes(pool, childLanes, x, y, 0)\r\n        //   }\r\n        // }\r\n      }\r\n\r\n      // Cache all bounds\r\n      let changes = allLanes.map(function (lane) {\r\n        return {\r\n          shape: lane,\r\n          bounds: lane.bounds.clone()\r\n        }\r\n      })\r\n\r\n      let modifyLane\r\n      let index = currentShape.orderSort\r\n      let changedLaneOldxy = this.hashedBounds[pool.id][currentShape.id]\r\n      let changedLanexy = currentShape.absoluteBounds()\r\n\r\n      if (poolTypeId === 'V-Pool') {\r\n        if (changedLaneOldxy.a.x !== changedLanexy.a.x) {\r\n          if (index > 0) {\r\n            modifyLane = lanes[index - 1]\r\n            modifyLane.bounds.extend({ x: changedLanexy.a.x - changedLaneOldxy.a.x , y: 0 })\r\n            this.hashedBounds[pool.id][modifyLane.id] = modifyLane.absoluteBounds()\r\n            currentShape.bounds.extend({ x: changedLanexy.a.x - changedLaneOldxy.a.x , y: 0 })\r\n            currentShape.bounds.moveBy({ x: changedLaneOldxy.a.x - changedLanexy.a.x , y: 0 })\r\n            this.hashedBounds[pool.id][currentShape.id] = currentShape.absoluteBounds()\r\n            currentShape = modifyLane\r\n            x = 0\r\n          }\r\n        }\r\n        effectBound = {\r\n          a: {x: changedLaneOldxy.a.x, y: 30},\r\n          b: {x: pool.bounds.b.x, y: pool.bounds.b.y},\r\n        }\r\n        moveOffset = {x: changedLanexy.a.x - changedLaneOldxy.a.x, y: 0}\r\n        width = this.updateVPoolWidth(lanes, pool)\r\n      } else {\r\n        if (changedLaneOldxy.a.y !== changedLanexy.a.y) {\r\n          if (index > 0) {\r\n            modifyLane = lanes[index - 1]\r\n            modifyLane.bounds.extend({x: 0 , y: changedLanexy.a.y - changedLaneOldxy.a.y })\r\n            this.hashedBounds[pool.id][modifyLane.id] = modifyLane.absoluteBounds()\r\n            currentShape.bounds.extend({x: 0 , y: changedLanexy.a.y - changedLaneOldxy.a.y })\r\n            currentShape.bounds.moveBy({x: 0 , y: changedLaneOldxy.a.y - changedLanexy.a.y })\r\n            this.hashedBounds[pool.id][currentShape.id] = currentShape.absoluteBounds()\r\n            currentShape = modifyLane\r\n            y = 0\r\n          }\r\n        }\r\n        // let allLanes = this.getLanes(pool, true)\r\n        changes = allLanes.map(function (lane) {\r\n          return {\r\n            shape: lane,\r\n            bounds: lane.bounds.clone()\r\n          }\r\n        })\r\n        allLanes.each(function (lane) {\r\n          hashedPositions.set(lane.id, lane.bounds.upperLeft())\r\n        })\r\n\r\n        effectBound = {\r\n          a: {x: 30, y: changedLaneOldxy.a.y},\r\n          b: {x: pool.bounds.b.x, y: pool.bounds.b.y},\r\n        }\r\n        moveOffset = {x: 0, y: changedLanexy.a.y - changedLaneOldxy.a.y}\r\n        // Get height and adjust child heights\r\n        height = this.adjustHeight(lanes, currentShape)\r\n        // Check if something has changed and maybe create a command\r\n        this.checkForChanges(allLanes, changes)\r\n        // Set width from the current shape\r\n        width = pool.bounds.width()\r\n        // width = this.adjustWidth(lanes, currentShape.bounds.width() + (this.getDepth(currentShape, pool) * 30))\r\n      }\r\n    }\r\n\r\n    this.setDimensions(pool, width, height, x, y)\r\n\r\n    if (this.facade.isExecutingCommands() && (deletedLanes.length === 0 || addedLanes.length !== 0)) {\r\n      // Update all dockers\r\n      this.updateDockers(considerForDockers, pool)\r\n\r\n      // Check if the order has changed\r\n      let poolHashedPositions = this.hashedPositions[pool.id]\r\n      if (poolHashedPositions && poolHashedPositions.keys().any(function (key, i) {\r\n        return (allLanes[i] || {}).id !== key\r\n      })) {\r\n        class LanesHasBeenReordered extends Command{\r\n          constructor (originPosition, newPosition, lanes, plugin, poolId) {\r\n            super()\r\n            this.originPosition = Object.clone(originPosition)\r\n            this.newPosition = Object.clone(newPosition)\r\n            this.lanes = lanes\r\n            this.plugin = plugin\r\n            this.pool = poolId\r\n          }\r\n          execute () {\r\n            if (!this.executed) {\r\n              this.executed = true\r\n              this.lanes.each(function (lane) {\r\n                if (this.newPosition[lane.id])\r\n                  lane.bounds.moveTo(this.newPosition[lane.id])\r\n              }.bind(this))\r\n              this.plugin.hashedPositions[this.pool] = Object.clone(this.newPosition)\r\n            }\r\n          }\r\n          rollback () {\r\n            this.lanes.each(function (lane) {\r\n              if (this.originPosition[lane.id])\r\n                lane.bounds.moveTo(this.originPosition[lane.id])\r\n            }.bind(this))\r\n            this.plugin.hashedPositions[this.pool] = Object.clone(this.originPosition)\r\n          }\r\n        }\r\n\r\n        let hp2 = new Hash()\r\n        allLanes.each(function (lane) {\r\n          hp2.set(lane.id, lane.bounds.upperLeft())\r\n        })\r\n\r\n        let command = new LanesHasBeenReordered(hashedPositions, hp2, allLanes, this, pool.id)\r\n        this.facade.executeCommands([command])\r\n      }\r\n    }\r\n\r\n    this.hashedBounds[pool.id] = {}\r\n    this.hashedPositions[pool.id] = hashedPositions\r\n\r\n    i = -1\r\n    while (++i < allLanes.length) {\r\n      // Cache positions\r\n      this.hashedBounds[pool.id][allLanes[i].id] = allLanes[i].absoluteBounds()\r\n\r\n      // Cache also the bounds of child shapes, mainly for child subprocesses\r\n      this.hashChildShapes(allLanes[i])\r\n      this.hashedLaneDepth[allLanes[i].id] = this.getDepth(allLanes[i], pool)\r\n      this.forceToUpdateLane(allLanes[i])\r\n    }\r\n\r\n    if (moveOffset.x !== 0 || moveOffset.y !== 0) {\r\n      this.nodesInLaneMoveby(effectBound, moveOffset)\r\n    }\r\n\r\n    this.hashedPoolPositions[pool.id] = pool.bounds.clone()\r\n\r\n    // Update selection\r\n    // this.facade.setSelection(selection);\r\n  }\r\n\r\n  shouldScale (element) {\r\n    let childLanes = element.getChildNodes().findAll(function (shape) {\r\n      return shape.getStencil().id().endsWith('Lane')\r\n    })\r\n    return childLanes.length > 1 || childLanes.any(function (lane) {\r\n      return this.shouldScale(lane)\r\n    }.bind(this))\r\n  }\r\n\r\n  /**\r\n   * Lookup if some bounds has changed\r\n   * @param {Object} lanes\r\n   * @param {Object} changes\r\n   */\r\n  checkForChanges (lanes, changes) {\r\n    // Check if something has changed\r\n    if (this.facade.isExecutingCommands() && changes.any(function (change) {\r\n      return change.shape.bounds.toString() !== change.bounds.toString()\r\n    })) {\r\n\r\n      class CommandB extends Command{\r\n        constructor (changes) {\r\n          super()\r\n          this.oldState = changes\r\n          this.newState = changes.map(function (s) {\r\n            return { shape: s.shape, bounds: s.bounds.clone() }\r\n          })\r\n        }\r\n        execute () {\r\n          if (this.executed) {\r\n            this.applyState(this.newState)\r\n          }\r\n          this.executed = true\r\n        }\r\n        rollback() {\r\n          this.applyState(this.oldState)\r\n        }\r\n        applyState (state) {\r\n          state.each(function (s) {\r\n            s.shape.bounds.set(s.bounds.upperLeft(), s.bounds.lowerRight())\r\n          })\r\n        }\r\n      }\r\n\r\n      this.facade.executeCommands([new CommandB(changes)])\r\n    }\r\n  }\r\n\r\n  isResized (shape, bounds) {\r\n    if (!bounds || !shape) {\r\n      return false\r\n    }\r\n    let oldB = bounds\r\n    //var oldXY = oldB.upperLeft();\r\n    //var xy = shape.absoluteXY();\r\n    return Math.round(oldB.width() - shape.bounds.width()) !== 0 || Math.round(oldB.height() - shape.bounds.height()) !== 0\r\n  }\r\n\r\n  adjustPoolBothendsLanes(pool, lanes, oldXY, xy) {\r\n    let length = lanes.length\r\n    let child\r\n    if (pool.getStencil().idWithoutNs() === 'Pool') {\r\n      // 平移\r\n      if (oldXY.a.y !== xy.a.y && oldXY.b.y !== xy.b.y) {\r\n        return\r\n        // lanes.each(l => {\r\n        //   l.bounds.moveBy( xy.a.x - oldXY.a.x, xy.a.y - oldXY.a.y)\r\n        // })\r\n      } else if (oldXY.a.y !== xy.a.y) {\r\n        child = lanes[0]\r\n        child.bounds.extend({x: 0 , y: oldXY.a.y - xy.a.y })\r\n        this.adjustHeight (lanes, child)\r\n      } else if (oldXY.b.y !== xy.b.y) {\r\n        child = lanes[length - 1]\r\n        child.bounds.extend({x: 0 , y: xy.b.y - oldXY.b.y})\r\n        this.hashedBounds[pool.id][child.id].extend({x: 0 , y: xy.b.y - oldXY.b.y})\r\n      }\r\n    } else {\r\n      if (oldXY.a.x !== xy.a.x && oldXY.b.x !== xy.b.x) {\r\n        return\r\n      } else if (oldXY.a.x !== xy.a.x) {\r\n        child = lanes[0]\r\n        child.bounds.extend({x: oldXY.a.x - xy.a.x , y: 0 })\r\n        this.adjustVLaneWidth (lanes, child)\r\n      } else if (oldXY.b.x !== xy.b.x) {\r\n        child = lanes[length - 1]\r\n        child.bounds.extend({x: xy.b.x - oldXY.b.x , y: 0})\r\n        this.hashedBounds[pool.id][child.id].extend({x: xy.b.x - oldXY.b.x , y: 0})\r\n      }\r\n    }\r\n  }\r\n\r\n  findCanvasNodes () {\r\n    let elements = this.facade.getCanvas().getChildShapes(true).findAll(function (value) {\r\n      if (value instanceof ORYX_Node) {\r\n        return true\r\n      }\r\n      return false\r\n    })\r\n    return elements\r\n  }\r\n\r\n  nodesInLaneMoveby (bound, offset) {\r\n    const allShapes = this.facade.getCanvas().getChildShapes(true)\r\n    // Calculate the elements from the childs of the canvas\r\n    let elements = allShapes.findAll(function (value) {\r\n      if (value instanceof ORYX_Node) {\r\n        let absBounds = value.absoluteBounds()\r\n        let bA = absBounds.upperLeft()\r\n        let bB = absBounds.lowerRight()\r\n        if (bA.x > bound.a.x && bA.y > bound.a.y && bB.x < bound.b.x && bB.y < bound.b.y) {\r\n          return true\r\n        }\r\n      }\r\n\r\n      return false\r\n    })\r\n\r\n    const commands = [new ORYX_Command_Move(\r\n      elements, offset, null, this.currentSelection, this\r\n    )]\r\n    this.facade.executeCommands(commands)\r\n\r\n    // elements.each(function (s) {\r\n    //   s.bounds.moveBy(offset)\r\n    // })\r\n  }\r\n\r\n  updatePositionNodesInBound (lane, elements, x, y, scale) {\r\n    let bound = lane.absoluteBounds()\r\n    console.log(bound.a.y, bound.b.y,)\r\n    let nodes = elements.findAll(function (value) {\r\n      let absBounds = value.absoluteBounds()\r\n      let bA = absBounds.upperLeft()\r\n      let bB = absBounds.lowerRight()\r\n      console.log(bA.y, bB.y, value.node)\r\n      if (bA.x > bound.a.x && bA.y > bound.a.y && bB.x < bound.b.x && bB.y < bound.b.y) {\r\n        let cy = scale ? value.bounds.center().y - (value.bounds.center().y / scale) : -y\r\n        console.log(233, x, -cy)\r\n        value.bounds.moveBy((x || 0), cy)\r\n\r\n        return false\r\n      }\r\n      return true\r\n    })\r\n\r\n    return nodes\r\n  }\r\n\r\n  adjustLanes (pool, lanes, x, y, scale) {\r\n    scale = scale || 0\r\n\r\n    // let nodes = this.findCanvasNodes()\r\n    // let i = -1\r\n    // while ( ++i < lanes.length) {\r\n    //   nodes = this.updatePositionNodesInBound(lanes[i], nodes, x, y, scale)\r\n    //   this.hashedBounds[pool.id][lanes[i].id].moveBy(-(x || 0), !scale ? -y : 0)\r\n    //   if (scale) {\r\n    //     lanes[i].isScaled = true\r\n    //   }\r\n    // }\r\n    // For every lane, adjust the child nodes with the offset\r\n    lanes.each(function (l) {\r\n      l.getChildNodes().each(function (child) {\r\n        if (!child.getStencil().id().endsWith('Lane')) {\r\n          let cy = scale ? child.bounds.center().y - (child.bounds.center().y / scale) : -y\r\n          child.bounds.moveBy((x || 0), -cy)\r\n\r\n          if (scale && child.getStencil().id().endsWith('Subprocess')) {\r\n            this.moveChildDockers(child, { x: (0), y: -cy })\r\n          }\r\n\r\n        }\r\n      }.bind(this))\r\n\r\n      this.hashedBounds[pool.id][l.id].moveBy(-(x || 0), !scale ? -y : 0)\r\n      if (scale) {\r\n        l.isScaled = true\r\n      }\r\n    }.bind(this))\r\n\r\n  }\r\n\r\n  getAllExcludedLanes (parent, lane) {\r\n    let lanes = []\r\n    parent.getChildNodes().each(function (shape) {\r\n      if ((!lane || shape !== lane) && shape.getStencil().id().endsWith('Lane')) {\r\n        lanes.push(shape)\r\n        lanes = lanes.concat(this.getAllExcludedLanes(shape, lane))\r\n      }\r\n    }.bind(this))\r\n    return lanes\r\n  }\r\n\r\n  forceToUpdateLane (lane) {\r\n    if (lane.bounds.height() !== lane._svgShapes[0].height) {\r\n      lane.isChanged = true\r\n      lane.isResized = true\r\n      lane._update()\r\n    }\r\n  }\r\n\r\n  getDepth (child, parent) {\r\n    let i = 0\r\n    while (child && child.parent && child !== parent) {\r\n      child = child.parent\r\n      ++i\r\n    }\r\n    return i\r\n  }\r\n\r\n  updateDepth (lane, fromDepth, toDepth) {\r\n    let xOffset = (fromDepth - toDepth) * 30\r\n    lane.getChildNodes().each(function (shape) {\r\n      shape.bounds.moveBy(xOffset, 0);\r\n\r\n      [].concat(children[j].getIncomingShapes())\r\n        .concat(children[j].getOutgoingShapes())\r\n    })\r\n\r\n  }\r\n\r\n  setDimensions (shape, width, height, x, y) {\r\n    // let isLane = shape.getStencil().id().endsWith('Lane')\r\n    let laneType = shape.getStencil().idWithoutNs()\r\n    // Set the bounds\r\n\r\n    if (laneType === 'Lane') {\r\n      shape.bounds.set(\r\n        30,\r\n        shape.bounds.a.y,\r\n        width ? shape.bounds.a.x + width - 30 : shape.bounds.b.x,\r\n        height ? shape.bounds.a.y + height : shape.bounds.b.y\r\n      )\r\n    } else if (laneType === 'V-Lane') {\r\n      shape.bounds.set(\r\n        shape.bounds.a.x,\r\n        30,\r\n        width ? shape.bounds.a.x + width : shape.bounds.b.x,\r\n        height ? shape.bounds.a.y + height - 30 : shape.bounds.b.y\r\n      )\r\n    } else {\r\n      shape.bounds.set(\r\n        (shape.bounds.a.x - (x || 0)),\r\n        (shape.bounds.a.y - (y || 0)),\r\n        width ? shape.bounds.a.x + width - (x || 0) : shape.bounds.b.x,\r\n        height ? shape.bounds.a.y + height - (y || 0) : shape.bounds.b.y\r\n      )\r\n    }\r\n    // shape.bounds.set(\r\n    //   isLane ? 30 : (shape.bounds.a.x - (x || 0)),\r\n    //   isLane ? shape.bounds.a.y : (shape.bounds.a.y - (y || 0)),\r\n    //   width ? shape.bounds.a.x + width - (isLane ? 30 : (x || 0)) : shape.bounds.b.x,\r\n    //   height ? shape.bounds.a.y + height - (isLane ? 0 : (y || 0)) : shape.bounds.b.y\r\n    // )\r\n  }\r\n\r\n  setLanePosition (shape, x, y) {\r\n    if (shape.getStencil().idWithoutNs() === 'Lane') {\r\n      shape.bounds.moveTo(30, y)\r\n    } else {\r\n      shape.bounds.moveTo(x, 30)\r\n    }\r\n  }\r\n\r\n  updateVPoolWidth (lanes, root) {\r\n    if (lanes.length === 0) {\r\n      return root.bounds.width()\r\n    }\r\n    let width = 0\r\n    let i = -1\r\n    while (++i < lanes.length) {\r\n      lanes[i].bounds.set({ x: width, y: 30 }, {\r\n        x: lanes[i].bounds.width() + width,\r\n        y: lanes[i].bounds.height() + 30\r\n      })\r\n      width += lanes[i].bounds.width()\r\n    }\r\n    this.setDimensions(root, width)\r\n    return width\r\n  }\r\n\r\n  adjustVLaneWidth (lanes, changedLane, propagateWidth) {\r\n    let oldWidth = 0\r\n    if (!changedLane && propagateWidth) {\r\n      let i = -1\r\n      while (++i < lanes.length) {\r\n        oldWidth += lanes[i].bounds.width()\r\n      }\r\n    }\r\n    let i = -1\r\n    let width = 0\r\n    while (++i < lanes.length) {\r\n      if (lanes[i] === changedLane) {\r\n        // Propagate new height down to the children\r\n        this.adjustVLaneWidth(this.getLanes(lanes[i]), undefined, lanes[i].bounds.width())\r\n\r\n        lanes[i].bounds.set({ x: width, y: 30 }, {\r\n          x: lanes[i].bounds.width() + width,\r\n          y: lanes[i].bounds.height() + 30\r\n        })\r\n\r\n      } else if (!changedLane && propagateWidth) {\r\n        let tempWidth = (lanes[i].bounds.width() * propagateWidth) / oldWidth\r\n        this.adjustVLaneWidth(this.getLanes(lanes[i]), undefined, tempWidth)\r\n        this.setDimensions(lanes[i], tempWidth, null)\r\n        this.setLanePosition(lanes[i], width, null)\r\n      } else {\r\n        // Get height from children\r\n        let tempWidth = this.adjustVLaneWidth(this.getLanes(lanes[i]), changedLane, propagateWidth)\r\n        if (!tempWidth) {\r\n          tempWidth = lanes[i].bounds.width()\r\n        }\r\n        this.setDimensions(lanes[i], tempWidth, null)\r\n        this.setLanePosition(lanes[i], width, null)\r\n      }\r\n\r\n      width += lanes[i].bounds.width()\r\n    }\r\n\r\n    return width\r\n  }\r\n\r\n  adjustWidth (lanes, width) {\r\n    // Set width to each lane\r\n    (lanes || []).each(function (lane) {\r\n      this.setDimensions(lane, width)\r\n      this.adjustWidth(this.getLanes(lane), width - 30)\r\n    }.bind(this))\r\n\r\n    return width\r\n  }\r\n\r\n  adjustHeight (lanes, changedLane, propagateHeight) {\r\n    let oldHeight = 0\r\n    if (!changedLane && propagateHeight) {\r\n      let i = -1\r\n      while (++i < lanes.length) {\r\n        oldHeight += lanes[i].bounds.height()\r\n      }\r\n    }\r\n\r\n    let i = -1\r\n    let height = 0\r\n    // Iterate trough every lane\r\n    while (++i < lanes.length) {\r\n      if (lanes[i] === changedLane) {\r\n        console.log('!!!!!!!!!!!!!!!')\r\n        // Propagate new height down to the children\r\n        this.adjustHeight(this.getLanes(lanes[i]), undefined, lanes[i].bounds.height())\r\n\r\n        lanes[i].bounds.set({ x: 30, y: height }, {\r\n          x: lanes[i].bounds.width() + 30,\r\n          y: lanes[i].bounds.height() + height\r\n        })\r\n\r\n      } else if (!changedLane && propagateHeight) {\r\n        let tempHeight = (lanes[i].bounds.height() * propagateHeight) / oldHeight\r\n        // Propagate height\r\n        this.adjustHeight(this.getLanes(lanes[i]), undefined, tempHeight)\r\n        // Set height propotional to the propagated and old height\r\n        this.setDimensions(lanes[i], null, tempHeight)\r\n        this.setLanePosition(lanes[i], null, height)\r\n      } else {\r\n        // Get height from children\r\n        let tempHeight = this.adjustHeight(this.getLanes(lanes[i]), changedLane, propagateHeight)\r\n        if (!tempHeight) {\r\n          tempHeight = lanes[i].bounds.height()\r\n        }\r\n        this.setDimensions(lanes[i], null, tempHeight)\r\n        this.setLanePosition(lanes[i], null, height)\r\n      }\r\n\r\n      height += lanes[i].bounds.height()\r\n    }\r\n\r\n    return height\r\n  }\r\n\r\n  updateHeight (root) {\r\n    let lanes = this.getLanes(root)\r\n\r\n    if (lanes.length === 0 || root.getStencil().idWithoutNs() === 'V-Pool') {\r\n      return root.bounds.height()\r\n    }\r\n    let height = 0\r\n    let i = -1\r\n    while (++i < lanes.length) {\r\n      this.setLanePosition(lanes[i], null, height)\r\n      height += this.updateHeight(lanes[i])\r\n    }\r\n\r\n    this.setDimensions(root, null, height)\r\n    return height\r\n  }\r\n\r\n  getOffset (lane, includePool, pool) {\r\n    let offset = { x: 0, y: 0 }\r\n\r\n    /*var parent = lane;\r\n     while(parent) {\r\n\r\n\r\n     var offParent = this.hashedBounds[pool.id][parent.id] ||(includePool === true ? this.hashedPoolPositions[parent.id] : undefined);\r\n     if (offParent){\r\n     var ul = parent.bounds.upperLeft();\r\n     var ulo = offParent.upperLeft();\r\n     offset.x += ul.x-ulo.x;\r\n     offset.y += ul.y-ulo.y;\r\n     }\r\n\r\n     if (parent.getStencil().id().endsWith(\"Pool\")) {\r\n     break;\r\n     }\r\n\r\n     parent = parent.parent;\r\n     }       */\r\n\r\n    offset = lane.absoluteXY()\r\n    let hashed = this.hashedBounds[pool.id][lane.id] || (includePool === true ? this.hashedPoolPositions[lane.id] : undefined)\r\n    if (hashed) {\r\n      offset.x -= hashed.upperLeft().x\r\n      offset.y -= hashed.upperLeft().y\r\n    } else {\r\n      return { x: 0, y: 0 }\r\n    }\r\n    return offset\r\n  }\r\n\r\n  getNextLane (shape) {\r\n    while (shape && !shape.getStencil().id().endsWith('Lane')) {\r\n      if (shape instanceof ORYX_Canvas) {\r\n        return null\r\n      }\r\n      shape = shape.parent\r\n    }\r\n    return shape\r\n  }\r\n\r\n  getParentPool (shape) {\r\n    while (shape && !shape.getStencil().id().endsWith('Pool')) {\r\n      if (shape instanceof ORYX_Canvas) {\r\n        return null\r\n      }\r\n      shape = shape.parent\r\n    }\r\n    return shape\r\n  }\r\n\r\n  updateDockers (lanes, pool) {\r\n    let absPool = pool.absoluteBounds(), movedShapes = []\r\n    let oldPool = (this.hashedPoolPositions[pool.id] || absPool).clone()\r\n\r\n    let i = -1, j = -1, k = -1, l = -1, docker\r\n    let dockers = {}\r\n\r\n    while (++i < lanes.length) {\r\n      if (!this.hashedBounds[pool.id][lanes[i].id]) {\r\n        continue\r\n      }\r\n\r\n      let isScaled = lanes[i].isScaled\r\n      delete lanes[i].isScaled\r\n      let children = lanes[i].getChildNodes()\r\n      let absBounds = lanes[i].absoluteBounds()\r\n      let oldBounds = (this.hashedBounds[pool.id][lanes[i].id] || absBounds)\r\n      //oldBounds.moveBy((absBounds.upperLeft().x-lanes[i].bounds.upperLeft().x),\r\n      // (absBounds.upperLeft().y-lanes[i].bounds.upperLeft().y));\r\n      let offset = this.getOffset(lanes[i], true, pool)\r\n      let xOffsetDepth = 0\r\n\r\n      let depth = this.getDepth(lanes[i], pool)\r\n      if (this.hashedLaneDepth[lanes[i].id] !== undefined && this.hashedLaneDepth[lanes[i].id] !== depth) {\r\n        xOffsetDepth = (this.hashedLaneDepth[lanes[i].id] - depth) * 30\r\n        offset.x += xOffsetDepth\r\n      }\r\n\r\n      j = -1\r\n\r\n      while (++j < children.length) {\r\n        if (xOffsetDepth && !children[j].getStencil().id().endsWith('Lane')) {\r\n          movedShapes.push({ xOffset: xOffsetDepth, shape: children[j] })\r\n          children[j].bounds.moveBy(xOffsetDepth, 0)\r\n        }\r\n\r\n        if (children[j].getStencil().id().endsWith('Subprocess')) {\r\n          this.moveChildDockers(children[j], offset)\r\n        }\r\n\r\n        let edges = [].concat(children[j].getIncomingShapes())\r\n          .concat(children[j].getOutgoingShapes())\r\n          // Remove all edges which are included in the selection from the list\r\n          .findAll(function (r) {\r\n            return r instanceof ORYX_Edge\r\n          })\r\n\r\n        k = -1\r\n        while (++k < edges.length) {\r\n          if (edges[k].getStencil().id().endsWith('MessageFlow')) {\r\n            this.layoutEdges(children[j], [edges[k]], offset)\r\n            continue\r\n          }\r\n\r\n          l = -1\r\n          while (++l < edges[k].dockers.length) {\r\n            docker = edges[k].dockers[l]\r\n            if (docker.getDockedShape() || docker.isChanged) {\r\n              continue\r\n            }\r\n\r\n            let pos = docker.bounds.center()\r\n\r\n            // Check if the modified center included the new position\r\n            let isOverLane = oldBounds.isIncluded(pos)\r\n            // Check if the original center is over the pool\r\n            let isOutSidePool = !oldPool.isIncluded(pos)\r\n            let previousIsOverLane = l == 0 ? isOverLane : oldBounds.isIncluded(edges[k].dockers[l - 1].bounds.center())\r\n            let nextIsOverLane = l == edges[k].dockers.length - 1 ? isOverLane : oldBounds.isIncluded(edges[k].dockers[l + 1].bounds.center())\r\n            let off = Object.clone(offset)\r\n\r\n            // If the\r\n            if (isScaled && isOverLane && this.isResized(lanes[i], this.hashedBounds[pool.id][lanes[i].id])) {\r\n              let relY = (pos.y - absBounds.upperLeft().y + off.y)\r\n              off.y -= (relY - (relY * (absBounds.height() / oldBounds.height())))\r\n            }\r\n\r\n            // Check if the previous dockers docked shape is from this lane\r\n            // Otherwise, check if the docker is over the lane OR is outside the lane\r\n            // but the previous/next was over this lane\r\n            if (isOverLane) {\r\n              dockers[docker.id] = { docker: docker, offset: off }\r\n            }\r\n            /*else if (l == 1 && edges[k].dockers.length>2 && edges[k].dockers[l-1].isDocked()){\r\n             var dockedLane = this.getNextLane(edges[k].dockers[l-1].getDockedShape());\r\n             if (dockedLane != lanes[i])\r\n             continue;\r\n             dockers[docker.id] = {docker: docker, offset:offset};\r\n             }\r\n             // Check if the next dockers docked shape is from this lane\r\n             else if (l == edges[k].dockers.length-2 && edges[k].dockers.length>2 && edges[k].dockers[l+1].isDocked()){\r\n             var dockedLane = this.getNextLane(edges[k].dockers[l+1].getDockedShape());\r\n             if (dockedLane != lanes[i])\r\n             continue;\r\n             dockers[docker.id] = {docker: docker, offset:offset};\r\n             }\r\n\r\n             else if (isOutSidePool) {\r\n             dockers[docker.id] = {docker: docker, offset:this.getOffset(lanes[i], true, pool)};\r\n             }*/\r\n\r\n\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    // Move the moved children\r\n    class MoveChildCommand extends Command{\r\n      constructor (state) {\r\n        super()\r\n        this.state = state\r\n      }\r\n      execute () {\r\n        if (this.executed) {\r\n          this.state.each(function (s) {\r\n            s.shape.bounds.moveBy(s.xOffset, 0)\r\n          })\r\n        }\r\n        this.executed = true\r\n      }\r\n      rollback () {\r\n        this.state.each(function (s) {\r\n          s.shape.bounds.moveBy(-s.xOffset, 0)\r\n        })\r\n      }\r\n    }\r\n\r\n    // Set dockers\r\n    this.facade.executeCommands([new ORYX_MoveDockersCommand(dockers), new MoveChildCommand(movedShapes)])\r\n  }\r\n\r\n  moveBy (pos, offset) {\r\n    pos.x += offset.x\r\n    pos.y += offset.y\r\n    return pos\r\n  }\r\n\r\n  getHashedBounds (shape) {\r\n    return this.currentPool && this.hashedBounds[this.currentPool.id][shape.id] ? this.hashedBounds[this.currentPool.id][shape.id] : shape.absoluteBounds()\r\n  }\r\n\r\n  /**\r\n   * Returns a set on all child lanes for the given Shape. If recursive is TRUE, also indirect children will be\r\n   * returned (default is FALSE) The set is sorted with first child the lowest y-coordinate and the last one the\r\n   * highest.\r\n   * @param {ORYX.Core.Shape} shape\r\n   * @param {boolean} recursive\r\n   */\r\n  getLanes (shape, recursive) {\r\n    let namespace = this.getNamespace()\r\n    let id = shape.getStencil().idWithoutNs()\r\n    let laneName = 'Lane'\r\n    if (id === 'V-Pool') {\r\n      laneName = 'V-Lane'\r\n    }\r\n\r\n    // Get all the child lanes\r\n    let lanes = shape.getChildNodes(recursive || false).findAll(function (node) {\r\n      return (node.getStencil().id() === namespace + laneName)\r\n    })\r\n\r\n    if (laneName === 'Lane') {\r\n      // Sort all lanes by there y coordinate\r\n      lanes = lanes.sort(function (a, b) {\r\n        // Get y coordinates for upper left and lower right\r\n        let auy = Math.round(a.bounds.upperLeft().y)\r\n        let buy = Math.round(b.bounds.upperLeft().y)\r\n        let aly = Math.round(a.bounds.lowerRight().y)\r\n        let bly = Math.round(b.bounds.lowerRight().y)\r\n\r\n        let ha = this.getHashedBounds(a)\r\n        let hb = this.getHashedBounds(b)\r\n\r\n        // Get the old y coordinates\r\n        let oauy = Math.round(ha.upperLeft().y)\r\n        let obuy = Math.round(hb.upperLeft().y)\r\n        let oaly = Math.round(ha.lowerRight().y)\r\n        let obly = Math.round(hb.lowerRight().y)\r\n\r\n        // If equal, than use the old one\r\n        if (auy == buy && aly == bly) {\r\n          auy = oauy\r\n          buy = obuy\r\n          aly = oaly\r\n          bly = obly\r\n        }\r\n\r\n        if (Math.round(a.bounds.height() - ha.height()) === 0 && Math.round(b.bounds.height() - hb.height()) === 0) {\r\n          return auy < buy ? -1 : (auy > buy ? 1 : 0)\r\n        }\r\n\r\n        // Check if upper left and lower right is completely above/below\r\n        let above = auy < buy && aly < bly\r\n        let below = auy > buy && aly > bly\r\n        // Check if a is above b including the old values\r\n        let slightlyAboveBottom = auy < buy && aly >= bly && oaly < obly\r\n        let slightlyAboveTop = auy >= buy && aly < bly && oauy < obuy\r\n        // Check if a is below b including the old values\r\n        let slightlyBelowBottom = auy > buy && aly <= bly && oaly > obly\r\n        let slightlyBelowTop = auy <= buy && aly > bly && oauy > obuy\r\n\r\n        // Return -1 if a is above b, 1 if b is above a, or 0 otherwise\r\n        return (above || slightlyAboveBottom || slightlyAboveTop ? -1 : (below || slightlyBelowBottom || slightlyBelowTop ? 1 : 0))\r\n      }.bind(this))\r\n    } else {\r\n      // Sort all lanes by there x coordinate\r\n      lanes = lanes.sort(function (a, b) {\r\n        // Get y coordinates for upper left and lower right\r\n        let aux = Math.round(a.bounds.upperLeft().x)\r\n        let bux = Math.round(b.bounds.upperLeft().x)\r\n        let alx = Math.round(a.bounds.lowerRight().x)\r\n        let blx = Math.round(b.bounds.lowerRight().x)\r\n\r\n        let ha = this.getHashedBounds(a)\r\n        let hb = this.getHashedBounds(b)\r\n\r\n        // Get the old y coordinates\r\n        let oaux = Math.round(ha.upperLeft().x)\r\n        let obux = Math.round(hb.upperLeft().x)\r\n        let oalx = Math.round(ha.lowerRight().x)\r\n        let oblx = Math.round(hb.lowerRight().x)\r\n\r\n        // If equal, than use the old one\r\n        if (aux == bux && alx == blx) {\r\n          aux = oaux\r\n          bux = obux\r\n          alx = oalx\r\n          blx = oblx\r\n        }\r\n\r\n        if (Math.round(a.bounds.width() - ha.width()) === 0 && Math.round(b.bounds.width() - hb.width()) === 0) {\r\n          return aux < bux ? -1 : (aux > bux ? 1 : 0)\r\n        }\r\n\r\n        // Check if upper left and lower right is completely above/below\r\n        let above = aux < bux && alx < blx\r\n        let below = aux > bux && alx > blx\r\n        // Check if a is above b including the old values\r\n        let slightlyAboveBottom = aux < bux && alx >= blx && oalx < oblx\r\n        let slightlyAboveTop = aux >= bux && alx < blx && oaux < obux\r\n        // Check if a is below b including the old values\r\n        let slightlyBelowBottom = aux > bux && alx <= blx && oalx > oblx\r\n        let slightlyBelowTop = aux <= bux && alx > blx && oaux > obux\r\n\r\n        // Return -1 if a is above b, 1 if b is above a, or 0 otherwise\r\n        return (above || slightlyAboveBottom || slightlyAboveTop ? -1 : (below || slightlyBelowBottom || slightlyBelowTop ? 1 : 0))\r\n      }.bind(this))\r\n    }\r\n\r\n    lanes.each((l, index) => {\r\n      l.orderSort = index\r\n    })\r\n    console.log('lanes', lanes)\r\n    // Return lanes\r\n    return lanes\r\n  }\r\n\r\n  getNamespace () {\r\n    if (!this.namespace) {\r\n      let stencilsets = this.facade.getStencilSets()\r\n      if (stencilsets.keys()) {\r\n        this.namespace = stencilsets.keys()[0]\r\n      } else {\r\n        return undefined\r\n      }\r\n    }\r\n    return this.namespace\r\n  }\r\n}\r\n","import AbstractPlugin from './AbstractPlugin'\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Command from '../core/Command'\r\nimport ORYX_Node from '../core/Node'\r\nimport ORYX_Edge from '../core/Edge'\r\nimport ORYX_Canvas from '../core/Canvas'\r\n\r\nArray.prototype.insertFrom = function (from, to) {\r\n  to = Math.max(0, to)\r\n  from = Math.min(Math.max(0, from), this.length - 1)\r\n\r\n  let el = this[from]\r\n  let old = this.without(el)\r\n  let newA = old.slice(0, to)\r\n  newA.push(el)\r\n  if (old.length > to) {\r\n    newA = newA.concat(old.slice(to))\r\n  }\r\n  return newA\r\n}\r\nexport default class Arrangement extends AbstractPlugin {\r\n  constructor (facade) {\r\n    super(facade)\r\n    this.facade = facade\r\n\r\n    // Z-Ordering\r\n    /** Hide for SIGNAVIO\r\n\r\n     this.facade.offer({\r\n\t\t\t'name':ORYX.I18N.Arrangement.btf,\r\n\t\t\t'functionality': this.setZLevel.bind(this, this.setToTop),\r\n\t\t\t'group': ORYX.I18N.Arrangement.groupZ,\r\n\t\t\t'icon': ORYX.PATH + \"images/shape_move_front.png\",\r\n\t\t\t'description': ORYX.I18N.Arrangement.btfDesc,\r\n\t\t\t'index': 1,\r\n\t\t\t'minShape': 1});\r\n\r\n     this.facade.offer({\r\n\t\t\t'name':ORYX.I18N.Arrangement.btb,\r\n\t\t\t'functionality': this.setZLevel.bind(this, this.setToBack),\r\n\t\t\t'group': ORYX.I18N.Arrangement.groupZ,\r\n\t\t\t'icon': ORYX.PATH + \"images/shape_move_back.png\",\r\n\t\t\t'description': ORYX.I18N.Arrangement.btbDesc,\r\n\t\t\t'index': 2,\r\n\t\t\t'minShape': 1});\r\n\r\n     this.facade.offer({\r\n\t\t\t'name':ORYX.I18N.Arrangement.bf,\r\n\t\t\t'functionality': this.setZLevel.bind(this, this.setForward),\r\n\t\t\t'group': ORYX.I18N.Arrangement.groupZ,\r\n\t\t\t'icon': ORYX.PATH + \"images/shape_move_forwards.png\",\r\n\t\t\t'description': ORYX.I18N.Arrangement.bfDesc,\r\n\t\t\t'index': 3,\r\n\t\t\t'minShape': 1});\r\n\r\n     this.facade.offer({\r\n\t\t\t'name':ORYX.I18N.Arrangement.bb,\r\n\t\t\t'functionality': this.setZLevel.bind(this, this.setBackward),\r\n\t\t\t'group': ORYX.I18N.Arrangement.groupZ,\r\n\t\t\t'icon': ORYX.PATH + \"images/shape_move_backwards.png\",\r\n\t\t\t'description': ORYX.I18N.Arrangement.bbDesc,\r\n\t\t\t'index': 4,\r\n\t\t\t'minShape': 1});\r\n\r\n     // Aligment\r\n     this.facade.offer({\r\n\t\t\t'name':ORYX.I18N.Arrangement.ab,\r\n\t\t\t'functionality': this.alignShapes.bind(this, [ORYX.CONFIG.EDITOR_ALIGN_BOTTOM]),\r\n\t\t\t'group': ORYX.I18N.Arrangement.groupA,\r\n\t\t\t'icon': ORYX.PATH + \"images/shape_align_bottom.png\",\r\n\t\t\t'description': ORYX.I18N.Arrangement.abDesc,\r\n\t\t\t'index': 1,\r\n\t\t\t'minShape': 2});\r\n\r\n\r\n\r\n     this.facade.offer({\r\n\t\t\t'name':ORYX.I18N.Arrangement.at,\r\n\t\t\t'functionality': this.alignShapes.bind(this, [ORYX.CONFIG.EDITOR_ALIGN_TOP]),\r\n\t\t\t'group': ORYX.I18N.Arrangement.groupA,\r\n\t\t\t'icon': ORYX.PATH + \"images/shape_align_top.png\",\r\n\t\t\t'description': ORYX.I18N.Arrangement.atDesc,\r\n\t\t\t'index': 3,\r\n\t\t\t'minShape': 2});\r\n\r\n     this.facade.offer({\r\n\t\t\t'name':ORYX.I18N.Arrangement.al,\r\n\t\t\t'functionality': this.alignShapes.bind(this, [ORYX.CONFIG.EDITOR_ALIGN_LEFT]),\r\n\t\t\t'group': ORYX.I18N.Arrangement.groupA,\r\n\t\t\t'icon': ORYX.PATH + \"images/shape_align_left.png\",\r\n\t\t\t'description': ORYX.I18N.Arrangement.alDesc,\r\n\t\t\t'index': 4,\r\n\t\t\t'minShape': 2});\r\n\r\n     this.facade.offer({\r\n\t\t\t'name':ORYX.I18N.Arrangement.ar,\r\n\t\t\t'functionality': this.alignShapes.bind(this, [ORYX.CONFIG.EDITOR_ALIGN_RIGHT]),\r\n\t\t\t'group': ORYX.I18N.Arrangement.groupA,\r\n\t\t\t'icon': ORYX.PATH + \"images/shape_align_right.png\",\r\n\t\t\t'description': ORYX.I18N.Arrangement.arDesc,\r\n\t\t\t'index': 6,\r\n\t\t\t'minShape': 2});\r\n\r\n     **/\r\n\r\n    const I18N = {\r\n      Arrangement: {\r\n        am: 'Alignment Middle',\r\n        groupA: 'Alignment',\r\n        amDesc: 'Middle',\r\n        ac: 'Alignment Center',\r\n        acDesc: 'Center',\r\n        as: 'Alignment Same Size',\r\n        asDesc: 'Same Size',\r\n      }\r\n\r\n    }\r\n\r\n    this.facade.offer({\r\n      'name': I18N.Arrangement.am,\r\n      'functionality': this.alignShapes.bind(this, [ORYX_Config.EDITOR_ALIGN_MIDDLE]),\r\n      'group': I18N.Arrangement.groupA,\r\n      'icon': ORYX_Config.PATH + 'images/shape_align_middle.png',\r\n      'description': I18N.Arrangement.amDesc,\r\n      'index': 1,\r\n      'minShape': 2\r\n    })\r\n\r\n    this.facade.offer({\r\n      'name': I18N.Arrangement.ac,\r\n      'functionality': this.alignShapes.bind(this, [ORYX_Config.EDITOR_ALIGN_CENTER]),\r\n      'group': I18N.Arrangement.groupA,\r\n      'icon': ORYX_Config.PATH + 'images/shape_align_center.png',\r\n      'description': I18N.Arrangement.acDesc,\r\n      'index': 2,\r\n      'minShape': 2\r\n    })\r\n\r\n    this.facade.offer({\r\n      'name': I18N.Arrangement.as,\r\n      'functionality': this.alignShapes.bind(this, [ORYX_Config.EDITOR_ALIGN_SIZE]),\r\n      'group': I18N.Arrangement.groupA,\r\n      'icon': ORYX_Config.PATH + 'images/shape_align_size.png',\r\n      'description': I18N.Arrangement.asDesc,\r\n      'index': 3,\r\n      'minShape': 2\r\n    })\r\n\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_ARRANGEMENT_TOP, this.setZLevel.bind(this, this.setToTop))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_ARRANGEMENT_BACK, this.setZLevel.bind(this, this.setToBack))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_ARRANGEMENT_FORWARD, this.setZLevel.bind(this, this.setForward))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_ARRANGEMENT_BACKWARD, this.setZLevel.bind(this, this.setBackward))\r\n\r\n  }\r\n\r\n  onSelectionChanged (elemnt) {\r\n    let selection = this.facade.getSelection()\r\n    if (selection.length === 1 && selection[0] instanceof ORYX_Edge) {\r\n      this.setToTop(selection)\r\n    }\r\n  }\r\n\r\n  setZLevel (callback, event) {\r\n    // Command-Pattern for dragging one docker\r\n    class zLevelCommand extends ORYX_Command{\r\n      constructor (callback, elements, facade) {\r\n        super()\r\n        this.callback = callback\r\n        this.elements = elements\r\n        // For redo, the previous elements get stored\r\n        this.elAndIndex = elements.map(function (el) {\r\n          return { el: el, previous: el.parent.children[el.parent.children.indexOf(el) - 1] }\r\n        })\r\n        this.facade = facade\r\n      }\r\n      execute () {\r\n        // Call the defined z-order callback with the elements\r\n        this.callback(this.elements)\r\n        this.facade.setSelection(this.elements)\r\n      }\r\n      rollback() {\r\n        // Sort all elements on the index of there containment\r\n        let sortedEl = this.elAndIndex.sortBy(function (el) {\r\n          let value = el.el\r\n          let t = $A(value.node.parentNode.childNodes)\r\n          return t.indexOf(value.node)\r\n        })\r\n\r\n        // Every element get setted back bevor the old previous element\r\n        for (let i = 0; i < sortedEl.length; i++) {\r\n          let el = sortedEl[i].el\r\n          let p = el.parent\r\n          let oldIndex = p.children.indexOf(el)\r\n          let newIndex = p.children.indexOf(sortedEl[i].previous)\r\n          newIndex = newIndex || 0\r\n          p.children = p.children.insertFrom(oldIndex, newIndex)\r\n          el.node.parentNode.insertBefore(el.node, el.node.parentNode.childNodes[newIndex + 1])\r\n        }\r\n\r\n        // Reset the selection\r\n        this.facade.setSelection(this.elements)\r\n      }\r\n    }\r\n\r\n    // Instanziate the dockCommand\r\n    let command = new zLevelCommand(callback, this.facade.getSelection(), this.facade)\r\n    if (event.excludeCommand) {\r\n      command.execute()\r\n    } else {\r\n      this.facade.executeCommands([command])\r\n    }\r\n\r\n  }\r\n\r\n  setToTop (elements) {\r\n\r\n    // Sortieren des Arrays nach dem Index des SVGKnotens im Bezug auf dem Elternknoten.\r\n    let tmpElem = elements.sortBy(function (value, index) {\r\n      let t = $A(value.node.parentNode.childNodes)\r\n      return t.indexOf(value.node)\r\n    })\r\n    // Sortiertes Array wird nach oben verschoben.\r\n    tmpElem.each(function (value) {\r\n      let p = value.parent\r\n      if (p.children.last() === value) {\r\n        return\r\n      }\r\n      p.children = p.children.without(value)\r\n      p.children.push(value)\r\n      value.node.parentNode.appendChild(value.node)\r\n    })\r\n  }\r\n\r\n  setToBack (elements) {\r\n    // Sortieren des Arrays nach dem Index des SVGKnotens im Bezug auf dem Elternknoten.\r\n    let tmpElem = elements.sortBy(function (value, index) {\r\n      let t = $A(value.node.parentNode.childNodes)\r\n      return t.indexOf(value.node)\r\n    })\r\n\r\n    tmpElem = tmpElem.reverse()\r\n\r\n    // Sortiertes Array wird nach unten verschoben.\r\n    tmpElem.each(function (value) {\r\n      let p = value.parent\r\n      p.children = p.children.without(value)\r\n      p.children.unshift(value)\r\n      value.node.parentNode.insertBefore(value.node, value.node.parentNode.firstChild)\r\n    })\r\n\r\n\r\n  }\r\n\r\n  setBackward (elements) {\r\n    // Sortieren des Arrays nach dem Index des SVGKnotens im Bezug auf dem Elternknoten.\r\n    let tmpElem = elements.sortBy(function (value, index) {\r\n      let t = $A(value.node.parentNode.childNodes)\r\n      return t.indexOf(value.node)\r\n    })\r\n\r\n    // Reverse the elements\r\n    tmpElem = tmpElem.reverse()\r\n\r\n    // Delete all Nodes who are the next Node in the nodes-Array\r\n    let compactElem = tmpElem.findAll(function (el) {\r\n      return !tmpElem.some(function (checkedEl) {\r\n        return checkedEl.node == el.node.previousSibling\r\n      })\r\n    })\r\n\r\n    // Sortiertes Array wird nach eine Ebene nach oben verschoben.\r\n    compactElem.each(function (el) {\r\n      if (el.node.previousSibling === null) {\r\n        return\r\n      }\r\n      let p = el.parent\r\n      let index = p.children.indexOf(el)\r\n      p.children = p.children.insertFrom(index, index - 1)\r\n      el.node.parentNode.insertBefore(el.node, el.node.previousSibling)\r\n    })\r\n\r\n\r\n  }\r\n\r\n  setForward (elements) {\r\n    // Sortieren des Arrays nach dem Index des SVGKnotens im Bezug auf dem Elternknoten.\r\n    let tmpElem = elements.sortBy(function (value, index) {\r\n      let t = $A(value.node.parentNode.childNodes)\r\n      return t.indexOf(value.node)\r\n    })\r\n\r\n\r\n    // Delete all Nodes who are the next Node in the nodes-Array\r\n    let compactElem = tmpElem.findAll(function (el) {\r\n      return !tmpElem.some(function (checkedEl) {\r\n        return checkedEl.node == el.node.nextSibling\r\n      })\r\n    })\r\n\r\n\r\n    // Sortiertes Array wird eine Ebene nach unten verschoben.\r\n    compactElem.each(function (el) {\r\n      let nextNode = el.node.nextSibling\r\n      if (nextNode === null) {\r\n        return\r\n      }\r\n      let index = el.parent.children.indexOf(el)\r\n      let p = el.parent\r\n      p.children = p.children.insertFrom(index, index + 1)\r\n      el.node.parentNode.insertBefore(nextNode, el.node)\r\n    })\r\n  }\r\n\r\n  alignShapes (way) {\r\n    let elements = this.facade.getSelection()\r\n\r\n    // Set the elements to all Top-Level elements\r\n    elements = this.facade.getCanvas().getShapesWithSharedParent(elements)\r\n    // Get only nodes\r\n    elements = elements.findAll(function (value) {\r\n      return (value instanceof ORYX_Node)\r\n    })\r\n    // Delete all attached intermediate events from the array\r\n    elements = elements.findAll(function (value) {\r\n      let d = value.getIncomingShapes()\r\n      return d.length == 0 || !elements.include(d[0])\r\n    })\r\n    if (elements.length < 2) {\r\n      return\r\n    }\r\n\r\n    // get bounds of all shapes.\r\n    let bounds = elements[0].absoluteBounds().clone()\r\n    elements.each(function (shape) {\r\n      bounds.include(shape.absoluteBounds().clone())\r\n    })\r\n\r\n    // get biggest width and heigth\r\n    let maxWidth = 0\r\n    let maxHeight = 0\r\n    elements.each(function (shape) {\r\n      maxWidth = Math.max(shape.bounds.width(), maxWidth)\r\n      maxHeight = Math.max(shape.bounds.height(), maxHeight)\r\n    })\r\n\r\n    class commandClass extends ORYX_Command{\r\n      constructor (elements, bounds, maxHeight, maxWidth, way, plugin) {\r\n        super()\r\n        this.elements = elements\r\n        this.bounds = bounds\r\n        this.maxHeight = maxHeight\r\n        this.maxWidth = maxWidth\r\n        this.way = way\r\n        this.facade = plugin.facade\r\n        this.plugin = plugin\r\n        this.orgPos = []\r\n      }\r\n      setBounds (shape, maxSize) {\r\n        if (!maxSize)\r\n          maxSize = { width: ORYX_Config.CustomConfigs.MAXIMUM_SIZE, height: ORYX_Config.CustomConfigs.MAXIMUM_SIZE }\r\n        if (!shape.bounds) {\r\n          throw 'Bounds not definined.'\r\n        }\r\n\r\n        let newBounds = {\r\n          a: {\r\n            x: shape.bounds.upperLeft().x - (this.maxWidth - shape.bounds.width()) / 2,\r\n            y: shape.bounds.upperLeft().y - (this.maxHeight - shape.bounds.height()) / 2\r\n          },\r\n          b: {\r\n            x: shape.bounds.lowerRight().x + (this.maxWidth - shape.bounds.width()) / 2,\r\n            y: shape.bounds.lowerRight().y + (this.maxHeight - shape.bounds.height()) / 2\r\n          }\r\n        }\r\n\r\n        /* If the new width of shape exceeds the maximum width, set width value to maximum. */\r\n        if (this.maxWidth > maxSize.width) {\r\n          newBounds.a.x = shape.bounds.upperLeft().x -\r\n            (maxSize.width - shape.bounds.width()) / 2\r\n\r\n          newBounds.b.x = shape.bounds.lowerRight().x + (maxSize.width - shape.bounds.width()) / 2\r\n        }\r\n\r\n        /* If the new height of shape exceeds the maximum height, set height value to maximum. */\r\n        if (this.maxHeight > maxSize.height) {\r\n          newBounds.a.y = shape.bounds.upperLeft().y -\r\n            (maxSize.height - shape.bounds.height()) / 2\r\n\r\n          newBounds.b.y = shape.bounds.lowerRight().y + (maxSize.height - shape.bounds.height()) / 2\r\n        }\r\n\r\n        /* set bounds of shape */\r\n        shape.bounds.set(newBounds)\r\n\r\n      }\r\n      execute () {\r\n        // align each shape according to the way that was specified.\r\n        this.elements.each(function (shape, index) {\r\n          this.orgPos[index] = shape.bounds.upperLeft()\r\n\r\n          let relBounds = this.bounds.clone()\r\n          let newCoordinates\r\n          if (shape.parent && !(shape.parent instanceof ORYX_Canvas)) {\r\n            let upL = shape.parent.absoluteBounds().upperLeft()\r\n            relBounds.moveBy(-upL.x, -upL.y)\r\n          }\r\n\r\n          switch (this.way) {\r\n            // align the shapes in the requested way.\r\n            case ORYX_Config.EDITOR_ALIGN_BOTTOM:\r\n              newCoordinates = {\r\n                x: shape.bounds.upperLeft().x,\r\n                y: relBounds.b.y - shape.bounds.height()\r\n              }\r\n              break\r\n            case ORYX_Config.EDITOR_ALIGN_MIDDLE:\r\n              newCoordinates = {\r\n                x: shape.bounds.upperLeft().x,\r\n                y: (relBounds.a.y + relBounds.b.y - shape.bounds.height()) / 2\r\n              }\r\n              break\r\n            case ORYX_Config.EDITOR_ALIGN_TOP:\r\n              newCoordinates = {\r\n                x: shape.bounds.upperLeft().x,\r\n                y: relBounds.a.y\r\n              }\r\n              break\r\n            case ORYX_Config.EDITOR_ALIGN_LEFT:\r\n              newCoordinates = {\r\n                x: relBounds.a.x,\r\n                y: shape.bounds.upperLeft().y\r\n              }\r\n              break\r\n            case ORYX_Config.EDITOR_ALIGN_CENTER:\r\n              newCoordinates = {\r\n                x: (relBounds.a.x + relBounds.b.x - shape.bounds.width()) / 2,\r\n                y: shape.bounds.upperLeft().y\r\n              }\r\n              break\r\n            case ORYX_Config.EDITOR_ALIGN_RIGHT:\r\n              newCoordinates = {\r\n                x: relBounds.b.x - shape.bounds.width(),\r\n                y: shape.bounds.upperLeft().y\r\n              }\r\n              break\r\n            case ORYX_Config.EDITOR_ALIGN_SIZE:\r\n              if (shape.isResizable) {\r\n                this.orgPos[index] = { a: shape.bounds.upperLeft(), b: shape.bounds.lowerRight() }\r\n                this.setBounds(shape, shape.maximumSize)\r\n              }\r\n              break\r\n          }\r\n\r\n          if (newCoordinates) {\r\n            let offset = {\r\n              x: shape.bounds.upperLeft().x - newCoordinates.x,\r\n              y: shape.bounds.upperLeft().y - newCoordinates.y\r\n            }\r\n            // Set the new position\r\n            shape.bounds.moveTo(newCoordinates)\r\n            this.plugin.layoutEdges(shape, shape.getAllDockedShapes(), offset)\r\n            //shape.update()\r\n          }\r\n        }.bind(this))\r\n        //this.facade.getCanvas().update();\r\n        //this.facade.updateSelection();\r\n      }\r\n      rollback () {\r\n        this.elements.each(function (shape, index) {\r\n          if (this.way == ORYX_Config.EDITOR_ALIGN_SIZE) {\r\n            if (shape.isResizable) {\r\n              shape.bounds.set(this.orgPos[index])\r\n            }\r\n          } else {\r\n            shape.bounds.moveTo(this.orgPos[index])\r\n          }\r\n        }.bind(this))\r\n        //this.facade.getCanvas().update();\r\n        //this.facade.updateSelection();\r\n      }\r\n    }\r\n\r\n    const command = new commandClass(elements, bounds, maxHeight, maxWidth, parseInt(way), this)\r\n    this.facade.executeCommands([command])\r\n  }\r\n}\r\n\r\n","import AbstractPlugin from './AbstractPlugin'\r\nimport SelectedRect from './SelectedRect'\r\nimport GridLine from './GridLine'\r\nimport Resizer from './Resizer'\r\nimport ORYX_Edge from '../core/Edge'\r\nimport ORYX_Node from '../core/Node'\r\nimport ORYX_Shape from '../core/Shape'\r\nimport ORYX_Canvas from '../core/Canvas'\r\nimport ORYX_Command from '../core/Command'\r\nimport ORYX_Command_Move from '../core/Move'\r\nimport ORYX_Controls from '../core/Controls/index'\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Utils from '../Utils'\r\n\r\nconst LaneLinkProperties = [\r\n  'oryx-department',\r\n  'oryx-activerole',\r\n  'oryx-activesystem'\r\n]\r\n\r\n\r\nexport default class PoolAsProperty extends AbstractPlugin {\r\n  constructor (facade) {\r\n    super(facade)\r\n    this.facade = facade\r\n    this.poolH = {}\r\n    this.poolV = {}\r\n    this.facade.registerOnEvent('layout.bpmn2_0.pool', this.handleLayoutPool.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_PROPWINDOW_PROP_CHANGED, this.handlePropertyChanged.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_SHAPEREMOVED, this.handleShapeRemove.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_DRAGDROP_END, this.handleDragdropEnd.bind(this))\r\n    this.facade.registerOnEvent('newshape_addin_canvas', this.handleAddShape.bind(this))\r\n    this.facade.registerOnEvent('shape_refreshed', this.handleShapeRefreshed.bind(this))\r\n\r\n    // Register on over/out to show / hide a docker\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_MOUSEOVER, this.handleMouseOver.bind(this))\r\n    this.facade.registerOnEvent(ORYX_Config.EVENT_MOUSEOUT, this.handleMouseOut.bind(this))\r\n    // document.addEventListener('click', this.handleClick.bind(this))\r\n  }\r\n\r\n\r\n  onSelectionChanged (event) {\r\n    this.currentShapes = event.elements\r\n  }\r\n\r\n  getAllLanes (pools, recursive) {\r\n    let lanes = []\r\n    for (let i in pools) {\r\n      let pool = pools[i]\r\n      let ls = pool.getChildNodes(recursive || false).findAll(function (node) {\r\n        return (node.getStencil().id().endsWith('Lane'))\r\n      })\r\n      lanes = lanes.concat(ls)\r\n    }\r\n\r\n    return lanes\r\n  }\r\n\r\n  handleLayoutPool (event) {\r\n    let pool = event.shape\r\n    let shape_id = pool.id\r\n    let type = pool.getStencil().idWithoutNs()\r\n    if (type === 'Pool') {\r\n      this.poolH[shape_id] = pool\r\n    } else if (type === 'V-Pool') {\r\n      this.poolV[shape_id] = pool\r\n    }\r\n\r\n    this.allUserTasks = this.findUserTaskInBound()\r\n    this.setNodesWhenLayoutPool(this.poolH)\r\n    this.setNodesWhenLayoutPool(this.poolV)\r\n  }\r\n\r\n  handleShapeRemove (option) {\r\n    console.log('handleShapeRemove', option)\r\n    let sh = option.shape\r\n    if (sh instanceof ORYX_Node) {\r\n      let type = sh.getStencil().idWithoutNs()\r\n      if (type === 'Pool') {\r\n        delete this.poolH[sh.id]\r\n      } else if (type === 'V-Pool') {\r\n        delete this.poolV[sh.id]\r\n      }\r\n    }\r\n  }\r\n\r\n  findUserTaskInBound () {\r\n    // Calculate the elements from the childs of the canvas\r\n    let elements = this.facade.getCanvas().getChildShapes(true).findAll(function (value) {\r\n      if (value instanceof ORYX_Node && value.getStencil().id().endsWith('UserTask')) {\r\n        return true\r\n      }\r\n\r\n      return false\r\n    })\r\n\r\n    return elements\r\n  }\r\n\r\n  setNodesWhenLayoutPool (pool, elements) {\r\n    let lanes = this.getAllLanes(pool)\r\n    let i = -1\r\n    let tasks = elements || jQuery.extend(true, [], this.allUserTasks)\r\n    while (++i < lanes.length) {\r\n      tasks = this.setPropertiesWinthinLane(lanes[i], tasks)\r\n    }\r\n  }\r\n\r\n  setPropertiesWinthinLane (lane, elements) {\r\n    let bound = lane.absoluteBounds()\r\n    let other = elements.findAll(function (shape) {\r\n      let absBounds = shape.absoluteBounds()\r\n      let bA = absBounds.upperLeft()\r\n      let bB = absBounds.lowerRight()\r\n      if (bA.x > bound.a.x && bA.y > bound.a.y && bB.x < bound.b.x && bB.y < bound.b.y) {\r\n        LaneLinkProperties.map((pro) => {\r\n          let value = lane.properties.get(pro)\r\n          value ?  shape.setProperty(pro, value) : null\r\n        })\r\n        return false\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // 返回不在当前泳道内的节点，进入下一次遍历\r\n    return other\r\n  }\r\n\r\n  /**\r\n   * PropertyWindow.PropertyChanged Handler\r\n   */\r\n  handlePropertyChanged (option) {\r\n    let shapes = option.elements\r\n    let propertyKey = option.key\r\n    let propertyValue = option.value\r\n\r\n    console.log('propertyKey', propertyKey)\r\n    let changed = false\r\n    shapes.each(function (shape) {\r\n      if ((shape.getStencil().id().endsWith('SequenceFlow')) &&\r\n        (propertyKey === 'oryx-conditiontype')) {\r\n\r\n        if (propertyValue != 'Expression')\r\n        // Do not show the Diamond\r\n          shape.setProperty('oryx-showdiamondmarker', false)\r\n        else {\r\n          let incomingShapes = shape.getIncomingShapes()\r\n\r\n          if (!incomingShapes) {\r\n            shape.setProperty('oryx-showdiamondmarker', true)\r\n          }\r\n\r\n          let incomingGateway = incomingShapes.find(function (aShape) {\r\n            let foundGateway = aShape.getStencil().groups().find(function (group) {\r\n              if (group == 'Gateways')\r\n                return group\r\n            })\r\n            if (foundGateway)\r\n              return foundGateway\r\n          })\r\n\r\n          if (!incomingGateway)\r\n          // show diamond on edge source\r\n            shape.setProperty('oryx-showdiamondmarker', true)\r\n          else\r\n          // do not show diamond\r\n            shape.setProperty('oryx-showdiamondmarker', false)\r\n        }\r\n\r\n        changed = true\r\n      }\r\n\r\n      // if (shape.getStencil().id().endsWith('Lane')) {\r\n      //   // 泳道维度变化\r\n      //   if (LaneLinkProperties.includes(propertyKey)) {\r\n      //     if (propertyValue) {\r\n      //       shape.getStencil().property(propertyKey).enableHiddenPro()\r\n      //     } else {\r\n      //       shape.getStencil().property(propertyKey).disableHiddenPro()\r\n      //     }\r\n      //   }\r\n      //   shape.update()\r\n      // }\r\n    }.bind(this))\r\n    // this.shape.setProperty(this.key, this.oldValue)\r\n    // this.facade.getCanvas().update()\r\n    // this.facade.updateSelection()\r\n    if (changed) {\r\n      this.facade.getCanvas().update()\r\n    }\r\n\r\n  }\r\n\r\n  handleDragdropEnd () {\r\n    this.setNodesWhenLayoutPool(this.poolH, this.currentShapes)\r\n    this.setNodesWhenLayoutPool(this.poolV, this.currentShapes)\r\n    this.facade.getCanvas().update()\r\n    this.facade.updateSelection()\r\n  }\r\n\r\n  findInWhichLane (pool, shape) {\r\n    let lanes = this.getAllLanes(pool)\r\n    let i = -1\r\n    let found = false\r\n\r\n    let absoluteBounds = shape.absoluteBounds()\r\n    let bA = absoluteBounds.upperLeft()\r\n    let bB = absoluteBounds.lowerRight()\r\n\r\n    while (++i < lanes.length && !found) {\r\n      // let bound = lanes[i].bounds\r\n      let bound = lanes[i].absoluteBounds()\r\n      if (bA.x > bound.a.x && bA.y > bound.a.y && bB.x < bound.b.x && bB.y < bound.b.y) {\r\n        LaneLinkProperties.map((pro) => {\r\n          let value = lanes[i].properties.get(pro)\r\n          value ?  shape.setProperty(pro, value) : null\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAddShape (option) {\r\n    let shape = option.shape\r\n    console.log(444)\r\n    if (shape.getStencil().idWithoutNs() === 'UserTask') {\r\n      this.findInWhichLane(this.poolH, shape)\r\n      this.findInWhichLane(this.poolV, shape)\r\n    }\r\n    // if (shape.getStencil().idWithoutNs() === 'Pool') {\r\n    //   this.findInWhichLane(this.poolH, shape)\r\n    //   this.findInWhichLane(this.poolV, shape)\r\n    //   let parent = shape.node.childNodes[1]\r\n    //   this.nodes.push(uiObject)\r\n    // }\r\n  }\r\n\r\n  handleShapeRefreshed (event) {\r\n    // let shape = event.option\r\n    // if (shape instanceof ORYX_Node) {\r\n    //   console.log(889, shape)\r\n    // }\r\n  }\r\n\r\n  handleMouseOver (event, uiObj) {\r\n    // console.log(33, uiObj)\r\n\r\n  }\r\n  // handleMouseOver (event, uiObj) {\r\n  //   // If there is a Docker, show this\r\n  //   if (!this.docker && uiObj instanceof ORYX_Controls.Docker) {\r\n  //     uiObj.show()\r\n  //   } else if (!this.docker && uiObj instanceof ORYX_Edge) {\r\n  //     uiObj.dockers.each(function (docker) {\r\n  //       docker.show()\r\n  //     })\r\n  //   }\r\n  // }\r\n  handleMouseOut (event, uiObj) {\r\n\r\n  }\r\n}\r\n","import AbstractPlugin from './AbstractPlugin'\r\nimport AbstractLayouter from './AbstractLayouter'\r\nimport Edit from './Edit'\r\nimport View from './View'\r\nimport Loading from './Loading'\r\nimport CanvasResize from './CanvasResize'\r\nimport CanvasResizeButton from './CanvasResizeButton'\r\nimport RenameShapes from './RenameShapes'\r\nimport ProcessLink from './ProcessLink'\r\nimport Save from './Save'\r\nimport SelectedRect from './SelectedRect'\r\nimport DragDropResize from './DragDropResize'\r\nimport GridLine from './GridLine'\r\nimport ShapeHighlighting from './ShapeHighlighting'\r\nimport HighlightingSelectedShapes from './HighlightingSelectedShapes'\r\nimport Resizer from './Resizer'\r\nimport DragDocker from './DragDocker'\r\nimport AddDocker from './AddDocker'\r\nimport SelectionFrame from './SelectionFrame'\r\nimport Overlay from './Overlay'\r\nimport KeysMove from './KeysMove'\r\nimport Layouter from './Layouter'\r\nimport BPMN2_0 from './BPMN2_0'\r\nimport Arrangement from './Arrangement'\r\nimport PoolAsProperty from './PoolAsProperty'\r\nimport ORYX_Log from '../Log'\r\n\r\nconst Plugins = {\r\n  availablePlugins: [],\r\n  AbstractPlugin: AbstractPlugin,\r\n  AbstractLayouter: AbstractLayouter,\r\n  Edit: Edit,\r\n  View: View,\r\n  Loading: Loading,\r\n  CanvasResize: CanvasResize,\r\n  CanvasResizeButton: CanvasResizeButton,\r\n  RenameShapes: RenameShapes,\r\n  ProcessLink: ProcessLink,\r\n  Save: Save,\r\n  SelectedRect: SelectedRect,\r\n  DragDropResize: DragDropResize,\r\n  GridLine: GridLine,\r\n  ShapeHighlighting: ShapeHighlighting,\r\n  HighlightingSelectedShapes: HighlightingSelectedShapes,\r\n  Resizer: Resizer,\r\n  DragDocker: DragDocker,\r\n  AddDocker: AddDocker,\r\n  SelectionFrame: SelectionFrame,\r\n  Overlay: Overlay,\r\n  KeysMove: KeysMove,\r\n  Layouter: Layouter,\r\n  BPMN2_0: BPMN2_0,\r\n  Arrangement: Arrangement,\r\n  PoolAsProperty: PoolAsProperty,\r\n  getProperties: function(props) {\r\n    if (!props) return []\r\n    let arry = []\r\n    props.forEach((prop) => {\r\n      let property = new Map()\r\n      let attributes = Object.keys(prop)\r\n      attributes.map(function (attr) {\r\n        property.set(attr, prop[attr])\r\n      })\r\n      if (attributes.length > 0) {\r\n        arry.push(property)\r\n      }\r\n    })\r\n    return arry\r\n  },\r\n  _loadPlugins: function(config) {\r\n    // Get the globale Properties\r\n    let globalProperties = this.getProperties(config.properties)\r\n\r\n    const availablePlugins = []\r\n    config.plugins.map(plugin => {\r\n      let pluginData = new Map()\r\n      if (!plugin.name) {\r\n        ORYX_Log.error('A plugin is not providing a name. Ingnoring this plugin.')\r\n        return\r\n      }\r\n      pluginData.set('name', plugin.name)\r\n      // Get all private Properties\r\n      let properties = this.getProperties(plugin.properties)\r\n      // Set all Global-Properties to the Properties\r\n      properties = properties.concat(globalProperties)\r\n      // Set Properties to Plugin-Data\r\n      pluginData.set('properties', properties)\r\n      availablePlugins.push(pluginData)\r\n    })\r\n    this.availablePlugins = availablePlugins\r\n  }\r\n}\r\n\r\nexport default Plugins\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADsSURBVDiNpVE7bsMwDCUZjb1Al9wgY4YAbVLnDpZNHqFTbtIOOUCBDobVpWuX6BYecgPvGWWzQ+EgHyOQUgJvEMj3+MSHqgr/KZMyzMxn26qqwiSBgXT6plSBy4oWEJHF3QJFUSxV9fsugSzLDCI+IyKP9fFWjCKy6vv+vW3bufc+JKegqq9EtPHeh4EwNnQFZl6VZfk11rvE1Q2stRNVfUPE7S13Q519QUSeiGjddd3cOdfFCBwdWGsfVPWTiHax5KMDZn4xxjyGEGbOuUMsGQBg0jTNlIh+AOCjrut9ChkA/lLI83wac/Ex/ALppKokayBOuQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGiSURBVDiNrZOxbhNBEIb//+QmBR1PkCIvYLtxKvqkgCDd3rmxKICO0FhCBClCQkoFoYMoitL4vJZAKXBPZSMU/AIpeIJ0NBTgj8Lr6CRiIQQjrXb23/lnZmdmDaguIYQN26WkZlqSNJM0A6oY40XdPlsqtl2W5a7tCbAGHEtqSWoBx8Ca7Umy8RUPkG3neT62fSPLst5gMPiqa6Tb7a7P5/NT4NtoNNoCMKCyLHeBV9eRVontx1VVHTrP8w3bE0k300UE3q4gPQBCOl4Cmw3bJXBiuy/pCOjZ/lxV1WGdnLK8I+lI0v3EKTItKj1NEc6AHeCgLMt+jdwHDoAd22cJnkpqZZKats+XxjHGse1tYL8oir2iKPaAfdvbMcZx7TnnkpqNP9TqWdp/rjJoaDEg7WVrQwhbtt9Jem77oyQBt4APIYS7WZb9SFjb9qyhxZR1Enjbdg94EmN8WQv0KYTw3fZ74DRhHUlffmujpJGkNysyfigpT/olsPnvg/RfRjl5dFEUj4CnwImk6bK9QFtSx/Y92y+Gw+FrEvHKwVL+9jv/AlqzAw70R2T4AAAAAElFTkSuQmCC\"","/**\r\n * @classDescription Abstract base class for all objects that have a graphical representation\r\n * within the editor. 具有图形表示的所有对象的抽象基类\r\n *\r\n * @extends Clazz\r\n */\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Log from '../Log'\r\nimport ORYX_Utils from '../Utils'\r\nimport Bounds from './Bounds'\r\n\r\nexport default class UIObject {\r\n  constructor (options) {\r\n    this.isChanged = true\t\t\t// Flag, if UIObject has been changed since last update.\r\n    this.isResized = true\r\n    this.isVisible = true\t\t\t// Flag, if UIObject's display attribute is set to 'inherit' or 'none'\r\n    this.isSelectable = false\t\t// Flag, if UIObject is selectable.\r\n    this.isResizable = false\t\t// Flag, if UIObject is resizable.\r\n    this.isMovable = false\t\t\t// Flag, if UIObject is movable.\r\n\r\n    this.id = ORYX_Utils.provideId()\t//get unique id\r\n    this.parent = undefined\t\t//parent is defined, if this object is added to another uiObject.\r\n    this.node = undefined\t\t\t//this is a reference to the SVG representation, either locally or in DOM.\r\n    this.children = []\t\t\t\t//array for all add uiObjects\r\n\r\n    this.bounds = new Bounds()\t\t//bounds with undefined values\r\n\r\n    this._changedCallback = this._changed.bind(this)\t//callback reference for calling _changed\r\n    this.bounds.registerCallback(this._changedCallback)\t//set callback in bounds\r\n\r\n    if (options && options.eventHandlerCallback) {\r\n      this.eventHandlerCallback = options.eventHandlerCallback\r\n    }\r\n  }\r\n  /**\r\n   * Sets isChanged flag to true. Callback for the bounds object.\r\n   */\r\n  _changed (bounds, isResized) {\r\n    this.isChanged = true\r\n    if (this.bounds == bounds) {\r\n      this.isResized = isResized || this.isResized\r\n    }\r\n  }\r\n\r\n  /**\r\n   * If something changed, this method calls the refresh method that must be implemented by subclasses.\r\n   */\r\n  update () {\r\n    if (this.isChanged) {\r\n      this.refresh()\r\n      this.isChanged = false\r\n\r\n      // call update of all children\r\n      this.children.each(function (value) {\r\n        value.update()\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Is called in update method, if isChanged is set to true. Sub classes should call the super class method.\r\n   */\r\n  refresh () {\r\n\r\n  }\r\n\r\n  /**\r\n   * @return {Array} Array of all child UIObjects.\r\n   */\r\n  getChildren () {\r\n    return this.children.clone()\r\n  }\r\n\r\n  /**\r\n   * @return {Array} Array of all parent UIObjects.\r\n   */\r\n  getParents () {\r\n    let parents = []\r\n    let parent = this.parent\r\n    while (parent) {\r\n      parents.push(parent)\r\n      parent = parent.parent\r\n    }\r\n    return parents\r\n  }\r\n\r\n  /**\r\n   * Returns TRUE if the given parent is one of the UIObjects parents or the UIObject themselves, otherwise FALSE.\r\n   * @param {UIObject} parent\r\n   * @return {Boolean}\r\n   */\r\n  isParent (parent) {\r\n    let cparent = this\r\n    while (cparent) {\r\n      if (cparent === parent) {\r\n        return true\r\n      }\r\n      cparent = cparent.parent\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * @return {String} Id of this UIObject\r\n   */\r\n  getId () {\r\n    return this.id\r\n  }\r\n\r\n  /**\r\n   * Method for accessing child uiObjects by id.\r\n   * @param {String} id\r\n   * @param {Boolean} deep\r\n   *\r\n   * @return {UIObject} If found, it returns the UIObject with id.\r\n   */\r\n  getChildById (id, deep) {\r\n    return this.children.find(function (uiObj) {\r\n      if (uiObj.getId() === id) {\r\n        return uiObj\r\n      } else {\r\n        if (deep) {\r\n          let obj = uiObj.getChildById(id, deep)\r\n          if (obj) {\r\n            return obj\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Adds an UIObject to this UIObject and sets the parent of the\r\n   * added UIObject. It is also added to the SVG representation of this\r\n   * UIObject.\r\n   * @param {UIObject} uiObject\r\n   */\r\n  add (uiObject) {\r\n    //add uiObject, if it is not already a child of this object\r\n    if (!(this.children.member(uiObject))) {\r\n      //if uiObject is child of another parent, remove it from that parent.\r\n      if (uiObject.parent) {\r\n        uiObject.remove(uiObject)\r\n      }\r\n\r\n      //add uiObject to children\r\n      this.children.push(uiObject)\r\n\r\n      //set parent reference\r\n      uiObject.parent = this\r\n\r\n      //add uiObject.node to this.node\r\n      uiObject.node = this.node.appendChild(uiObject.node)\r\n\r\n      //register callback to get informed, if child is changed\r\n      uiObject.bounds.registerCallback(this._changedCallback)\r\n\r\n      //uiObject.update();\r\n    } else {\r\n      ORYX_Log.info('add: ORYX.Core.UIObject is already a child of this object.')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes UIObject from this UIObject. The SVG representation will also\r\n   * be removed from this UIObject's SVG representation.\r\n   * @param {UIObject} uiObject\r\n   */\r\n  remove (uiObject) {\r\n    //if uiObject is a child of this object, remove it.\r\n    if (this.children.member(uiObject)) {\r\n      //remove uiObject from children\r\n      this.children = this._uiObjects.without(uiObject)\r\n\r\n      //delete parent reference of uiObject\r\n      uiObject.parent = undefined\r\n\r\n      //delete uiObject.node from this.node\r\n      uiObject.node = this.node.removeChild(uiObject.node)\r\n\r\n      //unregister callback to get informed, if child is changed\r\n      uiObject.bounds.unregisterCallback(this._changedCallback)\r\n    } else {\r\n      ORYX_Log.info('remove: ORYX.Core.UIObject is not a child of this object.')\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Calculates absolute bounds of this UIObject.\r\n   */\r\n  absoluteBounds () {\r\n    if (this.parent) {\r\n      let absUL = this.absoluteXY()\r\n      return new Bounds(absUL.x, absUL.y,\r\n        absUL.x + this.bounds.width(),\r\n        absUL.y + this.bounds.height())\r\n    } else {\r\n      return this.bounds.clone()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @return {Point} The absolute position of this UIObject.\r\n   */\r\n  absoluteXY () {\r\n    if (this.parent) {\r\n      let pXY = this.parent.absoluteXY()\r\n      let result = {}\r\n      result.x = pXY.x + this.bounds.upperLeft().x\r\n      result.y = pXY.y + this.bounds.upperLeft().y\r\n      return result\r\n    } else {\r\n      let result = {}\r\n      result.x = this.bounds.upperLeft().x\r\n      result.y = this.bounds.upperLeft().y\r\n      return result\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @return {Point} The absolute position from the Center of this UIObject.\r\n   */\r\n  absoluteCenterXY () {\r\n    if (this.parent) {\r\n      let pXY = this.parent.absoluteXY()\r\n      let result = {}\r\n      result.x = pXY.x + this.bounds.center().x\r\n      result.y = pXY.y + this.bounds.center().y\r\n      return result\r\n\r\n    } else {\r\n      let result = {}\r\n      result.x = this.bounds.center().x\r\n      result.y = this.bounds.center().y\r\n      return result\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hides this UIObject and all its children.\r\n   */\r\n  hide () {\r\n    this.node.setAttributeNS(null, 'display', 'none')\r\n    this.isVisible = false\r\n    this.children.each(function (uiObj) {\r\n      uiObj.hide()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Enables visibility of this UIObject and all its children.\r\n   */\r\n  show () {\r\n    this.node.setAttributeNS(null, 'display', 'inherit')\r\n    this.isVisible = true\r\n    this.children.each(function (uiObj) {\r\n      uiObj.show()\r\n    })\r\n  }\r\n\r\n  addEventHandlers (node) {\r\n    node.addEventListener(ORYX_Config.EVENT_MOUSEDOWN, this._delegateEvent.bind(this), false)\r\n    node.addEventListener(ORYX_Config.EVENT_MOUSEMOVE, this._delegateEvent.bind(this), false)\r\n    node.addEventListener(ORYX_Config.EVENT_MOUSEUP, this._delegateEvent.bind(this), false)\r\n    node.addEventListener(ORYX_Config.EVENT_MOUSEOVER, this._delegateEvent.bind(this), false)\r\n    node.addEventListener(ORYX_Config.EVENT_MOUSEOUT, this._delegateEvent.bind(this), false)\r\n    node.addEventListener('click', this._delegateEvent.bind(this), false)\r\n    node.addEventListener(ORYX_Config.EVENT_DBLCLICK, this._delegateEvent.bind(this), false)\r\n  }\r\n\r\n  _delegateEvent (event) {\r\n    if (this.eventHandlerCallback) {\r\n      this.eventHandlerCallback(event, this)\r\n    }\r\n  }\r\n\r\n  toString () {\r\n    return 'UIObject ' + this.id\r\n  }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNpZMxakJBEIb/cb2DwcpCRPAWvjssbwaLkAOYVqu8Z6OFTS6Qcgf2DkriKSxSpArkEMukyHuPF9Cgcapll+9j/lmGzAy3VOcmGkAXAJi5APB0JVuqatEBAFUtAJTXwkAVQUQmV0hKVS1EZNIIzGwnIuMLJDU8NrNdIwDQM7Od9374h6RU1cJ7P6zgXlsAAH3n3J6ZByckpaoWzDxwzu0B9OuHs9/YkjQDO1Xd1vkzpTSNMX6IyBLASw2KSA/Ag6quvfdT59xb3UUt+CKiLMb4zszPAOYA7mezWQb8DBnAiJnvYoyPIpKZ2WsTgYiyEMIxz/NtBQPAKKV0SCkdAIyqu3me59sQwpGIMgCgehdEZG1mi3NZ20VEmxDCsumAmVeXwlWkBTOvfnXw37p5G78B3j2V6xMVKeMAAAAASUVORK5CYII=\"","var RIGHT = 2, TOP = 8, BOTTOM = 4, LEFT = 1\r\n\r\nfunction computeOutCode (x, y, xmin, ymin, xmax, ymax) {\r\n  var code = 0\r\n  if (y > ymax)\r\n    code |= TOP\r\n  else if (y < ymin)\r\n    code |= BOTTOM\r\n  if (x > xmax)\r\n    code |= RIGHT\r\n  else if (x < xmin)\r\n    code |= LEFT\r\n  return code\r\n}\r\n\r\nconst ORYX_Math = {\r\n  /**\r\n   * Calculate the middle point between two given points\r\n   * 计算两点之间的中点\r\n   * @param {x:double, y:double} point1\r\n   * @param {x:double, y:double} point2\r\n   * @return the middle point\r\n   */\r\n  midPoint: function (point1, point2) {\r\n    return {\r\n      x: (point1.x + point2.x) / 2.0,\r\n      y: (point1.y + point2.y) / 2.0\r\n    }\r\n  },\r\n  /**\r\n   * Returns a TRUE if the point is over a line (defined by\r\n   * point1 and point 2). In Addition a threshold can be set,\r\n   * which defines the weight of those line.\r\n   *\r\n   * @param {int} pointX - Point X\r\n   * @param {int} pointY - Point Y\r\n   * @param {int} lPoint1X - Line first Point X\r\n   * @param {int} lPoint1Y - Line first Point Y\r\n   * @param {int} lPoint2X - Line second Point X\r\n   * @param {int} lPoint2Y - Line second Point y\r\n   * @param {int} offset {optional} - maximal distance to line\r\n   * @class ORYX.Core.Math.prototype\r\n   */\r\n  isPointInLine: function (pointX, pointY, lPoint1X, lPoint1Y, lPoint2X, lPoint2Y, offset) {\r\n\r\n    offset = offset ? Math.abs(offset) : 1\r\n\r\n    // Check if the edge is vertical\r\n    if (Math.abs(lPoint1X - lPoint2X) <= offset && Math.abs(pointX - lPoint1X) <= offset && pointY - Math.max(lPoint1Y, lPoint2Y) <= offset && Math.min(lPoint1Y, lPoint2Y) - pointY <= offset) {\r\n      return true\r\n    }\r\n\r\n    // Check if the edge is horizontal\r\n    if (Math.abs(lPoint1Y - lPoint2Y) <= offset && Math.abs(pointY - lPoint1Y) <= offset && pointX - Math.max(lPoint1X, lPoint2X) <= offset && Math.min(lPoint1X, lPoint2X) - pointX <= offset) {\r\n      return true\r\n    }\r\n\r\n    if (pointX > Math.max(lPoint1X, lPoint2X) || pointX < Math.min(lPoint1X, lPoint2X)) {\r\n      return false\r\n    }\r\n\r\n    if (pointY > Math.max(lPoint1Y, lPoint2Y) || pointY < Math.min(lPoint1Y, lPoint2Y)) {\r\n      return false\r\n    }\r\n\r\n    let s = (lPoint1Y - lPoint2Y) / (lPoint1X - lPoint2X)\r\n\r\n    return Math.abs(pointY - ((s * pointX) + lPoint1Y - s * lPoint1X)) < offset\r\n  },\r\n\r\n  /**\r\n   * Get a boolean if the point is in the polygone\r\n   * 判断点是否在多边形中\r\n   */\r\n  isPointInEllipse: function (pointX, pointY, cx, cy, rx, ry) {\r\n    if (cx === undefined || cy === undefined || rx === undefined || ry === undefined) {\r\n      throw 'ORYX.Core.Math.isPointInEllipse needs a ellipse with these properties: x, y, radiusX, radiusY'\r\n    }\r\n\r\n    let tx = (pointX - cx) / rx\r\n    let ty = (pointY - cy) / ry\r\n\r\n    return tx * tx + ty * ty < 1.0\r\n  },\r\n\r\n\r\n  /**\r\n   * Get a boolean if the point is in the polygone\r\n   * @param {int} pointX\r\n   * @param {int} pointY\r\n   * @param {[int]} Cornerpoints of the Polygone (x,y,x,y,...)\r\n   */\r\n  isPointInPolygone: function (pointX, pointY, polygone) {\r\n    if (arguments.length < 3) {\r\n      throw 'ORYX.Core.Math.isPointInPolygone needs two arguments'\r\n    }\r\n\r\n    let lastIndex = polygone.length - 1\r\n\r\n    if (polygone[0] !== polygone[lastIndex - 1] || polygone[1] !== polygone[lastIndex]) {\r\n      polygone.push(polygone[0])\r\n      polygone.push(polygone[1])\r\n    }\r\n\r\n    let crossings = 0\r\n\r\n    let x1, y1, x2, y2, d\r\n\r\n    for (let i = 0; i < polygone.length - 3;) {\r\n      x1 = polygone[i]\r\n      y1 = polygone[++i]\r\n      x2 = polygone[++i]\r\n      y2 = polygone[i + 1]\r\n      d = (pointY - y1) * (x2 - x1) - (pointX - x1) * (y2 - y1)\r\n\r\n      if ((y1 >= pointY) != (y2 >= pointY)) {\r\n        crossings += y2 - y1 >= 0 ? d >= 0 : d <= 0\r\n      }\r\n      if (!d && Math.min(x1, x2) <= pointX && pointX <= Math.max(x1, x2)\r\n        && Math.min(y1, y2) <= pointY && pointY <= Math.max(y1, y2)) {\r\n        return true\r\n      }\r\n    }\r\n    return (crossings % 2) ? true : false\r\n  },\r\n\r\n  /**\r\n   *  Calculates the distance between a point and a line. It is also testable, if\r\n   *  the distance orthogonal to the line, matches the segment of the line.\r\n   *\r\n   *  @param {float} lineP1\r\n   *    The starting point of the line segment\r\n   *  @param {float} lineP2\r\n   *    The end point of the line segment\r\n   *  @param {Point} point\r\n   *    The point to calculate the distance to.\r\n   *  @param {boolean} toSegmentOnly\r\n   *    Flag to signal if only the segment of the line shell be evaluated.\r\n   */\r\n  distancePointLinie: function (lineP1, lineP2, point, toSegmentOnly) {\r\n    let intersectionPoint = ORYX_Math.getPointOfIntersectionPointLine(lineP1, lineP2, point, toSegmentOnly)\r\n\r\n    if (!intersectionPoint) {\r\n      return null\r\n    }\r\n\r\n    return ORYX_Math.getDistancePointToPoint(point, intersectionPoint)\r\n  },\r\n\r\n  /**\r\n   * Calculates the distance between two points.\r\n   *\r\n   * @param {point} point1\r\n   * @param {point} point2\r\n   */\r\n  getDistancePointToPoint: function (point1, point2) {\r\n    return Math.sqrt(Math.pow(point1.x - point2.x, 2) + Math.pow(point1.y - point2.y, 2))\r\n  },\r\n\r\n  /**\r\n   * Calculates the relative distance of a point which is between two other points.\r\n   *\r\n   * @param {point} between1\r\n   * @param {point} between2\r\n   * @param {point} point\r\n   */\r\n  getDistanceBetweenTwoPoints: function (between1, between2, point) {\r\n    return ORYX_Math.getDistancePointToPoint(point, between1) /\r\n      ORYX_Math.getDistancePointToPoint(between1, between2)\r\n  },\r\n\r\n\r\n  /**\r\n   * Returns true, if the point is of the left hand\r\n   * side of the regarding the line.\r\n   *\r\n   * @param {point} lineP1 Line first point\r\n   * @param {point} lineP2 Line second point\r\n   * @param {point} point\r\n   */\r\n  pointIsLeftOfLine: function (lineP1, lineP2, point) {\r\n    let vec1 = ORYX_Math.getVector(lineP1, lineP2)\r\n    let vec2 = ORYX_Math.getVector(lineP1, point)\r\n    // if the cross produkt is more than 0\r\n    return ((vec1.x * vec2.y) - (vec2.x * vec1.y)) > 0\r\n  },\r\n\r\n  /**\r\n   * Calculates the a point which is relatively between two other points.\r\n   *\r\n   * @param {point} point1\r\n   * @param {point} point2\r\n   * @param {number} relative Relative which is between 0 and 1\r\n   */\r\n  getPointBetweenTwoPoints: function (point1, point2, relative) {\r\n    relative = Math.max(Math.min(relative || 0, 1), 0)\r\n\r\n    if (relative === 0) {\r\n      return point1\r\n    } else if (relative === 1) {\r\n      return point2\r\n    }\r\n\r\n    return {\r\n      x: point1.x + ((point2.x - point1.x) * relative),\r\n      y: point1.y + ((point2.y - point1.y) * relative)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Returns the vector of the both points\r\n   *\r\n   * @param {point} point1\r\n   * @param {point} point2\r\n   */\r\n  OgetVector: function (point1, point2) {\r\n    return {\r\n      x: point2.x - point1.x,\r\n      y: point2.y - point1.y\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Returns the an identity vector of the given vector,\r\n   * which has the length ot one.\r\n   *\r\n   * @param {point} vector\r\n   * or\r\n   * @param {point} point1\r\n   * @param {point} point2\r\n   */\r\n  getIdentityVector: function (vector) {\r\n    if (arguments.length == 2) {\r\n      vector = ORYX_Math.getVector(arguments[0], arguments[1])\r\n    }\r\n\r\n    let length = Math.sqrt((vector.x * vector.x) + (vector.y * vector.y))\r\n    return {\r\n      x: vector.x / (length || 1),\r\n      y: vector.y / (length || 1)\r\n    }\r\n  },\r\n\r\n  getOrthogonalIdentityVector: function (point1, point2) {\r\n    let vec = arguments.length == 1 ? point1 : ORYX_Math.getIdentityVector(point1, point2)\r\n    return {\r\n      x: vec.y,\r\n      y: -vec.x\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Returns the intersection point of a line and a point that defines a line\r\n   * orthogonal to the given line.\r\n   *\r\n   *  @param {float} lineP1\r\n   *    The starting point of the line segment\r\n   *  @param {float} lineP2\r\n   *    The end point of the line segment\r\n   *  @param {Point} point\r\n   *    The point to calculate the distance to.\r\n   *  @param {boolean} onSegmentOnly\r\n   *    Flag to signal if only the segment of the line shell be evaluated.\r\n   */\r\n  getPointOfIntersectionPointLine: function (lineP1, lineP2, point, onSegmentOnly) {\r\n    /*\r\n     * [P3 - P1 - u(P2 - P1)] dot (P2 - P1) = 0\r\n     * u =((x3-x1)(x2-x1)+(y3-y1)(y2-y1))/(p2-p1)²\r\n     */\r\n    let denominator = Math.pow(lineP2.x - lineP1.x, 2)\r\n      + Math.pow(lineP2.y - lineP1.y, 2)\r\n    if (denominator == 0) {\r\n      return undefined\r\n    }\r\n\r\n    let u = ((point.x - lineP1.x) * (lineP2.x - lineP1.x)\r\n      + (point.y - lineP1.y) * (lineP2.y - lineP1.y))\r\n      / denominator\r\n\r\n    if (onSegmentOnly) {\r\n      if (!(0 <= u && u <= 1)) {\r\n        return undefined\r\n      }\r\n    }\r\n\r\n    let pointOfIntersection = new Object()\r\n    pointOfIntersection.x = lineP1.x + u * (lineP2.x - lineP1.x)\r\n    pointOfIntersection.y = lineP1.y + u * (lineP2.y - lineP1.y)\r\n\r\n    return pointOfIntersection\r\n  },\r\n\r\n  /**\r\n   * Translated the point with the given matrix.\r\n   * @param {Point} point\r\n   * @param {Matrix} matrix\r\n   * @return {Object} Includes x, y\r\n   */\r\n  getTranslatedPoint: function (point, matrix) {\r\n    let x = matrix.a * point.x + matrix.c * point.y + matrix.e * 1\r\n    let y = matrix.b * point.x + matrix.d * point.y + matrix.f * 1\r\n    return { x: x, y: y }\r\n  },\r\n\r\n  /**\r\n   * Returns the inverse matrix of the given SVG transformation matrix\r\n   * @param {SVGTransformationMatrix} matrix\r\n   * @return {Matrix}\r\n   */\r\n  getInverseMatrix: function (matrix) {\r\n    let det = ORYX_Math.getDeterminant(matrix), m = matrix\r\n    // +-     -+\r\n    // | a c e |\r\n    // | b d f |\r\n    // | 0 0 1 |\r\n    // +-     -+\r\n    return {\r\n      a: det * ((m.d * 1) - (m.f * 0)),\r\n      b: det * ((m.f * 0) - (m.b * 1)),\r\n      c: det * ((m.e * 0) - (m.c * 1)),\r\n      d: det * ((m.a * 1) - (m.e * 0)),\r\n      e: det * ((m.c * m.f) - (m.e * m.d)),\r\n      f: det * ((m.e * m.b) - (m.a * m.f))\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Returns the determinant of the svg transformation matrix\r\n   * @param {SVGTranformationMatrix} matrix\r\n   * @return {Number}\r\n   *\r\n   */\r\n  getDeterminant: function (m) {\r\n    // a11a22a33+a12a23a31+a13a21a32-a13a22a31-a12a21a33-a11a23a32\r\n    return (m.a * m.d * 1) + (m.c * m.f * 0) + (m.e * m.b * 0) - (m.e * m.d * 0) - (m.c * m.b * 1) - (m.a * m.f * 0)\r\n  },\r\n\r\n  /**\r\n   * Returns the bounding box of the given node. Translates the\r\n   * origin bounding box with the tranlation matrix.\r\n   * @param {SVGElement} node\r\n   * @return {Object} Includes x, y, width, height\r\n   */\r\n  getTranslatedBoundingBox: function (node) {\r\n    let matrix = node.getCTM()\r\n    let bb = node.getBBox()\r\n    let ul = ORYX_Math.getTranslatedPoint({ x: bb.x, y: bb.y }, matrix)\r\n    let ll = ORYX_Math.getTranslatedPoint({ x: bb.x, y: bb.y + bb.height }, matrix)\r\n    let ur = ORYX_Math.getTranslatedPoint({ x: bb.x + bb.width, y: bb.y }, matrix)\r\n    let lr = ORYX_Math.getTranslatedPoint({ x: bb.x + bb.width, y: bb.y + bb.height }, matrix)\r\n\r\n    let minPoint = {\r\n      x: Math.min(ul.x, ll.x, ur.x, lr.x),\r\n      y: Math.min(ul.y, ll.y, ur.y, lr.y)\r\n    }\r\n    let maxPoint = {\r\n      x: Math.max(ul.x, ll.x, ur.x, lr.x),\r\n      y: Math.max(ul.y, ll.y, ur.y, lr.y)\r\n    }\r\n    return {\r\n      x: minPoint.x,\r\n      y: minPoint.y,\r\n      width: maxPoint.x - minPoint.x,\r\n      height: maxPoint.y - minPoint.y\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Returns the angle of the given line, which is representated by the two points\r\n   * @param {Point} p1\r\n   * @param {Point} p2\r\n   * @return {Number} 0 <= x <= 359.99999\r\n   */\r\n  getAngle: function (p1, p2) {\r\n    if (p1.x == p2.x && p1.y == p2.y)\r\n      return 0\r\n\r\n    let angle = Math.asin(Math.sqrt(Math.pow(p1.y - p2.y, 2))\r\n      / (Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p1.y - p2.y, 2))))\r\n      * 180 / Math.PI\r\n\r\n    if (p2.x >= p1.x && p2.y <= p1.y)\r\n      return angle\r\n    else if (p2.x < p1.x && p2.y <= p1.y)\r\n      return 180 - angle\r\n    else if (p2.x < p1.x && p2.y > p1.y)\r\n      return 180 + angle\r\n    else\r\n      return 360 - angle\r\n  },\r\n  /**\r\n   * Returns TRUE if the rectangle is over the edge and has intersection points or includes it\r\n   * @param {Object} x1 Point A of the line\r\n   * @param {Object} y1\r\n   * @param {Object} x2 Point B of the line\r\n   * @param {Object} y2\r\n   * @param {Object} xmin Point A of the rectangle\r\n   * @param {Object} ymin\r\n   * @param {Object} xmax Point B of the rectangle\r\n   * @param {Object} ymax\r\n   */\r\n  isRectOverLine: function (x1, y1, x2, y2, xmin, ymin, xmax, ymax) {\r\n    return !!ORYX_Math.clipLineOnRect.apply(ORYX_Math, arguments)\r\n  },\r\n\r\n  /**\r\n   * Returns the clipped line on the given rectangle. If there is\r\n   * no intersection, it will return NULL.\r\n   *\r\n   * @param {Object} x1 Point A of the line\r\n   * @param {Object} y1\r\n   * @param {Object} x2 Point B of the line\r\n   * @param {Object} y2\r\n   * @param {Object} xmin Point A of the rectangle\r\n   * @param {Object} ymin\r\n   * @param {Object} xmax Point B of the rectangle\r\n   * @param {Object} ymax\r\n   */\r\n  clipLineOnRect: function (x1, y1, x2, y2, xmin, ymin, xmax, ymax) {\r\n    //Outcodes for P0, P1, and whatever point lies outside the clip rectangle\r\n    let outcode0, outcode1, outcodeOut, hhh = 0\r\n    let accept = false, done = false\r\n\r\n    //compute outcodes\r\n    outcode0 = computeOutCode(x1, y1, xmin, ymin, xmax, ymax)\r\n    outcode1 = computeOutCode(x2, y2, xmin, ymin, xmax, ymax)\r\n\r\n    do {\r\n      if ((outcode0 | outcode1) == 0) {\r\n        accept = true\r\n        done = true\r\n      } else if ((outcode0 & outcode1) > 0) {\r\n        done = true\r\n      } else {\r\n        //failed both tests, so calculate the line segment to clip\r\n        //from an outside point to an intersection with clip edge\r\n        let x = 0, y = 0\r\n        //At least one endpoint is outside the clip rectangle; pick it.\r\n        outcodeOut = outcode0 != 0 ? outcode0 : outcode1\r\n        //Now find the intersection point;\r\n        //use formulas y = y0 + slope * (x - x0), x = x0 + (1/slope)* (y - y0)\r\n        if ((outcodeOut & TOP) > 0) {\r\n          x = x1 + (x2 - x1) * (ymax - y1) / (y2 - y1)\r\n          y = ymax\r\n        } else if ((outcodeOut & BOTTOM) > 0) {\r\n          x = x1 + (x2 - x1) * (ymin - y1) / (y2 - y1)\r\n          y = ymin\r\n        } else if ((outcodeOut & RIGHT) > 0) {\r\n          y = y1 + (y2 - y1) * (xmax - x1) / (x2 - x1)\r\n          x = xmax\r\n        } else if ((outcodeOut & LEFT) > 0) {\r\n          y = y1 + (y2 - y1) * (xmin - x1) / (x2 - x1)\r\n          x = xmin\r\n        }\r\n\r\n        //Now we move outside point to intersection point to clip\r\n        //and get ready for next pass.\r\n        if (outcodeOut == outcode0) {\r\n          x1 = x\r\n          y1 = y\r\n          outcode0 = computeOutCode(x1, y1, xmin, ymin, xmax, ymax)\r\n        } else {\r\n          x2 = x\r\n          y2 = y\r\n          outcode1 = computeOutCode(x2, y2, xmin, ymin, xmax, ymax)\r\n        }\r\n      }\r\n      hhh++\r\n    } while (done != true && hhh < 5000)\r\n\r\n    if (accept) {\r\n      return { a: { x: x1, y: y1 }, b: { x: x2, y: y2 } }\r\n    }\r\n    return null\r\n  }\r\n}\r\n\r\nexport default ORYX_Math","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAB8SURBVDiN7ZOxDcMwDATvA8+UNBnAI0hcQwNkAq/BFZIBUmmpT6MALpW49QPseEeweNnmSBaAiLjb3oDrJNcltcx8LwC2N0mPzHzN0BGxjoM3bFNKsW1+mS9z+evxXU7BKdgLekSss9DY7TDKJKnZ3mqtz0lHl9QAdLTOH1TOVBCb+hFwAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADCSURBVDiNrZPBDcIwDEW/CXMwCZwpA6SKPWBapQMU7lxYoAMwR6TPAagACTVVa8lSDnk//o4tJLEkNotoAFsACCGcReQ4ByR5adu22gDAXPiTWcfCS/GUcx5SSvcpyMwqkv1XBTnnwTl3M7P9lECM8fw+jwIppbuIeJKdqh5KLazXg7qud865TkR8jPGqquOENU0jfxVIIoRAkvDe70iiJN/Ml4WSH/iNxT0YBcysKoU+726B51wD6FW1+OUXA1m6zg8iFm8LSjqBDQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFpSURBVDiNjZO9SgNBFEa/O7PFBgL2vkAKW58gVopGbVaCPoIWYmUhSeFP7ysEshgRREEFSbqAL+Az2ApKWJB7Pwt3ZbObjU63zJ7D3DOMkETVarfbXQCI47hb9Y/7A24CaGaifwtSYEVV11R1DcBKlaQkyOAkSba892dBEJyq6maVxM2CVfUwDMMhAE8y8N4/kzyYJZEsYgaLyDXJIxHZ7/f79+leC8AlyQsR2QMwzMIKyV/YzI6dc1dBECz3er23wukWAbyIyC7J80zistqqujoYDMYAvswsKc46mUw+AGij0Rir6irS25lqwJ95HsxsvSio1WotAE+dTsemIqazjLz3j1EU1UneAtguCgDsmNlNFEV17/0jgFEcx91SROdcy8xeSd5N1RbZSJJkKQzD+1LEXKjsJjokF0TEkRQRcWb2LiInebgkyEvSqJ8AkDv2sPguSoKiBACq4EpBXpJ+zoTnCnKSuc/5G6XU4GAOTfy/AAAAAElFTkSuQmCC\"","var map = {\n\t\"./activity/adhoc.subprocess.png\": \"270f\",\n\t\"./activity/event.subprocess.collapsed.png\": \"f896\",\n\t\"./activity/event.subprocess.png\": \"f3da\",\n\t\"./activity/expanded.subprocess.png\": \"02a5\",\n\t\"./activity/list/type.business.rule.png\": \"c033\",\n\t\"./activity/list/type.camel.png\": \"a09b\",\n\t\"./activity/list/type.decision.png\": \"a1e5\",\n\t\"./activity/list/type.http.png\": \"a6b1\",\n\t\"./activity/list/type.manual.png\": \"ce61\",\n\t\"./activity/list/type.mule.png\": \"b664\",\n\t\"./activity/list/type.receive.png\": \"7824\",\n\t\"./activity/list/type.script.png\": \"c030\",\n\t\"./activity/list/type.send.png\": \"4587\",\n\t\"./activity/list/type.service.png\": \"20a9\",\n\t\"./activity/list/type.shell.png\": \"5c5c\",\n\t\"./activity/list/type.user.png\": \"d725\",\n\t\"./activity/subprocess.png\": \"1e68\",\n\t\"./activity/task.png\": \"4bea\",\n\t\"./artifact/text.annotation.png\": \"421a\",\n\t\"./catching/cancel.png\": \"2c9b\",\n\t\"./catching/compensation.png\": \"6d60\",\n\t\"./catching/error.png\": \"2328\",\n\t\"./catching/message.png\": \"12c9\",\n\t\"./catching/signal.png\": \"9be4\",\n\t\"./catching/timer.png\": \"3dac\",\n\t\"./connector/association.undirected.png\": \"ab77\",\n\t\"./connector/association.unidirectional.png\": \"e2fd\",\n\t\"./connector/messageflow.png\": \"ac6f\",\n\t\"./connector/sequenceflow.png\": \"c047\",\n\t\"./dataobject/data.store.png\": \"658c\",\n\t\"./diagram.png\": \"2ef9\",\n\t\"./endevent/cancel.png\": \"beb1\",\n\t\"./endevent/error.png\": \"cc46\",\n\t\"./endevent/none.png\": \"f4fd\",\n\t\"./endevent/terminate.png\": \"3644\",\n\t\"./gateway/eventbased.png\": \"5dfd\",\n\t\"./gateway/exclusive.databased.png\": \"3bfb\",\n\t\"./gateway/inclusive.png\": \"0856\",\n\t\"./gateway/parallel.png\": \"04d5\",\n\t\"./startevent/error.png\": \"976e\",\n\t\"./startevent/message.png\": \"4235\",\n\t\"./startevent/none.png\": \"de4e\",\n\t\"./startevent/signal.png\": \"edba\",\n\t\"./startevent/timer.png\": \"a2d5\",\n\t\"./swimlane/lane.png\": \"fc71\",\n\t\"./swimlane/pool.png\": \"c4c0\",\n\t\"./throwing/none.png\": \"b0bf\",\n\t\"./throwing/signal.png\": \"3eef\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"6386\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADzSURBVDiNpZMxTsNAEEXfjCxRITfQ0xlR0eQKKYyUDkteV0gcAdE6e4h0SKFZ+wSh4Ao5gUt6OioaDw2JHEjAjrfc2fd2/kgjZsaYE/V5VBRF2rbtHLhQ1UkI4W1T057wCpgAjxs4TdOTXoLvnwGo6/oZIMuy8ziOl70EInL58y6KogUwg39m4L1X4BM4BcjzvDvx9Z8deO+1aZonMzvbV1fV+UFBB77rRHkXkQ9grao3IYSXvREOwMskSe7Lsmx/dTIG3hEcA28FIiLHwFuBc25qZlfA7RB4JwJwDTwMgQHEzBARcc5NAaqqerUBKypj1/kLhO+Cw77rHWsAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","/**\r\n * Implements a command to move docker by an offset.\r\n *\r\n * @class ORYX.Core.MoveDockersCommand\r\n * @param {Object} object An object with the docker id as key and docker and offset as object value\r\n *\r\n */\r\n\r\nimport Command from './Command'\r\n\r\nexport default class MoveDockersCommand extends Command {\r\n  constructor (dockers) {\r\n    super()\r\n    this.dockers = new Hash(dockers)\r\n    this.edges = new Hash()\r\n  }\r\n\r\n  execute () {\r\n    if (this.changes) {\r\n      this.executeAgain()\r\n      return\r\n    } else {\r\n      this.changes = new Hash()\r\n    }\r\n\r\n    this.dockers.values().each(function (docker) {\r\n      let edge = docker.docker.parent\r\n      if (!edge) {\r\n        return\r\n      }\r\n\r\n      if (!this.changes.get(edge.getId())) {\r\n        this.changes.set(edge.getId(), {\r\n          edge: edge,\r\n          oldDockerPositions: edge.dockers.map(function (r) {\r\n            return r.bounds.center()\r\n          })\r\n        })\r\n      }\r\n      docker.docker.bounds.moveBy(docker.offset)\r\n      this.edges.set(edge.getId(), edge)\r\n      docker.docker.update()\r\n    }.bind(this))\r\n    this.edges.each(function (edge) {\r\n      this.updateEdge(edge.value)\r\n      if (this.changes[edge.value.getId()])\r\n        this.changes[edge.value.getId()].dockerPositions = edge.value.dockers.map(function (r) {\r\n          return r.bounds.center()\r\n        })\r\n    }.bind(this))\r\n  }\r\n\r\n  updateEdge (edge) {\r\n    edge._update(true);\r\n    [edge.getOutgoingShapes(), edge.getIncomingShapes()].flatten().invoke('_update', [true])\r\n  }\r\n\r\n  executeAgain () {\r\n    this.changes.values().each(function (change) {\r\n      // Reset the dockers\r\n      this.removeAllDocker(change.edge)\r\n      change.dockerPositions.each(function (pos, i) {\r\n        if (i == 0 || i == change.dockerPositions.length - 1) {\r\n          return\r\n        }\r\n        let docker = change.edge.createDocker(undefined, pos)\r\n        docker.bounds.centerMoveTo(pos)\r\n        docker.update()\r\n      }.bind(this))\r\n      this.updateEdge(change.edge)\r\n    }.bind(this))\r\n  }\r\n\r\n  rollback () {\r\n    this.changes.values().each(function (change) {\r\n      // Reset the dockers\r\n      this.removeAllDocker(change.edge)\r\n      change.oldDockerPositions.each(function (pos, i) {\r\n        if (i == 0 || i == change.oldDockerPositions.length - 1) {\r\n          return\r\n        }\r\n        let docker = change.edge.createDocker(undefined, pos)\r\n        docker.bounds.centerMoveTo(pos)\r\n        docker.update()\r\n      }.bind(this))\r\n      this.updateEdge(change.edge)\r\n    }.bind(this))\r\n  }\r\n\r\n  removeAllDocker (edge) {\r\n    edge.dockers.slice(1, edge.dockers.length - 1).each(function (docker) {\r\n      edge.removeDocker(docker)\r\n    })\r\n  }\r\n}","module.exports = \"data:image/png;base64,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\"","import ORYX_CONFIG from './CONFIG'\r\n\r\nconst ERDF = {\r\n  LITERAL: 0x01,\r\n  RESOURCE: 0x02,\r\n  DELIMITERS: ['.', '-'],\r\n  HASH: '#',\r\n  HYPHEN: '-',\r\n\r\n  schemas: [],\r\n  callback: undefined,\r\n  log: undefined,\r\n\r\n  init: function (callback) {\r\n\r\n    // init logging.\r\n    //ERDF.log = Log4js.getLogger(\"oryx\");\r\n    //ERDF.log.setLevel(Log4js.Level.ALL);\r\n    //ERDF.log.addAppender(new ConsoleAppender(ERDF.log, false));\r\n\r\n    //if(ERDF.log.isTraceEnabled())\r\n    //\tERDF.log.trace(\"ERDF Parser is initialized.\");\r\n\r\n    // register callbacks and default schemas.\r\n    ERDF.callback = callback\r\n    ERDF.registerSchema('schema', ORYX_CONFIG.XMLNS.SCHEMA)\r\n    ERDF.registerSchema('rdfs', ORYX_CONFIG.XMLNS.RDFS)\r\n  },\r\n\r\n  run: function () {\r\n    //if(ERDF.log.isTraceEnabled())\r\n    //\tERDF.log.trace(\"ERDF Parser is running.\");\r\n\r\n    // do the work.\r\n    return ERDF._checkProfile() && ERDF.parse()\r\n  },\r\n\r\n  parse: function () {\r\n    //(ERDF.log.isDebugEnabled())\r\n    //\tERDF.log.debug(\"Begin parsing document metadata.\");\r\n\r\n    // time measuring\r\n    ERDF.__startTime = new Date()\r\n\r\n    var bodies = document.getElementsByTagNameNS(ORYX_CONFIG.XMLNS.XHTML, 'body')\r\n    var subject = { type: ERDF.RESOURCE, value: '' }\r\n\r\n    var result = ERDF._parseDocumentMetadata() &&\r\n      ERDF._parseFromTag(bodies[0], subject)\r\n\r\n    // time measuring\r\n    ERDF.__stopTime = new Date()\r\n\r\n    var duration = (ERDF.__stopTime - ERDF.__startTime) / 1000.\r\n    //alert('ERDF parsing took ' + duration + ' s.');\r\n\r\n    return result\r\n  },\r\n\r\n  _parseDocumentMetadata: function () {\r\n\r\n    // get links from head element.\r\n    var heads = document.getElementsByTagNameNS(ORYX_CONFIG.XMLNS.XHTML, 'head')\r\n    var links = heads[0].getElementsByTagNameNS(ORYX_CONFIG.XMLNS.XHTML, 'link')\r\n    var metas = heads[0].getElementsByTagNameNS(ORYX_CONFIG.XMLNS.XHTML, 'meta')\r\n\r\n    // process links first, since they could contain schema definitions.\r\n    $A(links).each(function (link) {\r\n      var properties = link.getAttribute('rel')\r\n      var reversedProperties = link.getAttribute('rev')\r\n      var value = link.getAttribute('href')\r\n\r\n      ERDF._parseTriplesFrom(\r\n        ERDF.RESOURCE, '',\r\n        properties,\r\n        ERDF.RESOURCE, value)\r\n\r\n      ERDF._parseTriplesFrom(\r\n        ERDF.RESOURCE, value,\r\n        reversedProperties,\r\n        ERDF.RESOURCE, '')\r\n    })\r\n\r\n    // continue with metas.\r\n    $A(metas).each(function (meta) {\r\n      var property = meta.getAttribute('name')\r\n      var value = meta.getAttribute('content')\r\n\r\n      ERDF._parseTriplesFrom(\r\n        ERDF.RESOURCE, '',\r\n        property,\r\n        ERDF.LITERAL, value)\r\n    })\r\n\r\n    return true\r\n  },\r\n\r\n  _parseFromTag: function (node, subject, depth) {\r\n\r\n    // avoid parsing non-xhtml content.\r\n    if (!node || !node.namespaceURI || node.namespaceURI != ORYX_CONFIG.XMLNS.XHTML) {\r\n      return\r\n    }\r\n\r\n    // housekeeping.\r\n    if (!depth) depth = 0\r\n    var id = node.getAttribute('id')\r\n\r\n    // some logging.\r\n    //if(ERDF.log.isTraceEnabled())\r\n    //\tERDF.log.trace(\">\".times(depth) + \" Parsing \" + node.nodeName + \" (\"+node.nodeType+\") for data on \" +\r\n    //\t\t((subject.type == ERDF.RESOURCE) ? ('&lt;' + subject.value + '&gt;') : '') +\r\n    //\t\t((subject.type == ERDF.LITERAL) ? '\"' + subject.value + '\"' : ''));\r\n\r\n    /* triple finding! */\r\n\r\n    // in a-tags...\r\n    if (node.nodeName.endsWith(':a') || node.nodeName == 'a') {\r\n      var properties = node.getAttribute('rel')\r\n      var reversedProperties = node.getAttribute('rev')\r\n      var value = node.getAttribute('href')\r\n      var title = node.getAttribute('title')\r\n      var content = node.textContent\r\n\r\n      // rel triples\r\n      ERDF._parseTriplesFrom(\r\n        subject.type, subject.value,\r\n        properties,\r\n        ERDF.RESOURCE, value,\r\n        function (triple) {\r\n          var label = title ? title : content\r\n\r\n          // label triples\r\n          ERDF._parseTriplesFrom(\r\n            triple.object.type, triple.object.value,\r\n            'rdfs.label',\r\n            ERDF.LITERAL, label)\r\n        })\r\n\r\n      // rev triples\r\n      ERDF._parseTriplesFrom(\r\n        subject.type, subject.value,\r\n        reversedProperties,\r\n        ERDF.RESOURCE, '')\r\n\r\n      // type triples\r\n      ERDF._parseTypeTriplesFrom(\r\n        subject.type, subject.value,\r\n        properties)\r\n\r\n      // in img-tags...\r\n    } else if (node.nodeName.endsWith(':img') || node.nodeName == 'img') {\r\n      var properties = node.getAttribute('class')\r\n      var value = node.getAttribute('src')\r\n      var alt = node.getAttribute('alt')\r\n\r\n      ERDF._parseTriplesFrom(\r\n        subject.type, subject.value,\r\n        properties,\r\n        ERDF.RESOURCE, value,\r\n        function (triple) {\r\n          var label = alt\r\n\r\n          // label triples\r\n          ERDF._parseTriplesFrom(\r\n            triple.object.type, triple.object.value,\r\n            'rdfs.label',\r\n            ERDF.LITERAL, label)\r\n        })\r\n\r\n    }\r\n\r\n    // in every tag\r\n    var properties = node.getAttribute('class')\r\n    var title = node.getAttribute('title')\r\n    var content = node.textContent\r\n    var label = title ? title : content\r\n\r\n    // regular triples\r\n    ERDF._parseTriplesFrom(\r\n      subject.type, subject.value,\r\n      properties,\r\n      ERDF.LITERAL, label)\r\n\r\n    if (id) subject = { type: ERDF.RESOURCE, value: ERDF.HASH + id }\r\n\r\n    // type triples\r\n    ERDF._parseTypeTriplesFrom(\r\n      subject.type, subject.value,\r\n      properties)\r\n\r\n    // parse all children that are element nodes.\r\n    var children = node.childNodes\r\n    if (children) $A(children).each(function (_node) {\r\n      if (_node.nodeType == _node.ELEMENT_NODE)\r\n        ERDF._parseFromTag(_node, subject, depth + 1)\r\n    })\r\n  },\r\n\r\n  _parseTriplesFrom: function (subjectType, subject, properties,\r\n                               objectType, object, callback) {\r\n\r\n    if (!properties) return\r\n    properties.toLowerCase().split(' ').each(function (property) {\r\n\r\n      //if(ERDF.log.isTraceEnabled())\r\n      //\tERDF.log.trace(\"Going for property \" + property);\r\n\r\n      var schema = ERDF.schemas.find(function (schema) {\r\n        return false || ERDF.DELIMITERS.find(function (delimiter) {\r\n          return property.startsWith(schema.prefix + delimiter)\r\n        })\r\n      })\r\n\r\n      if (schema && object) {\r\n        property = property.substring(\r\n          schema.prefix.length + 1, property.length)\r\n        var triple = ERDF.registerTriple(\r\n          new ERDF.Resource(subject),\r\n          { prefix: schema.prefix, name: property },\r\n          (objectType == ERDF.RESOURCE) ?\r\n            new ERDF.Resource(object) :\r\n            new ERDF.Literal(object))\r\n\r\n        if (callback) callback(triple)\r\n      }\r\n    })\r\n  },\r\n\r\n  _parseTypeTriplesFrom: function (subjectType, subject, properties, callback) {\r\n\r\n    if (!properties) return\r\n    properties.toLowerCase().split(' ').each(function (property) {\r\n\r\n      //if(ERDF.log.isTraceEnabled())\r\n      //\tERDF.log.trace(\"Going for property \" + property);\r\n\r\n      var schema = ERDF.schemas.find(function (schema) {\r\n        return false || ERDF.DELIMITERS.find(function (delimiter) {\r\n          return property.startsWith(ERDF.HYPHEN + schema.prefix + delimiter)\r\n        })\r\n      })\r\n\r\n      if (schema && subject) {\r\n        property = property.substring(schema.prefix.length + 2, property.length)\r\n        var triple = ERDF.registerTriple(\r\n          (subjectType == ERDF.RESOURCE) ?\r\n            new ERDF.Resource(subject) :\r\n            new ERDF.Literal(subject),\r\n          { prefix: 'rdf', name: 'type' },\r\n          new ERDF.Resource(schema.namespace + property))\r\n        if (callback) callback(triple)\r\n      }\r\n    })\r\n  },\r\n\r\n  /**\r\n   * Checks for ERDF profile declaration in head of document.\r\n   */\r\n  _checkProfile: function () {\r\n\r\n    // get profiles from head element.\r\n    var heads = document.getElementsByTagNameNS(ORYX_CONFIG.XMLNS.XHTML, 'head')\r\n    var profiles = heads[0].getAttribute('profile')\r\n    var found = false\r\n\r\n    // if erdf profile is contained.\r\n    if (profiles && profiles.split(' ').member(ORYX_CONFIG.XMLNS.ERDF)) {\r\n\r\n      // pass check.\r\n      //if(ERDF.log.isTraceEnabled())\r\n      //\tERDF.log.trace(\"Found ERDF profile \" + ORYX_CONFIG.XMLNS.ERDF);\r\n      return true\r\n\r\n    } else {\r\n\r\n      // otherwise fail check.\r\n      //if(ERDF.log.isFatalEnabled())\r\n      //\tERDF.log.fatal(\"No ERDF profile found.\");\r\n      return false\r\n    }\r\n  },\r\n\r\n  __stripHashes: function (s) {\r\n    return (s && (typeof s.substring == 'function') && s.substring(0, 1) == '#') ? s.substring(1, s.length) : s\r\n  },\r\n\r\n  registerSchema: function (prefix, namespace) {\r\n\r\n    // TODO check whether already registered, if so, complain.\r\n    ERDF.schemas.push({\r\n      prefix: prefix,\r\n      namespace: namespace\r\n    })\r\n\r\n    //if(ERDF.log.isDebugEnabled())\r\n    //\tERDF.log.debug(\"Prefix '\"+prefix+\"' for '\"+namespace+\"' registered.\");\r\n  },\r\n\r\n  registerTriple: function (subject, predicate, object) {\r\n\r\n    // if prefix is schema, this is a schema definition.\r\n    if (predicate.prefix.toLowerCase() == 'schema')\r\n      this.registerSchema(predicate.name, object.value)\r\n\r\n    var triple = new ERDF.Triple(subject, predicate, object)\r\n    ERDF.callback(triple)\r\n\r\n    //if(ERDF.log.isInfoEnabled())\r\n    //\tERDF.log.info(triple)\r\n\r\n    // return the registered triple.\r\n    return triple\r\n  },\r\n\r\n  __enhanceObject: function () {\r\n\r\n    /* Resource state querying methods */\r\n    this.isResource = function () {\r\n      return this.type == ERDF.RESOURCE\r\n    }\r\n    this.isLocal = function () {\r\n      return this.isResource() && this.value.startsWith('#')\r\n    }\r\n    this.isCurrentDocument = function () {\r\n      return this.isResource() && (this.value == '')\r\n    }\r\n\r\n    /* Resource getter methods.*/\r\n    this.getId = function () {\r\n      return this.isLocal() ? ERDF.__stripHashes(this.value) : false\r\n    }\r\n\r\n    /* Liiteral state querying methods  */\r\n    this.isLiteral = function () {\r\n      return this.type == ERDF.LIITERAL\r\n    }\r\n  },\r\n\r\n  serialize: function (literal) {\r\n\r\n    if (!literal) {\r\n      return ''\r\n    } else if (literal.constructor == String) {\r\n      return literal\r\n    } else if (literal.constructor == Boolean) {\r\n      return literal ? 'true' : 'false'\r\n    } else {\r\n      return literal.toString()\r\n    }\r\n  },\r\n  Triple: function (subject, predicate, object) {\r\n\r\n    this.subject = subject\r\n    this.predicate = predicate\r\n    this.object = object\r\n\r\n    this.toString = function () {\r\n\r\n      return '[ERDF.Triple] ' +\r\n        this.subject.toString() + ' ' +\r\n        this.predicate.prefix + ':' + this.predicate.name + ' ' +\r\n        this.object.toString()\r\n    }\r\n  },\r\n  Resource: function (uri) {\r\n\r\n    this.type = ERDF.RESOURCE\r\n    this.value = uri\r\n    ERDF.__enhanceObject.apply(this)\r\n\r\n    this.toString = function () {\r\n      return '&lt;' + this.value + '&gt;'\r\n    }\r\n\r\n  },\r\n  Literal: function (literal) {\r\n\r\n    this.type = ERDF.LITERAL\r\n    this.value = ERDF.serialize(literal)\r\n    ERDF.__enhanceObject.apply(this)\r\n\r\n    this.toString = function () {\r\n      return '\"' + this.value + '\"'\r\n    }\r\n  }\r\n}\r\n\r\nexport default ERDF\r\n","import UIObject from '../UIObject'\r\n\r\n/**\r\n * @classDescription Abstract base class for all Controls.\r\n */\r\nexport default class Control extends UIObject{\r\n  toString () {\r\n    return 'Control ' + this.id\r\n  }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACmSURBVDiNxZPBEcMgDASXjPtwXfq5E3An/qmuVEIelhkBmngmfkRP0K11J5xqrTyp1yM1sACIyE9jqGpahrM3cNzoNmDtJnDi1cglUopIsZ7W6zM4gB3I1hiJs/W0KbsQ7csTxIvH6cYMUNUiIhjkOg7FIWCofHM/AwavHUxEpoA7wDevga0JsHGuJvTqs+Fc4wS49ku0RlftDUwW7OI2OF/p73/jB6ReRj0fymnsAAAAAElFTkSuQmCC\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-xs-12\",attrs:{\"id\":\"propertiesHelpWrapper\"}},[_vm._v(\"\\n  \"+_vm._s(_vm.laneEnableValue)+\"\\n  \"),_c('div',{staticClass:\"propertySection\",class:{collapsed: _vm.propertyWindowState.collapsed},attrs:{\"id\":\"propertySection\"}},[_c('div',{staticClass:\"selected-item-section\"},[_c('div',{staticClass:\"clearfix\"},[(_vm.selectedItem.auditData && _vm.selectedItem.auditData.createDate)?_c('div',{staticClass:\"pull-right\"},[_c('strong',[_vm._v(_vm._s(_vm.$t('ELEMENT.DATE_CREATED'))+\": \")]),_vm._v(\" \"+_vm._s(_vm.selectedItem.auditData.createDate)+\"\\n        \")]):_vm._e(),(_vm.selectedItem.auditData && _vm.selectedItem.auditData.author)?_c('div',{staticClass:\"pull-right\"},[_c('strong',[_vm._v(_vm._s(_vm.$t('ELEMENT.AUTHOR'))+\": \")]),_vm._v(\" \"+_vm._s(_vm.selectedItem.auditData.author)+\"\\n        \")]):_vm._e(),_c('div',{staticClass:\"selected-item-title\"},[_c('a',{on:{\"click\":_vm.propertyWindowStateToggle}},[_c('i',{staticClass:\"glyphicon\",class:{'glyphicon-chevron-right': _vm.propertyWindowState.collapsed,\n               'glyphicon-chevron-down': !_vm.propertyWindowState.collapsed}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectedItem.title != undefined && _vm.selectedItem.title != null &&\n            _vm.selectedItem.title.length > 0),expression:\"selectedItem.title != undefined && selectedItem.title != null &&\\n            selectedItem.title.length > 0\"}]},[_vm._v(_vm._s(_vm.selectedItem.title))]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.selectedItem || _vm.selectedItem.title == undefined ||\n            _vm.selectedItem.title == null || _vm.selectedItem.title.length == 0),expression:\"!selectedItem || selectedItem.title == undefined ||\\n            selectedItem.title == null || selectedItem.title.length == 0\"}]},[_vm._v(_vm._s(_vm.modelData.name))])])])]),_c('div',{staticClass:\"selected-item-body\"},[_c('div',_vm._l((_vm.selectedItem.properties),function(property,index){return _c('div',{key:index,staticClass:\"property-row\",class:{'clear': index%2 == 0,\n               'disable-pro': _vm.currentShapeType.endsWith('Lane') &&\n               _vm.laneEnableValue &&\n               _vm.laneValueAry.includes(property.key) &&\n               property.key != _vm.laneEnableValue},on:{\"click\":function($event){return _vm.propertyClicked(property)}}},[_vm._v(\"\\n            \"+_vm._s(property)+\"\\n            \"),_c('span',{staticClass:\"value\"})])}),0)])])]),(_vm.currentSelectedProperty.mode === 'write' &&\n  _vm.showDialogProperties.includes(_vm.getTemplateComponentName(_vm.currentSelectedProperty)))?[_c(_vm.getTemplateComponentName(_vm.currentSelectedProperty),{tag:\"component\",attrs:{\"property\":_vm.currentSelectedProperty,\"selectedShape\":_vm.selectedShape},on:{\"updateProperty\":_vm.updatePropertyInModel}})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!--表单信息区域-->\r\n  <div id=\"propertiesHelpWrapper\" class=\"col-xs-12\">\r\n    {{laneEnableValue}}\r\n    <div class=\"propertySection\" id=\"propertySection\"\r\n         :class=\"{collapsed: propertyWindowState.collapsed}\">\r\n      <div class=\"selected-item-section\">\r\n        <div class=\"clearfix\">\r\n          <div class=\"pull-right\" v-if=\"selectedItem.auditData && selectedItem.auditData.createDate\">\r\n            <strong>{{$t('ELEMENT.DATE_CREATED')}}: </strong> {{selectedItem.auditData.createDate}}\r\n          </div>\r\n          <div class=\"pull-right\" v-if=\"selectedItem.auditData && selectedItem.auditData.author\">\r\n            <strong>{{$t('ELEMENT.AUTHOR')}}: </strong> {{selectedItem.auditData.author}}\r\n          </div>\r\n          <div class=\"selected-item-title\">\r\n            <a @click=\"propertyWindowStateToggle\">\r\n              <i class=\"glyphicon\"\r\n                 :class=\"{'glyphicon-chevron-right': propertyWindowState.collapsed,\r\n                 'glyphicon-chevron-down': !propertyWindowState.collapsed}\"></i>\r\n              <span v-show=\"selectedItem.title != undefined && selectedItem.title != null &&\r\n              selectedItem.title.length > 0\">{{selectedItem.title}}</span>\r\n              <span v-show=\"!selectedItem || selectedItem.title == undefined ||\r\n              selectedItem.title == null || selectedItem.title.length == 0\">{{modelData.name}}</span>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class=\"selected-item-body\">\r\n          <div>\r\n            <div class=\"property-row\"\r\n                 v-for=\"(property, index) in selectedItem.properties\"\r\n                 :key=\"index\"\r\n                 :class=\"{'clear': index%2 == 0,\r\n                 'disable-pro': currentShapeType.endsWith('Lane') &&\r\n                 laneEnableValue &&\r\n                 laneValueAry.includes(property.key) &&\r\n                 property.key != laneEnableValue}\"\r\n                 @click=\"propertyClicked(property)\">\r\n              {{property}}\r\n              <!--<span class=\"title\" v-if=\"!property.hidden\">{{ property.title }}&nbsp;:</span>-->\r\n              <!--<span class=\"title-removed\" v-if=\"property.hidden\">-->\r\n                <!--<i>{{ property.title }}&nbsp;({{$t('PROPERTY.REMOVED')}})&nbsp;:</i>-->\r\n              <!--</span>-->\r\n              <span class=\"value\">\r\n                <!--{{getTemplateComponentName(property)}}||-->\r\n\r\n                <!--当编辑的属性非弹窗形式，使用此处渲染-->\r\n                <!--<template v-if=\"!(property.mode === 'write' &&-->\r\n    <!--showDialogProperties.includes(getTemplateComponentName(currentSelectedProperty)))\">-->\r\n\r\n                  <!--<component v-bind:is=\"getTemplateComponentName(property)\"-->\r\n                             <!--:property=\"property\"-->\r\n                             <!--:key=\"`${property.mode}-${property.key}`\"-->\r\n                             <!--:selectedShape=\"selectedShape\"-->\r\n                             <!--@updateProperty=\"updatePropertyInModel\"></component>-->\r\n                <!--</template>-->\r\n\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--当编辑的属性弹窗形式，使用此处渲染，避免弹窗关闭时 与 propertyClicked 事件的冲突-->\r\n    <template v-if=\"currentSelectedProperty.mode === 'write' &&\r\n    showDialogProperties.includes(getTemplateComponentName(currentSelectedProperty))\">\r\n      <component v-bind:is=\"getTemplateComponentName(currentSelectedProperty)\"\r\n                 :property=\"currentSelectedProperty\"\r\n                 :selectedShape=\"selectedShape\"\r\n                 @updateProperty=\"updatePropertyInModel\"></component>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import FLOW_eventBus from 'src/flowable/FLOW_eventBus'\r\n  import ORYX_CONFIG from 'src/oryx/CONFIG'\r\n  // import defaultValueDisplayTemplate from '@/components/propertyForm/default-value-display-template'\r\n  // import stringPropertyWriteModeTemplate from '@/components/propertyForm/string-property-write-mode-template'\r\n  // import textPropertyWriteTemplate from '@/components/propertyForm/text-property-write-template'\r\n  // import processHistorylevelPropertyWriteTemplate\r\n  //   from '@/components/propertyForm/process-historylevel-property-write-template'\r\n  // import booleanPropertyTemplate from '@/components/propertyForm/boolean-property-template'\r\n  // import dataPropertiesDisplayTemplate from '@/components/propertyForm/data-properties-display-template'\r\n  // import dataPropertiesWriteTemplate from '@/components/propertyForm/data-properties-write-template'\r\n  // import executionListenersDisplayTemplate from '@/components/propertyForm/execution-listeners-display-template'\r\n  // import executionListenersWriteTemplate from '@/components/propertyForm/execution-listeners-write-template'\r\n  // import eventListenersDisplayTemplate from '@/components/propertyForm/event-listeners-display-template'\r\n  // import eventListenersWriteTemplate from '@/components/propertyForm/event-listeners-write-template'\r\n  // import signalDefinitionsDisplayTemplate from '@/components/propertyForm/signal-definitions-display-template'\r\n  // import signalDefinitionsWriteTemplate from '@/components/propertyForm/signal-definitions-write-template'\r\n  // import messageDefinitionsDisplayTemplate from '@/components/propertyForm/message-definitions-display-template'\r\n  // import messageDefinitionsWriteTemplate from '@/components/propertyForm/message-definitions-write-template'\r\n  //\r\n  // import formReferenceDisplayTemplate from '@/components/propertyForm/form-reference-display-template'\r\n  // import formReferenceWriteTemplate from '@/components/propertyForm/form-reference-write-template'\r\n  // import formPropertiesDisplayTemplate from '@/components/propertyForm/form-properties-display-template'\r\n  // import formPropertiesWriteTemplate from '@/components/propertyForm/form-properties-write-template'\r\n  // import assignmentDisplayTemplate from '@/components/propertyForm/assignment-display-template'\r\n  // import assignmentWriteTemplate from '@/components/propertyForm/assignment-write-template'\r\n  // import taskListenersDisplayTemplate from '@/components/propertyForm/task-listeners-display-template'\r\n  // import taskListenersWriteTemplate from '@/components/propertyForm/task-listeners-write-template'\r\n  // import conditionExpressionDisplayTemplate from '@/components/propertyForm/condition-expression-display-template'\r\n  // import conditionExpressionWriteTemplate from '@/components/propertyForm/condition-expression-write-template'\r\n  // import multiinstancePropertyWriteTemplate from '@/components/propertyForm/multiinstance-property-write-template'\r\n  // import lanePropertyWriteTemplate from '@/components/propertyForm/lane-property-write-template'\r\n  // import systemWriteTemplate from '@/components/propertyForm/system-write-template'\r\n\r\n  export default {\r\n    name: 'propertySection',\r\n    data () {\r\n      return {\r\n        propertyWindowState: { 'collapsed': false },\r\n        currentSelectedProperty: {},\r\n        showDialogProperties: [\r\n          'text-property-write-template',\r\n          'data-properties-write-template',\r\n          'event-listeners-write-template',\r\n          'execution-listeners-write-template',\r\n          'signal-definitions-write-template',\r\n          'message-definitions-write-template',\r\n          'form-reference-write-template',\r\n          'form-properties-write-template',\r\n          'assignment-write-template',\r\n          'condition-expression-write-template'\r\n        ],\r\n        selectedItem: {\r\n          title: '',\r\n          properties: [],\r\n          auditData: {}\r\n        },\r\n        selectedShape: {},\r\n        laneEnableValue: '',\r\n        laneValueAry: ['oryx-activerole', 'oryx-activesystem']\r\n      }\r\n    },\r\n    props: {\r\n      editorManager: {}\r\n    },\r\n    components: {\r\n      // defaultValueDisplayTemplate, stringPropertyWriteModeTemplate,\r\n      // textPropertyWriteTemplate,\r\n      // processHistorylevelPropertyWriteTemplate,\r\n      // booleanPropertyTemplate,\r\n      // dataPropertiesDisplayTemplate, dataPropertiesWriteTemplate,\r\n      // executionListenersDisplayTemplate, executionListenersWriteTemplate,\r\n      // eventListenersDisplayTemplate, eventListenersWriteTemplate,\r\n      // signalDefinitionsDisplayTemplate, signalDefinitionsWriteTemplate,\r\n      // messageDefinitionsDisplayTemplate, messageDefinitionsWriteTemplate,\r\n      // formReferenceDisplayTemplate, formReferenceWriteTemplate,\r\n      // formPropertiesDisplayTemplate, formPropertiesWriteTemplate,\r\n      // assignmentDisplayTemplate, assignmentWriteTemplate,\r\n      // taskListenersDisplayTemplate, taskListenersWriteTemplate,\r\n      // conditionExpressionDisplayTemplate, conditionExpressionWriteTemplate,\r\n      // multiinstancePropertyWriteTemplate,\r\n      // lanePropertyWriteTemplate,\r\n      // systemWriteTemplate\r\n    },\r\n    mounted () {\r\n      /*\r\n       * Listen to property updates and act upon them\r\n       */\r\n      FLOW_eventBus.addListener(ORYX_CONFIG.EVENT_TYPE_PROPERTY_VALUE_CHANGED, (event) => {\r\n        if (event.property && event.property.key) {\r\n          // If the name property is been updated, we also need to change the title of the currently selected item\r\n          if (event.property.key === 'oryx-name' && this.selectedItem !== undefined && this.selectedItem !== null) {\r\n            this.selectedItem.title = event.newValue\r\n          }\r\n          // Update \"no value\" flag\r\n          event.property.noValue = (event.property.value === undefined\r\n            || event.property.value === null\r\n            || event.property.value.length == 0)\r\n\r\n          if (this.laneValueAry.includes(event.property.key)) {\r\n            this.laneEnableValue = event.property.noValue ? '' : event.property.key\r\n          }\r\n        }\r\n\r\n      })\r\n      FLOW_eventBus.addListener(ORYX_CONFIG.EVENT_TYPE_SELECTION_CHANGED, (event) => {\r\n        this.laneEnableValue = ''\r\n        if (this.currentSelectedProperty.mode != 'write') {\r\n          this.selectedItem = event.selectedItem\r\n          this.selectedShape = event.selectedShape\r\n        }\r\n        if (event.selectedShape.getStencil().id().endsWith('Lane')) {\r\n          event.selectedItem.properties.map((pro) => {\r\n            if (this.laneValueAry.includes(pro.key) && !pro.noValue) {\r\n              this.laneEnableValue = pro.key\r\n            }\r\n          })\r\n        }\r\n      })\r\n      FLOW_eventBus.addListener(ORYX_CONFIG.EVENT_TYPE_DOUBLE_CLICK, (event, shape) => {\r\n        console.log(111, shape)\r\n      })\r\n    },\r\n    computed: {\r\n      modelData () {\r\n        return this.editorManager ? this.editorManager.getBaseModelData() : {}\r\n      },\r\n      currentShapeType () {\r\n        return this.selectedShape ? this.selectedShape.getStencil().idWithoutNs() : null\r\n      }\r\n    },\r\n    methods: {\r\n      propertyWindowStateToggle () {\r\n        this.propertyWindowState.collapsed = !this.propertyWindowState.collapsed\r\n        setTimeout(function () {\r\n          window.dispatchEvent(new Event('resize'))\r\n        }, 100)\r\n      },\r\n      /* Click handler for clicking a property */\r\n      propertyClicked (property) {\r\n        if (!(this.currentShapeType.endsWith('Lane') && this.laneEnableValue &&\r\n          this.laneValueAry.includes(property.key) && property.key != this.laneEnableValue)) {\r\n          if (!property.hidden) {\r\n            property.mode = 'write'\r\n          }\r\n          this.currentSelectedProperty = property\r\n        }\r\n      },\r\n      // 获取字段对应的渲染组件\r\n      getTemplateComponentName (property) {\r\n        let templateUrl = null\r\n        if (!property.hasReadWriteMode) {\r\n          templateUrl = property.templateUrl\r\n        }\r\n        if (property.hasReadWriteMode && property.mode == 'read') {\r\n          templateUrl = property.readModeTemplateUrl\r\n        }\r\n        if (property.hasReadWriteMode && property.mode == 'write') {\r\n          templateUrl = property.writeModeTemplateUrl\r\n        }\r\n        return templateUrl\r\n      },\r\n\r\n      /* Method available to all sub controllers (for property controllers) to update the internal Oryx model */\r\n      updatePropertyInModel ({ property, shapeId }) {\r\n        var shape = this.selectedShape\r\n        // Some updates may happen when selected shape is already changed, so when an additional\r\n        // shapeId is supplied, we need to make sure the correct shape is updated (current or previous)\r\n        if (shapeId) {\r\n          if (shape.id != shapeId && this.previousSelectedShape && this.previousSelectedShape.id == shapeId) {\r\n            shape = this.previousSelectedShape\r\n          } else {\r\n            shape = null\r\n          }\r\n        }\r\n\r\n        if (!shape) {\r\n          // When no shape is selected, or no shape is found for the alternative\r\n          // shape ID, do nothing\r\n          return\r\n        }\r\n\r\n        let key = property.key\r\n        let newValue = property.value\r\n        let oldValue = shape.properties.get(key)\r\n\r\n        const _this = this\r\n        if (newValue != oldValue) {\r\n          this.editorManager.assignCommand('SetProperty', key, oldValue, newValue, shape, _this.editorManager.getEditor())\r\n          this.editorManager.handleEvents({\r\n            type: ORYX_CONFIG.EVENT_PROPWINDOW_PROP_CHANGED,\r\n            elements: [shape],\r\n            key: key\r\n          })\r\n\r\n          // Switch the property back to read mode, now the update is done\r\n          property.mode = 'read'\r\n\r\n          // Fire event to all who is interested\r\n          // Fire event to all who want to know about this\r\n          var event = {\r\n            type: ORYX_CONFIG.EVENT_TYPE_PROPERTY_VALUE_CHANGED,\r\n            property: property,\r\n            oldValue: oldValue,\r\n            newValue: newValue\r\n          }\r\n\r\n          this.editorManager.dispatchFlowEvent(event.type, event)\r\n        } else {\r\n          // Switch the property back to read mode, no update was needed\r\n          property.mode = 'read'\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  #propertiesHelpWrapper{\r\n    z-index: 200;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=b1d41464&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=b1d41464&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b1d41464\",\n  null\n  \n)\n\nexport default component.exports","import propertySection from './src/main.vue'\r\n\r\npropertySection.install = function (Vue) {\r\n  Vue.component(propertySection.name, propertySection)\r\n}\r\n\r\nexport default propertySection\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"full-height\"},[_c('div',{staticClass:\"navbar navbar-fixed-top navbar-inverse\",attrs:{\"role\":\"navigation\",\"id\":\"main-header\"}},[_c('router-link',{attrs:{\"to\":\"/list\"}},[_vm._v(\"流程图列表\")]),_vm._v(\" =============\\n    \"),_c('router-link',{attrs:{\"to\":\"/design/kpm/1\"}},[_vm._v(\"KPM-流程图\")]),_vm._v(\"  =============\\n    \"),_c('router-link',{attrs:{\"to\":\"/design/bpm/1\"}},[_vm._v(\"BPM-流程图\")])],1),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"full-height\">\r\n    <div class=\"navbar navbar-fixed-top navbar-inverse\" role=\"navigation\" id=\"main-header\">\r\n      <router-link to=\"/list\">流程图列表</router-link> =============\r\n      <router-link to=\"/design/kpm/1\">KPM-流程图</router-link>  =============\r\n      <router-link to=\"/design/bpm/1\">BPM-流程图</router-link>\r\n    </div>\r\n\r\n    <router-view></router-view>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n  export default {\r\n    name: 'example',\r\n    data () {\r\n      return {}\r\n    },\r\n    created () {},\r\n    computed: {},\r\n    mounted () {\r\n\r\n    },\r\n    methods: {\r\n\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\">\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=ac3515fc&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport navConf from '@/nav.config.json'\r\nimport Home from './views/Home.vue'\r\n\r\nVue.use(Router)\r\n\r\nlet routes = []\r\n\r\nObject.keys(navConf).forEach(header => {\r\n  routes = routes.concat(navConf[header])\r\n})\r\n\r\n\r\nconst addComponent = (router, prefix = '/docs') => {\r\n  router.forEach(route => {\r\n    if (route.items) {\r\n      addComponent(route.items, prefix + (route.path || ''))\r\n      routes = routes.concat(route.items)\r\n    } else {\r\n      if (route.path) {\r\n        route.path = prefix + route.path\r\n      }\r\n      route.component = r =>\r\n        require.ensure([], () => r(require(`./docs/${route.name}.md`)))\r\n    }\r\n  })\r\n}\r\naddComponent(routes)\r\n\r\n// let availableRoutes = routes.filter(item => item.path)\r\nlet availableRoutes = [{\r\n  path: '/docs',\r\n  name: 'docs',\r\n  redirect: '/docs/introduce',\r\n  component: () => import('./docs/docs.vue'),\r\n  children: routes.filter(item => item.path)\r\n}]\r\n\r\nconst createRouter = () => new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      name: 'home',\r\n      redirect: '/design/kpm/1',\r\n      component: Home\r\n    },\r\n    {\r\n      path: '/about',\r\n      name: 'about',\r\n      // route level code-splitting\r\n      // this generates a separate chunk (about.[hash].js) for this route\r\n      // which is lazy-loaded when the route is visited.\r\n      component: () => import(/* webpackChunkName: \"about\" */ './views/About.vue')\r\n    },\r\n    {\r\n      path: '/list',\r\n      name: 'list',\r\n      component: () => import('./views/list.vue')\r\n    },\r\n    {\r\n      path: '/design/kpm/:id',\r\n      name: 'design-kpm',\r\n      component: () => import('./views/Design-kpm.vue')\r\n    },\r\n    {\r\n      path: '/design/bpm/:id',\r\n      name: 'design-bpm',\r\n      component: () => import('./views/Design.vue')\r\n    },\r\n    // {\r\n    //   path: '/docs',\r\n    //   name: 'docs',\r\n    //   redirect: '/docs/introduce',\r\n    //   // component: { render (c) { return c('router-view') } },\r\n    //   component: () => import('./docs/docs.vue'),\r\n    //   children: [\r\n    //     {\r\n    //       path: 'introduce',\r\n    //       name: 'introduce',\r\n    //       component: () => import('./docs/introduce.md')\r\n    //     }\r\n    //   ]\r\n    // }\r\n  ]\r\n})\r\n\r\nconst router = createRouter()\r\nrouter.addRoutes(availableRoutes)\r\n\r\nexport default router\r\n","// export class Svg {\r\n//   constructor () {\r\n//     this.VERSION = 1.0\r\n//     this.NAMESPACE = 'http://www.w3.org/2000/svg'\r\n//   }\r\n// }\r\n\r\nconst Svg = {\r\n  VERSION: '1.0',\r\n  NAMESPACE: 'http://www.w3.org/2000/svg'\r\n}\r\n\r\nclass PathLexer {\r\n  VERSION = 1.0\r\n\r\n  constructor (pathData) {\r\n    if (pathData == null) pathData = ''\r\n    this.setPathData(pathData)\r\n  }\r\n\r\n  setPathData (pathData) {\r\n    if (typeof(pathData) !== 'string') throw new Error('PathLexer.setPathData: The first parameter must be a string')\r\n    this._pathData = pathData\r\n  }\r\n\r\n  getNextToken () {\r\n    let result = null\r\n    let d = this._pathData\r\n    while (result == null) {\r\n      if (d == null || d === '') {\r\n        result = new PathToken(PathToken_const.EOD, '')\r\n      } else if (d.match(/^([ \\t\\r\\n,]+)/)) {\r\n        d = d.substr(RegExp.$1.length)\r\n      } else if (d.match(/^([AaCcHhLlMmQqSsTtVvZz])/)) {\r\n        result = new PathToken(PathToken_const.COMMAND, RegExp.$1)\r\n        d = d.substr(RegExp.$1.length)\r\n      } else if (d.match(/^(([-+]?[0-9]+(\\.[0-9]*)?|[-+]?\\.[0-9]+)([eE][-+]?[0-9]+)?)/)) {\r\n        result = new PathToken(PathToken_const.NUMBER, parseFloat(RegExp.$1))\r\n        d = d.substr(RegExp.$1.length)\r\n      } else {\r\n        throw new Error('PathLexer.getNextToken: unrecognized path data ' + d)\r\n      }\r\n    }\r\n    this._pathData = d\r\n    return result\r\n  }\r\n}\r\n\r\nconst PathToken_const = {\r\n  UNDEFINED: 0,\r\n  COMMAND: 1,\r\n  NUMBER: 2,\r\n  EOD: 3,\r\n}\r\n\r\nclass PathToken {\r\n  constructor (type, text) {\r\n    if (arguments.length > 0) {\r\n      this.init(type, text)\r\n    }\r\n  }\r\n\r\n  init (type, text) {\r\n    this.type = type\r\n    this.text = text\r\n  }\r\n\r\n  typeis (type) {\r\n    return this.type === type\r\n  }\r\n}\r\n\r\nconst PathParser_const = {\r\n  PARAMCOUNT: { A: 7, C: 6, H: 1, L: 2, M: 2, Q: 4, S: 4, T: 2, V: 1, Z: 0 },\r\n  METHODNAME: {\r\n    A: 'arcAbs',\r\n    a: 'arcRel',\r\n    C: 'curvetoCubicAbs',\r\n    c: 'curvetoCubicRel',\r\n    H: 'linetoHorizontalAbs',\r\n    h: 'linetoHorizontalRel',\r\n    L: 'linetoAbs',\r\n    l: 'linetoRel',\r\n    M: 'movetoAbs',\r\n    m: 'movetoRel',\r\n    Q: 'curvetoQuadraticAbs',\r\n    q: 'curvetoQuadraticRel',\r\n    S: 'curvetoCubicSmoothAbs',\r\n    s: 'curvetoCubicSmoothRel',\r\n    T: 'curvetoQuadraticSmoothAbs',\r\n    t: 'curvetoQuadraticSmoothRel',\r\n    V: 'linetoVerticalAbs',\r\n    v: 'linetoVerticalRel',\r\n    Z: 'closePath',\r\n    z: 'closePath'\r\n  }\r\n}\r\nexport class PathParser {\r\n  constructor () {\r\n    this._lexer = new PathLexer()\r\n    this._handler = null\r\n  }\r\n\r\n  parsePath (path) {\r\n    if (path == null || path.namespaceURI !== Svg.NAMESPACE || path.localName !== 'path') {\r\n      throw new Error('PathParser.parsePath: The first parameter must be an SVG path element')\r\n    }\r\n    this.parseData(path.getAttributeNS(null, 'd'))\r\n  }\r\n\r\n  parseData (pathData) {\r\n    if (typeof(pathData) !== 'string') {\r\n      throw new Error('PathParser.parseData: The first parameter must be a string')\r\n    }\r\n    if (this._handler != null && this._handler.beginParse != null) {\r\n      this._handler.beginParse()\r\n    }\r\n    let lexer = this._lexer\r\n    lexer.setPathData(pathData)\r\n    let mode = 'BOP'\r\n    let token = lexer.getNextToken()\r\n    while (!token.typeis(PathToken_const.EOD)) {\r\n      let param_count\r\n      let params =[]\r\n      switch (token.type) {\r\n        case PathToken_const.COMMAND:\r\n          if (mode === 'BOP' && token.text !== 'M' && token.text !== 'm') {\r\n            throw new Error('PathParser.parseData: a path must begin with a moveto command')\r\n          }\r\n          mode = token.text\r\n          param_count = PathParser_const.PARAMCOUNT[token.text.toUpperCase()]\r\n          token = lexer.getNextToken()\r\n          break\r\n        case PathToken_const.NUMBER:\r\n          break\r\n        default:\r\n          throw new Error('PathParser.parseData: unrecognized token type: ' + token.type)\r\n      }\r\n      for (let i = 0; i < param_count; i++) {\r\n        switch (token.type) {\r\n          case PathToken_const.COMMAND:\r\n            throw new Error('PathParser.parseData: parameter must be a number: ' + token.text)\r\n          case PathToken_const.NUMBER:\r\n            params[i] = token.text - 0\r\n            break\r\n          default:\r\n            throw new Error('PathParser.parseData: unrecognized token type: ' + token.type)\r\n        }\r\n        token = lexer.getNextToken()\r\n      }\r\n      if (this._handler != null) {\r\n        let handler = this._handler\r\n        let method = PathParser_const.METHODNAME[mode]\r\n        if (handler[method] != null) handler[method].apply(handler, params)\r\n      }\r\n      if (mode === 'M') mode = 'L'\r\n      if (mode === 'm') mode = 'l'\r\n    }\r\n  }\r\n\r\n  setHandler (handler) {\r\n    this._handler = handler\r\n  }\r\n}\r\n\r\n\r\n","import ORYX_Utils from '../../Utils'\r\nimport ORYX_Config from '../../CONFIG'\r\nimport Property from './Property'\r\n\r\n/**\r\n * Class Stencil\r\n * uses Prototpye 1.5.0\r\n * uses Inheritance\r\n *\r\n * This class represents one stencil of a stencil set.\r\n */\r\nexport default class Stencil {\r\n  constructor (jsonStencil, namespace, source, stencilSet, propertyPackages, defaultPosition) {\r\n    // arguments.callee.$.construct.apply(this, arguments); // super();\r\n    // check arguments and set defaults.\r\n    if (!jsonStencil) throw 'Stencilset seems corrupt.'\r\n    if (!namespace) throw 'Stencil does not provide namespace.'\r\n    if (!source) throw 'Stencil does not provide SVG source.'\r\n    if (!stencilSet) throw 'Fatal internal error loading stencilset.'\r\n    // if(!propertyPackages) throw \"Fatal internal error loading stencilset.\";\r\n\r\n    this._source = source\r\n    this._jsonStencil = jsonStencil\r\n    this._stencilSet = stencilSet\r\n    this._namespace = namespace\r\n    this._propertyPackages = propertyPackages\r\n\r\n    if (defaultPosition && !this._jsonStencil.position)\r\n      this._jsonStencil.position = defaultPosition\r\n\r\n    this._view = null\r\n    this._properties = new Hash()\r\n\r\n    // init all JSON values\r\n    if (!this._jsonStencil.type ||\r\n      !(this._jsonStencil.type === 'edge' || this._jsonStencil.type === 'node')) {\r\n      throw 'ORYX.Core.StencilSet.Stencil(construct): Type is not defined.'\r\n    }\r\n    if (!this._jsonStencil.id || this._jsonStencil.id === '') {\r\n      throw 'ORYX.Core.StencilSet.Stencil(construct): Id is not defined.'\r\n    }\r\n    if (!this._jsonStencil.title || this._jsonStencil.title === '') {\r\n      throw 'ORYX.Core.StencilSet.Stencil(construct): Title is not defined.'\r\n    }\r\n\r\n    if (!this._jsonStencil.description) {\r\n      this._jsonStencil.description = ''\r\n    }\r\n    if (!this._jsonStencil.groups) {\r\n      this._jsonStencil.groups = []\r\n    }\r\n    if (!this._jsonStencil.roles) {\r\n      this._jsonStencil.roles = []\r\n    }\r\n\r\n    // add id of stencil to its roles\r\n    this._jsonStencil.roles.push(this._jsonStencil.id)\r\n\r\n    // prepend namespace to each role\r\n    this._jsonStencil.roles.each((function (role, index) {\r\n      this._jsonStencil.roles[index] = namespace + role\r\n    }).bind(this))\r\n\r\n    // delete duplicate roles\r\n    this._jsonStencil.roles = this._jsonStencil.roles.uniq()\r\n\r\n    // make id unique by prepending namespace of stencil set\r\n    this._jsonStencil.id = namespace + this._jsonStencil.id\r\n\r\n    this.postProcessProperties()\r\n\r\n    // init serialize callback\r\n    if (!this._jsonStencil.serialize) {\r\n      this._jsonStencil.serialize = {}\r\n      //this._jsonStencil.serialize = function(shape, data) { return data;};\r\n    }\r\n\r\n    // init deserialize callback\r\n    if (!this._jsonStencil.deserialize) {\r\n      this._jsonStencil.deserialize = {}\r\n      // this._jsonStencil.deserialize = function(shape, data) { return data;};\r\n    }\r\n\r\n    // init layout callback\r\n    if (!this._jsonStencil.layout) {\r\n      this._jsonStencil.layout = []\r\n      // this._jsonStencil.layout = function() {return true;}\r\n    }\r\n\r\n    // TODO does not work correctly, if the url does not exist\r\n    // How to guarantee that the view is loaded correctly before leaving the constructor???\r\n    const url = source + 'view/' + jsonStencil.view\r\n    // override content type when this is webkit.\r\n\r\n    /*\r\n     if(Prototype.Browser.WebKit) {\r\n\r\n     var req = new XMLHttpRequest;\r\n     req.open(\"GET\", url, false);\r\n     req.overrideMimeType('text/xml');\r\n     req.send(null);\r\n     req.onload = (function() { _loadSVGOnSuccess(req.responseXML); }).bind(this);\r\n\r\n     // else just do it.\r\n     } else\r\n     */\r\n\r\n    if (this._jsonStencil.view.trim().match(/</)) {\r\n      let parser = new DOMParser()\r\n      let xml = parser.parseFromString(this._jsonStencil.view, 'text/xml')\r\n\r\n      // check if result is a SVG document\r\n      if (ORYX_Utils.checkClassType(xml.documentElement, SVGSVGElement)) {\r\n        this._view = xml.documentElement\r\n      } else {\r\n        throw 'ORYX.Core.StencilSet.Stencil(_loadSVGOnSuccess): The response is not a valid SVG document.'\r\n      }\r\n    } else {\r\n      new Ajax.Request(url, {\r\n        asynchronous: false, method: 'get',\r\n        onSuccess: this._loadSVGOnSuccess.bind(this),\r\n        onFailure: this._loadSVGOnFailure.bind(this)\r\n      })\r\n    }\r\n  }\r\n\r\n  postProcessProperties () {\r\n    // add image path to icon\r\n    this._jsonStencil.icon = ORYX_Config.SERVER_HANDLER_ROOT + '/stencilsetitem/' + this._jsonStencil.objectId + '/image'\r\n\r\n    // init property packages\r\n    if (this._jsonStencil.propertyPackages && this._jsonStencil.propertyPackages instanceof Array) {\r\n      const hiddenPropertyPackages = this._jsonStencil.hiddenPropertyPackages\r\n\r\n      this._jsonStencil.propertyPackages.each((function (ppId) {\r\n        const pp = this._propertyPackages.get(ppId)\r\n        if (pp) {\r\n          pp.each((function (prop) {\r\n            let oProp = new Property(prop, this._namespace, this)\r\n            let key = oProp.prefix() + '-' + oProp.id()\r\n            this._properties.set(key, oProp)\r\n\r\n            // Check if we need to hide this property (ie it is there for display purposes,\r\n            // if the user has filled it in, but it can no longer be edited)\r\n            if (hiddenPropertyPackages.indexOf(oProp.id()) > -1) {\r\n              oProp.hide()\r\n            }\r\n\r\n          }).bind(this))\r\n        }\r\n      }).bind(this))\r\n    }\r\n\r\n    // init properties\r\n    if (this._jsonStencil.properties && this._jsonStencil.properties instanceof Array) {\r\n      this._jsonStencil.properties.each((function (prop) {\r\n        let oProp = new Property(prop, this._namespace, this)\r\n        let key = oProp.prefix() + '-' + oProp.id()\r\n        this._properties.set(key, oProp)\r\n      }).bind(this))\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * @param {ORYX.Core.StencilSet.Stencil} stencil\r\n   * @return {Boolean} True, if stencil has the same namespace and type.\r\n   */\r\n  equals (stencil) {\r\n    return (this.id() === stencil.id())\r\n  }\r\n\r\n  stencilSet () {\r\n    return this._stencilSet\r\n  }\r\n\r\n  type () {\r\n    return this._jsonStencil.type\r\n  }\r\n\r\n  namespace () {\r\n    return this._namespace\r\n  }\r\n\r\n  id () {\r\n    return this._jsonStencil.id\r\n  }\r\n\r\n  idWithoutNs () {\r\n    return this.id().replace(this.namespace(), '')\r\n  }\r\n\r\n  title () {\r\n    return this._jsonStencil.title\r\n  }\r\n\r\n  description () {\r\n    return this._jsonStencil.description\r\n  }\r\n\r\n  groups () {\r\n    return this._jsonStencil.groups\r\n  }\r\n\r\n  position () {\r\n    return (isNaN(this._jsonStencil.position) ? 0 : this._jsonStencil.position)\r\n  }\r\n\r\n  view () {\r\n    return this._view.cloneNode(true) || this._view\r\n  }\r\n\r\n  icon () {\r\n    return this._jsonStencil.icon\r\n  }\r\n\r\n  fixedAspectRatio () {\r\n    return this._jsonStencil.fixedAspectRatio === true\r\n  }\r\n\r\n  hasMultipleRepositoryEntries () {\r\n    return (this.getRepositoryEntries().length > 0)\r\n  }\r\n\r\n  getRepositoryEntries () {\r\n    return (this._jsonStencil.repositoryEntries) ?\r\n      $A(this._jsonStencil.repositoryEntries) : $A([])\r\n  }\r\n\r\n  properties () {\r\n    return this._properties.values()\r\n  }\r\n\r\n  property (id) {\r\n    return this._properties.get(id)\r\n  }\r\n\r\n  roles () {\r\n    return this._jsonStencil.roles\r\n  }\r\n\r\n  defaultAlign () {\r\n    if (!this._jsonStencil.defaultAlign)\r\n      return 'east'\r\n    return this._jsonStencil.defaultAlign\r\n  }\r\n\r\n  serialize (shape, data) {\r\n    return this._jsonStencil.serialize\r\n    // return this._jsonStencil.serialize(shape, data);\r\n  }\r\n\r\n  deserialize (shape, data) {\r\n    return this._jsonStencil.deserialize\r\n    // return this._jsonStencil.deserialize(shape, data);\r\n  }\r\n\r\n  // in which case is targetShape used?\r\n  //\tlayout(shape, targetShape) {\r\n  //\t\treturn this._jsonStencil.layout(shape, targetShape);\r\n  //\t},\r\n  // layout property to store events for layouting in plugins\r\n  layout (shape) {\r\n    return this._jsonStencil.layout\r\n  }\r\n\r\n  addProperty (property, namespace) {\r\n    if (property && namespace) {\r\n      let oProp = new Property(property, namespace, this)\r\n      this._properties[oProp.prefix() + '-' + oProp.id()] = oProp\r\n    }\r\n  }\r\n\r\n  removeProperty (propertyId) {\r\n    if (propertyId) {\r\n      let oProp = this._properties.values().find(function (prop) {\r\n        return (propertyId == prop.id())\r\n      })\r\n      if (oProp)\r\n        delete this._properties[oProp.prefix() + '-' + oProp.id()]\r\n    }\r\n  }\r\n\r\n  _loadSVGOnSuccess (result) {\r\n    let xml = null\r\n\r\n    /*\r\n     * We want to get a dom object for the requested file. Unfortunately,\r\n     * safari has some issues here. this is meant as a fallback for all\r\n     * browsers that don't recognize the svg mimetype as XML but support\r\n     * data: urls on Ajax calls.\r\n     */\r\n\r\n    // responseXML != undefined.\r\n    // if(!(result.responseXML))\r\n\r\n    // get the dom by data: url.\r\n    // xml = _evenMoreEvilHack(result.responseText, 'text/xml');\r\n\r\n    // else\r\n\r\n    // get it the usual way.\r\n    xml = result.responseXML\r\n\r\n    // check if result is a SVG document\r\n    if (ORYX_Utils.checkClassType(xml.documentElement, SVGSVGElement)) {\r\n      this._view = xml.documentElement\r\n    } else {\r\n      throw 'ORYX.Core.StencilSet.Stencil(_loadSVGOnSuccess): The response is not a SVG document.'\r\n    }\r\n  }\r\n\r\n  _loadSVGOnFailure (result) {\r\n    throw 'ORYX.Core.StencilSet.Stencil(_loadSVGOnFailure): Loading SVG document failed.'\r\n  }\r\n\r\n  toString () {\r\n    return 'Stencil ' + this.title() + ' (' + this.id() + ')'\r\n  }\r\n}\r\n\r\n","import Shape from './Shape'\r\nimport ORYX_SVG from './SVG'\r\nimport ORYX_Math from './Math'\r\nimport ORYX_Utils from '../Utils'\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Controls from './Controls'\r\nimport ERDF from '../ERDF'\r\n\r\nimport ORYX_UIObject from '../core/UIObject'\r\nimport ORYX_Node from '../core/Node'\r\nimport { PathParser } from '../path_parser'\r\n\r\n/**\r\n * @classDescription Abstract base class for all connections.\r\n * @extends {ORYX.Core.Shape}\r\n * @param options {Object}\r\n *\r\n * TODO da die verschiebung der Edge nicht ueber eine\r\n *  translation gemacht wird, die sich auch auf alle kind UIObjects auswirkt,\r\n *  muessen die kinder hier beim verschieben speziell betrachtet werden.\r\n *  Das sollte ueberarbeitet werden.\r\n *\r\n */\r\nexport default class Edge extends Shape {\r\n  /**\r\n   * Constructor\r\n   * @param {Object} options\r\n   * @param {Stencil} stencil\r\n   */\r\n  constructor (options, stencil, facade) {\r\n    // arguments.callee.$.construct.apply(this, arguments);\r\n    super(...arguments)\r\n    this.isMovable = true\r\n    this.isSelectable = true\r\n    this._dockerUpdated = false\r\n    this._markers = new Hash() //a hash map of SVGMarker objects where keys are the marker ids\r\n    this._paths = []\r\n    this._interactionPaths = []\r\n    this._dockersByPath = new Hash()\r\n    this._markersByPath = new Hash()\r\n\r\n    /* Data structures to store positioning information of attached child nodes */\r\n    this.attachedNodePositionData = new Hash()\r\n\r\n    //TODO was muss hier initial erzeugt werden?\r\n    let stencilNode = this.node.childNodes[0].childNodes[0]\r\n    stencilNode = ORYX_Utils.graft('http://www.w3.org/2000/svg', stencilNode, ['g', {\r\n      'pointer-events': 'painted'\r\n    }])\r\n\r\n    // Add to the EventHandler\r\n    this.addEventHandlers(stencilNode.parentNode)\r\n\r\n    this._oldBounds = this.bounds.clone()\r\n\r\n    // load stencil\r\n    this._init(this._stencil.view())\r\n\r\n    if (stencil instanceof Array) {\r\n      this.deserialize(stencil)\r\n    }\r\n  }\r\n\r\n  _update (force) {\r\n    if (this._dockerUpdated || this.isChanged || force) {\r\n      this.dockers.invoke('update')\r\n\r\n      // if (false && (this.bounds.width() === 0 || this.bounds.height() === 0)) {\r\n      //   let width = this.bounds.width()\r\n      //   let height = this.bounds.height()\r\n      //   this.bounds.extend({\r\n      //     x: width === 0 ? 2 : 0,\r\n      //     y: height === 0 ? 2 : 0\r\n      //   })\r\n      //   this.bounds.moveBy({\r\n      //     x: width === 0 ? -1 : 0,\r\n      //     y: height === 0 ? -1 : 0\r\n      //   })\r\n      // }\r\n\r\n      // TODO: Bounds muss abhaengig des Eltern-Shapes gesetzt werden\r\n      let upL = this.bounds.upperLeft()\r\n      let oldUpL = this._oldBounds.upperLeft()\r\n      let oldWidth = this._oldBounds.width() === 0 ? this.bounds.width() : this._oldBounds.width()\r\n      let oldHeight = this._oldBounds.height() === 0 ? this.bounds.height() : this._oldBounds.height()\r\n      let diffX = upL.x - oldUpL.x\r\n      let diffY = upL.y - oldUpL.y\r\n      let diffWidth = (this.bounds.width() / oldWidth) || 1\r\n      let diffHeight = (this.bounds.height() / oldHeight) || 1\r\n\r\n      this.dockers.each((function (docker) {\r\n        // Unregister on BoundsChangedCallback\r\n        docker.bounds.unregisterCallback(this._dockerChangedCallback)\r\n\r\n        // If there is any changes at the edge and is there is not an DockersUpdate\r\n        // set the new bounds to the docker\r\n        if (!this._dockerUpdated) {\r\n          docker.bounds.moveBy(diffX, diffY)\r\n\r\n          if (diffWidth !== 1 || diffHeight !== 1) {\r\n            let relX = docker.bounds.upperLeft().x - upL.x\r\n            let relY = docker.bounds.upperLeft().y - upL.y\r\n            docker.bounds.moveTo(upL.x + relX * diffWidth, upL.y + relY * diffHeight)\r\n          }\r\n        }\r\n        // Do Docker update and register on DockersBoundChange\r\n        docker.update()\r\n        docker.bounds.registerCallback(this._dockerChangedCallback)\r\n\r\n      }).bind(this))\r\n\r\n      if (this._dockerUpdated) {\r\n        let a = this.dockers.first().bounds.center()\r\n        let b = this.dockers.first().bounds.center()\r\n\r\n        this.dockers.each((function (docker) {\r\n          let center = docker.bounds.center()\r\n          a.x = Math.min(a.x, center.x)\r\n          a.y = Math.min(a.y, center.y)\r\n          b.x = Math.max(b.x, center.x)\r\n          b.y = Math.max(b.y, center.y)\r\n        }).bind(this))\r\n\r\n        // set the bounds of the the association\r\n        this.bounds.set(Object.clone(a), Object.clone(b))\r\n      }\r\n\r\n      upL = this.bounds.upperLeft()\r\n      oldUpL = this._oldBounds.upperLeft()\r\n      diffWidth = (this.bounds.width() / (oldWidth || this.bounds.width()))\r\n      diffHeight = (this.bounds.height() / (oldHeight || this.bounds.height()))\r\n      diffX = upL.x - oldUpL.x\r\n      diffY = upL.y - oldUpL.y\r\n\r\n      // reposition labels\r\n      this.getLabels().each(function (label) {\r\n        if (label.getReferencePoint()) {\r\n          let ref = label.getReferencePoint()\r\n          let from = ref.segment.from, to = ref.segment.to\r\n          if (!from || !from.parent || !to || !to.parent) {\r\n            return\r\n          }\r\n\r\n          let fromPosition = from.bounds.center(), toPosition = to.bounds.center()\r\n\r\n          if (fromPosition.x === ref.segment.fromPosition.x && fromPosition.y === ref.segment.fromPosition.y &&\r\n            toPosition.x === ref.segment.toPosition.x && toPosition.y === ref.segment.toPosition.y && !ref.dirty) {\r\n            return\r\n          }\r\n\r\n          if (!this.parent.initializingShapes) {\r\n            let oldDistance = ORYX_Math.getDistanceBetweenTwoPoints(ref.segment.fromPosition, ref.segment.toPosition, ref.intersection)\r\n            let newIntersection = ORYX_Math.getPointBetweenTwoPoints(fromPosition, toPosition, isNaN(oldDistance) ? 0.5 : oldDistance)\r\n\r\n            /**\r\n             * Set position\r\n             */\r\n              // Get the orthogonal identity vector of the current segment\r\n            let oiv = ORYX_Math.getOrthogonalIdentityVector(fromPosition, toPosition)\r\n            let isHor = Math.abs(oiv.y) === 1, isVer = Math.abs(oiv.x) === 1\r\n            oiv.x *= ref.distance\r\n            oiv.y *= ref.distance \t\t\t\t// vector * distance\r\n            oiv.x += newIntersection.x\r\n            oiv.y += newIntersection.y \t// vector + the intersection point\r\n            let mx = isHor && ref.orientation && (ref.iorientation || ref.orientation).endsWith('r') ? -label.getWidth() : 0\r\n            let my = isVer && ref.orientation && (ref.iorientation || ref.orientation).startsWith('l') ? -label.getHeight() + 2 : 0\r\n            label.setX(oiv.x + mx)\r\n            label.setY(oiv.y + my)\r\n\r\n            // Update the reference point\r\n            this.updateReferencePointOfLabel(label, newIntersection, from, to)\r\n          } else {\r\n            let oiv = ORYX_Math.getOrthogonalIdentityVector(fromPosition, toPosition)\r\n            oiv.x *= ref.distance\r\n            oiv.y *= ref.distance // vector * distance\r\n            oiv.x += ref.intersection.x\r\n            oiv.y += ref.intersection.y // vector + the intersection point\r\n            label.setX(oiv.x)\r\n            label.setY(oiv.y)\r\n            ref.segment.fromPosition = fromPosition\r\n            ref.segment.toPosition = toPosition\r\n          }\r\n\r\n          return\r\n        }\r\n\r\n        // Update label position if no reference point is set\r\n        if (label.position && !this.parent.initializingShapes) {\r\n          let x = label.position.x + (diffX * (diffWidth || 1))\r\n          if (x > this.bounds.lowerRight().x) {\r\n            x += this.bounds.width() - (this.bounds.width() / (diffWidth || 1))\r\n          }\r\n\r\n          let y = label.position.y + (diffY * (diffHeight || 1))\r\n          if (y > this.bounds.lowerRight().y) {\r\n            y += this.bounds.height() - (this.bounds.height() / (diffHeight || 1))\r\n          }\r\n          label.setX(x)\r\n          label.setY(y)\r\n          return\r\n        }\r\n        let angle, pos, numOfDockers, index, length\r\n        switch (label.getEdgePosition()) {\r\n          case 'starttop':\r\n            angle = this._getAngle(this.dockers[0], this.dockers[1])\r\n            pos = this.dockers.first().bounds.center()\r\n\r\n            if (angle <= 90 || angle > 270) {\r\n              label.horizontalAlign('left')\r\n              label.verticalAlign('bottom')\r\n              label.x = pos.x + label.getOffsetTop()\r\n              label.y = pos.y - label.getOffsetTop()\r\n              label.rotate(360 - angle, pos)\r\n            } else {\r\n              label.horizontalAlign('right')\r\n              label.verticalAlign('bottom')\r\n              label.x = pos.x - label.getOffsetTop()\r\n              label.y = pos.y - label.getOffsetTop()\r\n              label.rotate(180 - angle, pos)\r\n            }\r\n\r\n            break\r\n          case 'startmiddle':\r\n            angle = this._getAngle(this.dockers[0], this.dockers[1])\r\n            pos = this.dockers.first().bounds.center()\r\n\r\n            if (angle <= 90 || angle > 270) {\r\n              label.horizontalAlign('left')\r\n              label.verticalAlign('bottom')\r\n              label.x = pos.x + 2\r\n              label.y = pos.y + 4\r\n              label.rotate(360 - angle, pos)\r\n            } else {\r\n              label.horizontalAlign('right')\r\n              label.verticalAlign('bottom')\r\n              label.x = pos.x + 1\r\n              label.y = pos.y + 4\r\n              label.rotate(180 - angle, pos)\r\n            }\r\n\r\n            break\r\n          case 'startbottom':\r\n            angle = this._getAngle(this.dockers[0], this.dockers[1])\r\n            pos = this.dockers.first().bounds.center()\r\n\r\n            if (angle <= 90 || angle > 270) {\r\n              label.horizontalAlign('left')\r\n              label.verticalAlign('top')\r\n              label.x = pos.x + label.getOffsetBottom()\r\n              label.y = pos.y + label.getOffsetBottom()\r\n              label.rotate(360 - angle, pos)\r\n            } else {\r\n              label.horizontalAlign('right')\r\n              label.verticalAlign('top')\r\n              label.x = pos.x - label.getOffsetBottom()\r\n              label.y = pos.y + label.getOffsetBottom()\r\n              label.rotate(180 - angle, pos)\r\n            }\r\n\r\n            break\r\n          case 'midtop':\r\n            numOfDockers = this.dockers.length\r\n            if (numOfDockers % 2 == 0) {\r\n              let angle = this._getAngle(this.dockers[numOfDockers / 2 - 1], this.dockers[numOfDockers / 2])\r\n              let pos1 = this.dockers[numOfDockers / 2 - 1].bounds.center()\r\n              let pos2 = this.dockers[numOfDockers / 2].bounds.center()\r\n              let pos = { x: (pos1.x + pos2.x) / 2.0, y: (pos1.y + pos2.y) / 2.0 }\r\n\r\n              label.horizontalAlign('center')\r\n              label.verticalAlign('bottom')\r\n              label.x = pos.x\r\n              label.y = pos.y - label.getOffsetTop()\r\n\r\n              if (angle <= 90 || angle > 270) {\r\n                label.rotate(360 - angle, pos)\r\n              } else {\r\n                label.rotate(180 - angle, pos)\r\n              }\r\n            } else {\r\n              index = parseInt(numOfDockers / 2)\r\n              angle = this._getAngle(this.dockers[index], this.dockers[index + 1])\r\n              pos = this.dockers[index].bounds.center()\r\n\r\n              if (angle <= 90 || angle > 270) {\r\n                label.horizontalAlign('left')\r\n                label.verticalAlign('bottom')\r\n                label.x = pos.x + label.getOffsetTop()\r\n                label.y = pos.y - label.getOffsetTop()\r\n                label.rotate(360 - angle, pos)\r\n              } else {\r\n                label.horizontalAlign('right')\r\n                label.verticalAlign('bottom')\r\n                label.x = pos.x - label.getOffsetTop()\r\n                label.y = pos.y - label.getOffsetTop()\r\n                label.rotate(180 - angle, pos)\r\n              }\r\n            }\r\n\r\n            break\r\n          case 'midbottom':\r\n            numOfDockers = this.dockers.length\r\n            if (numOfDockers % 2 == 0) {\r\n              let angle = this._getAngle(this.dockers[numOfDockers / 2 - 1], this.dockers[numOfDockers / 2])\r\n              let pos1 = this.dockers[numOfDockers / 2 - 1].bounds.center()\r\n              let pos2 = this.dockers[numOfDockers / 2].bounds.center()\r\n              let pos = { x: (pos1.x + pos2.x) / 2.0, y: (pos1.y + pos2.y) / 2.0 }\r\n\r\n              label.horizontalAlign('center')\r\n              label.verticalAlign('top')\r\n              label.x = pos.x\r\n              label.y = pos.y + label.getOffsetTop()\r\n\r\n              if (angle <= 90 || angle > 270) {\r\n                label.rotate(360 - angle, pos)\r\n              } else {\r\n                label.rotate(180 - angle, pos)\r\n              }\r\n            } else {\r\n              index = parseInt(numOfDockers / 2)\r\n              angle = this._getAngle(this.dockers[index], this.dockers[index + 1])\r\n              pos = this.dockers[index].bounds.center()\r\n\r\n              if (angle <= 90 || angle > 270) {\r\n                label.horizontalAlign('left')\r\n                label.verticalAlign('top')\r\n                label.x = pos.x + label.getOffsetBottom()\r\n                label.y = pos.y + label.getOffsetBottom()\r\n                label.rotate(360 - angle, pos)\r\n              } else {\r\n                label.horizontalAlign('right')\r\n                label.verticalAlign('top')\r\n                label.x = pos.x - label.getOffsetBottom()\r\n                label.y = pos.y + label.getOffsetBottom()\r\n                label.rotate(180 - angle, pos)\r\n              }\r\n            }\r\n\r\n            break\r\n          case 'endtop':\r\n            length = this.dockers.length\r\n            angle = this._getAngle(this.dockers[length - 2], this.dockers[length - 1])\r\n            pos = this.dockers.last().bounds.center()\r\n\r\n            if (angle <= 90 || angle > 270) {\r\n              label.horizontalAlign('right')\r\n              label.verticalAlign('bottom')\r\n              label.x = pos.x - label.getOffsetTop()\r\n              label.y = pos.y - label.getOffsetTop()\r\n              label.rotate(360 - angle, pos)\r\n            } else {\r\n              label.horizontalAlign('left')\r\n              label.verticalAlign('bottom')\r\n              label.x = pos.x + label.getOffsetTop()\r\n              label.y = pos.y - label.getOffsetTop()\r\n              label.rotate(180 - angle, pos)\r\n            }\r\n\r\n            break\r\n          case 'endbottom':\r\n            length = this.dockers.length\r\n            angle = this._getAngle(this.dockers[length - 2], this.dockers[length - 1])\r\n            pos = this.dockers.last().bounds.center()\r\n\r\n            if (angle <= 90 || angle > 270) {\r\n              label.horizontalAlign('right')\r\n              label.verticalAlign('top')\r\n              label.x = pos.x - label.getOffsetBottom()\r\n              label.y = pos.y + label.getOffsetBottom()\r\n              label.rotate(360 - angle, pos)\r\n            } else {\r\n              label.horizontalAlign('left')\r\n              label.verticalAlign('top')\r\n              label.x = pos.x + label.getOffsetBottom()\r\n              label.y = pos.y + label.getOffsetBottom()\r\n              label.rotate(180 - angle, pos)\r\n            }\r\n\r\n            break\r\n        }\r\n      }.bind(this))\r\n\r\n      this.children.each(function (value) {\r\n        if (value instanceof ORYX_Node) {\r\n          this.calculatePositionOfAttachedChildNode.call(this, value)\r\n        }\r\n      }.bind(this))\r\n\r\n      this.refreshAttachedNodes()\r\n      this.refresh()\r\n\r\n      this.isChanged = false\r\n      this._dockerUpdated = false\r\n\r\n      this._oldBounds = this.bounds.clone()\r\n    }\r\n\r\n    // IE10 specific fix, start and end-markes get left behind when moving path\r\n    if (ORYX_Utils.ifIE10()) {\r\n      this.node.parentNode.insertBefore(this.node, this.node)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Moves a point to the upperLeft of a node's bounds.\r\n   *\r\n   *  @param {point} point\r\n   *    The point to move\r\n   *  @param {ORYX.Core.Bounds} bounds\r\n   *    The Bounds of the related noe\r\n   */\r\n  movePointToUpperLeftOfNode (point, bounds) {\r\n    point.x -= bounds.width() / 2\r\n    point.y -= bounds.height() / 2\r\n  }\r\n\r\n  /**\r\n   * Refreshes the visual representation of edge's attached nodes.\r\n   */\r\n  refreshAttachedNodes () {\r\n    this.attachedNodePositionData.values().each((nodeData) => {\r\n      let startPoint = nodeData.segment.docker1.bounds.center()\r\n      let endPoint = nodeData.segment.docker2.bounds.center()\r\n      this.relativizePoint(startPoint)\r\n      this.relativizePoint(endPoint)\r\n\r\n      let newNodePosition = {}\r\n\r\n      /* Calculate new x-coordinate */\r\n      newNodePosition.x = startPoint.x\r\n        + nodeData.relativDistanceFromDocker1\r\n        * (endPoint.x - startPoint.x)\r\n\r\n      /* Calculate new y-coordinate */\r\n      newNodePosition.y = startPoint.y\r\n        + nodeData.relativDistanceFromDocker1\r\n        * (endPoint.y - startPoint.y)\r\n\r\n      /* Convert new position to the upper left of the node */\r\n      this.movePointToUpperLeftOfNode(newNodePosition, nodeData.node.bounds)\r\n\r\n      /* Move node to its new position */\r\n      nodeData.node.bounds.moveTo(newNodePosition)\r\n      nodeData.node._update()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Calculates the position of an edge's child node. The node is placed on\r\n   * the path of the edge.\r\n   *\r\n   * @param {node}\r\n   *    The node to calculate the new position\r\n   * @return {Point}\r\n   *    The calculated upper left point of the node's shape.\r\n   */\r\n  calculatePositionOfAttachedChildNode (node) {\r\n    /* Initialize position */\r\n    let position = {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n\r\n    /* Case: Node was just added */\r\n    if (!this.attachedNodePositionData.get(node.getId())) {\r\n      this.attachedNodePositionData.set(node.getId(), {})\r\n      this.attachedNodePositionData.get(node.getId()).relativDistanceFromDocker1 = 0\r\n      this.attachedNodePositionData.get(node.getId()).node = node\r\n      this.attachedNodePositionData.get(node.getId()).segment = {}\r\n      this.findEdgeSegmentForNode(node)\r\n    } else if (node.isChanged) {\r\n      this.findEdgeSegmentForNode(node)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finds the appropriate edge segement for a node.\r\n   * The segment is choosen, which has the smallest distance to the node.\r\n   *\r\n   * @param {ORYX.Core.Node} node\r\n   *    The concerning node\r\n   */\r\n  findEdgeSegmentForNode (node) {\r\n    let length = this.dockers.length\r\n    let smallestDistance = undefined\r\n\r\n    for (let i = 1; i < length; i++) {\r\n      let lineP1 = this.dockers[i - 1].bounds.center()\r\n      let lineP2 = this.dockers[i].bounds.center()\r\n      this.relativizePoint(lineP1)\r\n      this.relativizePoint(lineP2)\r\n\r\n      let nodeCenterPoint = node.bounds.center()\r\n      let distance = ORYX_Math.distancePointLinie(\r\n        lineP1,\r\n        lineP2,\r\n        nodeCenterPoint,\r\n        true)\r\n\r\n      if ((distance || distance == 0) && ((!smallestDistance && smallestDistance != 0)\r\n        || distance < smallestDistance)) {\r\n\r\n        smallestDistance = distance\r\n        this.attachedNodePositionData.get(node.getId()).segment.docker1 = this.dockers[i - 1]\r\n        this.attachedNodePositionData.get(node.getId()).segment.docker2 = this.dockers[i]\r\n      }\r\n\r\n      /* Either the distance does not match the segment or the distance\r\n       * between docker1 and docker2 is 0\r\n       *\r\n       * In this case choose the nearest docker as attaching point.\r\n       *\r\n       */\r\n      if (!distance && !smallestDistance && smallestDistance != 0) {\r\n        let distanceCenterToLineOne = ORYX_Math.getDistancePointToPoint(nodeCenterPoint, lineP1)\r\n        let distanceCenterToLineTwo = ORYX_Math.getDistancePointToPoint(nodeCenterPoint, lineP2)\r\n\r\n        if (distanceCenterToLineOne < distanceCenterToLineTwo) {\r\n          this.attachedNodePositionData.get(node.getId()).relativDistanceFromDocker1 = 0\r\n        } else {\r\n          this.attachedNodePositionData.get(node.getId()).relativDistanceFromDocker1 = 1\r\n        }\r\n        this.attachedNodePositionData.get(node.getId()).segment.docker1 = this.dockers[i - 1]\r\n        this.attachedNodePositionData.get(node.getId()).segment.docker2 = this.dockers[i]\r\n      }\r\n    }\r\n\r\n    /* Calculate position on edge segment for the node */\r\n    if (smallestDistance || smallestDistance == 0) {\r\n      this.attachedNodePositionData.get(node.getId()).relativDistanceFromDocker1 =\r\n        this.getLineParameterForPosition(\r\n          this.attachedNodePositionData.get(node.getId()).segment.docker1,\r\n          this.attachedNodePositionData.get(node.getId()).segment.docker2,\r\n          node)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {ORYX.Core.Node|Object} node or position\r\n   * @return {Object} An object with the following attribute: {ORYX.Core.Docker} fromDocker, {ORYX.Core.Docker}\r\n   *   toDocker, {X/Y} position, {int} distance\r\n   */\r\n  findSegment (node) {\r\n    let length = this.dockers.length\r\n    let result\r\n    let nodeCenterPoint = node instanceof ORYX_UIObject ? node.bounds.center() : node\r\n\r\n    for (let i = 1; i < length; i++) {\r\n      let lineP1 = this.dockers[i - 1].bounds.center()\r\n      let lineP2 = this.dockers[i].bounds.center()\r\n      let distance = ORYX_Math.distancePointLinie(lineP1, lineP2, nodeCenterPoint, true)\r\n\r\n      if (typeof distance == 'number' && (result === undefined || distance < result.distance)) {\r\n        result = {\r\n          distance: distance,\r\n          fromDocker: this.dockers[i - 1],\r\n          toDocker: this.dockers[i]\r\n        }\r\n\r\n      }\r\n    }\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * Returns the value of the scalar to determine the position of the node on\r\n   * line defined by docker1 and docker2.\r\n   *\r\n   * @param {point} docker1\r\n   *    The docker that defines the start of the line segment\r\n   * @param {point} docker2\r\n   *    The docker that defines the end of the line segment\r\n   * @param {ORYX.Core.Node} node\r\n   *    The concerning node\r\n   *\r\n   * @return {float} positionParameter\r\n   *    The scalar value to determine the position on the line\r\n   */\r\n  getLineParameterForPosition (docker1, docker2, node) {\r\n    let dockerPoint1 = docker1.bounds.center()\r\n    let dockerPoint2 = docker2.bounds.center()\r\n    this.relativizePoint(dockerPoint1)\r\n    this.relativizePoint(dockerPoint2)\r\n\r\n    let intersectionPoint = ORYX_Math.getPointOfIntersectionPointLine(\r\n      dockerPoint1,\r\n      dockerPoint2,\r\n      node.bounds.center(), true)\r\n    if (!intersectionPoint) {\r\n      return 0\r\n    }\r\n\r\n    let relativeDistance =\r\n      ORYX_Math.getDistancePointToPoint(intersectionPoint, dockerPoint1) /\r\n      ORYX_Math.getDistancePointToPoint(dockerPoint1, dockerPoint2)\r\n\r\n    return relativeDistance\r\n  }\r\n\r\n  /**\r\n   * Makes point relative to the upper left of the edge's bound.\r\n   *\r\n   * @param {point} point\r\n   *    The point to relativize\r\n   */\r\n  relativizePoint (point) {\r\n    point.x -= this.bounds.upperLeft().x\r\n    point.y -= this.bounds.upperLeft().y\r\n  }\r\n\r\n  /**\r\n   * Move the first and last docker and calls the refresh method.\r\n   * Attention: This does not calculates intersection point between the\r\n   * edge and the bounded nodes. This only works if only the nodes are\r\n   * moves.\r\n   *\r\n   */\r\n  optimizedUpdate () {\r\n    let updateDocker = function (docker) {\r\n      if (!docker._dockedShape || !docker._dockedShapeBounds) { return }\r\n      let off = {\r\n        x: docker._dockedShape.bounds.a.x - docker._dockedShapeBounds.a.x,\r\n        y: docker._dockedShape.bounds.a.y - docker._dockedShapeBounds.a.y\r\n      }\r\n      docker.bounds.moveBy(off)\r\n      docker._dockedShapeBounds.moveBy(off)\r\n    }\r\n\r\n    updateDocker(this.dockers.first())\r\n    updateDocker(this.dockers.last())\r\n\r\n    this.refresh()\r\n  }\r\n\r\n  refresh () {\r\n    // call base class refresh method\r\n    // arguments.callee.$.refresh.apply(this, arguments)\r\n\r\n    super.refresh()\r\n    //TODO consider points for marker mids\r\n    let lastPoint\r\n    this._paths.each((function (path, index) {\r\n      let dockers = this._dockersByPath.get(path.id)\r\n      let c = undefined\r\n      let d = undefined\r\n      if (lastPoint) {\r\n        d = 'M' + lastPoint.x + ' ' + lastPoint.y\r\n      } else {\r\n        c = dockers[0].bounds.center()\r\n        lastPoint = c\r\n\r\n        d = 'M' + c.x + ' ' + c.y\r\n      }\r\n\r\n      for (let i = 1; i < dockers.length; i++) {\r\n        // for each docker, draw a line to the center\r\n        c = dockers[i].bounds.center()\r\n        d = d + 'L' + c.x + ' ' + c.y + ' '\r\n        lastPoint = c\r\n      }\r\n\r\n      path.setAttributeNS(null, 'd', d)\r\n      this._interactionPaths[index].setAttributeNS(null, 'd', d)\r\n\r\n    }).bind(this))\r\n\r\n\r\n    /* move child shapes of an edge */\r\n    if (this.getChildNodes().length > 0) {\r\n      let x = this.bounds.upperLeft().x\r\n      let y = this.bounds.upperLeft().y\r\n      this.node.firstChild.childNodes[1].setAttributeNS(null, 'transform', 'translate(' + x + ', ' + y + ')')\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Calculate the Border Intersection Point between two points\r\n   * @param {PointA}\r\n   * @param {PointB}\r\n   */\r\n  getIntersectionPoint () {\r\n    let length = Math.floor(this.dockers.length / 2)\r\n    return ORYX_Math.midPoint(this.dockers[length - 1].bounds.center(), this.dockers[length].bounds.center())\r\n  }\r\n\r\n  /**\r\n   * Returns TRUE if the bounds is over the edge\r\n   * @param {Bounds}\r\n   *\r\n   */\r\n  isBoundsIncluded (bounds) {\r\n    let dockers = this.dockers, size = dockers.length\r\n    return dockers.any(function (docker, i) {\r\n      if (i == size - 1) {\r\n        return false\r\n      }\r\n      let a = docker.bounds.center()\r\n      let b = dockers[i + 1].bounds.center()\r\n\r\n      return ORYX_Math.isRectOverLine(a.x, a.y, b.x, b.y, bounds.a.x, bounds.a.y, bounds.b.x, bounds.b.y)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Calculate if the point is inside the Shape\r\n   * @param {PointX}\r\n   * @param {PointY}\r\n   */\r\n  isPointIncluded (pointX, pointY) {\r\n    let isbetweenAB = this.absoluteBounds().isIncluded(pointX, pointY, ORYX_Config.OFFSET_EDGE_BOUNDS)\r\n    let isPointIncluded = undefined\r\n\r\n    if (isbetweenAB && this.dockers.length > 0) {\r\n      let i = 0\r\n      let point1, point2\r\n\r\n      do {\r\n        point1 = this.dockers[i].bounds.center()\r\n        point2 = this.dockers[++i].bounds.center()\r\n\r\n        isPointIncluded = ORYX_Math.isPointInLine(pointX, pointY,\r\n          point1.x, point1.y,\r\n          point2.x, point2.y,\r\n          ORYX_Config.OFFSET_EDGE_BOUNDS)\r\n\r\n      } while (!isPointIncluded && i < this.dockers.length - 1)\r\n\r\n    }\r\n    return isPointIncluded\r\n  }\r\n\r\n  /**\r\n   * Calculate if the point is over an special offset area\r\n   * @param {Point}\r\n   */\r\n  isPointOverOffset () {\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Returns TRUE if the given node\r\n   * is a child node of the shapes node\r\n   * @param {Element} node\r\n   * @return {Boolean}\r\n   *\r\n   */\r\n  containsNode (node) {\r\n    if (this._paths.include(node) || this._interactionPaths.include(node)) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Returns the angle of the line between two dockers\r\n   * (0 - 359.99999999)\r\n   */\r\n  _getAngle (docker1, docker2) {\r\n    let p1 = docker1 instanceof ORYX_Controls.Docker ? docker1.absoluteCenterXY() : docker1;\r\n    let p2 = docker2 instanceof ORYX_Controls.Docker ? docker2.absoluteCenterXY() : docker2;\r\n\r\n    return ORYX_Math.getAngle(p1, p2)\r\n  }\r\n\r\n  alignDockers () {\r\n    this._update(true)\r\n\r\n    let firstPoint = this.dockers.first().bounds.center()\r\n    let lastPoint = this.dockers.last().bounds.center()\r\n\r\n    let deltaX = lastPoint.x - firstPoint.x\r\n    let deltaY = lastPoint.y - firstPoint.y\r\n\r\n    let numOfDockers = this.dockers.length - 1\r\n\r\n    this.dockers.each((function (docker, index) {\r\n      let part = index / numOfDockers\r\n      docker.bounds.unregisterCallback(this._dockerChangedCallback)\r\n      docker.bounds.moveTo(firstPoint.x + part * deltaX, firstPoint.y + part * deltaY)\r\n      docker.bounds.registerCallback(this._dockerChangedCallback)\r\n    }).bind(this))\r\n\r\n    this._dockerChanged()\r\n  }\r\n\r\n  add (shape) {\r\n    // arguments.callee.$.add.apply(this, arguments)\r\n    super.add(shape)\r\n\r\n    // If the new shape is a Docker which is not contained\r\n    if (shape instanceof ORYX_Controls.Docker && this.dockers.include(shape)) {\r\n      // Add it to the dockers list ordered by paths\r\n      let pathArray = this._dockersByPath.values()[0]\r\n      if (pathArray) {\r\n        pathArray.splice(this.dockers.indexOf(shape), 0, shape)\r\n      }\r\n\r\n      /* Perform nessary adjustments on the edge's child shapes */\r\n      this.handleChildShapesAfterAddDocker(shape)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Performs nessary adjustments on the edge's child shapes.\r\n   *\r\n   * @param {ORYX.Core.Controls.Docker} docker\r\n   *    The added docker\r\n   */\r\n  handleChildShapesAfterAddDocker (docker) {\r\n    /* Ensure type of Docker */\r\n    if (!(docker instanceof ORYX_Controls.Docker)) {\r\n      return undefined\r\n    }\r\n\r\n    let index = this.dockers.indexOf(docker)\r\n    if (!(0 < index && index < this.dockers.length - 1)) {\r\n      /* Exception: Expect added docker between first and last node of the edge */\r\n      return undefined\r\n    }\r\n\r\n    /* Get child nodes concerning the segment of the new docker */\r\n    let startDocker = this.dockers[index - 1]\r\n    let endDocker = this.dockers[index + 1]\r\n\r\n    /* Adjust the position of edge's child nodes */\r\n    let segmentElements = this.getAttachedNodePositionDataForSegment(startDocker, endDocker)\r\n\r\n    let lengthSegmentPart1 = ORYX_Math.getDistancePointToPoint(\r\n      startDocker.bounds.center(),\r\n      docker.bounds.center())\r\n    let lengthSegmentPart2 = ORYX_Math.getDistancePointToPoint(\r\n      endDocker.bounds.center(),\r\n      docker.bounds.center())\r\n\r\n    if (!(lengthSegmentPart1 + lengthSegmentPart2)) {\r\n      return\r\n    }\r\n\r\n    let relativDockerPosition = lengthSegmentPart1 / (lengthSegmentPart1 + lengthSegmentPart2)\r\n\r\n    segmentElements.each(function (nodePositionData) {\r\n      /* Assign child node to the new segment */\r\n      if (nodePositionData.value.relativDistanceFromDocker1 < relativDockerPosition) {\r\n        /* Case: before added Docker */\r\n        nodePositionData.value.segment.docker2 = docker\r\n        nodePositionData.value.relativDistanceFromDocker1 =\r\n          nodePositionData.value.relativDistanceFromDocker1 / relativDockerPosition\r\n      } else {\r\n        /* Case: after added Docker */\r\n        nodePositionData.value.segment.docker1 = docker\r\n        let newFullDistance = 1 - relativDockerPosition\r\n        let relativPartOfSegment =\r\n          nodePositionData.value.relativDistanceFromDocker1\r\n          - relativDockerPosition\r\n\r\n        nodePositionData.value.relativDistanceFromDocker1 =\r\n          relativPartOfSegment / newFullDistance\r\n\r\n      }\r\n    })\r\n\r\n\r\n    // Update all labels reference points\r\n    this.getLabels().each(function (label) {\r\n      let ref = label.getReferencePoint()\r\n      if (!ref) {\r\n        return\r\n      }\r\n      let index = this.dockers.indexOf(docker)\r\n      if (index >= ref.segment.fromIndex && index <= ref.segment.toIndex) {\r\n\r\n        let segment = this.findSegment(ref.intersection)\r\n        if (!segment) {\r\n          // Choose whether the first of the last segment\r\n          segment.fromDocker = ref.segment.fromIndex >= (this.dockers.length / 2) ? this.dockers[0] : this.dockers[this.dockers.length - 2]\r\n          segment.toDocker = this.dockers[this.dockers.indexOf(from) + 1] // The next one if the to docker\r\n        }\r\n\r\n        let fromPosition = segment.fromDocker.bounds.center(), toPosition = segment.toDocker.bounds.center()\r\n\r\n        let intersection = ORYX_Math.getPointOfIntersectionPointLine(\r\n          fromPosition, \t\t// P1 - Center of the first docker\r\n          toPosition, \t\t// P2 - Center of the second docker\r\n          ref.intersection, \t// P3 - Center of the label\r\n          true)\r\n        //var oldDistance = ORYX.Core.Math.getDistanceBetweenTwoPoints(ref.segment.fromPosition,\r\n        // ref.segment.toPosition, ref.intersection); intersection =\r\n        // ORYX.Core.Math.getPointBetweenTwoPoints(fromPosition, toPosition, isNaN(oldDistance) ? 0.5 :\r\n        // (lengthOld*oldDistance)/lengthNew);\r\n\r\n        // Update the reference point\r\n        this.updateReferencePointOfLabel(label, intersection, segment.fromDocker, segment.toDocker, true)\r\n      }\r\n    }.bind(this))\r\n\r\n    /* Update attached nodes visual representation */\r\n    this.refreshAttachedNodes()\r\n  }\r\n\r\n  /**\r\n   *  Returns elements from {@link attachedNodePositiondata} that match the\r\n   *  segement defined by startDocker and endDocker.\r\n   *\r\n   *  @param {ORYX.Core.Controls.Docker} startDocker\r\n   *    The docker defining the begin of the segment.\r\n   *  @param {ORYX.Core.Controls.Docker} endDocker\r\n   *    The docker defining the begin of the segment.\r\n   *\r\n   *  @return {Hash} attachedNodePositionData\r\n   *    Child elements matching the segment\r\n   */\r\n  getAttachedNodePositionDataForSegment (startDocker, endDocker) {\r\n    /* Ensure that the segment is defined correctly */\r\n    if (!((startDocker instanceof ORYX_Controls.Docker)\r\n      && (endDocker instanceof ORYX_Controls.Docker))) {\r\n      return []\r\n    }\r\n\r\n    /* Get elements of the segment */\r\n    let elementsOfSegment =\r\n      this.attachedNodePositionData.findAll(function (nodePositionData) {\r\n        return nodePositionData.value.segment.docker1 === startDocker &&\r\n          nodePositionData.value.segment.docker2 === endDocker\r\n      })\r\n\r\n    /* Return a Hash in each case */\r\n    if (!elementsOfSegment) {\r\n      return []\r\n    }\r\n\r\n    return elementsOfSegment\r\n  }\r\n\r\n  /**\r\n   * Removes an edge's child shape\r\n   */\r\n  remove (shape) {\r\n    // arguments.callee.$.remove.apply(this, arguments)\r\n    super.remove(shape)\r\n\r\n    if (this.attachedNodePositionData.get(shape.getId())) {\r\n      this.attachedNodePositionData.unset[shape.getId()]\r\n    }\r\n\r\n    /* Adjust child shapes if neccessary */\r\n    if (shape instanceof ORYX_Controls.Docker) {\r\n      this.handleChildShapesAfterRemoveDocker(shape)\r\n    }\r\n  }\r\n\r\n  updateReferencePointOfLabel (label, intersection, from, to, dirty) {\r\n    if (!label.getReferencePoint() || !label.isVisible) {\r\n      return\r\n    }\r\n\r\n    let ref = label.getReferencePoint()\r\n\r\n    if (ref.orientation && ref.orientation !== 'ce') {\r\n      let angle = this._getAngle(from, to)\r\n      if (ref.distance >= 0) {\r\n        if (angle == 0) {\r\n          label.horizontalAlign('left')//ref.orientation == \"lr\" ? \"right\" : \"left\");\r\n          label.verticalAlign('bottom')\r\n        } else if (angle > 0 && angle < 90) {\r\n          label.horizontalAlign('right')\r\n          label.verticalAlign('bottom')\r\n        } else if (angle == 90) {\r\n          label.horizontalAlign('right')\r\n          label.verticalAlign('top')//ref.orientation == \"lr\" ? \"bottom\" : \"top\");\r\n        } else if (angle > 90 && angle < 180) {\r\n          label.horizontalAlign('right')\r\n          label.verticalAlign('top')\r\n        } else if (angle == 180) {\r\n          label.horizontalAlign('left')//ref.orientation == \"ur\" ? \"right\" : \"left\");\r\n          label.verticalAlign('top')\r\n        } else if (angle > 180 && angle < 270) {\r\n          label.horizontalAlign('left')\r\n          label.verticalAlign('top')\r\n        } else if (angle == 270) {\r\n          label.horizontalAlign('left')\r\n          label.verticalAlign('top')//ref.orientation == \"ll\" ? \"bottom\" : \"top\");\r\n        } else if (angle > 270 && angle <= 360) {\r\n          label.horizontalAlign('left')\r\n          label.verticalAlign('bottom')\r\n        }\r\n      } else {\r\n        if (angle == 0) {\r\n          label.horizontalAlign('left')//ref.orientation == \"ur\" ? \"right\" : \"left\");\r\n          label.verticalAlign('top')\r\n        } else if (angle > 0 && angle < 90) {\r\n          label.horizontalAlign('left')\r\n          label.verticalAlign('top')\r\n        } else if (angle == 90) {\r\n          label.horizontalAlign('left')\r\n          label.verticalAlign('top')//ref.orientation == \"ll\" ? \"bottom\" : \"top\");\r\n        } else if (angle > 90 && angle < 180) {\r\n          label.horizontalAlign('left')\r\n          label.verticalAlign('bottom')\r\n        } else if (angle == 180) {\r\n          label.horizontalAlign('left')//ref.orientation == \"lr\" ? \"right\" : \"left\");\r\n          label.verticalAlign('bottom')\r\n        } else if (angle > 180 && angle < 270) {\r\n          label.horizontalAlign('right')\r\n          label.verticalAlign('bottom')\r\n        } else if (angle == 270) {\r\n          label.horizontalAlign('right')\r\n          label.verticalAlign('top')//ref.orientation == \"lr\" ? \"bottom\" : \"top\");\r\n        } else if (angle > 270 && angle <= 360) {\r\n          label.horizontalAlign('right')\r\n          label.verticalAlign('top')\r\n        }\r\n      }\r\n      ref.iorientation = ref.iorientation || ref.orientation\r\n      ref.orientation = (label.verticalAlign() == 'top' ? 'u' : 'l') + (label.horizontalAlign() == 'left' ? 'l' : 'r')\r\n    }\r\n\r\n    label.setReferencePoint(jQuery.extend({}, {\r\n      intersection: intersection,\r\n      segment: {\r\n        from: from,\r\n        fromIndex: this.dockers.indexOf(from),\r\n        fromPosition: from.bounds.center(),\r\n        to: to,\r\n        toIndex: this.dockers.indexOf(to),\r\n        toPosition: to.bounds.center()\r\n      },\r\n      dirty: dirty || false\r\n    }, ref))\r\n  }\r\n\r\n  /**\r\n   *  Adjusts the child shapes of an edges after a docker was removed.\r\n   *\r\n   *  @param{ORYX.Core.Controls.Docker} docker\r\n   *    The removed docker.\r\n   */\r\n  handleChildShapesAfterRemoveDocker (docker) {\r\n    /* Ensure docker type */\r\n    if (!(docker instanceof ORYX_Controls.Docker)) {\r\n      return\r\n    }\r\n\r\n    this.attachedNodePositionData.each(function (nodePositionData) {\r\n      if (nodePositionData.value.segment.docker1 === docker) {\r\n        /* The new start of the segment is the predecessor of docker2. */\r\n        let index = this.dockers.indexOf(nodePositionData.value.segment.docker2)\r\n        if (index == -1) {\r\n          return\r\n        }\r\n        nodePositionData.value.segment.docker1 = this.dockers[index - 1]\r\n      } else if (nodePositionData.value.segment.docker2 === docker) {\r\n        /* The new end of the segment is the successor of docker1. */\r\n        let index = this.dockers.indexOf(nodePositionData.value.segment.docker1)\r\n        if (index == -1) {\r\n          return\r\n        }\r\n        nodePositionData.value.segment.docker2 = this.dockers[index + 1]\r\n      }\r\n    }.bind(this))\r\n\r\n    // Update all labels reference points\r\n    this.getLabels().each(function (label) {\r\n      let ref = label.getReferencePoint()\r\n      if (!ref) {\r\n        return\r\n      }\r\n      let from = ref.segment.from\r\n      let to = ref.segment.to\r\n\r\n      if (from !== docker && to !== docker) {\r\n        return\r\n      }\r\n\r\n      let segment = this.findSegment(ref.intersection)\r\n      if (!segment) {\r\n        from = segment.fromDocker\r\n        to = segment.toDocker\r\n      } else {\r\n        from = from === docker ? this.dockers[this.dockers.indexOf(to) - 1] : from\r\n        to = this.dockers[this.dockers.indexOf(from) + 1]\r\n      }\r\n\r\n      let intersection = ORYX_Math.getPointOfIntersectionPointLine(from.bounds.center(), to.bounds.center(), ref.intersection, true)\r\n      // Update the reference point\r\n      this.updateReferencePointOfLabel(label, intersection, from, to, true)\r\n    }.bind(this))\r\n\r\n    /* Update attached nodes visual representation */\r\n    this.refreshAttachedNodes()\r\n  }\r\n\r\n  /**\r\n   *@deprecated Use the .createDocker() Method and set the point via the bounds\r\n   */\r\n  addDocker (position, exDocker) {\r\n    let lastDocker\r\n    let result\r\n    this._dockersByPath.any((function (pair) {\r\n      return pair.value.any((function (docker, index) {\r\n        if (!lastDocker) {\r\n          lastDocker = docker\r\n          return false\r\n        } else {\r\n          let point1 = lastDocker.bounds.center()\r\n          let point2 = docker.bounds.center()\r\n\r\n          let additionalIEZoom = 1\r\n          if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n            let ua = navigator.userAgent\r\n            if (ua.indexOf('MSIE') >= 0) {\r\n              //IE 10 and below\r\n              let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n              if (zoom !== 100) {\r\n                additionalIEZoom = zoom / 100\r\n              }\r\n            }\r\n          }\r\n\r\n          if (additionalIEZoom !== 1) {\r\n            position.x = position.x / additionalIEZoom\r\n            position.y = position.y / additionalIEZoom\r\n          }\r\n\r\n          if (ORYX_Math.isPointInLine(position.x, position.y, point1.x, point1.y, point2.x, point2.y, 10)) {\r\n            let path = this._paths.find(function (path) {\r\n              return path.id === pair.key\r\n            })\r\n            if (path) {\r\n              let allowAttr = path.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'allowDockers')\r\n              if (allowAttr && allowAttr.toLowerCase() === 'no') {\r\n                return true\r\n              }\r\n            }\r\n\r\n            let newDocker = (exDocker) ? exDocker : this.createDocker(this.dockers.indexOf(lastDocker) + 1, position)\r\n            newDocker.bounds.centerMoveTo(position)\r\n            if (exDocker) {\r\n              this.add(newDocker, this.dockers.indexOf(lastDocker) + 1)\r\n            }\r\n            result = newDocker\r\n            return true\r\n          } else {\r\n            lastDocker = docker\r\n            return false\r\n          }\r\n        }\r\n      }).bind(this))\r\n    }).bind(this))\r\n    return result\r\n  }\r\n\r\n  removeDocker (docker) {\r\n    if (this.dockers.length > 2 && !(this.dockers.first() === docker)) {\r\n      this._dockersByPath.any((function (pair) {\r\n        if (pair.value.member(docker)) {\r\n          if (docker === pair.value.last()) {\r\n            return true\r\n          } else {\r\n            this.remove(docker)\r\n            this._dockersByPath.set(pair.key, pair.value.without(docker))\r\n            this.isChanged = true\r\n            this._dockerChanged()\r\n            return true\r\n          }\r\n        }\r\n        return false\r\n      }).bind(this))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes all dockers from the edge which are on\r\n   * the line between two dockers\r\n   * @return {Object} Removed dockers in an indicied array\r\n   * (key is the removed position of the docker, value is docker themselve)\r\n   */\r\n  removeUnusedDockers () {\r\n    let marked = new Hash()\r\n\r\n    this.dockers.each(function (docker, i) {\r\n      if (i == 0 || i == this.dockers.length - 1) {\r\n        return\r\n      }\r\n      let previous = this.dockers[i - 1]\r\n\r\n      /* Do not consider already removed dockers */\r\n      if (marked.values().indexOf(previous) != -1 && this.dockers[i - 2]) {\r\n        previous = this.dockers[i - 2]\r\n      }\r\n      let next = this.dockers[i + 1]\r\n\r\n      let cp = previous.getDockedShape() && previous.referencePoint ? previous.getAbsoluteReferencePoint() : previous.bounds.center()\r\n      let cn = next.getDockedShape() && next.referencePoint ? next.getAbsoluteReferencePoint() : next.bounds.center()\r\n      let cd = docker.bounds.center()\r\n\r\n      if (ORYX_Math.isPointInLine(cd.x, cd.y, cp.x, cp.y, cn.x, cn.y, 1)) {\r\n        marked.set(i, docker)\r\n      }\r\n    }.bind(this))\r\n\r\n    marked.each(function (docker) {\r\n      this.removeDocker(docker.value)\r\n    }.bind(this))\r\n\r\n    if (marked.values().length > 0) {\r\n      this._update(true)\r\n    }\r\n\r\n    return marked\r\n  }\r\n\r\n  /**\r\n   * Initializes the Edge after loading the SVG representation of the edge.\r\n   * @param {SVGDocument} svgDocument\r\n   */\r\n  _init (svgDocument) {\r\n    // arguments.callee.$._init.apply(this, arguments)\r\n    super._init(svgDocument)\r\n\r\n    let minPointX, minPointY, maxPointX, maxPointY\r\n    // init markers\r\n    let defs = svgDocument.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'defs')\r\n    if (defs.length > 0) {\r\n      defs = defs[0]\r\n      let markerElements = $A(defs.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'marker'))\r\n      let marker\r\n      const me = this\r\n      markerElements.each(function (markerElement) {\r\n        try {\r\n          marker = new ORYX_SVG.SVGMarker(markerElement.cloneNode(true))\r\n          me._markers.set(marker.id, marker)\r\n          let textElements = $A(marker.element.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'text'))\r\n          let label\r\n          textElements.each(function (textElement) {\r\n            label = new ORYX_SVG.Label({\r\n              textElement: textElement,\r\n              shapeId: this.id\r\n            })\r\n\r\n            me._labels.set(label.id, label)\r\n          })\r\n        }\r\n        catch (e) {}\r\n      })\r\n    }\r\n\r\n    let gs = svgDocument.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'g')\r\n    if (gs.length <= 0) {\r\n      throw 'Edge: No g element found.'\r\n    }\r\n\r\n    let g = gs[0]\r\n    g.setAttributeNS(null, 'id', null)\r\n    let isFirst = true\r\n\r\n    $A(g.childNodes).each((function (path, index) {\r\n      if (ORYX_Utils.checkClassType(path, SVGPathElement)) {\r\n        path = path.cloneNode(false)\r\n\r\n        let pathId = this.id + '_' + index\r\n        path.setAttributeNS(null, 'id', pathId)\r\n        this._paths.push(path)\r\n\r\n        // check, if markers are set and update the id\r\n        let markersByThisPath = []\r\n        let markerUrl = path.getAttributeNS(null, 'marker-start')\r\n\r\n        if (markerUrl && markerUrl !== '') {\r\n          markerUrl = markerUrl.strip()\r\n          markerUrl = markerUrl.replace(/^url\\(#/, '')\r\n\r\n          let markerStartId = this.getValidMarkerId(markerUrl)\r\n          path.setAttributeNS(null, 'marker-start', 'url(#' + markerStartId + ')')\r\n\r\n          markersByThisPath.push(this._markers.get(markerStartId))\r\n        }\r\n\r\n        markerUrl = path.getAttributeNS(null, 'marker-mid')\r\n\r\n        if (markerUrl && markerUrl !== '') {\r\n          markerUrl = markerUrl.strip()\r\n          markerUrl = markerUrl.replace(/^url\\(#/, '')\r\n          let markerMidId = this.getValidMarkerId(markerUrl)\r\n          path.setAttributeNS(null, 'marker-mid', 'url(#' + markerMidId + ')')\r\n\r\n          markersByThisPath.push(this._markers.get(markerMidId))\r\n        }\r\n\r\n        markerUrl = path.getAttributeNS(null, 'marker-end')\r\n\r\n        if (markerUrl && markerUrl !== '') {\r\n          markerUrl = markerUrl.strip()\r\n\r\n          let markerEndId = this.getValidMarkerId(markerUrl)\r\n          path.setAttributeNS(null, 'marker-end', 'url(#' + markerEndId + ')')\r\n\r\n          markersByThisPath.push(this._markers.get(markerEndId))\r\n        }\r\n\r\n        this._markersByPath[pathId] = markersByThisPath\r\n\r\n        // init dockers\r\n        let parser = new PathParser()\r\n        let handler = new ORYX_SVG.PointsPathHandler()\r\n        parser.setHandler(handler)\r\n        parser.parsePath(path)\r\n\r\n        if (handler.points.length < 4) {\r\n          throw 'Edge: Path has to have two or more points specified.'\r\n        }\r\n\r\n        this._dockersByPath.set(pathId, [])\r\n\r\n        for (let i = 0; i < handler.points.length; i += 2) {\r\n          // handler.points.each((function(point, pIndex){\r\n          let x = handler.points[i]\r\n          let y = handler.points[i + 1]\r\n          if (isFirst || i > 0) {\r\n            let docker = new ORYX_Controls.Docker({\r\n              eventHandlerCallback: this.eventHandlerCallback\r\n            })\r\n\r\n            docker.bounds.centerMoveTo(x, y)\r\n            docker.bounds.registerCallback(this._dockerChangedCallback)\r\n            this.add(docker, this.dockers.length)\r\n\r\n            // this._dockersByPath[pathId].push(docker);\r\n\r\n            // calculate minPoint and maxPoint\r\n            if (minPointX) {\r\n              minPointX = Math.min(x, minPointX)\r\n              minPointY = Math.min(y, minPointY)\r\n            } else {\r\n              minPointX = x\r\n              minPointY = y\r\n            }\r\n\r\n            if (maxPointX) {\r\n              maxPointX = Math.max(x, maxPointX)\r\n              maxPointY = Math.max(y, maxPointY)\r\n            } else {\r\n              maxPointX = x\r\n              maxPointY = y\r\n            }\r\n          }\r\n          //}).bind(this));\r\n        }\r\n        isFirst = false\r\n      }\r\n    }).bind(this))\r\n\r\n    this.bounds.set(minPointX, minPointY, maxPointX, maxPointY)\r\n\r\n    if (false && (this.bounds.width() === 0 || this.bounds.height() === 0)) {\r\n      let width = this.bounds.width()\r\n      let height = this.bounds.height()\r\n\r\n      this.bounds.extend({\r\n        x: width === 0 ? 2 : 0,\r\n        y: height === 0 ? 2 : 0\r\n      })\r\n\r\n      this.bounds.moveBy({\r\n        x: width === 0 ? -1 : 0,\r\n        y: height === 0 ? -1 : 0\r\n      })\r\n\r\n    }\r\n\r\n    this._oldBounds = this.bounds.clone()\r\n\r\n    // add paths to this.node\r\n    this._paths.reverse()\r\n    let paths = []\r\n    this._paths.each((function (path) {\r\n      paths.push(this.node.childNodes[0].childNodes[0].childNodes[0].appendChild(path))\r\n    }).bind(this))\r\n\r\n    this._paths = paths\r\n\r\n    // init interaction path\r\n    this._paths.each((function (path) {\r\n      let iPath = path.cloneNode(false)\r\n      iPath.setAttributeNS(null, 'id', undefined)\r\n      iPath.setAttributeNS(null, 'stroke-width', 10)\r\n      iPath.setAttributeNS(null, 'visibility', 'hidden')\r\n      iPath.setAttributeNS(null, 'stroke-dasharray', null)\r\n      iPath.setAttributeNS(null, 'stroke', 'black')\r\n      iPath.setAttributeNS(null, 'fill', 'none')\r\n      iPath.setAttributeNS(null, 'title', this.getStencil().title())\r\n      this._interactionPaths.push(this.node.childNodes[0].childNodes[0].childNodes[0].appendChild(iPath))\r\n    }).bind(this))\r\n\r\n    this._paths.reverse()\r\n    this._interactionPaths.reverse()\r\n\r\n    /**initialize labels*/\r\n    let textElems = svgDocument.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'text')\r\n\r\n    $A(textElems).each((function (textElem) {\r\n      let label = new ORYX_SVG.Label({\r\n        textElement: textElem,\r\n        shapeId: this.id\r\n      })\r\n      this.node.childNodes[0].childNodes[0].appendChild(label.node)\r\n      this._labels.set(label.id, label)\r\n\r\n      label.registerOnChange(this.layout.bind(this))\r\n    }).bind(this))\r\n\r\n    this.propertiesChanged.each(function (pair) {\r\n      pair.value = true\r\n    })\r\n\r\n    //if(this.dockers.length == 2) {\r\n\r\n\r\n    //  }\r\n\r\n    //this._update(true);\r\n  }\r\n\r\n  getValidMarkerId (markerUrl) {\r\n    if (markerUrl.indexOf('url(\"#') >= 0) {\r\n      // Fix for IE9, additional quotes are added to the <id\r\n      let rawId = markerUrl.replace(/^url\\(\\\"#/, '').replace(/\\\"\\)$/, '')\r\n      return this.id + rawId\r\n    } else {\r\n      markerUrl = markerUrl.replace(/^url\\(#/, '')\r\n      return this.id.concat(markerUrl.replace(/\\)$/, ''))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds all necessary markers of this Edge to the SVG document.\r\n   * Has to be called, while this.node is part of DOM.\r\n   */\r\n  addMarkers (defs) {\r\n    this._markers.each(function (marker) {\r\n      if (!defs.ownerDocument.getElementById(marker.value.id)) {\r\n        marker.value.element = defs.appendChild(marker.value.element)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Removes all necessary markers of this Edge from the SVG document.\r\n   * Has to be called, while this.node is part of DOM.\r\n   */\r\n  removeMarkers () {\r\n    let svgElement = this.node.ownerSVGElement\r\n    if (svgElement) {\r\n      let defs = svgElement.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'defs')\r\n      if (defs.length > 0) {\r\n        defs = defs[0]\r\n        this._markers.each(function (marker) {\r\n          let foundMarker = defs.ownerDocument.getElementById(marker.value.id)\r\n          if (foundMarker) {\r\n            marker.value.element = defs.removeChild(marker.value.element)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calls when a docker has changed\r\n   */\r\n  _dockerChanged () {\r\n    //this._update(true);\r\n    this._dockerUpdated = true\r\n  }\r\n\r\n  serialize () {\r\n    let result = super.serialize()\r\n    // var result = arguments.callee.$.serialize.apply(this)\r\n\r\n    //add dockers triple\r\n    let value = ''\r\n    this._dockersByPath.each((function (pair) {\r\n      pair.value.each(function (docker) {\r\n        let position = docker.getDockedShape() && docker.referencePoint ? docker.referencePoint : docker.bounds.center()\r\n        value = value.concat(position.x + ' ' + position.y + ' ')\r\n      })\r\n\r\n      value += ' # '\r\n    }).bind(this))\r\n    result.push({\r\n      name: 'dockers',\r\n      prefix: 'oryx',\r\n      value: value,\r\n      type: 'literal'\r\n    })\r\n\r\n    //add parent triple dependant on the dockedShapes\r\n    //TODO change this when canvas becomes a resource\r\n    /*        var source = this.dockers.first().getDockedShape();\r\n     var target = this.dockers.last().getDockedShape();\r\n     var sharedParent;\r\n     if (source && target) {\r\n     //get shared parent\r\n     while (source.parent) {\r\n     source = source.parent;\r\n     if (source instanceof ORYX.Core.Canvas) {\r\n     sharedParent = source;\r\n     break;\r\n     }\r\n     else {\r\n     var targetParent = target.parent;\r\n     var found;\r\n     while (targetParent) {\r\n     if (source === targetParent) {\r\n     sharedParent = source;\r\n     found = true;\r\n     break;\r\n     }\r\n     else {\r\n     targetParent = targetParent.parent;\r\n     }\r\n     }\r\n     if (found) {\r\n     break;\r\n     }\r\n     }\r\n     }\r\n     }\r\n     else\r\n     if (source) {\r\n     sharedParent = source.parent;\r\n     }\r\n     else\r\n     if (target) {\r\n     sharedParent = target.parent;\r\n     }\r\n     */\r\n    //if (sharedParent) {\r\n    /*            result.push({\r\n     name: 'parent',\r\n     prefix: 'raziel',\r\n     //value: '#' + ERDF.__stripHashes(sharedParent.resourceId),\r\n     value: '#' + ERDF.__stripHashes(this.getCanvas().resourceId),\r\n     type: 'resource'\r\n     });*/\r\n    //}\r\n\r\n    //serialize target and source\r\n    let lastDocker = this.dockers.last()\r\n    let target = lastDocker.getDockedShape()\r\n\r\n    if (target) {\r\n      result.push({\r\n        name: 'target',\r\n        prefix: 'raziel',\r\n        value: '#' + ERDF.__stripHashes(target.resourceId),\r\n        type: 'resource'\r\n      })\r\n    }\r\n\r\n    try {\r\n      //result = this.getStencil().serialize(this, result);\r\n      let serializeEvent = this.getStencil().serialize()\r\n\r\n      /*\r\n       * call serialize callback by reference, result should be found\r\n       * in serializeEvent.result\r\n       */\r\n      if (serializeEvent.type) {\r\n        serializeEvent.shape = this\r\n        serializeEvent.data = result\r\n        serializeEvent.result = undefined\r\n        serializeEvent.forceExecution = true\r\n\r\n        this._delegateEvent(serializeEvent)\r\n\r\n        if (serializeEvent.result) {\r\n          result = serializeEvent.result\r\n        }\r\n      }\r\n    }\r\n    catch (e) {}\r\n    return result\r\n  }\r\n\r\n  deserialize (data) {\r\n    try {\r\n      // data = this.getStencil().deserialize(this, data);\r\n      let deserializeEvent = this.getStencil().deserialize()\r\n\r\n      /*\r\n       * call serialize callback by reference, result should be found\r\n       * in serializeEventInfo.result\r\n       */\r\n      if (deserializeEvent.type) {\r\n        deserializeEvent.shape = this\r\n        deserializeEvent.data = data\r\n        deserializeEvent.result = undefined\r\n        deserializeEvent.forceExecution = true\r\n\r\n        this._delegateEvent(deserializeEvent)\r\n        if (deserializeEvent.result) {\r\n          data = deserializeEvent.result\r\n        }\r\n      }\r\n    }\r\n    catch (e) {}\r\n\r\n    // Set the outgoing shapes\r\n    let target = data.find(function (ser) {\r\n      return (ser.prefix + '-' + ser.name) == 'raziel-target'\r\n    })\r\n    let targetShape\r\n    if (target) {\r\n      targetShape = this.getCanvas().getChildShapeByResourceId(target.value)\r\n    }\r\n\r\n    let outgoing = data.findAll(function (ser) {\r\n      return (ser.prefix + '-' + ser.name) == 'raziel-outgoing'\r\n    })\r\n    outgoing.each((function (obj) {\r\n      // TODO: Look at Canvas\r\n      if (!this.parent) {\r\n        return\r\n      }\r\n\r\n      // Set outgoing Shape\r\n      let next = this.getCanvas().getChildShapeByResourceId(obj.value)\r\n\r\n      if (next) {\r\n        if (next == targetShape) {\r\n          // If this is an edge, set the last docker to the next shape\r\n          this.dockers.last().setDockedShape(next)\r\n          this.dockers.last().setReferencePoint({ x: next.bounds.width() / 2.0, y: next.bounds.height() / 2.0 })\r\n        } else if (next instanceof Edge) {\r\n          // Set the first docker of the next shape\r\n          next.dockers.first().setDockedShape(this)\r\n          //next.dockers.first().setReferencePoint({x: this.bounds.width() / 2.0, y: this.bounds.height() / 2.0});\r\n        }\r\n        /*else if(next.dockers.length > 0) { //next is a node and next has a docker\r\n         next.dockers.first().setDockedShape(this);\r\n         next.dockers.first().setReferencePoint({x: this.bounds.width() / 2.0, y: this.bounds.height() / 2.0});\r\n         }*/\r\n      }\r\n\r\n    }).bind(this))\r\n\r\n    let oryxDockers = data.find(function (obj) {\r\n      return (obj.prefix === 'oryx' &&\r\n        obj.name === 'dockers')\r\n    })\r\n\r\n    if (oryxDockers) {\r\n      let dataByPath = oryxDockers.value.split('#').without('').without(' ')\r\n\r\n      dataByPath.each((function (data, index) {\r\n        let values = data.replace(/,/g, ' ').split(' ').without('')\r\n\r\n        // for each docker two values must be defined\r\n        if (values.length % 2 === 0) {\r\n          let path = this._paths[index]\r\n\r\n          if (path) {\r\n            if (index === 0) {\r\n              while (this._dockersByPath.get(path.id).length > 2) {\r\n                this.removeDocker(this._dockersByPath.get(path.id)[1])\r\n              }\r\n            } else {\r\n              while (this._dockersByPath.get(path.id).length > 1) {\r\n                this.removeDocker(this._dockersByPath.get(path.id)[0])\r\n              }\r\n            }\r\n\r\n            let dockersByPath = this._dockersByPath.get(path.id)\r\n\r\n            if (index === 0) {\r\n              // set position of first docker\r\n              let x = parseFloat(values.shift())\r\n              let y = parseFloat(values.shift())\r\n\r\n              if (dockersByPath.first().getDockedShape()) {\r\n                dockersByPath.first().setReferencePoint({\r\n                  x: x,\r\n                  y: y\r\n                })\r\n              } else {\r\n                dockersByPath.first().bounds.centerMoveTo(x, y)\r\n              }\r\n            }\r\n\r\n            // set position of last docker\r\n            let y = parseFloat(values.pop())\r\n            let x = parseFloat(values.pop())\r\n\r\n            if (dockersByPath.last().getDockedShape()) {\r\n              dockersByPath.last().setReferencePoint({\r\n                x: x,\r\n                y: y\r\n              })\r\n            } else {\r\n              dockersByPath.last().bounds.centerMoveTo(x, y)\r\n            }\r\n\r\n            // add additional dockers\r\n            for (let i = 0; i < values.length; i++) {\r\n              x = parseFloat(values[i])\r\n              y = parseFloat(values[++i])\r\n\r\n              let newDocker = this.createDocker()\r\n              newDocker.bounds.centerMoveTo(x, y)\r\n\r\n              //this.dockers = this.dockers.without(newDocker);\r\n              //this.dockers.splice(this.dockers.indexOf(dockersByPath.last()), 0, newDocker);\r\n              //dockersByPath.splice(this.dockers.indexOf(dockersByPath.last()), 0, newDocker);\r\n            }\r\n          }\r\n        }\r\n      }).bind(this))\r\n    } else {\r\n      this.alignDockers()\r\n    }\r\n\r\n    // arguments.callee.$.deserialize.apply(this, arguments)\r\n    super.deserialize(...arguments)\r\n    this._changed()\r\n  }\r\n\r\n  toString () {\r\n    return this.getStencil().title() + ' ' + this.id\r\n  }\r\n\r\n  /**\r\n   * @return {ORYX.Core.Shape} Returns last docked shape or null.\r\n   */\r\n  getTarget () {\r\n    return this.dockers.last() ? this.dockers.last().getDockedShape() : null\r\n  }\r\n\r\n  /**\r\n   * @return {ORYX.Core.Shape} Returns the first docked shape or null\r\n   */\r\n  getSource () {\r\n    return this.dockers.first() ? this.dockers.first().getDockedShape() : null\r\n  }\r\n\r\n  /**\r\n   * Checks whether the edge is at least docked to one shape.\r\n   *\r\n   * @return {boolean} True if edge is docked\r\n   */\r\n  isDocked () {\r\n    let isDocked = false\r\n    this.dockers.each(function (docker) {\r\n      if (docker.isDocked()) {\r\n        isDocked = true\r\n        throw $break\r\n      }\r\n    })\r\n    return isDocked\r\n  }\r\n\r\n  /**\r\n   * Calls {@link ORYX.Core.AbstractShape#toJSON} and add a some stencil set information.\r\n   */\r\n  toJSON () {\r\n    // var json = arguments.callee.$.toJSON.apply(this, arguments)\r\n    let json = super.toJSON()\r\n\r\n    if (this.getTarget()) {\r\n      json.target = {\r\n        resourceId: this.getTarget().resourceId\r\n      }\r\n    }\r\n\r\n    return json\r\n  }\r\n\r\n  getInstanceofType () {\r\n    return 'Edge, Shape'\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./demo-block.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./demo-block.vue?vue&type=style&index=0&lang=scss&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAI3SURBVDiNdZNPiI5RFMZ/54pJmh0hu4lpym6+YaHIykSzpHnv9w4xFixkKNmMkFJYYNiQv9H3npmNmprMQinDzBRmpaaJKKWYshAp/3ofi++O3o27ubdzn+e559zzHJNEdWVZ1m5mDaAFWJ7CM8CMpGJ4ePh1FR8WDmZm9Xr9iJlNA13AWmAH0CXppqSlZjaZMPaPJwkzs97e3jEzawVGgd3APPDB3fcvgPM8byvL8q6kFkl9IyMjbwJAjHHAzFo7Ojq2AjVgHDgK9MUYOxcEGo3GuxDCHjOrhRDOAIQsy9olDYYQ9s7NzQFsAx66+yxwDbhUrbksy6vAIqA7y7L2YGZ1SbcbjcY7YGO6nE7408D6GOPOlOkuoAeYl3TDzGJIKU8lwnbgEbA6xngI+AqcBC7EGFcBV9LfPE2crgDUzOxFRWAcuAVcBfYA14HvwHPgPfAGmEic2r82xhhXAJ3AmrSfAE6lkgaAn8Dh1OKJBV6gaZANQDfwGTiWgOeBX8ABd3/s7uuAxcAP4FXizASaLtuU0l8JPHH3wt3/pPoHY4zL0oObgUl3LxPnZZBUmFl/EvgCHKx0bQT4lDIC2AJM5HneZmb9ktwkUa/XL0o6amb9RVHcqQgQY+wB7tO09lsz2yHpnJk9KIricgAoy/IZ8FHSvjzP26oC7j4GzAL3gCWSzkv65u5DkGYBmsMUYxyQNCjpNjBVae9e4Czw28yOu/uQEtH+M851mgarpfAM0A6MuvvxKv4vcuLvYtMimB8AAAAASUVORK5CYII=\"","export default class PropertyItem {\r\n  constructor (jsonItem, namespace, property) {\r\n    // arguments.callee.$.construct.apply(this, arguments)\r\n    if (!jsonItem) {\r\n      throw 'ORYX.Core.StencilSet.PropertyItem(construct): Parameter jsonItem is not defined.'\r\n    }\r\n    if (!namespace) {\r\n      throw 'ORYX.Core.StencilSet.PropertyItem(construct): Parameter namespace is not defined.'\r\n    }\r\n    if (!property) {\r\n      throw 'ORYX.Core.StencilSet.PropertyItem(construct): Parameter property is not defined.'\r\n    }\r\n\r\n    this._jsonItem = jsonItem\r\n    this._namespace = namespace\r\n    this._property = property\r\n\r\n    // init all values\r\n    if (!jsonItem.value) {\r\n      throw 'ORYX.Core.StencilSet.PropertyItem(construct): Value is not defined.'\r\n    }\r\n\r\n    if (this._jsonItem.refToView) {\r\n      if (!(this._jsonItem.refToView instanceof Array)) {\r\n        this._jsonItem.refToView = [this._jsonItem.refToView]\r\n      }\r\n    } else {\r\n      this._jsonItem.refToView = []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {ORYX.Core.StencilSet.PropertyItem} item\r\n   * @return {Boolean} True, if item has the same namespace and id.\r\n   */\r\n  equals (item) {\r\n    return (this.property().equals(item.property()) &&\r\n      this.value() === item.value())\r\n  }\r\n\r\n  namespace () {\r\n    return this._namespace\r\n  }\r\n\r\n  property () {\r\n    return this._property\r\n  }\r\n\r\n  value () {\r\n    return this._jsonItem.value\r\n  }\r\n\r\n  title () {\r\n    return this._jsonItem.title\r\n  }\r\n\r\n  refToView () {\r\n    return this._jsonItem.refToView\r\n  }\r\n\r\n  icon () {\r\n    return (this._jsonItem.icon) ? this.property().stencil()._source + 'icons/' + this._jsonItem.icon : ''\r\n  }\r\n\r\n  toString () {\r\n    return 'PropertyItem ' + this.property() + ' (' + this.value() + ')'\r\n  }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHwSURBVDiNpZO7ahtREIb//2zlgEq/QAxmm1RSHJBSqA0IFSn2mkLkBWQMBoMLWYXBpDBJb0SK7OpSpJADadNIEBw1qUQKvYGrsO52/xQ+axaRuMnAgTkz8w3DXCgJVQmCYJ9kBKBuHwCsAKwkpZPJ5Fc13pQKSUZRdEhyIWlH0hWABoCGpCtJOyQXNoYPnCSQpO/7X0jWjDG9JEk2tppTAJhMJucAEMfx06IoPkr6PZ1OO5JkACAMwz7Jmuu67Qq8R/KI5FEQBHsAkCTJxnXdNslaGIZ9AKDv+/skF8aYFyUMAFEUzST9tN9n4/HYL322ku+SWoZkJGlUheM4PpDUyrLsMsuySwAv4zg+KP1JkmwkjUiGxnZ6We1sURTvAJzN5/O7+Xx+B+DM2qqyBNAwAOokbypj7JDczfN8VNryPB+R3A2CoFOZ2g2Auqmm9DzPIXkB4GQ2m+Wl3eonJC88z3OqjMH9gjwHAMdxeiRv0zS93ioXaZpek7x1HKcHAJZZGdxvWbPb7T4BMCR5vA1Xyj4GMLSxTQA/HsZI8o2krwD4rwRWRPKVpE+SWpSEKIoOJb12Xbc9GAyKx+jhcGjW6/U3kp/TNH3/6Cpvy99WmeU1kmQYhn1Jp5JGAJbleG3DmiTfkjwfj8cfZEH+7zn/AYEtEGe76vxlAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHdSURBVDiNlZA/aFNRFMZ/517TBCuVUsFAUXCQBAcnqVDIkEmK4KI8cpPwNsnmWBzjlkUdugjFofD+OLg5qOhiBxUFtaBDS+0SBwXx3/p877i8V5MUrL1wufc79/t+h3tEVfE8b95aewF4EsfxkAMs45y7Z60dAneBbedco3jsdDqznuedKXSz2Ty0ByAiD4HvuZ4CLIDv+9NZlm1Ya98458632+3L1Wr1p3Pu4hggiqI1YLsoiMh7gCRJVoETQFlE1lT1NnAYWPF9f3oX0Ov1SsBCrj/UarVvrVZrFXCFSVVrOQzgVJIkg92Gqopz7gdwFEiA18DiPrNTY8xSGIaPC8A60NgnNLm+lEqlsyb/9+8DhgEkSZLrBkBVX/1naAcomm0BRwxApVIZAM8AnQi8yM87ItKo1+ungZW8NisiD0T1b8Y5twikwE3gnTHmVpZlH0VkKYqiRwDdbncmTdMt4LiqLpvRdnEcP0/T9C1wzlo7CMNwB9gAZgpPEAS/VHUZQESujAEAyuXyHLAZBMGnfD5PgWMTtpfAV2B+DyBN00vAeqFF5LOqVkc9xpgaMASmxgCe550EronI/TwsquoD1RGPVdUbIrKpqldR1X9u51yv3W4vjNb6/b4p7n8ANDrN08J3/dUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAA4ElEQVQ4jcXTMUoDYRQE4E/RxkKIVsFGlniCdGJhZ+0BbGOuZG0nHsDSQrCKFxAWK1OpYGFjRAvfg5dULls4sOzO8L/ZmX/3pyfW4r6HE2z8cW6BGzyn8IDvjtesJnjFI96Dj/GCp+D72M0hbOMAO4pBUyJeYVL4JLREEzNLnavBAMOiDUNrVtfWCpv4LBEX+Ai+FS/Lirl2qcKoJLjGtPBpaIlRVljXE70r1E08RRvPF7jDZfAzHOE8eCO+SjVoi8Eb5oXPQ2utICvc+92PLj/SFw7TYIBj3c7CbaT6Z/wA/KJBKwSJwNIAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG6SURBVDiNpVMxixNBFP6+2YgEDCmsrrU4thRSHOQsUocrzsJsZiNExD6CpdUW6ZVrQ0gCm52kUvAnmJMTYyukCFjZiCB2QuazuF1ZJHcg98HAe/Pe92Z473uUhDK63e4hyRhAIz8AsAawljR3zm3K+aYwSDKO4+ckV5KqkkYADgAcSBpJqpJc5Tn8y5MEkoyi6B3JmjHmSZqmW+xBr9e7572fSPq1WCxOJMkAgLV2QLIWhmHrKjIApGm6DcOwRbJmrR0AAKMoOiS5MsYcXUcGgDiOHwP4TnLjvb+QdFwhGUsaX0fudDrVIAjOALQkdZxz2263OyZpK3mnR3teewDglaRbQRDcAfB5t9s1lsvlzzzlHMCzCoAGyRMALBeQdAbgfu5+zbLsUTlO8g2AbwZX43fJrrbb7dv7kgwuBXL6b4DkCwAfSa4BfKnX6x/6/f7d0g9PAawruFRZE8DbcoH5fP4ewFHhW2sfzmazH9PptLhqAvj0X2MskAvqQtKxcc5tSA6995MkSa7rCQAgSRLjvZ+QHDrnNjeWMottJElr7UDSS0ljAOf5qIqGNUk+JTnMsuy1ciJvus5/AKMw7BIT3RiXAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAA6ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNS0wMy0zMVQxODowMzoxNzwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAzLjM8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzI8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MTY8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjE2PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CuoDqDMAAADmSURBVDgRtZK7DgFRFEXH4yckGpHoFDoNGhGJwh+oBIWoxAfodELrUxRKFX8gkeiIjhDxWDsxyR1mJjMRO1kz556zz537GMv6UZEQ/VG8OchCBjYwg0Aq4FrA02BMHEgdXCdQ8xDUqLgBVlwPH3WpTcDe6oH4AXdYw5dSZLTcKvThBuay7XhOPgYOJRhtwTZ5vc948o7O92AaoFnLb7s1F0lqX15fVf4CPXBVnewSRtCCI3xONiDnK/ukZSrDHsxJKiqEUROzOUHJrVm/p5fSRmFHLAJLd7yCK+h2khBKOo8a6Hb+qxfAEUnyloiAAQAAAABJRU5ErkJggg==\"","const ORYX_LOGLEVEL_TRACE = 5\r\nconst ORYX_LOGLEVEL_DEBUG = 4\r\nconst ORYX_LOGLEVEL_INFO = 3\r\nconst ORYX_LOGLEVEL_WARN = 2\r\nconst ORYX_LOGLEVEL_ERROR = 1\r\nconst ORYX_LOGLEVEL_FATAL = 0\r\nconst ORYX_LOGLEVEL = 3\r\n\r\n\r\nfunction printf () {\r\n  var result = arguments[0]\r\n  for (let i = 1; i < arguments.length; i++)\r\n    result = result.replace('%' + (i - 1), arguments[i])\r\n  return result\r\n}\r\n\r\nconst ORYX_Log = {\r\n  __appenders: [\r\n    {\r\n      append: function (message) {\r\n        if (typeof(console) !== 'undefined' && console.log !== undefined) {\r\n          console.log(message)\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  trace: function () {\r\n    if (ORYX_LOGLEVEL >= ORYX_LOGLEVEL_TRACE)\r\n      ORYX_Log.__log('TRACE', arguments)\r\n  },\r\n  debug: function () {\r\n    if (ORYX_LOGLEVEL >= ORYX_LOGLEVEL_DEBUG)\r\n      ORYX_Log.__log('DEBUG', arguments)\r\n  },\r\n  info: function () {\r\n    if (ORYX_LOGLEVEL >= ORYX_LOGLEVEL_INFO)\r\n      ORYX_Log.__log('INFO', arguments)\r\n  },\r\n  warn: function () {\r\n    if (ORYX_LOGLEVEL >= ORYX_LOGLEVEL_WARN)\r\n      ORYX_Log.__log('WARN', arguments)\r\n  },\r\n  error: function () {\r\n    if (ORYX_LOGLEVEL >= ORYX_LOGLEVEL_ERROR)\r\n      ORYX_Log.__log('ERROR', arguments)\r\n  },\r\n  fatal: function () {\r\n    if (ORYX_LOGLEVEL >= ORYX_LOGLEVEL_FATAL)\r\n      ORYX_Log.__log('FATAL', arguments)\r\n  },\r\n\r\n  __log: function (prefix, messageParts) {\r\n\r\n    messageParts[0] = (new Date()).getTime() + ' '\r\n      + prefix + ' ' + messageParts[0]\r\n    var message = printf.apply(null, messageParts)\r\n\r\n    ORYX_Log.__appenders.each(function (appender) {\r\n      appender.append(message)\r\n    })\r\n  },\r\n\r\n  addAppender: function (appender) {\r\n    ORYX_Log.__appenders.push(appender)\r\n  }\r\n}\r\n\r\nexport default ORYX_Log\r\n","\r\nconst FLOW_eventBus = {\r\n  /** A mapping for storing the listeners*/\r\n  listeners: {},\r\n  // editor: null,\r\n  /**\r\n   * Add an event listener to the event bus, listening to the event with the provided type.\r\n   * Type and callback are mandatory parameters.\r\n   *\r\n   * Provide scope parameter if it is important that the callback is executed\r\n   * within a specific scope.\r\n   */\r\n  addListener: function (type, callback, scope) {\r\n    // Add to the listeners map\r\n    if (typeof this.listeners[type] !== 'undefined') {\r\n      this.listeners[type].push({ scope: scope, callback: callback })\r\n    } else {\r\n      this.listeners[type] = [\r\n        { scope: scope, callback: callback }\r\n      ]\r\n    }\r\n  },\r\n  /**\r\n   * Removes the provided event listener.\r\n   */\r\n  removeListener: function (type, callback, scope) {\r\n    if (typeof this.listeners[type] !== 'undefined') {\r\n      const numOfCallbacks = this.listeners[type].length\r\n      let newArray = []\r\n      for (let i = 0; i < numOfCallbacks; i++) {\r\n        let listener = this.listeners[type][i]\r\n        if (listener.scope === scope && listener.callback === callback) {\r\n          // Do nothing, this is the listener and doesn't need to survive\r\n        } else {\r\n          newArray.push(listener)\r\n        }\r\n      }\r\n      this.listeners[type] = newArray\r\n    }\r\n  },\r\n  hasListener: function (type, callback, scope) {\r\n    if (typeof this.listeners[type] !== 'undefined') {\r\n      const numOfCallbacks = this.listeners[type].length\r\n      if (callback === undefined && scope === undefined) {\r\n        return numOfCallbacks > 0\r\n      }\r\n      for (let i = 0; i < numOfCallbacks; i++) {\r\n        const listener = this.listeners[type][i]\r\n        if (listener.scope === scope && listener.callback === callback) {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  },\r\n\r\n  /**\r\n   * Dispatch an event to all event listeners registered to that specific type.\r\n   */\r\n  dispatch: function (type, event, shape) {\r\n    if (typeof this.listeners[type] !== 'undefined') {\r\n      const numOfCallbacks = this.listeners[type].length\r\n      for (let i = 0; i < numOfCallbacks; i++) {\r\n        let listener = this.listeners[type][i]\r\n        if (listener && listener.callback) {\r\n          listener.callback.apply(listener.scope, [event, shape])\r\n        }\r\n      }\r\n    }\r\n  },\r\n  // dispatchOryxEvent: function (event, uiObject) {\r\n  //   this.editor.handleEvents(event, uiObject)\r\n  // }\r\n}\r\n\r\n\r\nexport default FLOW_eventBus\r\n\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEaSURBVDiNnZMxTsNAEEX/TFxYgoIWijSUiDJISIjg3MFreyUKt1TcBAp6I6XxLiegwVIqTuACiQO4o6D07lA5IgSMnZF+szv/z5NmFyKCXRTH8VREQCKCsZUkySUzW+fc2eiANE2PvfdEREfGmBWPMWutF0T0ysxijFkBwOCAPM8PAOwRUVKW5Xt3HgydLCLLMAxPiqL4+H73L0EURYH3/pyIrn+aAfRvQWs9997fN00zq6qq/a2nl0BEbpj59i9z17SlLMvmaZo+DXlQWwRKqYmI3BHRQx9dVxtb0FpfMPPCOTez1rohAWsCpdS+iCyZ+WWoeU2QZdlVEASHbdueWms/h5oBYFLX9ZSZnwE8GmPexpgBYONr7qIvNHLtFa0NliQAAAAASUVORK5CYII=\"","/**\r\n * EditPathHandler\r\n *\r\n * Edit SVG paths' coordinates according to specified from-to movement and\r\n * horizontal and vertical scaling factors.\r\n * The resulting path's d attribute is stored in instance variable d.\r\n */\r\nexport default class EditPathHandler {\r\n  constructor () {\r\n    // arguments.callee.$.construct.apply(this, arguments);\r\n    this.x = 0\r\n    this.y = 0\r\n    this.oldX = 0\r\n    this.oldY = 0\r\n    this.deltaWidth = 1\r\n    this.deltaHeight = 1\r\n    this.d = ''\r\n  }\r\n  /**\r\n   * init\r\n   *\r\n   * @param {float} x Target point's x-coordinate\r\n   * @param {float} y Target point's y-coordinate\r\n   * @param {float} oldX Reference point's x-coordinate\r\n   * @param {float} oldY Reference point's y-coordinate\r\n   * @param {float} deltaWidth Horizontal scaling factor\r\n   * @param {float} deltaHeight Vertical scaling factor\r\n   */\r\n  init (x, y, oldX, oldY, deltaWidth, deltaHeight) {\r\n    this.x = x\r\n    this.y = y\r\n    this.oldX = oldX\r\n    this.oldY = oldY\r\n    this.deltaWidth = deltaWidth\r\n    this.deltaHeight = deltaHeight\r\n\r\n    this.d = ''\r\n  }\r\n  /**\r\n   * editPointsAbs\r\n   * @param {Array} points Array of absolutePoints\r\n   */\r\n  editPointsAbs (points) {\r\n    if (points instanceof Array) {\r\n      let newPoints = []\r\n      let x, y\r\n      for (let i = 0; i < points.length; i++) {\r\n        x = (parseFloat(points[i]) - this.oldX) * this.deltaWidth + this.x\r\n        i++\r\n        y = (parseFloat(points[i]) - this.oldY) * this.deltaHeight + this.y\r\n        newPoints.push(x)\r\n        newPoints.push(y)\r\n      }\r\n\r\n      return newPoints\r\n    } else {\r\n      //TODO error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * editPointsRel\r\n   *\r\n   * @param {Array} points Array of absolutePoints\r\n   */\r\n  editPointsRel (points) {\r\n    if (points instanceof Array) {\r\n      let newPoints = []\r\n      let x, y\r\n      for (let i = 0; i < points.length; i++) {\r\n        x = parseFloat(points[i]) * this.deltaWidth\r\n        i++\r\n        y = parseFloat(points[i]) * this.deltaHeight\r\n        newPoints.push(x)\r\n        newPoints.push(y)\r\n      }\r\n\r\n      return newPoints\r\n    } else {\r\n      //TODO error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * arcAbs - A\r\n   *\r\n   * @param {Number} rx\r\n   * @param {Number} ry\r\n   * @param {Number} xAxisRotation\r\n   * @param {Boolean} largeArcFlag\r\n   * @param {Boolean} sweepFlag\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  arcAbs (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\r\n    let pointsAbs = this.editPointsAbs([x, y])\r\n    let pointsRel = this.editPointsRel([rx, ry])\r\n\r\n    this.d = this.d.concat(' A' + pointsRel[0] + ' ' + pointsRel[1] +\r\n      ' ' + xAxisRotation + ' ' + largeArcFlag +\r\n      ' ' + sweepFlag + ' ' + pointsAbs[0] + ' ' +\r\n      pointsAbs[1] + ' ')\r\n  }\r\n\r\n  /**\r\n   * arcRel - a\r\n   *\r\n   * @param {Number} rx\r\n   * @param {Number} ry\r\n   * @param {Number} xAxisRotation\r\n   * @param {Boolean} largeArcFlag\r\n   * @param {Boolean} sweepFlag\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  arcRel (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\r\n    let pointsRel = this.editPointsRel([rx, ry, x, y])\r\n\r\n    this.d = this.d.concat(' a' + pointsRel[0] + ' ' + pointsRel[1] +\r\n      ' ' + xAxisRotation + ' ' + largeArcFlag +\r\n      ' ' + sweepFlag + ' ' + pointsRel[2] + ' ' +\r\n      pointsRel[3] + ' ')\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicAbs - C\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicAbs (x1, y1, x2, y2, x, y) {\r\n    let pointsAbs = this.editPointsAbs([x1, y1, x2, y2, x, y])\r\n\r\n    this.d = this.d.concat(' C' + pointsAbs[0] + ' ' + pointsAbs[1] +\r\n      ' ' + pointsAbs[2] + ' ' + pointsAbs[3] +\r\n      ' ' + pointsAbs[4] + ' ' + pointsAbs[5] + ' ')\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicRel - c\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicRel (x1, y1, x2, y2, x, y) {\r\n    let pointsRel = this.editPointsRel([x1, y1, x2, y2, x, y])\r\n\r\n    this.d = this.d.concat(' c' + pointsRel[0] + ' ' + pointsRel[1] +\r\n      ' ' + pointsRel[2] + ' ' + pointsRel[3] +\r\n      ' ' + pointsRel[4] + ' ' + pointsRel[5] + ' ')\r\n  }\r\n\r\n  /**\r\n   * linetoHorizontalAbs - H\r\n   *\r\n   * @param {Number} x\r\n   */\r\n  linetoHorizontalAbs (x) {\r\n    let pointsAbs = this.editPointsAbs([x, 0])\r\n\r\n    this.d = this.d.concat(' H' + pointsAbs[0] + ' ')\r\n  }\r\n\r\n  /**\r\n   * linetoHorizontalRel - h\r\n   *\r\n   * @param {Number} x\r\n   */\r\n  linetoHorizontalRel (x) {\r\n    let pointsRel = this.editPointsRel([x, 0])\r\n    this.d = this.d.concat(' h' + pointsRel[0] + ' ')\r\n  }\r\n\r\n  /**\r\n   * linetoAbs - L\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  linetoAbs (x, y) {\r\n    let pointsAbs = this.editPointsAbs([x, y])\r\n    this.d = this.d.concat(' L' + pointsAbs[0] + ' ' + pointsAbs[1] + ' ')\r\n  }\r\n\r\n  /**\r\n   * linetoRel - l\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  linetoRel (x, y) {\r\n    let pointsRel = this.editPointsRel([x, y])\r\n    this.d = this.d.concat(' l' + pointsRel[0] + ' ' + pointsRel[1] + ' ')\r\n  }\r\n\r\n  /**\r\n   * movetoAbs - M\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  movetoAbs (x, y) {\r\n    let pointsAbs = this.editPointsAbs([x, y])\r\n    this.d = this.d.concat(' M' + pointsAbs[0] + ' ' + pointsAbs[1] + ' ')\r\n  }\r\n\r\n  /**\r\n   * movetoRel - m\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  movetoRel (x, y) {\r\n    let pointsRel\r\n    if (this.d === '') {\r\n      pointsRel = this.editPointsAbs([x, y])\r\n    } else {\r\n      pointsRel = this.editPointsRel([x, y])\r\n    }\r\n    this.d = this.d.concat(' m' + pointsRel[0] + ' ' + pointsRel[1] + ' ')\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticAbs - Q\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticAbs (x1, y1, x, y) {\r\n    let pointsAbs = this.editPointsAbs([x1, y1, x, y])\r\n    this.d = this.d.concat(' Q' + pointsAbs[0] + ' ' + pointsAbs[1] + ' ' +\r\n      pointsAbs[2] + ' ' + pointsAbs[3] + ' ')\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticRel - q\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticRel (x1, y1, x, y) {\r\n    let pointsRel = this.editPointsRel([x1, y1, x, y])\r\n    this.d = this.d.concat(' q' + pointsRel[0] + ' ' + pointsRel[1] + ' ' +\r\n      pointsRel[2] + ' ' + pointsRel[3] + ' ')\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicSmoothAbs - S\r\n   *\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicSmoothAbs (x2, y2, x, y) {\r\n    let pointsAbs = this.editPointsAbs([x2, y2, x, y])\r\n    this.d = this.d.concat(' S' + pointsAbs[0] + ' ' + pointsAbs[1] + ' ' +\r\n      pointsAbs[2] + ' ' + pointsAbs[3] + ' ')\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicSmoothRel - s\r\n   *\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicSmoothRel (x2, y2, x, y) {\r\n    let pointsRel = this.editPointsRel([x2, y2, x, y])\r\n    this.d = this.d.concat(' s' + pointsRel[0] + ' ' + pointsRel[1] + ' ' +\r\n      pointsRel[2] + ' ' + pointsRel[3] + ' ')\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticSmoothAbs - T\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticSmoothAbs (x, y) {\r\n    let pointsAbs = this.editPointsAbs([x, y])\r\n    this.d = this.d.concat(' T' + pointsAbs[0] + ' ' + pointsAbs[1] + ' ')\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticSmoothRel - t\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticSmoothRel (x, y) {\r\n    let pointsRel = this.editPointsRel([x, y])\r\n    this.d = this.d.concat(' t' + pointsRel[0] + ' ' + pointsRel[1] + ' ')\r\n  }\r\n\r\n  /**\r\n   * linetoVerticalAbs - V\r\n   *\r\n   * @param {Number} y\r\n   */\r\n  linetoVerticalAbs (y) {\r\n    let pointsAbs = this.editPointsAbs([0, y])\r\n    this.d = this.d.concat(' V' + pointsAbs[1] + ' ')\r\n  }\r\n\r\n  /**\r\n   * linetoVerticalRel - v\r\n   *\r\n   * @param {Number} y\r\n   */\r\n  linetoVerticalRel (y) {\r\n    let pointsRel = this.editPointsRel([0, y])\r\n    this.d = this.d.concat(' v' + pointsRel[1] + ' ')\r\n  }\r\n\r\n  /**\r\n   * closePath - z or Z\r\n   */\r\n  closePath () {\r\n    this.d = this.d.concat(' z')\r\n  }\r\n\r\n}","/**\r\n * MinMaxPathHandler\r\n *\r\n * Determine the minimum and maximum of a SVG path's absolute coordinates.\r\n * For relative coordinates the absolute value is computed for consideration.\r\n * The values are stored in attributes minX, minY, maxX, and maxY.\r\n *\r\n */\r\nexport default class MinMaxPathHandler {\r\n  constructor () {\r\n    // arguments.callee.$.construct.apply(this, arguments);\r\n\r\n    this.minX = undefined\r\n    this.minY = undefined\r\n    this.maxX = undefined\r\n    this.maxY = undefined\r\n\r\n    this._lastAbsX = undefined\r\n    this._lastAbsY = undefined\r\n  }\r\n\r\n  /**\r\n   * Store minimal and maximal coordinates of passed points to attributes minX, maxX, minY, maxY\r\n   *\r\n   * @param {Array} points Array of absolutePoints\r\n   */\r\n  calculateMinMax (points) {\r\n    if (points instanceof Array) {\r\n      let x, y\r\n      for (let i = 0; i < points.length; i++) {\r\n        x = parseFloat(points[i])\r\n        i++\r\n        y = parseFloat(points[i])\r\n\r\n        this.minX = (this.minX !== undefined) ? Math.min(this.minX, x) : x\r\n        this.maxX = (this.maxX !== undefined) ? Math.max(this.maxX, x) : x\r\n        this.minY = (this.minY !== undefined) ? Math.min(this.minY, y) : y\r\n        this.maxY = (this.maxY !== undefined) ? Math.max(this.maxY, y) : y\r\n\r\n        this._lastAbsX = x\r\n        this._lastAbsY = y\r\n      }\r\n    } else {\r\n      //TODO error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * arcAbs - A\r\n   *\r\n   * @param {Number} rx\r\n   * @param {Number} ry\r\n   * @param {Number} xAxisRotation\r\n   * @param {Boolean} largeArcFlag\r\n   * @param {Boolean} sweepFlag\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  arcAbs (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\r\n    this.calculateMinMax([x, y])\r\n  }\r\n\r\n  /**\r\n   * arcRel - a\r\n   *\r\n   * @param {Number} rx\r\n   * @param {Number} ry\r\n   * @param {Number} xAxisRotation\r\n   * @param {Boolean} largeArcFlag\r\n   * @param {Boolean} sweepFlag\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  arcRel (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\r\n    this.calculateMinMax([this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicAbs - C\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicAbs (x1, y1, x2, y2, x, y) {\r\n    this.calculateMinMax([x1, y1, x2, y2, x, y])\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicRel - c\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicRel (x1, y1, x2, y2, x, y) {\r\n    this.calculateMinMax([this._lastAbsX + x1, this._lastAbsY + y1,\r\n      this._lastAbsX + x2, this._lastAbsY + y2,\r\n      this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * linetoHorizontalAbs - H\r\n   *\r\n   * @param {Number} x\r\n   */\r\n  linetoHorizontalAbs (x) {\r\n    this.calculateMinMax([x, this._lastAbsY])\r\n  }\r\n\r\n  /**\r\n   * linetoHorizontalRel - h\r\n   *\r\n   * @param {Number} x\r\n   */\r\n  linetoHorizontalRel (x) {\r\n    this.calculateMinMax([this._lastAbsX + x, this._lastAbsY])\r\n  }\r\n\r\n  /**\r\n   * linetoAbs - L\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  linetoAbs (x, y) {\r\n    this.calculateMinMax([x, y])\r\n  }\r\n\r\n  /**\r\n   * linetoRel - l\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  linetoRel (x, y) {\r\n    this.calculateMinMax([this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * movetoAbs - M\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  movetoAbs (x, y) {\r\n    this.calculateMinMax([x, y])\r\n  }\r\n\r\n  /**\r\n   * movetoRel - m\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  movetoRel (x, y) {\r\n    if (this._lastAbsX && this._lastAbsY) {\r\n      this.calculateMinMax([this._lastAbsX + x, this._lastAbsY + y])\r\n    } else {\r\n      this.calculateMinMax([x, y])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticAbs - Q\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticAbs (x1, y1, x, y) {\r\n    this.calculateMinMax([x1, y1, x, y])\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticRel - q\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticRel (x1, y1, x, y) {\r\n    this.calculateMinMax([this._lastAbsX + x1, this._lastAbsY + y1, this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicSmoothAbs - S\r\n   *\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicSmoothAbs (x2, y2, x, y) {\r\n    this.calculateMinMax([x2, y2, x, y])\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicSmoothRel - s\r\n   *\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicSmoothRel (x2, y2, x, y) {\r\n    this.calculateMinMax([this._lastAbsX + x2, this._lastAbsY + y2, this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticSmoothAbs - T\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticSmoothAbs (x, y) {\r\n    this.calculateMinMax([x, y])\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticSmoothRel - t\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticSmoothRel (x, y) {\r\n    this.calculateMinMax([this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * linetoVerticalAbs - V\r\n   *\r\n   * @param {Number} y\r\n   */\r\n  linetoVerticalAbs (y) {\r\n    this.calculateMinMax([this._lastAbsX, y])\r\n  }\r\n\r\n  /**\r\n   * linetoVerticalRel - v\r\n   *\r\n   * @param {Number} y\r\n   */\r\n  linetoVerticalRel (y) {\r\n    this.calculateMinMax([this._lastAbsX, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * closePath - z or Z\r\n   */\r\n  closePath () {\r\n    return\r\n  }\r\n\r\n}","/**\r\n * PathHandler\r\n *\r\n * Determine absolute points of a SVG path. The coordinates are stored\r\n * sequentially in the attribute points (x-coordinates at even indices,\r\n * y-coordinates at odd indices).\r\n *\r\n * @constructor\r\n */\r\nexport default class PointsPathHandler {\r\n  constructor () {\r\n    // arguments.callee.$.construct.apply(this, arguments)\r\n\r\n    this.points = []\r\n\r\n    this._lastAbsX = undefined\r\n    this._lastAbsY = undefined\r\n  }\r\n\r\n  /**\r\n   * addPoints\r\n   *\r\n   * @param {Array} points Array of absolutePoints\r\n   */\r\n  addPoints (points) {\r\n    if (points instanceof Array) {\r\n      let x, y\r\n      for (let i = 0; i < points.length; i++) {\r\n        x = parseFloat(points[i])\r\n        i++\r\n        y = parseFloat(points[i])\r\n\r\n        this.points.push(x)\r\n        this.points.push(y)\r\n        //this.points.push({x:x, y:y});\r\n\r\n        this._lastAbsX = x\r\n        this._lastAbsY = y\r\n      }\r\n    } else {\r\n      //TODO error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * arcAbs - A\r\n   *\r\n   * @param {Number} rx\r\n   * @param {Number} ry\r\n   * @param {Number} xAxisRotation\r\n   * @param {Boolean} largeArcFlag\r\n   * @param {Boolean} sweepFlag\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  arcAbs (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\r\n    this.addPoints([x, y])\r\n  }\r\n\r\n  /**\r\n   * arcRel - a\r\n   *\r\n   * @param {Number} rx\r\n   * @param {Number} ry\r\n   * @param {Number} xAxisRotation\r\n   * @param {Boolean} largeArcFlag\r\n   * @param {Boolean} sweepFlag\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  arcRel (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\r\n    this.addPoints([this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicAbs - C\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicAbs (x1, y1, x2, y2, x, y) {\r\n    this.addPoints([x, y])\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicRel - c\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicRel (x1, y1, x2, y2, x, y) {\r\n    this.addPoints([this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * linetoHorizontalAbs - H\r\n   *\r\n   * @param {Number} x\r\n   */\r\n  linetoHorizontalAbs (x) {\r\n    this.addPoints([x, this._lastAbsY])\r\n  }\r\n\r\n  /**\r\n   * linetoHorizontalRel - h\r\n   *\r\n   * @param {Number} x\r\n   */\r\n  linetoHorizontalRel (x) {\r\n    this.addPoints([this._lastAbsX + x, this._lastAbsY])\r\n  }\r\n\r\n  /**\r\n   * linetoAbs - L\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  linetoAbs (x, y) {\r\n    this.addPoints([x, y])\r\n  }\r\n\r\n  /**\r\n   * linetoRel - l\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  linetoRel (x, y) {\r\n    this.addPoints([this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * movetoAbs - M\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  movetoAbs (x, y) {\r\n    this.addPoints([x, y])\r\n  }\r\n\r\n  /**\r\n   * movetoRel - m\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  movetoRel (x, y) {\r\n    if (this._lastAbsX && this._lastAbsY) {\r\n      this.addPoints([this._lastAbsX + x, this._lastAbsY + y])\r\n    } else {\r\n      this.addPoints([x, y])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticAbs - Q\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticAbs (x1, y1, x, y) {\r\n    this.addPoints([x, y])\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticRel - q\r\n   *\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticRel (x1, y1, x, y) {\r\n    this.addPoints([this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicSmoothAbs - S\r\n   *\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicSmoothAbs (x2, y2, x, y) {\r\n    this.addPoints([x, y])\r\n  }\r\n\r\n  /**\r\n   * curvetoCubicSmoothRel - s\r\n   *\r\n   * @param {Number} x2\r\n   * @param {Number} y2\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoCubicSmoothRel (x2, y2, x, y) {\r\n    this.addPoints([this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticSmoothAbs - T\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticSmoothAbs (x, y) {\r\n    this.addPoints([x, y])\r\n  }\r\n\r\n  /**\r\n   * curvetoQuadraticSmoothRel - t\r\n   *\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  curvetoQuadraticSmoothRel (x, y) {\r\n    this.addPoints([this._lastAbsX + x, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * linetoVerticalAbs - V\r\n   *\r\n   * @param {Number} y\r\n   */\r\n  linetoVerticalAbs (y) {\r\n    this.addPoints([this._lastAbsX, y])\r\n  }\r\n\r\n  /**\r\n   * linetoVerticalRel - v\r\n   *\r\n   * @param {Number} y\r\n   */\r\n  linetoVerticalRel (y) {\r\n    this.addPoints([this._lastAbsX, this._lastAbsY + y])\r\n  }\r\n\r\n  /**\r\n   * closePath - z or Z\r\n   */\r\n  closePath () {\r\n    // do nothing\r\n    return\r\n  }\r\n\r\n}","import ORYX_CONFIG from '../../CONFIG'\r\nimport ORYX_Utils from '../../Utils'\r\nimport ORYX_Math from '../Math'\r\nimport EditPathHandler from './EditPathHandler'\r\nimport MinMaxPathHandler from './MinMaxPathHandler'\r\nimport PointsPathHandler from './PointsPathHandler'\r\nimport { PathParser } from '../../path_parser'\r\n\r\n/**\r\n * @classDescription 此类包装对SVG基本形状或路径的操作.\r\n * @namespace ORYX.Core.SVG\r\n * uses PathParser by Kevin Lindsey (http://kevlindev.com/)\r\n * uses MinMaxPathHandler\r\n * uses EditPathHandler\r\n */\r\n\r\nexport default class SVGShape {\r\n  /**\r\n   * @param svgElem {SVGElement} An SVGElement that is a basic shape or a path.\r\n   */\r\n  constructor (svgElem) {\r\n    // arguments.callee.$.construct.apply(this, arguments);\r\n    this.type = null\r\n    this.element = svgElem\r\n    this.x = undefined\r\n    this.y = undefined\r\n    this.width = undefined\r\n    this.height = undefined\r\n    this.oldX = undefined\r\n    this.oldY = undefined\r\n    this.oldWidth = undefined\r\n    this.oldHeight = undefined\r\n    this.radiusX = undefined\r\n    this.radiusY = undefined\r\n    this.isHorizontallyResizable = false\r\n    this.isVerticallyResizable = false\r\n    // this.anchors = [];\r\n    this.anchorLeft = false\r\n    this.anchorRight = false\r\n    this.anchorTop = false\r\n    this.anchorBottom = false\r\n\r\n    // 边缘对象的路径元素属性\r\n    this.allowDockers = true\r\n    this.resizeMarkerMid = false\r\n\r\n    this.editPathParser = null\r\n    this.editPathHandler = null\r\n\r\n    this.init()\r\n  }\r\n\r\n  /**\r\n   * 初始化上面声明的所有属性。.\r\n   */\r\n  init () {\r\n    /**initialize position and size*/\r\n    if (ORYX_Utils.checkClassType(this.element, SVGRectElement) ||\r\n      ORYX_Utils.checkClassType(this.element, SVGImageElement)) {\r\n      this.type = 'Rect'\r\n      const xAttr = this.element.getAttributeNS(null, 'x')\r\n      if (xAttr) {\r\n        this.oldX = parseFloat(xAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const yAttr = this.element.getAttributeNS(null, 'y')\r\n      if (yAttr) {\r\n        this.oldY = parseFloat(yAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const widthAttr = this.element.getAttributeNS(null, 'width')\r\n      if (widthAttr) {\r\n        this.oldWidth = parseFloat(widthAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const heightAttr = this.element.getAttributeNS(null, 'height')\r\n      if (heightAttr) {\r\n        this.oldHeight = parseFloat(heightAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n\r\n    } else if (ORYX_Utils.checkClassType(this.element, SVGCircleElement)) {\r\n      this.type = 'Circle'\r\n\r\n      let cx = undefined\r\n      let cy = undefined\r\n      //var r = undefined;\r\n\r\n      const cxAttr = this.element.getAttributeNS(null, 'cx')\r\n      if (cxAttr) {\r\n        cx = parseFloat(cxAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const cyAttr = this.element.getAttributeNS(null, 'cy')\r\n      if (cyAttr) {\r\n        cy = parseFloat(cyAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const rAttr = this.element.getAttributeNS(null, 'r')\r\n      if (rAttr) {\r\n        //r = parseFloat(rAttr);\r\n        this.radiusX = parseFloat(rAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      this.oldX = cx - this.radiusX\r\n      this.oldY = cy - this.radiusX\r\n      this.oldWidth = 2 * this.radiusX\r\n      this.oldHeight = 2 * this.radiusX\r\n\r\n    } else if (ORYX_Utils.checkClassType(this.element, SVGEllipseElement)) {\r\n      this.type = 'Ellipse'\r\n\r\n      let cx = undefined\r\n      let cy = undefined\r\n      const cxAttr = this.element.getAttributeNS(null, 'cx')\r\n      if (cxAttr) {\r\n        cx = parseFloat(cxAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const cyAttr = this.element.getAttributeNS(null, 'cy')\r\n      if (cyAttr) {\r\n        cy = parseFloat(cyAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const rxAttr = this.element.getAttributeNS(null, 'rx')\r\n      if (rxAttr) {\r\n        this.radiusX = parseFloat(rxAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const ryAttr = this.element.getAttributeNS(null, 'ry')\r\n      if (ryAttr) {\r\n        this.radiusY = parseFloat(ryAttr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      this.oldX = cx - this.radiusX\r\n      this.oldY = cy - this.radiusY\r\n      this.oldWidth = 2 * this.radiusX\r\n      this.oldHeight = 2 * this.radiusY\r\n\r\n    } else if (ORYX_Utils.checkClassType(this.element, SVGLineElement)) {\r\n      this.type = 'Line'\r\n\r\n      let x1 = undefined\r\n      let y1 = undefined\r\n      let x2 = undefined\r\n      let y2 = undefined\r\n      const x1Attr = this.element.getAttributeNS(null, 'x1')\r\n      if (x1Attr) {\r\n        x1 = parseFloat(x1Attr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const y1Attr = this.element.getAttributeNS(null, 'y1')\r\n      if (y1Attr) {\r\n        y1 = parseFloat(y1Attr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const x2Attr = this.element.getAttributeNS(null, 'x2')\r\n      if (x2Attr) {\r\n        x2 = parseFloat(x2Attr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      const y2Attr = this.element.getAttributeNS(null, 'y2')\r\n      if (y2Attr) {\r\n        y2 = parseFloat(y2Attr)\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n      this.oldX = Math.min(x1, x2)\r\n      this.oldY = Math.min(y1, y2)\r\n      this.oldWidth = Math.abs(x1 - x2)\r\n      this.oldHeight = Math.abs(y1 - y2)\r\n\r\n    } else if (ORYX_Utils.checkClassType(this.element, SVGPolylineElement) ||\r\n      ORYX_Utils.checkClassType(this.element, SVGPolygonElement)) {\r\n      this.type = 'Polyline'\r\n\r\n      let pointsArray = []\r\n      if (this.element.points && this.element.points.numberOfItems) {\r\n        for (let i = 0, size = this.element.points.numberOfItems; i < size; i++) {\r\n          pointsArray.push(this.element.points.getItem(i).x)\r\n          pointsArray.push(this.element.points.getItem(i).y)\r\n        }\r\n      } else {\r\n        let points = this.element.getAttributeNS(null, 'points')\r\n        if (points) {\r\n          points = points.replace(/,/g, ' ')\r\n          pointsArray = points.split(' ')\r\n          pointsArray = pointsArray.without('')\r\n        } else {\r\n          throw 'Missing attribute in element ' + this.element\r\n        }\r\n      }\r\n\r\n      if (pointsArray && pointsArray.length && pointsArray.length > 1) {\r\n        let minX = parseFloat(pointsArray[0])\r\n        let minY = parseFloat(pointsArray[1])\r\n        let maxX = parseFloat(pointsArray[0])\r\n        let maxY = parseFloat(pointsArray[1])\r\n\r\n        for (let i = 0; i < pointsArray.length; i++) {\r\n          minX = Math.min(minX, parseFloat(pointsArray[i]))\r\n          maxX = Math.max(maxX, parseFloat(pointsArray[i]))\r\n          i++\r\n          minY = Math.min(minY, parseFloat(pointsArray[i]))\r\n          maxY = Math.max(maxY, parseFloat(pointsArray[i]))\r\n        }\r\n\r\n        this.oldX = minX\r\n        this.oldY = minY\r\n        this.oldWidth = maxX - minX\r\n        this.oldHeight = maxY - minY\r\n      } else {\r\n        throw 'Missing attribute in element ' + this.element\r\n      }\r\n\r\n    } else if (ORYX_Utils.checkClassType(this.element, SVGPathElement)) {\r\n      this.type = 'Path'\r\n\r\n      this.editPathParser = new PathParser()\r\n      this.editPathHandler = new EditPathHandler()\r\n      this.editPathParser.setHandler(this.editPathHandler)\r\n\r\n      let parser = new PathParser()\r\n      let handler = new MinMaxPathHandler()\r\n      parser.setHandler(handler)\r\n      parser.parsePath(this.element)\r\n\r\n      this.oldX = handler.minX\r\n      this.oldY = handler.minY\r\n      this.oldWidth = handler.maxX - handler.minX\r\n      this.oldHeight = handler.maxY - handler.minY\r\n\r\n      // delete parser\r\n      // delete handler\r\n    } else {\r\n      throw 'Element is not a shape.'\r\n    }\r\n\r\n    /** initialize attributes of oryx namespace */\r\n      // resize\r\n    let resizeAttr = this.element.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'resize')\r\n    if (resizeAttr) {\r\n      resizeAttr = resizeAttr.toLowerCase()\r\n      if (resizeAttr.match(/horizontal/)) {\r\n        this.isHorizontallyResizable = true\r\n      } else {\r\n        this.isHorizontallyResizable = false\r\n      }\r\n      if (resizeAttr.match(/vertical/)) {\r\n        this.isVerticallyResizable = true\r\n      } else {\r\n        this.isVerticallyResizable = false\r\n      }\r\n    } else {\r\n      this.isHorizontallyResizable = false\r\n      this.isVerticallyResizable = false\r\n    }\r\n\r\n    // anchors\r\n    let anchorAttr = this.element.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'anchors')\r\n    if (anchorAttr) {\r\n      anchorAttr = anchorAttr.replace('/,/g', ' ')\r\n      const anchors = anchorAttr.split(' ').without('')\r\n\r\n      for (let i = 0; i < anchors.length; i++) {\r\n        switch (anchors[i].toLowerCase()) {\r\n          case 'left':\r\n            this.anchorLeft = true\r\n            break\r\n          case 'right':\r\n            this.anchorRight = true\r\n            break\r\n          case 'top':\r\n            this.anchorTop = true\r\n            break\r\n          case 'bottom':\r\n            this.anchorBottom = true\r\n            break\r\n        }\r\n      }\r\n    }\r\n\r\n    // allowDockers and resizeMarkerMid\r\n    if (ORYX_Utils.checkClassType(this.element, SVGPathElement)) {\r\n      const allowDockersAttr = this.element.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'allowDockers')\r\n      if (allowDockersAttr) {\r\n        if (allowDockersAttr.toLowerCase() === 'no') {\r\n          this.allowDockers = false\r\n        } else {\r\n          this.allowDockers = true\r\n        }\r\n      }\r\n\r\n      const resizeMarkerMidAttr = this.element.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'resizeMarker-mid')\r\n      if (resizeMarkerMidAttr) {\r\n        if (resizeMarkerMidAttr.toLowerCase() === 'yes') {\r\n          this.resizeMarkerMid = true\r\n        } else {\r\n          this.resizeMarkerMid = false\r\n        }\r\n      }\r\n    }\r\n\r\n    this.x = this.oldX\r\n    this.y = this.oldY\r\n    this.width = this.oldWidth\r\n    this.height = this.oldHeight\r\n  }\r\n\r\n  /**\r\n   * Writes the changed values into the SVG element.\r\n   */\r\n  update () {\r\n    if (this.x !== this.oldX || this.y !== this.oldY || this.width !== this.oldWidth || this.height !== this.oldHeight) {\r\n      switch (this.type) {\r\n        case 'Rect':\r\n          if (this.x !== this.oldX) this.element.setAttributeNS(null, 'x', this.x)\r\n          if (this.y !== this.oldY) this.element.setAttributeNS(null, 'y', this.y)\r\n          if (this.width !== this.oldWidth) this.element.setAttributeNS(null, 'width', this.width)\r\n          if (this.height !== this.oldHeight) this.element.setAttributeNS(null, 'height', this.height)\r\n          break\r\n        case 'Circle':\r\n          //calculate the radius\r\n          //var r;\r\n          //\t\t\t\t\tif(this.width/this.oldWidth <= this.height/this.oldHeight) {\r\n          //\t\t\t\t\t\tthis.radiusX = ((this.width > this.height) ? this.width : this.height)/2.0;\r\n          //\t\t\t\t\t} else {\r\n          this.radiusX = ((this.width < this.height) ? this.width : this.height) / 2.0\r\n          //}\r\n\r\n          this.element.setAttributeNS(null, 'cx', this.x + this.width / 2.0)\r\n          this.element.setAttributeNS(null, 'cy', this.y + this.height / 2.0)\r\n          this.element.setAttributeNS(null, 'r', this.radiusX)\r\n          break\r\n        case 'Ellipse':\r\n          this.radiusX = this.width / 2\r\n          this.radiusY = this.height / 2\r\n\r\n          this.element.setAttributeNS(null, 'cx', this.x + this.radiusX)\r\n          this.element.setAttributeNS(null, 'cy', this.y + this.radiusY)\r\n          this.element.setAttributeNS(null, 'rx', this.radiusX)\r\n          this.element.setAttributeNS(null, 'ry', this.radiusY)\r\n          break\r\n        case 'Line':\r\n          if (this.x !== this.oldX)\r\n            this.element.setAttributeNS(null, 'x1', this.x)\r\n\r\n          if (this.y !== this.oldY)\r\n            this.element.setAttributeNS(null, 'y1', this.y)\r\n\r\n          if (this.x !== this.oldX || this.width !== this.oldWidth)\r\n            this.element.setAttributeNS(null, 'x2', this.x + this.width)\r\n\r\n          if (this.y !== this.oldY || this.height !== this.oldHeight)\r\n            this.element.setAttributeNS(null, 'y2', this.y + this.height)\r\n          break\r\n        case 'Polyline':\r\n          let points = this.element.getAttributeNS(null, 'points')\r\n          if (points) {\r\n            points = points.replace(/,/g, ' ').split(' ').without('')\r\n\r\n            if (points && points.length && points.length > 1) {\r\n              // TODO what if oldWidth == 0?\r\n              let widthDelta = (this.oldWidth === 0) ? 0 : this.width / this.oldWidth\r\n              let heightDelta = (this.oldHeight === 0) ? 0 : this.height / this.oldHeight\r\n\r\n              let updatedPoints = ''\r\n              for (let i = 0; i < points.length; i++) {\r\n                let x = (parseFloat(points[i]) - this.oldX) * widthDelta + this.x\r\n                i++\r\n                let y = (parseFloat(points[i]) - this.oldY) * heightDelta + this.y\r\n                updatedPoints += x + ' ' + y + ' '\r\n              }\r\n              this.element.setAttributeNS(null, 'points', updatedPoints)\r\n            } else {\r\n              // TODO error\r\n            }\r\n          } else {\r\n            // TODO error\r\n          }\r\n          break\r\n        case 'Path':\r\n          // calculate scaling delta\r\n          // TODO what if oldWidth == 0?\r\n          let widthDelta = (this.oldWidth === 0) ? 0 : this.width / this.oldWidth\r\n          let heightDelta = (this.oldHeight === 0) ? 0 : this.height / this.oldHeight\r\n\r\n          // use path parser to edit each point of the path\r\n          this.editPathHandler.init(this.x, this.y, this.oldX, this.oldY, widthDelta, heightDelta)\r\n          this.editPathParser.parsePath(this.element)\r\n\r\n          // change d attribute of path\r\n          this.element.setAttributeNS(null, 'd', this.editPathHandler.d)\r\n          break\r\n      }\r\n\r\n      this.oldX = this.x\r\n      this.oldY = this.y\r\n      this.oldWidth = this.width\r\n      this.oldHeight = this.height\r\n    }\r\n\r\n    // Remove cached variables\r\n    delete this.visible\r\n    delete this.handler\r\n  }\r\n\r\n  isPointIncluded (pointX, pointY) {\r\n    // Check if there are the right arguments and if the node is visible\r\n    if (!pointX || !pointY || !this.isVisible()) {\r\n      return false\r\n    }\r\n\r\n    switch (this.type) {\r\n      case 'Rect':\r\n        return (pointX >= this.x && pointX <= this.x + this.width &&\r\n          pointY >= this.y && pointY <= this.y + this.height)\r\n        break\r\n      case 'Circle':\r\n        //calculate the radius\r\n        //\t\t\t\tvar r;\r\n        //\t\t\t\tif(this.width/this.oldWidth <= this.height/this.oldHeight) {\r\n        //\t\t\t\t\tr = ((this.width > this.height) ? this.width : this.height)/2.0;\r\n        //\t\t\t\t} else {\r\n        //\t\t\t\t \tr = ((this.width < this.height) ? this.width : this.height)/2.0;\r\n        //\t\t\t\t}\r\n        return ORYX_Math.isPointInEllipse(pointX, pointY, this.x + this.width / 2.0, this.y + this.height / 2.0, this.radiusX, this.radiusX)\r\n        break\r\n      case 'Ellipse':\r\n        return ORYX_Math.isPointInEllipse(pointX, pointY, this.x + this.radiusX, this.y + this.radiusY, this.radiusX, this.radiusY)\r\n        break\r\n      case 'Line':\r\n        return ORYX_Math.isPointInLine(pointX, pointY, this.x, this.y, this.x + this.width, this.y + this.height)\r\n        break\r\n      case 'Polyline':\r\n        let points = this.element.getAttributeNS(null, 'points')\r\n\r\n        if (points) {\r\n          points = points.replace(/,/g, ' ').split(' ').without('')\r\n\r\n          points = points.collect(function (n) {\r\n            return parseFloat(n)\r\n          })\r\n\r\n          return ORYX_Math.isPointInPolygone(pointX, pointY, points)\r\n        } else {\r\n          return false\r\n        }\r\n        break\r\n      case 'Path':\r\n        // Cache Path handler\r\n        if (!this.handler) {\r\n          let parser = new PathParser()\r\n          this.handler = new PointsPathHandler()\r\n          parser.setHandler(this.handler)\r\n          parser.parsePath(this.element)\r\n        }\r\n        return ORYX_Math.isPointInPolygone(pointX, pointY, this.handler.points)\r\n\r\n        break\r\n      default:\r\n        return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns true if the element is visible\r\n   * @param {SVGElement} elem\r\n   * @return boolean\r\n   */\r\n  isVisible (elem) {\r\n    if (this.visible !== undefined) {\r\n      return this.visible\r\n    }\r\n\r\n    if (!elem) {\r\n      elem = this.element\r\n    }\r\n\r\n    let hasOwnerSVG = false\r\n    try {\r\n      hasOwnerSVG = !!elem.ownerSVGElement\r\n    } catch (e) {\r\n    }\r\n\r\n    // Is SVG context\r\n    if (hasOwnerSVG) {\r\n      // IF G-Element\r\n      if (ORYX_Utils.checkClassType(elem, SVGGElement)) {\r\n        if (elem.className && elem.className.baseVal == 'me') {\r\n          this.visible = true\r\n          return this.visible\r\n        }\r\n      }\r\n\r\n      // Check if fill or stroke is set\r\n      var fill = elem.getAttributeNS(null, 'fill')\r\n      var stroke = elem.getAttributeNS(null, 'stroke')\r\n      if (fill && fill == 'none' && stroke && stroke == 'none') {\r\n        this.visible = false\r\n      } else {\r\n        // Check if displayed\r\n        var attr = elem.getAttributeNS(null, 'display')\r\n        if (!attr)\r\n          this.visible = this.isVisible(elem.parentNode)\r\n        else if (attr == 'none')\r\n          this.visible = false\r\n        else\r\n          this.visible = true\r\n      }\r\n    } else {\r\n      this.visible = true\r\n    }\r\n\r\n    return this.visible\r\n  }\r\n\r\n  toString () {\r\n    return (this.element) ? 'SVGShape ' + this.element.id : 'SVGShape ' + this.element\r\n  }\r\n}\r\n","/**\r\n * @classDescription This class wraps the manipulation of a SVG marker.\r\n * @namespace ORYX.Core.SVG\r\n * uses Inheritance (Clazz)\r\n * uses Prototype 1.5.0\r\n *\r\n */\r\n\r\nimport ORYX_CONFIG from '../../CONFIG'\r\nimport SVGShape from './SVGShape'\r\n\r\nexport default class SVGMarker {\r\n  /**\r\n   * Constructor\r\n   * @param markerElement {SVGMarkerElement}\r\n   */\r\n  constructor (markerElement) {\r\n    // arguments.callee.$.construct.apply(this, arguments);\r\n\r\n    this.id = undefined\r\n    this.element = markerElement\r\n    this.refX = undefined\r\n    this.refY = undefined\r\n    this.markerWidth = undefined\r\n    this.markerHeight = undefined\r\n    this.oldRefX = undefined\r\n    this.oldRefY = undefined\r\n    this.oldMarkerWidth = undefined\r\n    this.oldMarkerHeight = undefined\r\n    this.optional = false\r\n    this.enabled = true\r\n    this.minimumLength = undefined\r\n    this.resize = false\r\n\r\n    this.svgShapes = []\r\n\r\n    this._init() //initialisation of all the properties declared above.\r\n  }\r\n\r\n  /**\r\n   * Initializes the values that are defined in the constructor.\r\n   */\r\n  _init () {\r\n    // check if this.element is a SVGMarkerElement\r\n    if (!(this.element == '[object SVGMarkerElement]')) {\r\n      throw 'SVGMarker: Argument is not an instance of SVGMarkerElement.'\r\n    }\r\n\r\n    this.id = this.element.getAttributeNS(null, 'id')\r\n\r\n    // init svg marker attributes\r\n    let refXValue = this.element.getAttributeNS(null, 'refX')\r\n    if (refXValue) {\r\n      this.refX = parseFloat(refXValue)\r\n    } else {\r\n      this.refX = 0\r\n    }\r\n    let refYValue = this.element.getAttributeNS(null, 'refY')\r\n    if (refYValue) {\r\n      this.refY = parseFloat(refYValue)\r\n    } else {\r\n      this.refY = 0\r\n    }\r\n    let markerWidthValue = this.element.getAttributeNS(null, 'markerWidth')\r\n    if (markerWidthValue) {\r\n      this.markerWidth = parseFloat(markerWidthValue)\r\n    } else {\r\n      this.markerWidth = 3\r\n    }\r\n\r\n    let markerHeightValue = this.element.getAttributeNS(null, 'markerHeight')\r\n    if (markerHeightValue) {\r\n      this.markerHeight = parseFloat(markerHeightValue)\r\n    } else {\r\n      this.markerHeight = 3\r\n    }\r\n\r\n    this.oldRefX = this.refX\r\n    this.oldRefY = this.refY\r\n    this.oldMarkerWidth = this.markerWidth\r\n    this.oldMarkerHeight = this.markerHeight\r\n\r\n    //init oryx attributes\r\n    let optionalAttr = this.element.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'optional')\r\n    if (optionalAttr) {\r\n      optionalAttr = optionalAttr.strip()\r\n      this.optional = (optionalAttr.toLowerCase() === 'yes')\r\n    } else {\r\n      this.optional = false\r\n    }\r\n\r\n    let enabledAttr = this.element.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'enabled')\r\n    if (enabledAttr) {\r\n      enabledAttr = enabledAttr.strip()\r\n      this.enabled = !(enabledAttr.toLowerCase() === 'no')\r\n    } else {\r\n      this.enabled = true\r\n    }\r\n\r\n    let minLengthAttr = this.element.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'minimumLength')\r\n    if (minLengthAttr) {\r\n      this.minimumLength = parseFloat(minLengthAttr)\r\n    }\r\n\r\n    var resizeAttr = this.element.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'resize')\r\n    if (resizeAttr) {\r\n      resizeAttr = resizeAttr.strip()\r\n      this.resize = (resizeAttr.toLowerCase() === 'yes')\r\n    } else {\r\n      this.resize = false\r\n    }\r\n\r\n    //init SVGShape objects\r\n    //this.svgShapes = this._getSVGShapes(this.element);\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  _getSVGShapes (svgElement) {\r\n    if (svgElement.hasChildNodes) {\r\n      let svgShapes = []\r\n      let me = this\r\n      $A(svgElement.childNodes).each(function (svgChild) {\r\n        try {\r\n          let svgShape = new SVGShape(svgChild)\r\n          svgShapes.push(svgShape)\r\n        } catch (e) {\r\n          svgShapes = svgShapes.concat(me._getSVGShapes(svgChild))\r\n        }\r\n      })\r\n      return svgShapes\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Writes the changed values into the SVG marker.\r\n   */\r\n  update () {\r\n    //TODO mache marker resizebar!!! aber erst wenn der rest der connectingshape funzt!\r\n\r\n    //\t\t//update marker attributes\r\n    //\t\tif(this.refX != this.oldRefX) {\r\n    //\t\t\tthis.element.setAttributeNS(null, \"refX\", this.refX);\r\n    //\t\t}\r\n    //\t\tif(this.refY != this.oldRefY) {\r\n    //\t\t\tthis.element.setAttributeNS(null, \"refY\", this.refY);\r\n    //\t\t}\r\n    //\t\tif(this.markerWidth != this.oldMarkerWidth) {\r\n    //\t\t\tthis.element.setAttributeNS(null, \"markerWidth\", this.markerWidth);\r\n    //\t\t}\r\n    //\t\tif(this.markerHeight != this.oldMarkerHeight) {\r\n    //\t\t\tthis.element.setAttributeNS(null, \"markerHeight\", this.markerHeight);\r\n    //\t\t}\r\n    //\r\n    //\t\t//update SVGShape objects\r\n    //\t\tvar widthDelta = this.markerWidth / this.oldMarkerWidth;\r\n    //\t\tvar heightDelta = this.markerHeight / this.oldMarkerHeight;\r\n    //\t\tif(widthDelta != 1 && heightDelta != 1) {\r\n    //\t\t\tthis.svgShapes.each(function(svgShape) {\r\n    //\r\n    //\t\t\t});\r\n    //\t\t}\r\n\r\n    //update old values to prepare the next update\r\n    this.oldRefX = this.refX\r\n    this.oldRefY = this.refY\r\n    this.oldMarkerWidth = this.markerWidth\r\n    this.oldMarkerHeight = this.markerHeight\r\n  }\r\n\r\n  toString () {\r\n    return (this.element) ? 'SVGMarker ' + this.element.id : 'SVGMarker ' + this.element\r\n  }\r\n}","import ORYX_CONFIG from '../../CONFIG'\r\nimport ORYX_Utils from '../../Utils'\r\nimport ORYX_Log from '../../Log'\r\n/**\r\n * @classDescription Class for adding text to a shape.\r\n *\r\n */\r\n\r\n\r\nexport default class Label {\r\n  _characterSets = [\r\n    '%W',\r\n    '@',\r\n    'm',\r\n    'wDGMOQ√ñ#+=<>~^',\r\n    'ABCHKNRSUVXZ√ú√Ñ&',\r\n    'bdghnopqux√∂√ºETY1234567890√ü_¬ß${}*¬¥`¬µ‚Ç¨',\r\n    'aeksvyz√§FLP?¬∞¬≤¬≥',\r\n    'c-',\r\n    'rtJ\"/()[]:;!|\\\\',\r\n    'fjI., ',\r\n    '\\'',\r\n    'il'\r\n  ]\r\n  _characterSetValues = [15, 14, 13, 11, 10, 9, 8, 7, 6, 5, 4, 3]\r\n  /**\r\n   * @param options {Object} : textElement\r\n   */\r\n  constructor (options) {\r\n    // arguments.callee.$.construct.apply(this, arguments)\r\n\r\n    if (!options.textElement) {\r\n      throw 'Label: No parameter textElement.'\r\n    } else if (!ORYX_Utils.checkClassType(options.textElement, SVGTextElement)) {\r\n      throw 'Label: Parameter textElement is not an SVGTextElement.'\r\n    }\r\n\r\n    this.invisibleRenderPoint = -5000\r\n    this.node = options.textElement\r\n    this.node.setAttributeNS(null, 'stroke-width', '0pt')\r\n    this.node.setAttributeNS(null, 'letter-spacing', '0px')\r\n\r\n    this.shapeId = options.shapeId\r\n    // if the text element already has an id, don't change it.\r\n    let _id = this.node.getAttributeNS(null, 'id')\r\n    if (_id) {\r\n      this.id = _id\r\n    }\r\n\r\n    this.fitToElemId = null\r\n    this.edgePosition = null\r\n    this.x = null\r\n    this.y = null\r\n    this.oldX = null\r\n    this.oldY = null\r\n\r\n    this.isVisible = true\r\n\r\n    this._text = null\r\n    this._verticalAlign = null\r\n    this._horizontalAlign = null\r\n    this._rotate = null\r\n    this._rotationPoint = null\r\n\r\n    // this.anchors = [];\r\n    this.anchorLeft = null\r\n    this.anchorRight = null\r\n    this.anchorTop = null\r\n    this.anchorBottom = null\r\n\r\n    this._isChanged = true\r\n\r\n    // set referenced element the text is fit to\r\n    this.fitToElemId = this.node.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'fittoelem')\r\n    if (this.fitToElemId) {\r\n      this.fitToElemId = this.shapeId + this.fitToElemId\r\n    }\r\n\r\n    // set alignment\r\n    let alignValues = this.node.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'align')\r\n    if (alignValues) {\r\n      alignValues = alignValues.replace(/,/g, ' ')\r\n      alignValues = alignValues.split(' ')\r\n      alignValues = alignValues.without('')\r\n\r\n      alignValues.each((function (alignValue) {\r\n        switch (alignValue) {\r\n          case 'top':\r\n          case 'middle':\r\n          case 'bottom':\r\n            if (!this._verticalAlign) {\r\n              this._originVerticalAlign = this._verticalAlign = alignValue\r\n            }\r\n            break\r\n          case 'left':\r\n          case 'center':\r\n          case 'right':\r\n            if (!this._horizontalAlign) {\r\n              this._originHorizontalAlign = this._horizontalAlign = alignValue\r\n            }\r\n            break\r\n        }\r\n      }).bind(this))\r\n    }\r\n\r\n    // set edge position (only in case the label belongs to an edge)\r\n    this.edgePosition = this.node.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'edgePosition')\r\n    if (this.edgePosition) {\r\n      this.originEdgePosition = this.edgePosition = this.edgePosition.toLowerCase()\r\n    }\r\n\r\n    // get offset top\r\n    this.offsetTop = this.node.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'offsetTop') ||\r\n      ORYX_CONFIG.CustomConfigs.OFFSET_EDGE_LABEL_TOP\r\n    if (this.offsetTop) {\r\n      this.offsetTop = parseInt(this.offsetTop)\r\n    }\r\n\r\n    // get offset top\r\n    this.offsetBottom = this.node.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'offsetBottom') ||\r\n      ORYX_CONFIG.CustomConfigs.OFFSET_EDGE_LABEL_BOTTOM\r\n    if (this.offsetBottom) {\r\n      this.offsetBottom = parseInt(this.offsetBottom)\r\n    }\r\n\r\n    // set rotation\r\n    let rotateValue = this.node.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'rotate')\r\n    if (rotateValue) {\r\n      try {\r\n        this._rotate = parseFloat(rotateValue)\r\n      } catch (e) {\r\n        this._rotate = 0\r\n      }\r\n    } else {\r\n      this._rotate = 0\r\n    }\r\n\r\n    // anchors\r\n    let anchorAttr = this.node.getAttributeNS(ORYX_CONFIG.NAMESPACE_ORYX, 'anchors')\r\n    if (anchorAttr) {\r\n      anchorAttr = anchorAttr.replace('/,/g', ' ')\r\n      let anchors = anchorAttr.split(' ').without('')\r\n\r\n      for (let i = 0; i < anchors.length; i++) {\r\n        switch (anchors[i].toLowerCase()) {\r\n          case 'left':\r\n            this.originAnchorLeft = this.anchorLeft = true\r\n            break\r\n          case 'right':\r\n            this.originAnchorRight = this.anchorRight = true\r\n            break\r\n          case 'top':\r\n            this.originAnchorTop = this.anchorTop = true\r\n            break\r\n          case 'bottom':\r\n            this.originAnchorBottom = this.anchorBottom = true\r\n            break\r\n        }\r\n      }\r\n    }\r\n\r\n    //if no alignment defined, set default alignment\r\n    if (!this._verticalAlign) {\r\n      this._verticalAlign = 'bottom'\r\n    }\r\n    if (!this._horizontalAlign) {\r\n      this._horizontalAlign = 'left'\r\n    }\r\n\r\n    let xValue = this.node.getAttributeNS(null, 'x')\r\n    if (xValue) {\r\n      this.oldX = this.x = parseFloat(xValue)\r\n    } else {\r\n      //TODO error\r\n    }\r\n\r\n    let yValue = this.node.getAttributeNS(null, 'y')\r\n    if (yValue) {\r\n      this.oldY = this.y = parseFloat(yValue)\r\n    } else {\r\n      //TODO error\r\n    }\r\n\r\n    // set initial text\r\n    this.text(this.node.textContent)\r\n  }\r\n\r\n  /**\r\n   * Reset the anchor position to the original value\r\n   * which was specified in the stencil set\r\n   *\r\n   */\r\n  resetAnchorPosition () {\r\n    this.anchorLeft = this.originAnchorLeft || false\r\n    this.anchorRight = this.originAnchorRight || false\r\n    this.anchorTop = this.originAnchorTop || false\r\n    this.anchorBottom = this.originAnchorBottom || false\r\n  }\r\n\r\n  isOriginAnchorLeft () {\r\n    return this.originAnchorLeft || false\r\n  }\r\n\r\n  isOriginAnchorRight () {\r\n    return this.originAnchorRight || false\r\n  }\r\n\r\n  isOriginAnchorTop () {\r\n    return this.originAnchorTop || false\r\n  }\r\n\r\n  isOriginAnchorBottom () {\r\n    return this.originAnchorBottom || false\r\n  }\r\n\r\n  isAnchorLeft () {\r\n    return this.anchorLeft || false\r\n  }\r\n\r\n  isAnchorRight () {\r\n    return this.anchorRight || false\r\n  }\r\n\r\n  isAnchorTop () {\r\n    return this.anchorTop || false\r\n  }\r\n\r\n  isAnchorBottom () {\r\n    return this.anchorBottom || false\r\n  }\r\n\r\n  /**\r\n   * Returns the x coordinate\r\n   * @return {number}\r\n   */\r\n  getX () {\r\n    try {\r\n      let x = this.node.x.baseVal.getItem(0).value\r\n      switch (this.horizontalAlign()) {\r\n        case 'left':\r\n          return x\r\n        case 'center':\r\n          return x - (this.getWidth() / 2)\r\n        case 'right':\r\n          return x - this.getWidth()\r\n      }\r\n      return this.node.getBBox().x\r\n    } catch (e) {\r\n      return this.x\r\n    }\r\n  }\r\n\r\n  setX (x) {\r\n    if (this.position)\r\n      this.position.x = x\r\n    else\r\n      this.setOriginX(x)\r\n  }\r\n\r\n\r\n  /**\r\n   * Returns the y coordinate\r\n   * @return {number}\r\n   */\r\n  getY () {\r\n    try {\r\n      return this.node.getBBox().y\r\n    } catch (e) {\r\n      return this.y\r\n    }\r\n  }\r\n\r\n  setY (y) {\r\n    if (this.position)\r\n      this.position.y = y\r\n    else\r\n      this.setOriginY(y)\r\n  }\r\n\r\n  setOriginX (x) {\r\n    this.x = x\r\n  }\r\n\r\n  setOriginY (y) {\r\n    this.y = y\r\n  }\r\n\r\n\r\n  /**\r\n   * Returns the width of the label\r\n   * @return {number}\r\n   */\r\n  getWidth () {\r\n    try {\r\n      try {\r\n        let width, cn = this.node.childNodes\r\n        if (cn.length == 0) {\r\n          width = this.node.getBBox().width\r\n        } else {\r\n          for (let i = 0, size = cn.length; i < size; ++i) {\r\n            let w = cn[i].getComputedTextLength()\r\n            if ('undefined' == typeof width || width < w) {\r\n              width = w\r\n            }\r\n          }\r\n        }\r\n        return width + (width % 2 == 0 ? 0 : 1)\r\n      } catch (ee) {\r\n        return this.node.getBBox().width\r\n      }\r\n    } catch (e) {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  getOriginUpperLeft () {\r\n    let x = this.x, y = this.y\r\n    switch (this._horizontalAlign) {\r\n      case 'center' :\r\n        x -= this.getWidth() / 2\r\n        break\r\n      case 'right' :\r\n        x -= this.getWidth()\r\n        break\r\n    }\r\n    switch (this._verticalAlign) {\r\n      case 'middle' :\r\n        y -= this.getHeight() / 2\r\n        break\r\n      case 'bottom' :\r\n        y -= this.getHeight()\r\n        break\r\n    }\r\n    return { x: x, y: y }\r\n  }\r\n\r\n  /**\r\n   * Returns the height of the label\r\n   * @return {number}\r\n   */\r\n  getHeight () {\r\n    try {\r\n      return this.node.getBBox().height\r\n    } catch (e) {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the relative center position of the label\r\n   * to its parent shape.\r\n   * @return {Object}\r\n   */\r\n  getCenter () {\r\n    let up = { x: this.getX(), y: this.getY() }\r\n    up.x += this.getWidth() / 2\r\n    up.y += this.getHeight() / 2\r\n    return up\r\n  }\r\n\r\n  /**\r\n   * Sets the position of a label relative to the parent.\r\n   * @param {Object} position\r\n   */\r\n  setPosition (position) {\r\n    if (!position || position.x === undefined || position.y === undefined) {\r\n      delete this.position\r\n    } else {\r\n      this.position = position\r\n    }\r\n\r\n    if (this.position) {\r\n      delete this._referencePoint\r\n      delete this.edgePosition\r\n    }\r\n\r\n    this._isChanged = true\r\n    this.update()\r\n  }\r\n\r\n  /**\r\n   * Return the position\r\n   */\r\n  getPosition () {\r\n    return this.position\r\n  }\r\n\r\n  setReferencePoint (ref) {\r\n    if (ref) {\r\n      this._referencePoint = ref\r\n    } else {\r\n      delete this._referencePoint\r\n    }\r\n    if (this._referencePoint) {\r\n      delete this.position\r\n    }\r\n  }\r\n\r\n  getReferencePoint () {\r\n    return this._referencePoint || undefined\r\n  }\r\n\r\n  changed () {\r\n    this._isChanged = true\r\n  }\r\n\r\n  /**\r\n   * Register a callback which will be called if the label\r\n   * was rendered.\r\n   * @param {Object} fn\r\n   */\r\n  registerOnChange (fn) {\r\n    if (!this.changeCallbacks) {\r\n      this.changeCallbacks = []\r\n    }\r\n    if (fn instanceof Function && !this.changeCallbacks.include(fn)) {\r\n      this.changeCallbacks.push(fn)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unregister the callback for changes.\r\n   * @param {Object} fn\r\n   */\r\n  unregisterOnChange (fn) {\r\n    if (this.changeCallbacks && fn instanceof Function && this.changeCallbacks.include(fn)) {\r\n      this.changeCallbacks = this.changeCallbacks.without(fn)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns TRUE if the labe is currently in\r\n   * the update mechanism.\r\n   * @return {Boolean}\r\n   */\r\n  isUpdating () {\r\n    return !!this._isUpdating\r\n  }\r\n\r\n\r\n  getOriginEdgePosition () {\r\n    return this.originEdgePosition\r\n  }\r\n\r\n  /**\r\n   * Returns the edgeposition.\r\n   *\r\n   * @return {String} \"starttop\", \"startmiddle\", \"startbottom\",\r\n   * \"midtop\", \"midbottom\", \"endtop\", \"endbottom\" or null\r\n   */\r\n  getEdgePosition () {\r\n    return this.edgePosition || null\r\n  }\r\n\r\n  /**\r\n   * Set the edge position, must be one of the valid\r\n   * edge positions (see getEdgePosition).\r\n   * Removes the reference point and the absolute position as well.\r\n   *\r\n   * @param {Object} position\r\n   */\r\n  setEdgePosition (position) {\r\n    if (['starttop', 'startmiddle', 'startbottom',\r\n      'midtop', 'midbottom', 'endtop', 'endbottom'].include(position)) {\r\n      this.edgePosition = position\r\n      delete this.position\r\n      delete this._referencePoint\r\n    } else {\r\n      delete this.edgePosition\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update the SVG text element.\r\n   */\r\n  update (force) {\r\n    let x = this.x, y = this.y\r\n    if (this.position) {\r\n      x = this.position.x\r\n      y = this.position.y\r\n    }\r\n    x = Math.floor(x)\r\n    y = Math.floor(y)\r\n\r\n    if (this._isChanged || x !== this.oldX || y !== this.oldY || force === true) {\r\n      if (this.isVisible) {\r\n        this._isChanged = false\r\n        this._isUpdating = true\r\n\r\n        this.node.setAttributeNS(null, 'x', x)\r\n        this.node.setAttributeNS(null, 'y', y)\r\n        this.node.removeAttributeNS(null, 'fill-opacity')\r\n\r\n        //this.node.setAttributeNS(null, 'font-size', this._fontSize);\r\n        //this.node.setAttributeNS(ORYX.CONFIG.ORYX_CONFIG.NAMESPACE_ORYX, 'align', this._horizontalAlign + \" \" +\r\n        // this._verticalAlign);\r\n\r\n        this.oldX = x\r\n        this.oldY = y\r\n\r\n        //set rotation\r\n        if (!this.position && !this.getReferencePoint()) {\r\n          if (this._rotate !== undefined) {\r\n            if (this._rotationPoint)\r\n              this.node.setAttributeNS(null, 'transform', 'rotate(' + this._rotate + ' ' + Math.floor(this._rotationPoint.x) + ' ' + Math.floor(this._rotationPoint.y) + ')')\r\n            else\r\n              this.node.setAttributeNS(null, 'transform', 'rotate(' + this._rotate + ' ' + Math.floor(x) + ' ' + Math.floor(y) + ')')\r\n          }\r\n        } else {\r\n          this.node.removeAttributeNS(null, 'transform')\r\n        }\r\n\r\n        let textLines = this._text.split('\\n')\r\n        while (textLines.last() == '') {\r\n          textLines.pop()\r\n        }\r\n\r\n        if (this.node.ownerDocument) {\r\n          // Only reset the tspans if the text\r\n          // has changed or has to be wrapped\r\n          if (this.fitToElemId || this._textHasChanged) {\r\n            this.node.textContent = '' // Remove content\r\n            textLines.each((function (textLine, index) {\r\n              let tspan = this.node.ownerDocument.createElementNS(ORYX_CONFIG.NAMESPACE_SVG, 'tspan')\r\n              tspan.textContent = textLine.trim()\r\n              if (this.fitToElemId) {\r\n                tspan.setAttributeNS(null, 'x', this.invisibleRenderPoint)\r\n                tspan.setAttributeNS(null, 'y', this.invisibleRenderPoint)\r\n              }\r\n              /*\r\n               * Chrome's getBBox() method fails, if a text node contains an empty tspan element.\r\n               * So, we add a whitespace to such a tspan element.\r\n               */\r\n              if (tspan.textContent === '') {\r\n                tspan.textContent = ' '\r\n              }\r\n              //append tspan to text node\r\n              this.node.appendChild(tspan)\r\n            }).bind(this))\r\n            delete this._textHasChanged\r\n            delete this.indices\r\n          }\r\n\r\n          // Work around for Mozilla bug 293581\r\n          if (this.isVisible && this.fitToElemId) {\r\n            this.node.setAttributeNS(null, 'visibility', 'hidden')\r\n          }\r\n\r\n          if (this.fitToElemId) {\r\n            window.setTimeout(this._checkFittingToReferencedElem.bind(this), 0)\r\n            // this._checkFittingToReferencedElem();\r\n          } else {\r\n            window.setTimeout(this._positionText.bind(this), 0)\r\n            // this._positionText();\r\n          }\r\n        }\r\n      } else {\r\n        this.node.textContent = ''\r\n        // this.node.setAttributeNS(null, \"fill-opacity\", \"0.2\");\r\n      }\r\n    }\r\n  }\r\n\r\n  _checkFittingToReferencedElem () {\r\n    try {\r\n      let tspans = $A(this.node.getElementsByTagNameNS(ORYX_CONFIG.NAMESPACE_SVG, 'tspan'))\r\n\r\n      //only do this in firefox 3. all other browsers do not support word wrapping!!!!!\r\n      //if (/Firefox[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent) && new Number(RegExp.$1)>=3) {\r\n      let newtspans = []\r\n\r\n      let refNode = this.node.ownerDocument.getElementById(this.fitToElemId)\r\n      if (refNode) {\r\n        let refbb = refNode.getBBox()\r\n        let fontSize = this.getFontSize()\r\n\r\n        for (let j = 0; j < tspans.length; j++) {\r\n          let tspan = tspans[j]\r\n          let textLength = this._getRenderedTextLength(tspan, undefined, undefined, fontSize)\r\n          let refBoxLength = (this._rotate != 0\r\n          && this._rotate % 180 != 0\r\n          && this._rotate % 90 == 0 ?\r\n            refbb.height : refbb.width)\r\n\r\n          if (textLength > refBoxLength) {\r\n            let startIndex = 0\r\n            let lastSeperatorIndex = 0\r\n            let numOfChars = this.getTrimmedTextLength(tspan.textContent)\r\n            for (let i = 0; i < numOfChars; i++) {\r\n              let sslength = this._getRenderedTextLength(tspan, startIndex, i - startIndex, fontSize)\r\n              if (sslength > refBoxLength - 2) {\r\n                let newtspan = this.node.ownerDocument.createElementNS(ORYX_CONFIG.NAMESPACE_SVG, 'tspan')\r\n                if (lastSeperatorIndex <= startIndex) {\r\n                  lastSeperatorIndex = (i == 0) ? i : i - 1\r\n                  newtspan.textContent = tspan.textContent.slice(startIndex, lastSeperatorIndex).trim()\r\n                  // lastSeperatorIndex = i;\r\n                } else {\r\n                  newtspan.textContent = tspan.textContent.slice(startIndex, ++lastSeperatorIndex).trim()\r\n                }\r\n\r\n                newtspan.setAttributeNS(null, 'x', this.invisibleRenderPoint)\r\n                newtspan.setAttributeNS(null, 'y', this.invisibleRenderPoint)\r\n\r\n                //insert tspan to text node\r\n                //this.node.insertBefore(newtspan, tspan);\r\n                newtspans.push(newtspan)\r\n                startIndex = lastSeperatorIndex\r\n              } else {\r\n                let curChar = tspan.textContent.charAt(i)\r\n                if (curChar == ' ' ||\r\n                  curChar == '-' ||\r\n                  curChar == '.' ||\r\n                  curChar == ',' ||\r\n                  curChar == ';' ||\r\n                  curChar == ':') {\r\n                  lastSeperatorIndex = i\r\n                }\r\n              }\r\n            }\r\n\r\n            tspan.textContent = tspan.textContent.slice(startIndex).trim()\r\n          }\r\n\r\n          newtspans.push(tspan)\r\n        }\r\n\r\n        while (this.node.hasChildNodes()) {\r\n          this.node.removeChild(this.node.childNodes[0])\r\n        }\r\n\r\n        while (newtspans.length > 0) {\r\n          this.node.appendChild(newtspans.shift())\r\n        }\r\n      }\r\n      //}\r\n    } catch (e) {\r\n      ORYX_Log.fatal('Error ' + e)\r\n    }\r\n    window.setTimeout(this._positionText.bind(this), 0)\r\n    //this._positionText();\r\n  }\r\n\r\n  /**\r\n   * This is a work around method for Mozilla bug 293581.\r\n   * Before the method getComputedTextLength works, the text has to be rendered.\r\n   */\r\n  _positionText () {\r\n    try {\r\n      let tspans = this.node.childNodes\r\n      let fontSize = this.getFontSize(this.node)\r\n      let invalidTSpans = []\r\n      let x = this.x, y = this.y\r\n\r\n      if (this.position) {\r\n        x = this.position.x\r\n        y = this.position.y\r\n      }\r\n      x = Math.floor(x)\r\n      y = Math.floor(y)\r\n\r\n      let i = 0, indic = [] // Cache indices if the _positionText is called again, before update is called\r\n      let is = (this.indices || $R(0, tspans.length - 1).toArray())\r\n      let length = is.length\r\n      is.each((function (index) {\r\n        if ('undefined' == typeof index) {\r\n          return\r\n        }\r\n\r\n        let tspan = tspans[i++]\r\n        if (tspan.textContent.trim() === '') {\r\n          invalidTSpans.push(tspan)\r\n        } else {\r\n          // set vertical position\r\n          let dy = 0\r\n          switch (this._verticalAlign) {\r\n            case 'bottom':\r\n              dy = -(length - index - 1) * (fontSize)\r\n              break\r\n            case 'middle':\r\n              dy = -(length / 2.0 - index - 1) * (fontSize)\r\n              dy -= ORYX_CONFIG.LABEL_LINE_DISTANCE / 2\r\n              break\r\n            case 'top':\r\n              dy = index * (fontSize)\r\n              dy += fontSize\r\n              break\r\n          }\r\n\r\n          tspan.setAttributeNS(null, 'dy', Math.floor(dy))\r\n          tspan.setAttributeNS(null, 'x', x)\r\n          tspan.setAttributeNS(null, 'y', y)\r\n          indic.push(index)\r\n        }\r\n\r\n      }).bind(this))\r\n\r\n      indic.length = tspans.length\r\n      this.indices = this.indices || indic\r\n\r\n      invalidTSpans.each(function (tspan) {\r\n        this.node.removeChild(tspan)\r\n      }.bind(this))\r\n\r\n      // set horizontal alignment\r\n      switch (this._horizontalAlign) {\r\n        case 'left':\r\n          this.node.setAttributeNS(null, 'text-anchor', 'start')\r\n          break\r\n        case 'center':\r\n          this.node.setAttributeNS(null, 'text-anchor', 'middle')\r\n          break\r\n        case 'right':\r\n          this.node.setAttributeNS(null, 'text-anchor', 'end')\r\n          break\r\n      }\r\n\r\n    } catch (e) {\r\n      // console.log(e);\r\n      this._isChanged = true\r\n    }\r\n\r\n    if (this.isVisible) {\r\n      this.node.removeAttributeNS(null, 'visibility')\r\n    }\r\n\r\n    // Finished\r\n    delete this._isUpdating;\r\n\r\n    // Raise change event\r\n    (this.changeCallbacks || []).each(function (fn) {\r\n      fn.apply(fn)\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * Returns the text length of the text content of an SVG tspan element.\r\n   * For all browsers but Firefox 3 the values are estimated.\r\n   * @param {TSpanSVGElement} tspan\r\n   * @param {int} startIndex Optional, for sub strings\r\n   * @param {int} endIndex Optional, for sub strings\r\n   */\r\n  _getRenderedTextLength (tspan, startIndex, endIndex, fontSize) {\r\n    //if (/Firefox[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent) && new Number(RegExp.$1) >= 3) {\r\n    if (startIndex === undefined) {\r\n      //test string: abcdefghijklmnopqrstuvwxyz√∂√§√º,.-#+\r\n      // 1234567890√üABCDEFGHIJKLMNOPQRSTUVWXYZ;:_'*√ú√Ñ√ñ!\"¬ß$%&/()=?[]{}|<>'~¬¥`\\^¬∞¬µ@‚Ç¨¬≤¬≥ for(var i = 0; i <\r\n      // tspan.textContent.length; i++) { console.log(tspan.textContent.charAt(i), tspan.getSubStringLength(i,1),\r\n      // this._estimateCharacterWidth(tspan.textContent.charAt(i))*(fontSize/14.0)); }\r\n      return tspan.getComputedTextLength()\r\n    } else {\r\n      return tspan.getSubStringLength(startIndex, endIndex)\r\n    }\r\n    /*} else {\r\n     if(startIndex === undefined) {\r\n     return this._estimateTextWidth(tspan.textContent, fontSize);\r\n     } else {\r\n     return this._estimateTextWidth(tspan.textContent.substr(startIndex, endIndex).trim(), fontSize);\r\n     }\r\n     }*/\r\n  }\r\n\r\n  /**\r\n   * Estimates the text width for a string.\r\n   * Used for word wrapping in all browser but FF3.\r\n   * @param {Object} text\r\n   */\r\n  _estimateTextWidth (text, fontSize) {\r\n    let sum = 0.0\r\n    for (let i = 0; i < text.length; i++) {\r\n      sum += this._estimateCharacterWidth(text.charAt(i))\r\n    }\r\n    return sum * (fontSize / 14.0)\r\n  }\r\n\r\n  /**\r\n   * Estimates the width of a single character for font size 14.\r\n   * Used for word wrapping in all browser but FF3.\r\n   * @param {Object} character\r\n   */\r\n  _estimateCharacterWidth (character) {\r\n    for (let i = 0; i < this._characterSets.length; i++) {\r\n      if (this._characterSets[i].indexOf(character) >= 0) {\r\n        return this._characterSetValues[i]\r\n      }\r\n    }\r\n    return 9\r\n  }\r\n\r\n  getReferencedElementWidth () {\r\n    let refNode = this.node.ownerDocument.getElementById(this.fitToElemId)\r\n\r\n    if (refNode) {\r\n      let refbb = refNode.getBBox()\r\n      if (refbb) {\r\n        return (this._rotate != 0\r\n        && this._rotate % 180 != 0\r\n        && this._rotate % 90 == 0 ?\r\n          refbb.height : refbb.width)\r\n      }\r\n    }\r\n\r\n    return undefined\r\n  }\r\n\r\n  /**\r\n   * If no parameter is provided, this method returns the current text.\r\n   * @param text {String} Optional. Replaces the old text with this one.\r\n   */\r\n  text () {\r\n    switch (arguments.length) {\r\n      case 0:\r\n        return this._text\r\n        break\r\n      case 1:\r\n        let oldText = this._text\r\n        if (arguments[0]) {\r\n          // Filter out multiple spaces to fix issue in chrome for line-wrapping\r\n          this._text = arguments[0].toString()\r\n          if (this._text != null && this._text != undefined) {\r\n            this._text = this._text.replace(/ {2,}/g, ' ')\r\n          }\r\n        } else {\r\n          this._text = ''\r\n        }\r\n        if (oldText !== this._text) {\r\n          this._isChanged = true\r\n          this._textHasChanged = true\r\n        }\r\n        break\r\n\r\n      default:\r\n        //TODO error\r\n        break\r\n    }\r\n  }\r\n\r\n  getOriginVerticalAlign () {\r\n    return this._originVerticalAlign\r\n  }\r\n\r\n  verticalAlign () {\r\n    switch (arguments.length) {\r\n      case 0:\r\n        return this._verticalAlign\r\n      case 1:\r\n        if (['top', 'middle', 'bottom'].member(arguments[0])) {\r\n          let oldValue = this._verticalAlign\r\n          this._verticalAlign = arguments[0]\r\n          if (this._verticalAlign !== oldValue) {\r\n            this._isChanged = true\r\n          }\r\n        }\r\n        break\r\n\r\n      default:\r\n        //TODO error\r\n        break\r\n    }\r\n  }\r\n\r\n  getOriginHorizontalAlign () {\r\n    return this._originHorizontalAlign\r\n  }\r\n\r\n  horizontalAlign () {\r\n    switch (arguments.length) {\r\n      case 0:\r\n        return this._horizontalAlign\r\n      case 1:\r\n        if (['left', 'center', 'right'].member(arguments[0])) {\r\n          let oldValue = this._horizontalAlign\r\n          this._horizontalAlign = arguments[0]\r\n          if (this._horizontalAlign !== oldValue) {\r\n            this._isChanged = true\r\n          }\r\n        }\r\n        break\r\n\r\n      default:\r\n        //TODO error\r\n        break\r\n    }\r\n  }\r\n\r\n  rotate () {\r\n    switch (arguments.length) {\r\n      case 0:\r\n        return this._rotate\r\n      case 1:\r\n        if (this._rotate != arguments[0]) {\r\n          this._rotate = arguments[0]\r\n          this._rotationPoint = undefined\r\n          this._isChanged = true\r\n        }\r\n        break\r\n      case 2:\r\n        if (this._rotate != arguments[0] ||\r\n          !this._rotationPoint ||\r\n          this._rotationPoint.x != arguments[1].x ||\r\n          this._rotationPoint.y != arguments[1].y) {\r\n          this._rotate = arguments[0]\r\n          this._rotationPoint = arguments[1]\r\n          this._isChanged = true\r\n        }\r\n\r\n    }\r\n  }\r\n\r\n  hide () {\r\n    if (this.isVisible) {\r\n      this.isVisible = false\r\n      this._isChanged = true\r\n    }\r\n  }\r\n\r\n  show () {\r\n    if (!this.isVisible) {\r\n      this.isVisible = true\r\n      this._isChanged = true\r\n\r\n      // Since text is removed from the tspan when \"hidden\", mark\r\n      // the text as changed to get it redrawn\r\n      this._textHasChanged = true\r\n    }\r\n  }\r\n\r\n  /**\r\n   * iterates parent nodes till it finds a SVG font-size\r\n   * attribute.\r\n   * @param {SVGElement} node\r\n   */\r\n  getInheritedFontSize (node) {\r\n    if (!node || !node.getAttributeNS)\r\n      return\r\n\r\n    let attr = node.getAttributeNS(null, 'font-size')\r\n    if (attr) {\r\n      return parseFloat(attr)\r\n    } else if (!ORYX_Utils.checkClassType(node, SVGSVGElement)) {\r\n      return this.getInheritedFontSize(node.parentNode)\r\n    }\r\n  }\r\n\r\n  getFontSize (node) {\r\n    let tspans = this.node.getElementsByTagNameNS(ORYX_CONFIG.NAMESPACE_SVG, 'tspan')\r\n\r\n    //trying to get an inherited font-size attribute\r\n    //NO CSS CONSIDERED!\r\n    let fontSize = this.getInheritedFontSize(this.node)\r\n    if (!fontSize) {\r\n      //because this only works in firefox 3, all other browser use the default line height\r\n      if (tspans[0] && /Firefox[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent) && new Number(RegExp.$1) >= 3) {\r\n        fontSize = tspans[0].getExtentOfChar(0).height\r\n      } else {\r\n        fontSize = ORYX_CONFIG.LABEL_DEFAULT_LINE_HEIGHT\r\n      }\r\n\r\n      // handling of unsupported method in webkit\r\n      if (fontSize <= 0) {\r\n        fontSize = ORYX_CONFIG.LABEL_DEFAULT_LINE_HEIGHT\r\n      }\r\n    }\r\n\r\n    if (fontSize) {\r\n      this.node.setAttribute('oryx:fontSize', fontSize)\r\n    }\r\n\r\n    return fontSize\r\n  }\r\n\r\n  /**\r\n   * Get trimmed text length for use with\r\n   * getExtentOfChar and getSubStringLength.\r\n   * @param {String} text\r\n   */\r\n  getTrimmedTextLength (text) {\r\n    text = text.strip().gsub('  ', ' ')\r\n\r\n    let oldLength\r\n    do {\r\n      oldLength = text.length\r\n      text = text.gsub('  ', ' ')\r\n    } while (oldLength > text.length)\r\n\r\n    return text.length\r\n  }\r\n\r\n  /**\r\n   * Returns the offset from\r\n   * edge to the label which is\r\n   * positioned under the edge\r\n   * @return {int}\r\n   */\r\n  getOffsetBottom () {\r\n    return this.offsetBottom\r\n  }\r\n  /**\r\n   * Returns the offset from\r\n   * edge to the label which is\r\n   * positioned over the edge\r\n   * @return {int}\r\n   */\r\n  getOffsetTop () {\r\n    return this.offsetTop\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object} obj\r\n   */\r\n  deserialize (obj, shape) {\r\n    if (obj && 'undefined' != typeof obj.x && 'undefined' != typeof obj.y) {\r\n      this.setPosition({ x: obj.x, y: obj.y })\r\n\r\n      if ('undefined' != typeof obj.distance) {\r\n        let from = shape.dockers[obj.from]\r\n        let to = shape.dockers[obj.to]\r\n        if (from && to) {\r\n          this.setReferencePoint({\r\n            dirty: true,\r\n            distance: obj.distance,\r\n            intersection: { x: obj.x, y: obj.y },\r\n            orientation: obj.orientation,\r\n            segment: {\r\n              from: from,\r\n              fromIndex: obj.from,\r\n              fromPosition: from.bounds.center(),\r\n              to: to,\r\n              toIndex: obj.to,\r\n              toPosition: to.bounds.center()\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n      if (obj.left) this.anchorLeft = true\r\n      if (obj.right) this.anchorRight = true\r\n      if (obj.top) this.anchorTop = true\r\n      if (obj.bottom) this.anchorBottom = true\r\n      if (obj.valign) this.verticalAlign(obj.valign)\r\n      if (obj.align) this.horizontalAlign(obj.align)\r\n\r\n    } else if (obj && 'undefined' != typeof obj.edge) {\r\n      this.setEdgePosition(obj.edge)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Object}\r\n   */\r\n  serialize () {\r\n\r\n    // On edge position\r\n    if (this.getEdgePosition()) {\r\n      if (this.getOriginEdgePosition() !== this.getEdgePosition()) {\r\n        return { edge: this.getEdgePosition() }\r\n      } else {\r\n        return null\r\n      }\r\n    }\r\n\r\n    // On self defined position\r\n    if (this.position) {\r\n      let pos = { x: this.position.x, y: this.position.y }\r\n      if (this.isAnchorLeft() && this.isAnchorLeft() !== this.isOriginAnchorLeft()) {\r\n        pos.left = true\r\n      }\r\n      if (this.isAnchorRight() && this.isAnchorRight() !== this.isOriginAnchorRight()) {\r\n        pos.right = true\r\n      }\r\n      if (this.isAnchorTop() && this.isAnchorTop() !== this.isOriginAnchorTop()) {\r\n        pos.top = true\r\n      }\r\n      if (this.isAnchorBottom() && this.isAnchorBottom() !== this.isOriginAnchorBottom()) {\r\n        pos.bottom = true\r\n      }\r\n\r\n      if (this.getOriginVerticalAlign() !== this.verticalAlign()) {\r\n        pos.valign = this.verticalAlign()\r\n      }\r\n      if (this.getOriginHorizontalAlign() !== this.horizontalAlign()) {\r\n        pos.align = this.horizontalAlign()\r\n      }\r\n\r\n      return pos\r\n    }\r\n\r\n    // On reference point which is interesting for edges\r\n    if (this.getReferencePoint()) {\r\n      let ref = this.getReferencePoint()\r\n      return {\r\n        distance: ref.distance,\r\n        x: ref.intersection.x,\r\n        y: ref.intersection.y,\r\n        from: ref.segment.fromIndex,\r\n        to: ref.segment.toIndex,\r\n        orientation: ref.orientation,\r\n        valign: this.verticalAlign(),\r\n        align: this.horizontalAlign()\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  toString () {\r\n    return 'Label ' + this.id\r\n  }\r\n}\r\n","import EditPathHandler from './svg/EditPathHandler'\r\nimport MinMaxPathHandler from './svg/MinMaxPathHandler'\r\nimport PointsPathHandler from './svg/PointsPathHandler'\r\nimport SVGMarker from './svg/SVGMarker'\r\nimport SVGShape from './svg/SVGShape'\r\nimport Label from './svg/Label'\r\n\r\nconst SVG = {\r\n  EditPathHandler: EditPathHandler,\r\n  MinMaxPathHandler: MinMaxPathHandler,\r\n  PointsPathHandler: PointsPathHandler,\r\n  SVGMarker: SVGMarker,\r\n  SVGShape: SVGShape,\r\n  Label: Label,\r\n}\r\n\r\nexport default SVG","module.exports = \"data:image/png;base64,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\"","import Shape from './Shape'\r\nimport ORYX_Bounds from './Bounds'\r\nimport ORYX_SVG from './SVG'\r\nimport ORYX_Edge from './Edge'\r\nimport ORYX_Controls from './Controls'\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Log from '../Log'\r\n\r\n/**\r\n * @classDescription Abstract base class for all Nodes.\r\n * @extends ORYX.Core.Shape\r\n */\r\nexport default class Node extends Shape {\r\n  /**\r\n   * Constructor\r\n   * @param options {Object} A container for arguments.\r\n   * @param stencil {Stencil}\r\n   */\r\n  constructor (options, stencil, facade) {\r\n    // arguments.callee.$.construct.apply(this, arguments);\r\n    super(...arguments)\r\n    this.isSelectable = true\r\n    this.isMovable = true\r\n    this._dockerUpdated = false\r\n    this.facade = facade\r\n\r\n    this._oldBounds = new ORYX_Bounds() // init bounds with undefined values\r\n    this._svgShapes = [] // array of all SVGShape objects of\r\n    // SVG representation\r\n\r\n    //TODO vielleicht in shape verschieben?\r\n    this.minimumSize = undefined // {width:..., height:...}\r\n    this.maximumSize = undefined\r\n\r\n    //TODO vielleicht in shape oder uiobject verschieben?\r\n    // vielleicht sogar isResizable ersetzen?\r\n    this.isHorizontallyResizable = false\r\n    this.isVerticallyResizable = false\r\n\r\n    this.dataId = undefined\r\n    this._init(this._stencil.view())\r\n    this.forcedHeight = -1\r\n  }\r\n\r\n  /**\r\n   * This method checks whether the shape is resized correctly and calls the\r\n   * super class update method.\r\n   */\r\n  _update () {\r\n    this.dockers.invoke('update')\r\n    if (this.isChanged) {\r\n      let bounds = this.bounds\r\n      let oldBounds = this._oldBounds\r\n\r\n      if (this.isResized) {\r\n        let widthDelta = bounds.width() / oldBounds.width()\r\n        let heightDelta = bounds.height() / oldBounds.height()\r\n\r\n        // iterate over all relevant svg elements and resize them\r\n        this._svgShapes.each(function (svgShape) {\r\n          // adjust width\r\n          if (svgShape.isHorizontallyResizable) {\r\n            svgShape.width = svgShape.oldWidth * widthDelta\r\n          }\r\n          // adjust height\r\n          if (svgShape.isVerticallyResizable) {\r\n            svgShape.height = svgShape.oldHeight * heightDelta\r\n          }\r\n\r\n          // check, if anchors are set\r\n          let anchorOffset\r\n          let leftIncluded = svgShape.anchorLeft\r\n          let rightIncluded = svgShape.anchorRight\r\n\r\n          if (rightIncluded) {\r\n            anchorOffset = oldBounds.width() - (svgShape.oldX + svgShape.oldWidth)\r\n            if (leftIncluded) {\r\n              svgShape.width = bounds.width() - svgShape.x - anchorOffset\r\n            } else {\r\n              svgShape.x = bounds.width() - (anchorOffset + svgShape.width)\r\n            }\r\n          } else if (!leftIncluded) {\r\n            svgShape.x = widthDelta * svgShape.oldX\r\n            if (!svgShape.isHorizontallyResizable) {\r\n              svgShape.x = svgShape.x + svgShape.width * widthDelta / 2 - svgShape.width / 2\r\n            }\r\n          }\r\n\r\n          let topIncluded = svgShape.anchorTop\r\n          let bottomIncluded = svgShape.anchorBottom\r\n\r\n          if (bottomIncluded) {\r\n            anchorOffset = oldBounds.height() - (svgShape.oldY + svgShape.oldHeight)\r\n            if (topIncluded) {\r\n              svgShape.height = bounds.height() - svgShape.y - anchorOffset\r\n            } else {\r\n              // Hack for choreography task layouting\r\n              if (!svgShape._isYLocked) {\r\n                svgShape.y = bounds.height() - (anchorOffset + svgShape.height)\r\n              }\r\n            }\r\n          } else if (!topIncluded) {\r\n            svgShape.y = heightDelta * svgShape.oldY\r\n            if (!svgShape.isVerticallyResizable) {\r\n              svgShape.y = svgShape.y + svgShape.height * heightDelta / 2 - svgShape.height / 2\r\n            }\r\n          }\r\n        })\r\n\r\n        // check, if the current bounds is unallowed horizontally or vertically resized\r\n        let p = {\r\n          x: 0,\r\n          y: 0\r\n        }\r\n        if (!this.isHorizontallyResizable && bounds.width() !== oldBounds.width()) {\r\n          p.x = oldBounds.width() - bounds.width()\r\n        }\r\n        if (!this.isVerticallyResizable && bounds.height() !== oldBounds.height()) {\r\n          p.y = oldBounds.height() - bounds.height()\r\n        }\r\n        if (p.x !== 0 || p.y !== 0) {\r\n          bounds.extend(p)\r\n        }\r\n\r\n        // check, if the current bounds are between maximum and minimum bounds\r\n        p = {\r\n          x: 0,\r\n          y: 0\r\n        }\r\n        let widthDifference, heightDifference\r\n        if (this.minimumSize) {\r\n          ORYX_Log.debug('Shape (%0)\\'s min size: (%1x%2)', this, this.minimumSize.width, this.minimumSize.height)\r\n          widthDifference = this.minimumSize.width - bounds.width()\r\n          if (widthDifference > 0) {\r\n            p.x += widthDifference\r\n          }\r\n          heightDifference = this.minimumSize.height - bounds.height()\r\n          if (heightDifference > 0) {\r\n            p.y += heightDifference\r\n          }\r\n        }\r\n        if (this.maximumSize) {\r\n          ORYX_Log.debug('Shape (%0)\\'s max size: (%1x%2)', this, this.maximumSize.width, this.maximumSize.height)\r\n          widthDifference = bounds.width() - this.maximumSize.width\r\n          if (widthDifference > 0) {\r\n            p.x -= widthDifference\r\n          }\r\n          heightDifference = bounds.height() - this.maximumSize.height\r\n          if (heightDifference > 0) {\r\n            p.y -= heightDifference\r\n          }\r\n        }\r\n        if (p.x !== 0 || p.y !== 0) {\r\n          bounds.extend(p)\r\n        }\r\n\r\n        let leftIncluded, rightIncluded, topIncluded, bottomIncluded, center, newX, newY\r\n\r\n        this.magnets.each(function (magnet) {\r\n          leftIncluded = magnet.anchorLeft\r\n          rightIncluded = magnet.anchorRight\r\n          topIncluded = magnet.anchorTop\r\n          bottomIncluded = magnet.anchorBottom\r\n\r\n          center = magnet.bounds.center()\r\n\r\n          if (leftIncluded) {\r\n            newX = center.x\r\n          } else if (rightIncluded) {\r\n            newX = bounds.width() - (oldBounds.width() - center.x)\r\n          } else {\r\n            newX = center.x * widthDelta\r\n          }\r\n\r\n          if (topIncluded) {\r\n            newY = center.y\r\n          } else if (bottomIncluded) {\r\n            newY = bounds.height() - (oldBounds.height() - center.y)\r\n          } else {\r\n            newY = center.y * heightDelta\r\n          }\r\n\r\n          if (center.x !== newX || center.y !== newY) {\r\n            magnet.bounds.centerMoveTo(newX, newY)\r\n          }\r\n        })\r\n\r\n        // set new position of labels\r\n        this.getLabels().each(function (label) {\r\n          // Set the position dependings on it anchor\r\n          if (!label.isAnchorLeft()) {\r\n            if (label.isAnchorRight()) {\r\n              label.setX(bounds.width() - (oldBounds.width() - label.oldX))\r\n            } else {\r\n              label.setX((label.position ? label.position.x : label.x) * widthDelta)\r\n            }\r\n          }\r\n          if (!label.isAnchorTop()) {\r\n            if (label.isAnchorBottom()) {\r\n              label.setY(bounds.height() - (oldBounds.height() - label.oldY))\r\n            } else {\r\n              label.setY((label.position ? label.position.y : label.y) * heightDelta)\r\n            }\r\n          }\r\n\r\n          // If there is an position,\r\n          // set the origin position as well\r\n          if (label.position) {\r\n            if (!label.isOriginAnchorLeft()) {\r\n              if (label.isOriginAnchorRight()) {\r\n                label.setOriginX(bounds.width() - (oldBounds.width() - label.oldX))\r\n              } else {\r\n                label.setOriginX(label.x * widthDelta)\r\n              }\r\n            }\r\n            if (!label.isOriginAnchorTop()) {\r\n              if (label.isOriginAnchorBottom()) {\r\n                label.setOriginY(bounds.height() - (oldBounds.height() - label.oldY))\r\n              } else {\r\n                label.setOriginY(label.y * heightDelta)\r\n              }\r\n            }\r\n          }\r\n        })\r\n\r\n        // update docker\r\n        let docker = this.dockers[0]\r\n        if (docker) {\r\n          docker.bounds.unregisterCallback(this._dockerChangedCallback)\r\n          if (!this._dockerUpdated) {\r\n            docker.bounds.centerMoveTo(this.bounds.center())\r\n            this._dockerUpdated = false\r\n          }\r\n\r\n          docker.update()\r\n          docker.bounds.registerCallback(this._dockerChangedCallback)\r\n        }\r\n        this.isResized = false\r\n      }\r\n\r\n      this.refresh()\r\n      this.isChanged = false\r\n      this._oldBounds = this.bounds.clone()\r\n    }\r\n\r\n    this.children.each(function (value) {\r\n      if (!(value instanceof ORYX_Controls.Docker)) {\r\n        value._update()\r\n      }\r\n    })\r\n\r\n    if (this.dockers.length > 0 && !this.dockers.first().getDockedShape()) {\r\n      this.dockers.each(function (docker) {\r\n        docker.bounds.centerMoveTo(this.bounds.center())\r\n      }.bind(this))\r\n    }\r\n\r\n    /*this.incoming.each((function(edge) {\r\n     if(!(this.dockers[0] && this.dockers[0].getDockedShape() instanceof ORYX.Core.Node))\r\n     edge._update(true);\r\n     }).bind(this));\r\n\r\n     this.outgoing.each((function(edge) {\r\n     if(!(this.dockers[0] && this.dockers[0].getDockedShape() instanceof ORYX.Core.Node))\r\n     edge._update(true);\r\n     }).bind(this)); */\r\n  }\r\n\r\n  /**\r\n   * This method repositions and resizes the SVG representation\r\n   * of the shape.\r\n   */\r\n  refresh () {\r\n    // arguments.callee.$.refresh.apply(this, arguments)\r\n    super.refresh()\r\n\r\n    /** Movement */\r\n    let x = this.bounds.upperLeft().x\r\n    let y = this.bounds.upperLeft().y\r\n\r\n    // Move owner element\r\n    this.node.firstChild.setAttributeNS(null, 'transform', 'translate(' + x + ', ' + y + ')')\r\n    // Move magnets\r\n    this.node.childNodes[1].childNodes[1].setAttributeNS(null, 'transform', 'translate(' + x + ', ' + y + ')')\r\n\r\n    /** Resize */\r\n\r\n    //iterate over all relevant svg elements and update them\r\n    this._svgShapes.each(function (svgShape) {\r\n      svgShape.update()\r\n    })\r\n  }\r\n\r\n  _dockerChanged () {\r\n    let docker = this.dockers[0]\r\n\r\n    //set the bounds of the the association\r\n    this.bounds.centerMoveTo(docker.bounds.center())\r\n\r\n    this._dockerUpdated = true\r\n    //this._update(true);\r\n  }\r\n\r\n  /**\r\n   * This method traverses a tree of SVGElements and returns\r\n   * all SVGShape objects. For each basic shape or path element\r\n   * a SVGShape object is initialized.\r\n   *\r\n   * @param svgNode {SVGElement}\r\n   * @return {Array} Array of SVGShape objects\r\n   */\r\n  _initSVGShapes (svgNode) {\r\n    let svgShapes = []\r\n    try {\r\n      let svgShape = new ORYX_SVG.SVGShape(svgNode)\r\n      svgShapes.push(svgShape)\r\n    }\r\n    catch (e) {\r\n\r\n    }\r\n\r\n    if (svgNode.hasChildNodes()) {\r\n      for (let i = 0; i < svgNode.childNodes.length; i++) {\r\n        svgShapes = svgShapes.concat(this._initSVGShapes(svgNode.childNodes[i]))\r\n      }\r\n    }\r\n\r\n    return svgShapes\r\n  }\r\n\r\n  /**\r\n   * Calculate if the point is inside the Shape\r\n   * @param {PointX}\r\n   * @param {PointY}\r\n   * @param {absoluteBounds} optional: for performance\r\n   */\r\n  isPointIncluded (pointX, pointY, absoluteBounds) {\r\n    // If there is an arguments with the absoluteBounds\r\n    let absBounds = absoluteBounds && absoluteBounds instanceof ORYX_Bounds ?\r\n      absoluteBounds : this.absoluteBounds()\r\n\r\n    if (!absBounds.isIncluded(pointX, pointY)) {\r\n      return false\r\n    }\r\n    // point = Object.clone(point);\r\n    let ul = absBounds.upperLeft()\r\n    let x = pointX - ul.x\r\n    let y = pointY - ul.y\r\n\r\n    let i = 0\r\n    let isPointIncluded = false\r\n    do {\r\n      isPointIncluded = this._svgShapes[i++].isPointIncluded(x, y)\r\n    } while (!isPointIncluded && i < this._svgShapes.length)\r\n\r\n    return isPointIncluded\r\n\r\n    /*return this._svgShapes.any(function(svgShape){\r\n     return svgShape.isPointIncluded(point);\r\n     });*/\r\n  }\r\n\r\n  /**\r\n   * Calculate if the point is over an special offset area\r\n   * @param {Point}\r\n   */\r\n  isPointOverOffset (pointX, pointY) {\r\n    // var isOverEl = arguments.callee.$.isPointOverOffset.apply(this, arguments)\r\n    let isOverEl = super.isPointOverOffset.apply(pointX, pointY)\r\n\r\n    if (isOverEl) {\r\n      // If there is an arguments with the absoluteBounds\r\n      let absBounds = this.absoluteBounds()\r\n      absBounds.widen(ORYX_Config.CustomConfigs.BORDER_OFFSET)\r\n\r\n      if (!absBounds.isIncluded(pointX, pointY)) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n\r\n  }\r\n\r\n  serialize () {\r\n    // var result = arguments.callee.$.serialize.apply(this)\r\n    let result = super.serialize()\r\n\r\n    // Add the docker's bounds\r\n    // nodes only have at most one docker!\r\n    this.dockers.each((function (docker) {\r\n      if (docker.getDockedShape()) {\r\n        let center = docker.referencePoint\r\n        center = center ? center : docker.bounds.center()\r\n        result.push({\r\n          name: 'docker',\r\n          prefix: 'oryx',\r\n          value: $H(center).values().join(','),\r\n          type: 'literal'\r\n        })\r\n      }\r\n    }).bind(this))\r\n\r\n    // Get the spezific serialized object from the stencil\r\n    try {\r\n      //result = this.getStencil().serialize(this, result);\r\n\r\n      let serializeEvent = this.getStencil().serialize()\r\n\r\n      /*\r\n       * call serialize callback by reference, result should be found\r\n       * in serializeEvent.result\r\n       */\r\n      if (serializeEvent.type) {\r\n        serializeEvent.shape = this\r\n        serializeEvent.data = result\r\n        serializeEvent.result = undefined\r\n        serializeEvent.forceExecution = true\r\n\r\n        this._delegateEvent(serializeEvent)\r\n\r\n        if (serializeEvent.result) {\r\n          result = serializeEvent.result\r\n        }\r\n      }\r\n    }\r\n    catch (e) {\r\n    }\r\n    return result\r\n  }\r\n\r\n  deserialize (data) {\r\n    // arguments.callee.$.deserialize.apply(this, arguments)\r\n    super.deserialize(data)\r\n    try {\r\n      let deserializeEvent = this.getStencil().deserialize()\r\n      /*\r\n       * call serialize callback by reference, result should be found\r\n       * in serializeEventInfo.result\r\n       */\r\n      if (deserializeEvent.type) {\r\n        deserializeEvent.shape = this\r\n        deserializeEvent.data = data\r\n        deserializeEvent.result = undefined\r\n        deserializeEvent.forceExecution = true\r\n\r\n        this._delegateEvent(deserializeEvent)\r\n        if (deserializeEvent.result) {\r\n          data = deserializeEvent.result\r\n        }\r\n      }\r\n    }\r\n    catch (e) {\r\n    }\r\n\r\n    // Set the outgoing shapes\r\n    let outgoing = data.findAll(function (ser) {\r\n      return (ser.prefix + '-' + ser.name) == 'raziel-outgoing'\r\n    })\r\n    outgoing.each((function (obj) {\r\n      // TODO: Look at Canvas\r\n      if (!this.parent) {\r\n        return\r\n      }\r\n\r\n      // Set outgoing Shape\r\n      let next = this.getCanvas().getChildShapeByResourceId(obj.value)\r\n\r\n      if (next) {\r\n        if (next instanceof ORYX_Edge) {\r\n          //Set the first docker of the next shape\r\n          next.dockers.first().setDockedShape(this)\r\n          next.dockers.first().setReferencePoint(next.dockers.first().bounds.center())\r\n        } else if (next.dockers.length > 0) { //next is a node and next has a docker\r\n          next.dockers.first().setDockedShape(this)\r\n          //next.dockers.first().setReferencePoint({x: this.bounds.width() / 2.0, y: this.bounds.height() / 2.0});\r\n        }\r\n      }\r\n\r\n    }).bind(this))\r\n\r\n    if (this.dockers.length === 1) {\r\n      let dockerPos\r\n      dockerPos = data.find(function (entry) {\r\n        return (entry.prefix + '-' + entry.name === 'oryx-dockers')\r\n      })\r\n\r\n      if (dockerPos) {\r\n        let points = dockerPos.value.replace(/,/g, ' ').split(' ').without('').without('#')\r\n        if (points.length === 2 && this.dockers[0].getDockedShape()) {\r\n          this.dockers[0].setReferencePoint({\r\n            x: parseFloat(points[0]),\r\n            y: parseFloat(points[1])\r\n          })\r\n        } else {\r\n          this.dockers[0].bounds.centerMoveTo(parseFloat(points[0]), parseFloat(points[1]))\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This method excepts the SVGDoucment that is the SVG representation\r\n   * of this shape.\r\n   * The bounds of the shape are calculated, the SVG representation's upper left point\r\n   * is moved to 0,0 and it the method sets if this shape is resizable.\r\n   *\r\n   * @param {SVGDocument} svgDocument\r\n   */\r\n  _init (svgDocument) {\r\n    // arguments.callee.$._init.apply(this, arguments)\r\n    super._init(svgDocument)\r\n    //outer most g node\r\n    let svgNode = svgDocument.getElementsByTagName('g')[0]\r\n\r\n    // set all required attributes\r\n    let attributeTitle = svgDocument.ownerDocument.createAttribute('title')\r\n    attributeTitle.nodeValue = this.getStencil().title()\r\n    svgNode.setAttributeNode(attributeTitle)\r\n\r\n    let attributeId = svgDocument.ownerDocument.createAttribute('id')\r\n    attributeId.nodeValue = this.id\r\n    svgNode.setAttributeNode(attributeId)\r\n\r\n    let stencilTargetNode = this.node.childNodes[0].childNodes[0] //<g class=me>\"\r\n    svgNode = stencilTargetNode.appendChild(svgNode)\r\n\r\n    // Add to the EventHandler\r\n    this.addEventHandlers(svgNode.parentNode)\r\n\r\n    /**set minimum and maximum size*/\r\n    let minSizeAttr = svgNode.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'minimumSize')\r\n    if (minSizeAttr) {\r\n      minSizeAttr = minSizeAttr.replace('/,/g', ' ')\r\n      let minSizeValues = minSizeAttr.split(' ')\r\n      minSizeValues = minSizeValues.without('')\r\n\r\n      if (minSizeValues.length > 1) {\r\n        this.minimumSize = {\r\n          width: parseFloat(minSizeValues[0]),\r\n          height: parseFloat(minSizeValues[1])\r\n        }\r\n      } else {\r\n        //set minimumSize to (1,1), so that width and height of the stencil can never be (0,0)\r\n        this.minimumSize = {\r\n          width: 1,\r\n          height: 1\r\n        }\r\n      }\r\n    }\r\n\r\n    let maxSizeAttr = svgNode.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'maximumSize')\r\n    if (maxSizeAttr) {\r\n      maxSizeAttr = maxSizeAttr.replace('/,/g', ' ')\r\n      let maxSizeValues = maxSizeAttr.split(' ')\r\n      maxSizeValues = maxSizeValues.without('')\r\n\r\n      if (maxSizeValues.length > 1) {\r\n        this.maximumSize = {\r\n          width: parseFloat(maxSizeValues[0]),\r\n          height: parseFloat(maxSizeValues[1])\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.minimumSize && this.maximumSize &&\r\n      (this.minimumSize.width > this.maximumSize.width ||\r\n        this.minimumSize.height > this.maximumSize.height)) {\r\n      //TODO wird verschluckt!!!\r\n      throw this + ': Minimum Size must be greater than maxiumSize.'\r\n    }\r\n\r\n    /**get current bounds and adjust it to upperLeft == (0,0)*/\r\n    // initialize all SVGShape objects\r\n    this._svgShapes = this._initSVGShapes(svgNode)\r\n\r\n    // get upperLeft and lowerRight of stencil\r\n    let upperLeft = {\r\n      x: undefined,\r\n      y: undefined\r\n    }\r\n    let lowerRight = {\r\n      x: undefined,\r\n      y: undefined\r\n    }\r\n    const me = this\r\n    this._svgShapes.each(function (svgShape) {\r\n      upperLeft.x = (upperLeft.x !== undefined) ? Math.min(upperLeft.x, svgShape.x) : svgShape.x\r\n      upperLeft.y = (upperLeft.y !== undefined) ? Math.min(upperLeft.y, svgShape.y) : svgShape.y\r\n      lowerRight.x = (lowerRight.x !== undefined) ? Math.max(lowerRight.x, svgShape.x + svgShape.width) : svgShape.x + svgShape.width\r\n      lowerRight.y = (lowerRight.y !== undefined) ? Math.max(lowerRight.y, svgShape.y + svgShape.height) : svgShape.y + svgShape.height\r\n\r\n      /** set if resizing is enabled */\r\n      //TODO isResizable durch die beiden anderen booleans ersetzen?\r\n      if (svgShape.isHorizontallyResizable) {\r\n        me.isHorizontallyResizable = true\r\n        me.isResizable = true\r\n      }\r\n      if (svgShape.isVerticallyResizable) {\r\n        me.isVerticallyResizable = true\r\n        me.isResizable = true\r\n      }\r\n      if (svgShape.anchorTop && svgShape.anchorBottom) {\r\n        me.isVerticallyResizable = true\r\n        me.isResizable = true\r\n      }\r\n      if (svgShape.anchorLeft && svgShape.anchorRight) {\r\n        me.isHorizontallyResizable = true\r\n        me.isResizable = true\r\n      }\r\n    })\r\n\r\n    // move all SVGShapes by -upperLeft\r\n    this._svgShapes.each(function (svgShape) {\r\n      svgShape.x -= upperLeft.x\r\n      svgShape.y -= upperLeft.y\r\n      svgShape.update()\r\n    })\r\n\r\n    // set bounds of shape\r\n    // the offsets are also needed for positioning the magnets and the docker\r\n    let offsetX = upperLeft.x\r\n    let offsetY = upperLeft.y\r\n\r\n    lowerRight.x -= offsetX\r\n    lowerRight.y -= offsetY\r\n    upperLeft.x = 0\r\n    upperLeft.y = 0\r\n\r\n    // prevent that width or height of initial bounds is 0\r\n    if (lowerRight.x === 0) {\r\n      lowerRight.x = 1\r\n    }\r\n    if (lowerRight.y === 0) {\r\n      lowerRight.y = 1\r\n    }\r\n    this._oldBounds.set(upperLeft, lowerRight)\r\n    this.bounds.set(upperLeft, lowerRight)\r\n\r\n    /**initialize magnets */\r\n    let magnets = svgDocument.getElementsByTagNameNS(ORYX_Config.NAMESPACE_ORYX, 'magnets')\r\n    if (magnets && magnets.length > 0) {\r\n      magnets = $A(magnets[0].getElementsByTagNameNS(ORYX_Config.NAMESPACE_ORYX, 'magnet'))\r\n      const me = this\r\n      magnets.each(function (magnetElem) {\r\n        let magnet = new ORYX_Controls.Magnet({\r\n          eventHandlerCallback: me.eventHandlerCallback\r\n        })\r\n        let cx = parseFloat(magnetElem.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'cx'))\r\n        let cy = parseFloat(magnetElem.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'cy'))\r\n        magnet.bounds.centerMoveTo({\r\n          x: cx - offsetX,\r\n          y: cy - offsetY\r\n        })\r\n\r\n        // get anchors\r\n        let anchors = magnetElem.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'anchors')\r\n        if (anchors) {\r\n          anchors = anchors.replace('/,/g', ' ')\r\n          anchors = anchors.split(' ').without('')\r\n          for (let i = 0; i < anchors.length; i++) {\r\n            switch (anchors[i].toLowerCase()) {\r\n              case 'left':\r\n                magnet.anchorLeft = true\r\n                break\r\n              case 'right':\r\n                magnet.anchorRight = true\r\n                break\r\n              case 'top':\r\n                magnet.anchorTop = true\r\n                break\r\n              case 'bottom':\r\n                magnet.anchorBottom = true\r\n                break\r\n            }\r\n          }\r\n        }\r\n\r\n        me.add(magnet)\r\n\r\n        // check, if magnet is default magnet\r\n        if (!me._defaultMagnet) {\r\n          let defaultAttr = magnetElem.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'default')\r\n          if (defaultAttr && defaultAttr.toLowerCase() === 'yes') {\r\n            me._defaultMagnet = magnet\r\n          }\r\n        }\r\n      })\r\n    } else {\r\n      // Add a Magnet in the Center of Shape\r\n      let magnet = new ORYX_Controls.Magnet()\r\n      magnet.bounds.centerMoveTo(this.bounds.width() / 2, this.bounds.height() / 2)\r\n      this.add(magnet)\r\n    }\r\n\r\n    /**initialize docker */\r\n    let dockerElem = svgDocument.getElementsByTagNameNS(ORYX_Config.NAMESPACE_ORYX, 'docker')\r\n\r\n    if (dockerElem && dockerElem.length > 0) {\r\n      dockerElem = dockerElem[0]\r\n      let docker = this.createDocker()\r\n      let cx = parseFloat(dockerElem.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'cx'))\r\n      let cy = parseFloat(dockerElem.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'cy'))\r\n      docker.bounds.centerMoveTo({\r\n        x: cx - offsetX,\r\n        y: cy - offsetY\r\n      })\r\n\r\n      // get anchors\r\n      let anchors = dockerElem.getAttributeNS(ORYX_Config.NAMESPACE_ORYX, 'anchors')\r\n      if (anchors) {\r\n        anchors = anchors.replace('/,/g', ' ')\r\n        anchors = anchors.split(' ').without('')\r\n\r\n        for (let i = 0; i < anchors.length; i++) {\r\n          switch (anchors[i].toLowerCase()) {\r\n            case 'left':\r\n              docker.anchorLeft = true\r\n              break\r\n            case 'right':\r\n              docker.anchorRight = true\r\n              break\r\n            case 'top':\r\n              docker.anchorTop = true\r\n              break\r\n            case 'bottom':\r\n              docker.anchorBottom = true\r\n              break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**initialize labels*/\r\n    let textElems = svgNode.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'text')\r\n\r\n    $A(textElems).each((function (textElem) {\r\n      let label = new ORYX_SVG.Label({\r\n        textElement: textElem,\r\n        shapeId: this.id\r\n      })\r\n      label.x -= offsetX\r\n      label.y -= offsetY\r\n      this._labels.set(label.id, label)\r\n      label.registerOnChange(this.layout.bind(this))\r\n    }).bind(this))\r\n  }\r\n\r\n  /**\r\n   * Override the Method, that a docker is not shown\r\n   *\r\n   */\r\n  createDocker () {\r\n    let docker = new ORYX_Controls.Docker({ eventHandlerCallback: this.eventHandlerCallback })\r\n    docker.bounds.registerCallback(this._dockerChangedCallback)\r\n\r\n    this.dockers.push(docker)\r\n    docker.parent = this\r\n    docker.bounds.registerCallback(this._changedCallback)\r\n\r\n    return docker\r\n  }\r\n\r\n  toString () {\r\n    return this._stencil.title() + ' ' + this.id\r\n  }\r\n  getInstanceofType () {\r\n    return 'Node, Shape'\r\n  }\r\n}\r\n","import ORYX_CINFIG from '../../CONFIG'\r\nimport ORYX_LOG from '../../Log'\r\nimport PropertyItem from './PropertyItem'\r\nimport ComplexPropertyItem from './ComplexPropertyItem'\r\n\r\nexport default class Property {\r\n  constructor (jsonProp, namespace, stencil) {\r\n    // arguments.callee.$.construct.apply(this, arguments)\r\n\r\n    this._jsonProp = jsonProp || ORYX_LOG.error('Parameter jsonProp is not defined.')\r\n    this._namespace = namespace || ORYX_LOG.error('Parameter namespace is not defined.')\r\n    this._stencil = stencil || ORYX_LOG.error('Parameter stencil is not defined.')\r\n\r\n    this._items = {}\r\n    this._complexItems = {}\r\n\r\n    // Flag to indicate whether or not the property should be hidden\r\n    // This can be for example when the stencil set is upgraded, but the model\r\n    // has a value for that specific property filled in which we still want to show.\r\n    // If the value is missing, the property can simply be not shown.\r\n    this._hidden = false\r\n\r\n    jsonProp.id = jsonProp.id || ORYX_LOG.error('ORYX.Core.StencilSet.Property(construct): Id is not defined.')\r\n    jsonProp.id = jsonProp.id.toLowerCase()\r\n\r\n    if (!jsonProp.type) {\r\n      ORYX_LOG.info('Type is not defined for stencil \\'%0\\', id \\'%1\\'. Falling back to \\'String\\'.', stencil, jsonProp.id)\r\n      jsonProp.type = 'string'\r\n    } else {\r\n      jsonProp.type = jsonProp.type.toLowerCase()\r\n    }\r\n\r\n    jsonProp.prefix = jsonProp.prefix || 'oryx'\r\n    jsonProp.title = jsonProp.title || ''\r\n    jsonProp.value = jsonProp.value || ''\r\n    jsonProp.description = jsonProp.description || ''\r\n    jsonProp.readonly = jsonProp.readonly || false\r\n    jsonProp.optional = jsonProp.optional !== false\r\n\r\n    // init refToView\r\n    if (this._jsonProp.refToView) {\r\n      if (!(this._jsonProp.refToView instanceof Array)) {\r\n        this._jsonProp.refToView = [this._jsonProp.refToView]\r\n      }\r\n    } else {\r\n      this._jsonProp.refToView = []\r\n    }\r\n\r\n    var globalMin = this.getMinForType(jsonProp.type)\r\n    if (jsonProp.min === undefined || jsonProp.min === null) {\r\n      jsonProp.min = globalMin\r\n    } else if (jsonProp.min < globalMin) {\r\n      jsonProp.min = globalMin\r\n    }\r\n\r\n    var globalMax = this.getMaxForType(jsonProp.type)\r\n    if (jsonProp.max === undefined || jsonProp.max === null) {\r\n      jsonProp.max = globalMax\r\n    } else if (jsonProp.max > globalMax) {\r\n      jsonProp.min = globalMax\r\n    }\r\n\r\n    if (!jsonProp.fillOpacity) {\r\n      jsonProp.fillOpacity = false\r\n    }\r\n\r\n    if ('number' != typeof jsonProp.lightness) {\r\n      jsonProp.lightness = 1\r\n    } else {\r\n      jsonProp.lightness = Math.max(0, Math.min(1, jsonProp.lightness))\r\n    }\r\n\r\n    if (!jsonProp.strokeOpacity) {\r\n      jsonProp.strokeOpacity = false\r\n    }\r\n\r\n    if (jsonProp.length === undefined || jsonProp.length === null) {\r\n      jsonProp.length = Number.MAX_VALUE\r\n    }\r\n\r\n    if (!jsonProp.wrapLines) {\r\n      jsonProp.wrapLines = false\r\n    }\r\n\r\n    if (!jsonProp.dateFormat) {\r\n      jsonProp.dateFormat = 'm/d/y'\r\n    }\r\n\r\n    if (!jsonProp.fill) {\r\n      jsonProp.fill = false\r\n    }\r\n\r\n    if (!jsonProp.stroke) {\r\n      jsonProp.stroke = false\r\n    }\r\n\r\n    if (!jsonProp.inverseBoolean) {\r\n      jsonProp.inverseBoolean = false\r\n    }\r\n\r\n    if (!jsonProp.directlyEditable && jsonProp.directlyEditable != false) {\r\n      jsonProp.directlyEditable = true\r\n    }\r\n\r\n    if (jsonProp.visible !== false) {\r\n      jsonProp.visible = true\r\n    }\r\n\r\n    if (jsonProp.isList !== true) {\r\n      jsonProp.isList = false\r\n\r\n      if (!jsonProp.list || !(jsonProp.list instanceof Array)) {\r\n        jsonProp.list = []\r\n      }\r\n    }\r\n\r\n    if (!jsonProp.category) {\r\n      if (jsonProp.popular) {\r\n        jsonProp.category = 'popular'\r\n      } else {\r\n        jsonProp.category = 'others'\r\n      }\r\n    }\r\n\r\n    if (!jsonProp.alwaysAppearInMultiselect) {\r\n      jsonProp.alwaysAppearInMultiselect = false\r\n    }\r\n\r\n    if (jsonProp.type === ORYX_CINFIG.TYPE_CHOICE) {\r\n      if (jsonProp.items && jsonProp.items instanceof Array) {\r\n        jsonProp.items.each((function (jsonItem) {\r\n          // why is the item's value used as the key???\r\n          this._items[jsonItem.value.toLowerCase()] = new PropertyItem(jsonItem, namespace, this)\r\n        }).bind(this))\r\n      } else {\r\n        throw 'ORYX.Core.StencilSet.Property(construct): No property items defined.'\r\n      }\r\n      // extended by Kerstin (start)\r\n    } else if (jsonProp.type === ORYX_CINFIG.TYPE_COMPLEX || jsonProp.type == ORYX_CINFIG.TYPE_MULTIPLECOMPLEX) {\r\n      if (jsonProp.complexItems && jsonProp.complexItems instanceof Array) {\r\n        jsonProp.complexItems.each((function (jsonComplexItem) {\r\n          this._complexItems[jsonComplexItem.id.toLowerCase()] = new ComplexPropertyItem(jsonComplexItem, namespace, this)\r\n        }).bind(this))\r\n      }\r\n    }\r\n    // extended by Kerstin (end)\r\n  }\r\n\r\n  getMinForType (type) {\r\n    if (type.toLowerCase() == ORYX_CINFIG.TYPE_INTEGER) {\r\n      return -Math.pow(2, 31)\r\n    } else {\r\n      return -Number.MAX_VALUE + 1\r\n    }\r\n  }\r\n\r\n  getMaxForType (type) {\r\n    if (type.toLowerCase() == ORYX_CINFIG.TYPE_INTEGER) {\r\n      return Math.pow(2, 31) - 1\r\n    } else {\r\n      return Number.MAX_VALUE\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {ORYX.Core.StencilSet.Property} property\r\n   * @return {Boolean} True, if property has the same namespace and id.\r\n   */\r\n  equals (property) {\r\n    return (this._namespace === property.namespace() && this.id() === property.id())\r\n  }\r\n\r\n  namespace () {\r\n    return this._namespace\r\n  }\r\n\r\n  stencil () {\r\n    return this._stencil\r\n  }\r\n\r\n  id () {\r\n    return this._jsonProp.id\r\n  }\r\n\r\n  prefix () {\r\n    return this._jsonProp.prefix\r\n  }\r\n\r\n  type () {\r\n    return this._jsonProp.type\r\n  }\r\n\r\n  inverseBoolean () {\r\n    return this._jsonProp.inverseBoolean\r\n  }\r\n\r\n  category () {\r\n    return this._jsonProp.category\r\n  }\r\n\r\n  setCategory (value) {\r\n    this._jsonProp.category = value\r\n  }\r\n\r\n  directlyEditable () {\r\n    return this._jsonProp.directlyEditable\r\n  }\r\n\r\n  visible () {\r\n    return this._jsonProp.visible\r\n  }\r\n\r\n  title () {\r\n    return this._jsonProp.title\r\n  }\r\n\r\n  value () {\r\n    return this._jsonProp.value\r\n  }\r\n\r\n  readonly () {\r\n    return this._jsonProp.readonly\r\n  }\r\n\r\n  optional () {\r\n    return this._jsonProp.optional\r\n  }\r\n\r\n  description () {\r\n    return this._jsonProp.description\r\n  }\r\n  /**\r\n   * An optional link to a SVG element so that the property affects the\r\n   * graphical representation of the stencil.\r\n   */\r\n  refToView () {\r\n    return this._jsonProp.refToView\r\n  }\r\n  /**\r\n   * If type is integer or float, min is the lower bounds of value.\r\n   */\r\n  min () {\r\n    return this._jsonProp.min\r\n  }\r\n  /**\r\n   * If type ist integer or float, max is the upper bounds of value.\r\n   */\r\n  max () {\r\n    return this._jsonProp.max\r\n  }\r\n  /**\r\n   * If type is float, this method returns if the fill-opacity property should\r\n   *  be set.\r\n   *  @return {Boolean}\r\n   */\r\n  fillOpacity () {\r\n    return this._jsonProp.fillOpacity\r\n  }\r\n  /**\r\n   * If type is float, this method returns if the stroke-opacity property should\r\n   *  be set.\r\n   *  @return {Boolean}\r\n   */\r\n  strokeOpacity () {\r\n    return this._jsonProp.strokeOpacity\r\n  }\r\n  /**\r\n   * If type is string or richtext, length is the maximum length of the text.\r\n   * TODO how long can a string be.\r\n   */\r\n  length () {\r\n    return this._jsonProp.length ? this._jsonProp.length : Number.MAX_VALUE\r\n  }\r\n  wrapLines () {\r\n    return this._jsonProp.wrapLines\r\n  }\r\n  /**\r\n   * If type is date, dateFormat specifies the format of the date. The format\r\n   * specification of the ext library is used:\r\n   *\r\n   * Format  Output      Description\r\n   *  ------  ----------  --------------------------------------------------------------\r\n   *    d      10         Day of the month, 2 digits with leading zeros\r\n   *    D      Wed        A textual representation of a day, three letters\r\n   *    j      10         Day of the month without leading zeros\r\n   *    l      Wednesday  A full textual representation of the day of the week\r\n   *    S      th         English ordinal day of month suffix, 2 chars (use with j)\r\n   *    w      3          Numeric representation of the day of the week\r\n   *    z      9          The julian date, or day of the year (0-365)\r\n   *    W      01         ISO-8601 2-digit week number of year, weeks starting on Monday (00-52)\r\n   *    F      January    A full textual representation of the month\r\n   *    m      01         Numeric representation of a month, with leading zeros\r\n   *    M      Jan        Month name abbreviation, three letters\r\n   *    n      1          Numeric representation of a month, without leading zeros\r\n   *    t      31         Number of days in the given month\r\n   *    L      0          Whether its a leap year (1 if it is a leap year, else 0)\r\n   *    Y      2007       A full numeric representation of a year, 4 digits\r\n   *    y      07         A two digit representation of a year\r\n   *    a      pm         Lowercase Ante meridiem and Post meridiem\r\n   *    A      PM         Uppercase Ante meridiem and Post meridiem\r\n   *    g      3          12-hour format of an hour without leading zeros\r\n   *    G      15         24-hour format of an hour without leading zeros\r\n   *    h      03         12-hour format of an hour with leading zeros\r\n   *    H      15         24-hour format of an hour with leading zeros\r\n   *    i      05         Minutes with leading zeros\r\n   *    s      01         Seconds, with leading zeros\r\n   *    O      -0600      Difference to Greenwich time (GMT) in hours\r\n   *    T      CST        Timezone setting of the machine running the code\r\n   *    Z      -21600     Timezone offset in seconds (negative if west of UTC, positive if east)\r\n   *\r\n   * Example:\r\n   *  F j, Y, g:i a  ->  January 10, 2007, 3:05 pm\r\n   */\r\n  dateFormat () {\r\n    return this._jsonProp.dateFormat\r\n  }\r\n  /**\r\n   * If type is color, this method returns if the fill property should\r\n   *  be set.\r\n   *  @return {Boolean}\r\n   */\r\n  fill () {\r\n    return this._jsonProp.fill\r\n  }\r\n  /**\r\n   * Lightness defines the satiation of the color\r\n   * 0 is the pure color\r\n   * 1 is white\r\n   * @return {Integer} lightness\r\n   */\r\n  lightness () {\r\n    return this._jsonProp.lightness\r\n  }\r\n  /**\r\n   * If type is color, this method returns if the stroke property should\r\n   *  be set.\r\n   *  @return {Boolean}\r\n   */\r\n  stroke () {\r\n    return this._jsonProp.stroke\r\n  }\r\n  /**\r\n   * If type is choice, items is a hash map with all alternative values\r\n   * (PropertyItem objects) with id as keys.\r\n   */\r\n  items () {\r\n    return $H(this._items).values()\r\n  }\r\n\r\n  item (value) {\r\n    if (value) {\r\n      return this._items[value.toLowerCase()]\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  toString () {\r\n    return 'Property ' + this.title() + ' (' + this.id() + ')'\r\n  }\r\n\r\n  complexItems () {\r\n    return $H(this._complexItems).values()\r\n  }\r\n\r\n  complexItem (id) {\r\n    if (id) {\r\n      return this._complexItems[id.toLowerCase()]\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  complexAttributeToView () {\r\n    return this._jsonProp.complexAttributeToView || ''\r\n  }\r\n\r\n  isList () {\r\n    return !!this._jsonProp.isList\r\n  }\r\n\r\n  getListItems () {\r\n    return this._jsonProp.list\r\n  }\r\n\r\n  /**\r\n   * If type is glossary link, the\r\n   * type of category can be defined where\r\n   * the link only can go to.\r\n   * @return {String} The glossary category id\r\n   */\r\n  linkableType () {\r\n    return this._jsonProp.linkableType || ''\r\n  }\r\n\r\n  alwaysAppearInMultiselect () {\r\n    return this._jsonProp.alwaysAppearInMultiselect\r\n  }\r\n\r\n  popular () {\r\n    return this._jsonProp.popular || false\r\n  }\r\n\r\n  setPopular () {\r\n    this._jsonProp.popular = true\r\n  }\r\n\r\n  hide () {\r\n    this._hidden = true\r\n  }\r\n\r\n  isHidden () {\r\n    return this._hidden\r\n  }\r\n\r\n  // 打开隐藏的属性\r\n  enableHiddenPro () {\r\n    this._hidden = false\r\n  }\r\n  // 关闭（恢复）隐藏的属性\r\n  disableHiddenPro () {\r\n    this._hidden = true\r\n  }\r\n}","// oryx constants.\r\nconst ORYX_CONFIGURATION_DELAY = 100\r\nconst ORYX_CONFIGURATION_WAIT_ATTEMPTS = 10\r\n\r\n// Triple constants\r\nconst TRIPLE_REMOVE = 0x01\r\nconst TRIPLE_ADD = 0x02\r\nconst TRIPLE_RELOAD = 0x04\r\nconst TRIPLE_SAVE = 0x08\r\n\r\n// const ROOT_PATH = 'editor/'  //T ODO: Remove last slash!!\r\n// const LIBS_PATH = 'libs'\r\n// const SERVER_HANDLER_ROOT = 'service'\r\n\r\nconst ORYX_CONFIG = {\r\n  // PATH: 'editor/',\r\n  /**\r\n   * This file contains URI constants that may be used for XMLHTTPRequests.\r\n   * 此文件包含可用于xmlhttpRequests的uri常量\r\n   */\r\n  // ROOT_PATH: 'editor/', // TODO: Remove last slash!!\r\n  // EXPLORER_PATH: 'explorer',\r\n\r\n  DISABLE_GRADIENT: true,\r\n  /**\r\n   * Regular Config\r\n   */\r\n  // SERVER_HANDLER_ROOT: 'service',\r\n  // SERVER_EDITOR_HANDLER: SERVER_HANDLER_ROOT + '/editor',\r\n  // SERVER_MODEL_HANDLER: SERVER_HANDLER_ROOT + '/model',\r\n  // STENCILSET_HANDLER: SERVER_HANDLER_ROOT + '/editor_stencilset?embedsvg=true&url=true&namespace=',\r\n  // STENCIL_SETS_URL: SERVER_HANDLER_ROOT + '/editor_stencilset',\r\n  //\r\n  // PLUGINS_CONFIG: 'editor-app/plugins.xml',\r\n  // SYNTAXCHECKER_URL: SERVER_HANDLER_ROOT + '/syntaxchecker',\r\n  // DEPLOY_URL: SERVER_HANDLER_ROOT + '/model/deploy',\r\n  // MODEL_LIST_URL: SERVER_HANDLER_ROOT + '/models',\r\n  // FORM_FLOW_LIST_URL: SERVER_HANDLER_ROOT + '/formflows',\r\n  // FORM_FLOW_IMAGE_URL: SERVER_HANDLER_ROOT + '/formflow',\r\n  // FORM_LIST_URL: SERVER_HANDLER_ROOT + '/forms',\r\n  // FORM_IMAGE_URL: SERVER_HANDLER_ROOT + '/form',\r\n  // SUB_PROCESS_LIST_URL: SERVER_HANDLER_ROOT + '/subprocesses',\r\n  // SUB_PROCESS_IMAGE_URL: SERVER_HANDLER_ROOT + '/subprocess',\r\n  // TEST_SERVICE_URL: SERVER_HANDLER_ROOT + '/service/',\r\n  //\r\n  // SERVICE_LIST_URL: SERVER_HANDLER_ROOT + '/services',\r\n  // CONDITION_ELEMENT_LIST_URL: SERVER_HANDLER_ROOT + '/conditionelements',\r\n  // constIABLEDEF_ELEMENT_LIST_URL: SERVER_HANDLER_ROOT + '/constiabledefinitionelements',\r\n  // VALIDATOR_LIST_URL: SERVER_HANDLER_ROOT + '/validators',\r\n  //\r\n  // SS_EXTENSIONS_FOLDER: ROOT_PATH + 'stencilsets/extensions/',\r\n  // SS_EXTENSIONS_CONFIG: SERVER_HANDLER_ROOT + '/editor_ssextensions',\r\n  // ORYX_NEW_URL: '/new',\r\n  // BPMN_LAYOUTER: ROOT_PATH + 'bpmnlayouter',\r\n  //\r\n  // EXPRESSION_METADATA_URL: SERVER_HANDLER_ROOT + '/expression-metadata',\r\n  // DATASOURCE_METADATA_URL: SERVER_HANDLER_ROOT + '/datasource-metadata',\r\n\r\n  /**\r\n   * Signavio specific constiables\r\n   */\r\n  BACKEND_SWITCH: true,\r\n  PANEL_LEFT_WIDTH: 250,\r\n  PANEL_RIGHT_COLLAPSED: true,\r\n  PANEL_RIGHT_WIDTH: 300,\r\n  APPNAME: 'Flowable',\r\n  WEB_URL: '.',\r\n\r\n  // BLANK_IMAGE: LIBS_PATH + '/ext-2.0.2/resources/images/default/s.gif',\r\n\r\n  /* Specify offset of header */\r\n  OFFSET_HEADER: 61,\r\n\r\n  /* Show grid line while dragging */\r\n  SHOW_GRIDLINE: true,\r\n\r\n  /* Editor-Mode */\r\n  MODE_READONLY: 'readonly',\r\n  MODE_FULLSCREEN: 'fullscreen',\r\n  WINDOW_HEIGHT: 800,\r\n  PREVENT_LOADINGMASK_AT_READY: false,\r\n\r\n  /* Plugins */\r\n  PLUGINS_ENABLED: true,\r\n  PLUGINS_FOLDER: 'Plugins/',\r\n\r\n  BPMN20_SCHEMA_VALIDATION_ON: true,\r\n\r\n  /* Namespaces */\r\n  NAMESPACE_ORYX: 'http://www.b3mn.org/oryx',\r\n  NAMESPACE_SVG: 'http://www.w3.org/2000/svg',\r\n\r\n\r\n  /* Shape-Menu Align */\r\n  SHAPEMENU_RIGHT: 'Oryx_Right',\r\n  SHAPEMENU_BOTTOM: 'Oryx_Bottom',\r\n  SHAPEMENU_LEFT: 'Oryx_Left',\r\n  SHAPEMENU_TOP: 'Oryx_Top',\r\n\r\n\r\n  /* Morph-Menu Item */\r\n  MORPHITEM_DISABLED: 'Oryx_MorphItem_disabled',\r\n\r\n  /* Property type names */\r\n  TYPE_STRING: 'string',\r\n  TYPE_BOOLEAN: 'boolean',\r\n  TYPE_INTEGER: 'integer',\r\n  TYPE_FLOAT: 'float',\r\n  TYPE_COLOR: 'color',\r\n  TYPE_DATE: 'date',\r\n  TYPE_CHOICE: 'choice',\r\n  TYPE_URL: 'url',\r\n  TYPE_DIAGRAM_LINK: 'diagramlink',\r\n  TYPE_COMPLEX: 'complex',\r\n  TYPE_MULTIPLECOMPLEX: 'multiplecomplex',\r\n  TYPE_TEXT: 'text',\r\n  TYPE_FLOWABLE_MULTIINSTANCE: 'flowable-multiinstance',\r\n  TYPE_MODEL_LINK: 'modellink',\r\n  TYPE_FORM_FLOW_LINK: 'formflowlink',\r\n  TYPE_FORM_LINK: 'formlink',\r\n  TYPE_SUB_PROCESS_LINK: 'subprocess-link',\r\n  TYPE_SERVICE_LINK: 'servicelink',\r\n  TYPE_CONDITIONS: 'conditions',\r\n  TYPE_constIABLES: 'constiables',\r\n  TYPE_LISTENER: 'listener',\r\n  TYPE_EPC_FREQ: 'epcfrequency',\r\n  TYPE_GLOSSARY_LINK: 'glossarylink',\r\n  TYPE_EXPRESSION: 'expression',\r\n  TYPE_DATASOURCE: 'datasource',\r\n  TYPE_DATASOURCE_MINIMAL: 'datasource-minimal',\r\n  TYPE_VALIDATORS: 'validators',\r\n  TYPE_FLOWABLE_HTTP_REQUEST_METHOD: 'flowable-http-request-method',\r\n\r\n\r\n  /* Vertical line distance of multiline labels */\r\n  LABEL_LINE_DISTANCE: 2,\r\n  LABEL_DEFAULT_LINE_HEIGHT: 12,\r\n\r\n  /* Open Morph Menu with Hover */\r\n  ENABLE_MORPHMENU_BY_HOVER: false,\r\n\r\n  /* Editor constants come here */\r\n  EDITOR_ALIGN_BOTTOM: 0x01,\r\n  EDITOR_ALIGN_MIDDLE: 0x02,\r\n  EDITOR_ALIGN_TOP: 0x04,\r\n  EDITOR_ALIGN_LEFT: 0x08,\r\n  EDITOR_ALIGN_CENTER: 0x10,\r\n  EDITOR_ALIGN_RIGHT: 0x20,\r\n  EDITOR_ALIGN_SIZE: 0x30,\r\n\r\n  /* Event types */\r\n  EVENT_MOUSEDOWN: 'mousedown',\r\n  EVENT_MOUSEUP: 'mouseup',\r\n  EVENT_MOUSEOVER: 'mouseover',\r\n  EVENT_MOUSEOUT: 'mouseout',\r\n  EVENT_MOUSEMOVE: 'mousemove',\r\n  EVENT_CLICK: 'click',\r\n  EVENT_DBLCLICK: 'dblclick',\r\n  EVENT_KEYDOWN: 'keydown',\r\n  EVENT_KEYUP: 'keyup',\r\n\r\n  EVENT_LOADED: 'editorloaded',\r\n  EVENT_SAVED: 'editorSaved',\r\n\r\n  EVENT_EXECUTE_COMMANDS: 'executeCommands',\r\n  EVENT_STENCIL_SET_LOADED: 'stencilSetLoaded',\r\n  EVENT_SELECTION_CHANGED: 'selectionchanged',\r\n  EVENT_SHAPEADDED: 'shapeadded',\r\n  EVENT_SHAPEREMOVED: 'shaperemoved',\r\n  EVENT_PROPERTY_CHANGED: 'propertyChanged',\r\n  EVENT_DRAGDROP_START: 'dragdrop.start',\r\n  EVENT_SHAPE_MENU_CLOSE: 'shape.menu.close',\r\n  EVENT_DRAGDROP_END: 'dragdrop.end',\r\n  EVENT_RESIZE_START: 'resize.start',\r\n  EVENT_RESIZE_END: 'resize.end',\r\n  EVENT_DRAGDOCKER_DOCKED: 'dragDocker.docked',\r\n  EVENT_HIGHLIGHT_SHOW: 'highlight.showHighlight',\r\n  EVENT_HIGHLIGHT_HIDE: 'highlight.hideHighlight',\r\n  EVENT_LOADING_ENABLE: 'loading.enable',\r\n  EVENT_LOADING_DISABLE: 'loading.disable',\r\n  EVENT_LOADING_STATUS: 'loading.status',\r\n  EVENT_OVERLAY_SHOW: 'overlay.show',\r\n  EVENT_OVERLAY_HIDE: 'overlay.hide',\r\n  EVENT_ARRANGEMENT_TOP: 'arrangement.setToTop',\r\n  EVENT_ARRANGEMENT_BACK: 'arrangement.setToBack',\r\n  EVENT_ARRANGEMENT_FORWARD: 'arrangement.setForward',\r\n  EVENT_ARRANGEMENT_BACKWARD: 'arrangement.setBackward',\r\n  EVENT_PROPWINDOW_PROP_CHANGED: 'propertyWindow.propertyChanged',\r\n  EVENT_LAYOUT_ROWS: 'layout.rows',\r\n  EVENT_LAYOUT_BPEL: 'layout.BPEL',\r\n  EVENT_LAYOUT_BPEL_VERTICAL: 'layout.BPEL.vertical',\r\n  EVENT_LAYOUT_BPEL_HORIZONTAL: 'layout.BPEL.horizontal',\r\n  EVENT_LAYOUT_BPEL_SINGLECHILD: 'layout.BPEL.singlechild',\r\n  EVENT_LAYOUT_BPEL_AUTORESIZE: 'layout.BPEL.autoresize',\r\n  EVENT_AUTOLAYOUT_LAYOUT: 'autolayout.layout',\r\n  EVENT_UNDO_EXECUTE: 'undo.execute',\r\n  EVENT_UNDO_ROLLBACK: 'undo.rollback',\r\n  EVENT_UNDO_RESET: 'undo.reset',\r\n  EVENT_BUTTON_UPDATE: 'toolbar.button.update',\r\n  EVENT_LAYOUT: 'layout.dolayout',\r\n  EVENT_GLOSSARY_LINK_EDIT: 'glossary.link.edit',\r\n  EVENT_GLOSSARY_SHOW: 'glossary.show.info',\r\n  EVENT_GLOSSARY_NEW: 'glossary.show.new',\r\n  EVENT_DOCKERDRAG: 'dragTheDocker',\r\n  EVENT_CANVAS_SCROLL: 'canvas.scroll',\r\n\r\n  EVENT_SHOW_PROPERTYWINDOW: 'propertywindow.show',\r\n  EVENT_ABOUT_TO_SAVE: 'file.aboutToSave',\r\n\r\n  // extra events\r\n  EVENT_EDITOR_INIT_COMPLETED: 'editor.init.completed',\r\n\r\n  EVENT_TYPE_EDITOR_READY: 'event-type-editor-ready',\r\n  EVENT_TYPE_EDITOR_BOOTED: 'event-type-editor-booted',\r\n  EVENT_TYPE_SELECTION_CHANGE: 'event-type-selection-change',\r\n  EVENT_TYPE_TOOLBAR_BUTTON_CLICKEDEVENT_TYPE_TOOLBAR_BUTTON_CLICKED: 'event-type-toolbar-button-clicked',\r\n  /** Event fired when a stencil item is dropped on the canvas. */\r\n  EVENT_TYPE_ITEM_DROPPED: 'event-type-item-dropped',\r\n  /** Event fired when a property value is changed. */\r\n  EVENT_TYPE_PROPERTY_VALUE_CHANGED: 'event-type-property-value-changed',\r\n  EVENT_TYPE_SELECTION_CHANGED: 'event-type-selection-changed',\r\n  /** Event fired on double click in canvas. */\r\n  EVENT_TYPE_DOUBLE_CLICK: 'event-type-double-click',\r\n  /** Event fired on a mouse out */\r\n  EVENT_TYPE_MOUSE_OUT: 'event-type-mouse-out',\r\n  /** Event fired on a mouse over */\r\n  EVENT_TYPE_MOUSE_OVER: 'event-type-mouse-over',\r\n  /** Event fired when a model is saved. */\r\n  EVENT_TYPE_MODEL_SAVED: 'event-type-model-saved',\r\n  /** Event fired when the quick menu buttons should be hidden. */\r\n  EVENT_TYPE_HIDE_SHAPE_BUTTONS: 'event-type-hide-shape-buttons',\r\n  /** Event fired when the validation popup should be shown. */\r\n  EVENT_TYPE_SHOW_VALIDATION_POPUP: 'event-type-show-validation-popup',\r\n  /** Event fired when a different process must be loaded. */\r\n  EVENT_TYPE_NAVIGATE_TO_PROCESS: 'event-type-navigate-to-process',\r\n  EVENT_TYPE_UNDO_REDO_RESET: 'event-type-undo-redo-reset',\r\n\r\n  // actions events that are fired when a button or key was pressed after completing the initial logic.\r\n  ACTION_DELETE_COMPLETED: 'delete.action.completed',\r\n\r\n  /* Selection Shapes Highlights */\r\n  SELECTION_HIGHLIGHT_SIZE: 5,\r\n  SELECTION_HIGHLIGHT_COLOR: '#4444FF',\r\n  SELECTION_HIGHLIGHT_COLOR2: '#9999FF',\r\n\r\n  SELECTION_HIGHLIGHT_STYLE_CORNER: 'corner',\r\n  SELECTION_HIGHLIGHT_STYLE_RECTANGLE: 'rectangle',\r\n\r\n  SELECTION_VALID_COLOR: '#00FF00',\r\n  SELECTION_INVALID_COLOR: '#FF0000',\r\n\r\n\r\n  DOCKER_DOCKED_COLOR: '#00FF00',\r\n  DOCKER_UNDOCKED_COLOR: '#FF0000',\r\n  DOCKER_SNAP_OFFSET: 10,\r\n\r\n  /* Copy & Paste */\r\n  EDIT_OFFSET_PASTE: 10,\r\n\r\n  /* Key-Codes */\r\n  KEY_CODE_X: 88,\r\n  KEY_CODE_C: 67,\r\n  KEY_CODE_V: 86,\r\n  KEY_CODE_DELETE: 46,\r\n  KEY_CODE_META: 224,\r\n  KEY_CODE_BACKSPACE: 8,\r\n  KEY_CODE_LEFT: 37,\r\n  KEY_CODE_RIGHT: 39,\r\n  KEY_CODE_UP: 38,\r\n  KEY_CODE_DOWN: 40,\r\n\r\n  // TODO Determine where the lowercase constants are still used and remove them from here.\r\n  KEY_Code_enter: 12,\r\n  KEY_Code_left: 37,\r\n  KEY_Code_right: 39,\r\n  KEY_Code_top: 38,\r\n  KEY_Code_bottom: 40,\r\n\r\n  /* Supported Meta Keys */\r\n\r\n  META_KEY_META_CTRL: 'metactrl',\r\n  META_KEY_ALT: 'alt',\r\n  META_KEY_SHIFT: 'shift',\r\n\r\n  /* Key Actions */\r\n\r\n  KEY_ACTION_DOWN: 'down',\r\n  KEY_ACTION_UP: 'up',\r\n\r\n\r\n  /* Form Rowlayouting */\r\n  FORM_ROW_WIDTH: 350,\r\n  FORM_GROUP_MARGIN: 5,\r\n  FORM_GROUP_EMPTY_HEIGHT: 100,\r\n\r\n  /* Form element types */\r\n  // FORM_ELEMENT_ID_PREFIX: 'http://b3mn.org/stencilset/xforms',\r\n  // FORM_ELEMENT_TYPE_ROOT: 'http://b3mn.org/stencilset/xforms#XForm',\r\n  // FORM_ELEMENT_TYPE_GROUP: 'http://b3mn.org/stencilset/xforms#Group',\r\n  // FORM_ELEMENT_TYPE_REPEATING_GROUP: 'http://b3mn.org/stencilset/xforms#RepeatingGroup',\r\n  // FORM_ELEMENT_TYPE_LABEL_FIELD: 'http://b3mn.org/stencilset/xforms#LabelField',\r\n\r\n  XMLNS: {\r\n    ATOM: \"http://www.w3.org/2005/Atom\",\r\n    XHTML: \"http://www.w3.org/1999/xhtml\",\r\n    ERDF: \"http://purl.org/NET/erdf/profile\",\r\n    RDFS: \"http://www.w3.org/2000/01/rdf-schema#\",\r\n    RDF: \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\r\n    RAZIEL: \"http://b3mn.org/Raziel\",\r\n    SCHEMA: \"\"\r\n  },\r\n  CustomConfigs: {\r\n    /* UI */\r\n    CANVAS_WIDTH: 1200,\r\n    CANVAS_HEIGHT: 1050,\r\n    CANVAS_RESIZE_INTERVAL: 100,\r\n    CANVAS_MIN_WIDTH: 800,\r\n    CANVAS_MIN_HEIGHT: 300,\r\n    SELECTED_AREA_PADDING: 4,\r\n    CANVAS_BACKGROUND_COLOR: 'none',\r\n    GRID_DISTANCE: 30,\r\n    GRID_ENABLED: true,\r\n    ZOOM_OFFSET: 0.1,\r\n    DEFAULT_SHAPE_MARGIN: 60,\r\n    SCALERS_SIZE: 7,\r\n    MINIMUM_SIZE: 20,\r\n    MAXIMUM_SIZE: 10000,\r\n    OFFSET_MAGNET: 15,\r\n    OFFSET_EDGE_LABEL_TOP: 8,\r\n    OFFSET_EDGE_LABEL_BOTTOM: 8,\r\n    OFFSET_EDGE_BOUNDS: 5,\r\n    COPY_MOVE_OFFSET: 30,\r\n\r\n    BORDER_OFFSET: 14,\r\n\r\n    MAX_NUM_SHAPES_NO_GROUP: 20, // Updated so the form editor shows all elements at once\r\n\r\n    SHAPEMENU_CREATE_OFFSET_CORNER: 30,\r\n    SHAPEMENU_CREATE_OFFSET: 45,\r\n  },\r\n  setCustomConfigs: function (configs) {\r\n    this.CustomConfigs = Object.assign(this.CustomConfigs, configs.editorCustomConfigs)\r\n  }\r\n}\r\n\r\nexport default ORYX_CONFIG\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHDSURBVDiNpVOxahtBFJzZ5Qoj9A2qZA5SGUkOKI2bdKnS3O0ZQdAPyOAydUpD0hsRMJZOTap0adJIEJRDVUBYlb4hpDr2JoVX4jAyIuTBwhYzw7w371ES6pWm6SnJDEAnPAAoABSSJnmeP9TxZvchySzLrkjOJZ1IugXQBdCVdCvphOQ8YLjnSQJJJknylWTTGPOuLMuttfZMUi+IL733qyiKWlVVfZb0ezabvZEkAwDOuRHJZhzHFyQb1tpC0pjkOclzSWNrbUGyETBN59wIAJgkySnJuTHmJcmG9/6bpOs8z++fzOaS5I219rWkP1VV/ZD0ypDMJI3Lstx67+8OkQEgz/N7Sdfe+7uyLLfBoTNh0ovQszlEfiJirLVnABYAugZAh+RSUo9k8Ry5llYRsEsAHXOMcKwMHhekF1x0jhEk7R0DKAwet6zvvV+RrNI0vXyOHJKovPcrAH0AP42kCclhFEUta+2A5M0hkVqMgyiKWiSHkqaUhCzLriS9jeP4YrPZvAhxmt1Qg+3KWjtot9u/1uv1d5JfJpPJx/9eZe6ukSSdcyNJ7yWNASxCVAhCfZJDkh+m0+knBeJeoNbrP53zX7n/LnDno5TvAAAAAElFTkSuQmCC\"","import ORYX_Node from './Node'\r\nimport ORYX_Edge from './Edge'\r\nimport ORYX_Controls from './Controls'\r\n\r\n/**\r\n * Implements a Command to move shapes\r\n *\r\n */\r\n\r\nimport Command from './Command'\r\n\r\nexport default class Move extends  Command {\r\n  constructor (moveShapes, offset, parent, selectedShapes, plugin) {\r\n    super()\r\n    this.moveShapes = moveShapes\r\n    this.selectedShapes = selectedShapes\r\n    this.offset = offset\r\n    this.plugin = plugin\r\n    // Defines the old/new parents for the particular shape\r\n    this.newParents = moveShapes.collect(function (t) {\r\n      return parent || t.parent\r\n    })\r\n    this.oldParents = moveShapes.collect(function (shape) {\r\n      return shape.parent\r\n    })\r\n    this.dockedNodes = moveShapes.findAll(function (shape) {\r\n      return shape instanceof ORYX_Node && shape.dockers.length == 1\r\n    }).collect(function (shape) {\r\n      return {\r\n        docker: shape.dockers[0],\r\n        dockedShape: shape.dockers[0].getDockedShape(),\r\n        refPoint: shape.dockers[0].referencePoint\r\n      }\r\n    })\r\n  }\r\n  execute () {\r\n    this.dockAllShapes()\r\n    // Moves by the offset\r\n    this.move(this.offset)\r\n    // Addes to the new parents\r\n    this.addShapeToParent(this.newParents)\r\n    // Set the selection to the current selection\r\n    this.selectCurrentShapes()\r\n    this.plugin.facade.getCanvas().update()\r\n    this.plugin.facade.updateSelection()\r\n  }\r\n  rollback () {\r\n    // Moves by the inverted offset\r\n    let offset = { x: -this.offset.x, y: -this.offset.y }\r\n    this.move(offset)\r\n    // Addes to the old parents\r\n    this.addShapeToParent(this.oldParents)\r\n    this.dockAllShapes(true)\r\n\r\n    // Set the selection to the current selection\r\n    this.selectCurrentShapes()\r\n    this.plugin.facade.getCanvas().update()\r\n    this.plugin.facade.updateSelection()\r\n\r\n  }\r\n  move (offset, doLayout) {\r\n    // Move all Shapes by these offset\r\n    for (let i = 0; i < this.moveShapes.length; i++) {\r\n      let value = this.moveShapes[i]\r\n      value.bounds.moveBy(offset)\r\n\r\n      if (value instanceof ORYX_Node) {\r\n        (value.dockers || []).each(function (d) {\r\n          d.bounds.moveBy(offset)\r\n        })\r\n\r\n        // Update all Dockers of Child shapes\r\n        /*var childShapesNodes = value.getChildShapes(true).findAll(function(shape){ return shape instanceof ORYX.Core.Node });\r\n         var childDockedShapes = childShapesNodes.collect(function(shape){ return shape.getAllDockedShapes() }).flatten().uniq();\r\n         var childDockedEdge = childDockedShapes.findAll(function(shape){ return shape instanceof ORYX.Core.Edge });\r\n         childDockedEdge = childDockedEdge.findAll(function(shape){ return shape.getAllDockedShapes().all(function(dsh){ return childShapesNodes.include(dsh) }) });\r\n         var childDockedDockers = childDockedEdge.collect(function(shape){ return shape.dockers }).flatten();\r\n\r\n         for (var j = 0; j < childDockedDockers.length; j++) {\r\n         var docker = childDockedDockers[j];\r\n         if (!docker.getDockedShape() && !this.moveShapes.include(docker)) {\r\n         //docker.bounds.moveBy(offset);\r\n         //docker.update();\r\n         }\r\n         }*/\r\n\r\n\r\n        let allEdges = [].concat(value.getIncomingShapes())\r\n          .concat(value.getOutgoingShapes())\r\n          // Remove all edges which are included in the selection from the list\r\n          .findAll(function (r) {\r\n            return r instanceof ORYX_Edge && !this.moveShapes.any(function (d) {\r\n              return d == r || (d instanceof ORYX_Controls.Docker && d.parent == r)\r\n            })\r\n          }.bind(this))\r\n          // Remove all edges which are between the node and a node contained in the selection from the list\r\n          .findAll(function (r) {\r\n            return (r.dockers.first().getDockedShape() == value || !this.moveShapes.include(r.dockers.first().getDockedShape())) &&\r\n              (r.dockers.last().getDockedShape() == value || !this.moveShapes.include(r.dockers.last().getDockedShape()))\r\n          }.bind(this))\r\n\r\n        // Layout all outgoing/incoming edges\r\n        this.plugin.layoutEdges(value, allEdges, offset)\r\n\r\n        let allSameEdges = [].concat(value.getIncomingShapes())\r\n          .concat(value.getOutgoingShapes())\r\n          // Remove all edges which are included in the selection from the list\r\n          .findAll(function (r) {\r\n            return r instanceof ORYX_Edge && r.dockers.first().isDocked() && r.dockers.last().isDocked() && !this.moveShapes.include(r) && !this.moveShapes.any(function (d) {\r\n              return d == r || (d instanceof ORYX_Controls.Docker && d.parent == r)\r\n            })\r\n          }.bind(this))\r\n          // Remove all edges which are included in the selection from the list\r\n          .findAll(function (r) {\r\n            return this.moveShapes.indexOf(r.dockers.first().getDockedShape()) > i || this.moveShapes.indexOf(r.dockers.last().getDockedShape()) > i\r\n          }.bind(this))\r\n\r\n        for (let j = 0; j < allSameEdges.length; j++) {\r\n          for (let k = 1; k < allSameEdges[j].dockers.length - 1; k++) {\r\n            let docker = allSameEdges[j].dockers[k]\r\n            if (!docker.getDockedShape() && !this.moveShapes.include(docker)) {\r\n              docker.bounds.moveBy(offset)\r\n            }\r\n          }\r\n        }\r\n\r\n        /*var i=-1;\r\n         var nodes = value.getChildShapes(true);\r\n         var allEdges = [];\r\n         while(++i<nodes.length){\r\n         var edges = [].concat(nodes[i].getIncomingShapes())\r\n         .concat(nodes[i].getOutgoingShapes())\r\n         // Remove all edges which are included in the selection from the list\r\n         .findAll(function(r){ return r instanceof ORYX.Core.Edge && !allEdges.include(r) && r.dockers.any(function(d){ return !value.bounds.isIncluded(d.bounds.center)})})\r\n         allEdges = allEdges.concat(edges);\r\n         if (edges.length <= 0){ continue }\r\n         //this.plugin.layoutEdges(nodes[i], edges, offset);\r\n         }*/\r\n      }\r\n    }\r\n\r\n  }\r\n  dockAllShapes (shouldDocked) {\r\n    // Undock all Nodes\r\n    for (let i = 0; i < this.dockedNodes.length; i++) {\r\n      let docker = this.dockedNodes[i].docker\r\n\r\n      docker.setDockedShape(shouldDocked ? this.dockedNodes[i].dockedShape : undefined)\r\n      if (docker.getDockedShape()) {\r\n        docker.setReferencePoint(this.dockedNodes[i].refPoint)\r\n        //docker.update();\r\n      }\r\n    }\r\n  }\r\n  addShapeToParent (parents) {\r\n\r\n    // For every Shape, add this and reset the position\r\n    for (let i = 0; i < this.moveShapes.length; i++) {\r\n      let currentShape = this.moveShapes[i]\r\n      if (currentShape instanceof ORYX_Node &&\r\n        currentShape.parent !== parents[i]) {\r\n\r\n        // Calc the new position\r\n        let unul = parents[i].absoluteXY()\r\n        let csul = currentShape.absoluteXY()\r\n        let x = csul.x - unul.x\r\n        let y = csul.y - unul.y\r\n\r\n        // Add the shape to the new contained shape\r\n        parents[i].add(currentShape)\r\n        // Add all attached shapes as well\r\n        currentShape.getOutgoingShapes((function (shape) {\r\n          if (shape instanceof ORYX_Node && !this.moveShapes.member(shape)) {\r\n            parents[i].add(shape)\r\n          }\r\n        }).bind(this))\r\n\r\n        // Set the new position\r\n        if (currentShape instanceof ORYX_Node && currentShape.dockers.length == 1) {\r\n          let b = currentShape.bounds\r\n          x += b.width() / 2\r\n          y += b.height() / 2\r\n          currentShape.dockers.first().bounds.centerMoveTo(x, y)\r\n        } else {\r\n          currentShape.bounds.moveTo(x, y)\r\n        }\r\n\r\n      }\r\n\r\n      // Update the shape\r\n      //currentShape.update();\r\n\r\n    }\r\n  }\r\n  selectCurrentShapes () {\r\n    this.plugin.facade.setSelection(this.selectedShapes)\r\n  }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAI+SURBVDiNdZNPSFRRGMV/5z6MkVpHgVARmJCbaGOKUltx06J576kb20gSTEbbcGMlMpCbaKe0mHlvZtcfWlZrQWkzOQwkiFCbcSEkgnrna9Ebm8Q+uIv73XPO94dzZWZ0RhRFvZLGgZvZAVgH1s3sTZqm3zvxagtIUhzHBTN7DnRzeuxLenp0dLRUrVY9gGuTwzD8YGYvgRywdwp5D8iZWdE5906SjgXiOC5IGgU2JA2Z2cxJtpnNSBrKMKNxHD8GUBiGvZK+Ai3n3PVSqbSViX4Gbmf8L0mS3AGYmJi41Gq1akCX9/6GyxbWDSyUSqWtfD4ftCsCB8BBu6Pp6emurMACcMY5d9d1bPoTQBAEzyYnJ3vSNN0AikAxTdONfD5/ZXd3d7ETK2nkWCCXy33LHie898uS5L2f997PS1IQBCuS7nViJd1SFEU/gIvOud7Dw8OtIAh2gHPAwyRJXgFEUVSQtATs9PX1nW80GldbrVYD+OmAtWzmwWq1eiDpbdbJYhiGI2EYjkh6keXez83NtcxsMLuvBf39/deybV+o1WorzWZzFRgCLkuakjQFdAGrwINarfar2Wy+BnqAsjOzMrAPDNTr9UKSJNve+2Fgs8MGm9774SRJtuv1egEYAPbNLJGZMT4+/ihzoQeKZrYsqQ7or4+sT9J94AkQSJotl8tLMrNjK2duhD+2Pcu/cZwzs4+VSmXMzMy15SuVypik2Wyck2Sy3L6k2TYZOn5jO/7zndeANTMrp2na6MT/BtzDEcNaxKOwAAAAAElFTkSuQmCC\"","var map = {\n\t\"./adhoc.subprocess.png\": \"270f\",\n\t\"./event.subprocess.collapsed.png\": \"f896\",\n\t\"./event.subprocess.png\": \"f3da\",\n\t\"./expanded.subprocess.png\": \"02a5\",\n\t\"./list/type.business.rule.png\": \"c033\",\n\t\"./list/type.camel.png\": \"a09b\",\n\t\"./list/type.decision.png\": \"a1e5\",\n\t\"./list/type.http.png\": \"a6b1\",\n\t\"./list/type.manual.png\": \"ce61\",\n\t\"./list/type.mule.png\": \"b664\",\n\t\"./list/type.receive.png\": \"7824\",\n\t\"./list/type.script.png\": \"c030\",\n\t\"./list/type.send.png\": \"4587\",\n\t\"./list/type.service.png\": \"20a9\",\n\t\"./list/type.shell.png\": \"5c5c\",\n\t\"./list/type.user.png\": \"d725\",\n\t\"./subprocess.png\": \"1e68\",\n\t\"./task.png\": \"4bea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"b9de\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH3wcQDh0VVaoqKAAAAxtJREFUOMtlU09II3cYfTPzcxxmnD+GJMwadcLApEbBwkBY9ZCsc9C25mZrilB2XXoQby2CTkmhu4uHtTVKYasHhWV76LE9iL30oLi5FNxDvAR7aIotqCuORqSJk8n0UA3qfqf3Pb7v8L3vPQCAIAgAgPX1dViWRQNgZmdn1cXFxe8WFhYeA0BfXx/JZDIUAEiShEYxDNPAuq4H+/v7X3Z1dfkAfAA1AHVRFP1EInFkWdb49SwhBABAXRMsy3YSQjZrtZoajUY3BUH4eXh4mD06OvK2trbaqtXqo4ODgxDP8y/K5fI0ACQSif+XTdM0GIb5U1GUP2zbHh8dHeVwp2ZmZt5LJpMrTU1NpxzH5RzHIQBALy8vy+fn57/JstyayWQ+zufz0d3d3TzHcerVLqVp2sONjY0fVVX9pb29/bmiKF9YlpUFAGQymU8B+BMTE99OT0/fD4VCPgBfFMXXqqrGZVn+jGXZfwkhfiwW+3VtbS1pGEZBkqTX8/PzOjRNeyFJkuv7fgAA3dra+oxl2UsAviAI+yzLHl/hN4qiPACA7u7uJ7Is/93R0WGRzs7OjwKBQJ2iqBMAcBzn63A47DiOs3BxcdFOURR4ni9GIpFHe3t7BQCgafofwzAizc3N3bTruhd3BatUKrd63/fhOM5NivI8D9Vq9RJtbW25qxNCAOiWlpZnhJDLKx32OY47BuBzHPeG5/kHABCPx5+KolgKh8NJJp1OB3Z2dj4plUr00NDQabFYfFUulxlFUfKKoowB2K3X6x96nteh67o6Nze3v729/WWlUnlr2/YrrKysyIZh/BUIBE6npqbeT6fTX8Xj8R1Jkhpv1HX9oWmav09OTn6gaZqtqqpvmuY3jYNuGimbzY6PjY2xd3XJZrOxVCrVMNLJyQl5x8osy266rhvp6ekpuq77/cjICHd4eOjl8/mo53lTpVKJCILwwy0r3wxTLBYLplKpl729vbfCJMuyPzAw8HZwcPCdMNGe50EURQDA6urqMc/zjwuFArFt+97S0tJSLpf7/OzsjGIY5l4wGPzpOs61Wg0A8B/ebh73FMuimwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACpSURBVDiN7ZOxDcJADEXfWWkQPUPQ0LAKSM4WSIiWEViBJskAzECZIh0SNQV92jvToVOIyEWhxOW3/rO/JTszY0plXSHP862ZnYHZF18jIpuiKO4Sq6ramllmZseBwasQwglAOo05cBCRy/DyrKEnArAsy/IGuAQILj6iqiZdtKqqN7wbYXT9AT8AZACq+gQWiZ5H3wb1iKHXD4D3fgc0CeYa2MeCm/rOL3c0MK1X048BAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABOSURBVDiN7ZMxCgBBCAPHYx+pL/SZucpm2WI5C5sTAgoqiUGTRCee1jSwACLiE43MtDaD+QVIwt0licJen1A98xJWJbuV19b+N8DGv/EFjYhsHwgrCXQAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADXSURBVDiNpZIxbsMwDEUfLS+5RKYco0NWdzcBG71L2jP0DhbgHiBLhwxZep8CWQz/LnGRtkojtQQECKTeA0XJJPGfqEsOu/uqqqot0JjZJsZ4f1Pg7pu6rhtJTQhhC6wAJD1ndRBCeJC0S5T2ANUtQYzxEXj6lj7N83zIEgCY2SvwfpE6jON4yhL0fX8n6cXMmqUTM9sv9V9ncAG3wzAcgWPXdUzT9Cmwa/8gAScjeYVcOCkogX8ISuEvgr/AcB6iu69DCG+lMACSkETbtutlX7KuPmNufAAvnZlEO/hlVgAAAABJRU5ErkJggg==\"","import AbstractShape from './AbstractShape'\r\nimport UIObject from './UIObject'\r\nimport ORYX_Log from '../Log'\r\nimport ORYX_Utils from '../Utils'\r\nimport ORYX_Config from '../CONFIG'\r\nimport Shape from './Shape'\r\nimport Node from './Node'\r\nimport Edge from './Edge'\r\nimport StencilSet from './StencilSet/index'\r\n\r\n/**\r\n * @class Oryx canvas.\r\n * @extends ORYX.Core.AbstractShape\r\n *\r\n */\r\nexport default class Canvas extends AbstractShape {\r\n  /** @lends ORYX.Core.Canvas.prototype */\r\n\r\n  /**\r\n   * Defines the current zoom level\r\n   */\r\n  zoomLevel = 1\r\n\r\n  /**\r\n   * Constructor\r\n   */\r\n  constructor (options, stencil, facade) {\r\n    // arguments.callee.$.construct.apply(this, arguments);\r\n    super(...arguments)\r\n\r\n    if (!(options && options.width && options.height)) {\r\n      ORYX_Log.fatal('Canvas is missing mandatory parameters options.width and options.height.')\r\n      return\r\n    }\r\n    this.facade = facade\r\n    // TODO: set document resource id\r\n    this.resourceId = options.id\r\n    this.nodes = []\r\n    this.edges = []\r\n\r\n    // Row highlighting states\r\n    this.colHighlightState = 0\r\n    this.colHighlightEnabled = false\r\n\r\n    // init svg document\r\n    this.rootNode = ORYX_Utils.graft('http://www.w3.org/2000/svg', options.parentNode,\r\n      ['svg', { id: this.id, width: options.width, height: options.height },\r\n        ['defs', {}]\r\n      ])\r\n\r\n    this.rootNode.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink')\r\n    this.rootNode.setAttribute('xmlns:svg', 'http://www.w3.org/2000/svg')\r\n\r\n    this._htmlContainer = ORYX_Utils.graft('http://www.w3.org/1999/xhtml', options.parentNode,\r\n      ['div', { id: 'oryx_canvas_htmlContainer', style: 'position:absolute; top:5px' }])\r\n\r\n    // Additional SVG-node BELOW the stencils to allow underlays (if that is even a word) by plugins\r\n    this.underlayNode = ORYX_Utils.graft('http://www.w3.org/2000/svg', this.rootNode,\r\n      ['svg', { id: 'underlay-container' }])\r\n\r\n    // Create 2 svg-elements in the svg-container\r\n    this.columnHightlight1 = ORYX_Utils.graft('http://www.w3.org/2000/svg', this.underlayNode,\r\n      ['rect', {\r\n        x: 0,\r\n        width: ORYX_Config.FORM_ROW_WIDTH + 35,\r\n        height: '100%',\r\n        style: 'fill: #fff6d5',\r\n        visibility: 'hidden'\r\n      }])\r\n\r\n    this.columnHightlight2 = ORYX_Utils.graft('http://www.w3.org/2000/svg', this.underlayNode,\r\n      ['rect', {\r\n        x: ORYX_Config.FORM_ROW_WIDTH + 35,\r\n        width: ORYX_Config.FORM_ROW_WIDTH + 25,\r\n        height: '100%',\r\n        style: 'fill: #fff6d5',\r\n        visibility: 'hidden'\r\n      }])\r\n\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/2000/svg', this.rootNode,\r\n      ['g', {},\r\n        ['g', { 'class': 'stencils' },\r\n          ['g', { 'class': 'me' }],\r\n          ['g', { 'class': 'children' }],\r\n          ['g', { 'class': 'edge' }]\r\n        ],\r\n        ['g', { 'class': 'svgcontainer' }]\r\n      ])\r\n\r\n    /*\r\n     var off = 2 * ORYX.CONFIG.GRID_DISTANCE;\r\n     var size = 3;\r\n     var d = \"\";\r\n     for(var i = 0; i <= options.width; i += off)\r\n     for(var j = 0; j <= options.height; j += off)\r\n     d = d + \"M\" + (i - size) + \" \" + j + \" l\" + (2*size) + \" 0 m\" + (-size) + \" \" + (-size) + \" l0 \" + (2*size) + \" m0\" + (-size) + \" \";\r\n\r\n     ORYX.Editor.graft(\"http://www.w3.org/2000/svg\", this.node.firstChild.firstChild,\r\n     ['path', {d:d , stroke:'#000000', 'stroke-width':'0.15px'},]);\r\n     */\r\n\r\n    //Global definition of default font for shapes\r\n    //Definitions in the SVG definition of a stencil will overwrite these settings for\r\n    // that stencil.\r\n    /*if(navigator.platform.indexOf(\"Mac\") > -1) {\r\n     this.node.setAttributeNS(null, 'stroke', 'black');\r\n     this.node.setAttributeNS(null, 'stroke-width', '0.5px');\r\n     this.node.setAttributeNS(null, 'font-family', 'Skia');\r\n     //this.node.setAttributeNS(null, 'letter-spacing', '2px');\r\n     this.node.setAttributeNS(null, 'font-size', ORYX.CONFIG.LABEL_DEFAULT_LINE_HEIGHT);\r\n     } else {\r\n     this.node.setAttributeNS(null, 'stroke', 'none');\r\n     this.node.setAttributeNS(null, 'font-family', 'Verdana');\r\n     this.node.setAttributeNS(null, 'font-size', ORYX.CONFIG.LABEL_DEFAULT_LINE_HEIGHT);\r\n     }*/\r\n\r\n    this.node.setAttributeNS(null, 'stroke', 'none')\r\n    this.node.setAttributeNS(null, 'font-family', 'Verdana, sans-serif')\r\n    this.node.setAttributeNS(null, 'font-size-adjust', 'none')\r\n    this.node.setAttributeNS(null, 'font-style', 'normal')\r\n    this.node.setAttributeNS(null, 'font-variant', 'normal')\r\n    this.node.setAttributeNS(null, 'font-weight', 'normal')\r\n    this.node.setAttributeNS(null, 'line-heigth', 'normal')\r\n    this.node.setAttributeNS(null, 'font-size', ORYX_Config.LABEL_DEFAULT_LINE_HEIGHT)\r\n    this.bounds.set(0, 0, options.width, options.height)\r\n\r\n    this.addEventHandlers(this.rootNode.parentNode)\r\n\r\n    // disable context menu\r\n    this.rootNode.oncontextmenu = function () {\r\n      return false\r\n    }\r\n  }\r\n  focus () {\r\n\r\n  }\r\n\r\n  setHightlightState (state) {\r\n    if (this.colHighlightEnabled && this.colHighlightState != state) {\r\n      if (state == 0) {\r\n        this.columnHightlight1.setAttribute('visibility', 'hidden')\r\n        this.columnHightlight2.setAttribute('visibility', 'hidden')\r\n      } else if (state == 1) {\r\n        this.columnHightlight1.setAttribute('visibility', 'visible')\r\n        this.columnHightlight2.setAttribute('visibility', 'hidden')\r\n      } else if (state == 2) {\r\n        this.columnHightlight1.setAttribute('visibility', 'hidden')\r\n        this.columnHightlight2.setAttribute('visibility', 'visible')\r\n      } else if (state == 3) {\r\n        this.columnHightlight1.setAttribute('visibility', 'visible')\r\n        this.columnHightlight2.setAttribute('visibility', 'visible')\r\n      }\r\n      this.colHighlightState = state\r\n    }\r\n  }\r\n\r\n  setHightlightStateBasedOnX (x) {\r\n    if (x > ORYX_Config.FORM_ROW_WIDTH + 30) {\r\n      this.setHightlightState(2)\r\n    } else {\r\n      this.setHightlightState(1)\r\n    }\r\n  }\r\n\r\n  update () {\r\n    this.nodes.each(function (node) {\r\n      this._traverseForUpdate(node)\r\n    }.bind(this))\r\n\r\n    // call stencil's layout callback\r\n    let layoutEvents = this.getStencil().layout()\r\n    if (layoutEvents) {\r\n      layoutEvents.each(function (event) {\r\n        // setup additional attributes\r\n        event.shape = this\r\n        event.forceExecution = true\r\n        event.target = this.rootNode\r\n\r\n        // do layouting\r\n        this._delegateEvent(event)\r\n      }.bind(this))\r\n    }\r\n\r\n    this.nodes.invoke('_update')\r\n\r\n    this.edges.invoke('_update', true)\r\n\r\n    /*this.children.each(function(child) {\r\n     child._update();\r\n     });*/\r\n  }\r\n\r\n  _traverseForUpdate (shape) {\r\n    let childRet = shape.isChanged\r\n    shape.getChildNodes(false, function (child) {\r\n      if (this._traverseForUpdate(child)) {\r\n        childRet = true\r\n      }\r\n    }.bind(this))\r\n\r\n    if (childRet) {\r\n      shape.layout()\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  layout () {}\r\n\r\n  /**\r\n   *\r\n   * @param {Object} deep\r\n   * @param {Object} iterator\r\n   */\r\n  getChildNodes (deep, iterator) {\r\n    if (!deep && !iterator) {\r\n      return this.nodes.clone()\r\n    } else {\r\n      let result = []\r\n      this.nodes.each(function (uiObject) {\r\n        if (iterator) {\r\n          iterator(uiObject)\r\n        }\r\n        result.push(uiObject)\r\n\r\n        if (deep && uiObject instanceof Shape) {\r\n          result = result.concat(uiObject.getChildNodes(deep, iterator))\r\n        }\r\n      })\r\n\r\n      return result\r\n    }\r\n  }\r\n\r\n  /**\r\n   * buggy crap! use base class impl instead!\r\n   * @param {Object} iterator\r\n   */\r\n\r\n  /*\tgetChildEdges: function(iterator) {\r\n   if(iterator) {\r\n   this.edges.each(function(edge) {\r\n   iterator(edge);\r\n   });\r\n   }\r\n\r\n   return this.edges.clone();\r\n   },\r\n   */\r\n  /**\r\n   * Overrides the UIObject.add method. Adds uiObject to the correct sub node.\r\n   * @param {UIObject} uiObject\r\n   */\r\n  add (uiObject, index, silent) {\r\n    // if uiObject is child of another UIObject, remove it.\r\n    if (uiObject instanceof UIObject) {\r\n      if (!(this.children.member(uiObject))) {\r\n        // if uiObject is child of another parent, remove it from that parent.\r\n        if (uiObject.parent) {\r\n          uiObject.parent.remove(uiObject, true)\r\n        }\r\n\r\n        // add uiObject to the Canvas\r\n        // add uiObject to this Shape\r\n        if (index != undefined) {\r\n          this.children.splice(index, 0, uiObject)\r\n        } else {\r\n          this.children.push(uiObject)\r\n        }\r\n\r\n        // set parent reference\r\n        uiObject.parent = this\r\n\r\n        // add uiObject.node to this.node depending on the type of uiObject\r\n        if (uiObject instanceof Shape) {\r\n          if (uiObject instanceof Edge) {\r\n            uiObject.addMarkers(this.rootNode.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'defs')[0])\r\n            uiObject.node = this.node.childNodes[0].childNodes[2].appendChild(uiObject.node)\r\n            this.edges.push(uiObject)\r\n          } else {\r\n            // uiObject.node = this.node.childNodes[0].childNodes[1].appendChild(uiObject.node)\r\n            if (uiObject.getStencil().id().endsWith('Pool')) {\r\n              console.log(888)\r\n              let childNodes = this.node.childNodes[0].childNodes[1]\r\n              uiObject.node = childNodes.insertBefore(uiObject.node, childNodes.firstChild)\r\n              this.nodes.unshift(uiObject)\r\n            } else {\r\n              uiObject.node = this.node.childNodes[0].childNodes[1].appendChild(uiObject.node)\r\n              this.nodes.push(uiObject)\r\n            }\r\n          }\r\n        } else {\r\n          // UIObject\r\n          uiObject.node = this.node.appendChild(uiObject.node)\r\n        }\r\n\r\n        uiObject.bounds.registerCallback(this._changedCallback)\r\n\r\n        if (this.eventHandlerCallback && silent !== true) {\r\n          this.eventHandlerCallback({ type: ORYX_Config.EVENT_SHAPEADDED, shape: uiObject })\r\n        }\r\n      } else {\r\n        ORYX_Log.warn('add: ORYX.Core.UIObject is already a child of this object.')\r\n      }\r\n    } else {\r\n      ORYX_Log.fatal('add: Parameter is not of type ORYX.Core.UIObject.')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Overrides the UIObject.remove method. Removes uiObject.\r\n   * @param {UIObject} uiObject\r\n   */\r\n  remove (uiObject, silent) {\r\n    //if uiObject is a child of this object, remove it.\r\n    if (this.children.member(uiObject)) {\r\n      //remove uiObject from children\r\n      let parent = uiObject.parent\r\n      this.children = this.children.without(uiObject)\r\n\r\n      //delete parent reference of uiObject\r\n      uiObject.parent = undefined\r\n\r\n      // delete uiObject.node from this.node\r\n      if (uiObject instanceof Shape) {\r\n        if (uiObject instanceof Edge) {\r\n          uiObject.removeMarkers()\r\n          uiObject.node = this.node.childNodes[0].childNodes[2].removeChild(uiObject.node)\r\n          this.edges = this.edges.without(uiObject)\r\n        } else {\r\n          uiObject.node = this.node.childNodes[0].childNodes[1].removeChild(uiObject.node)\r\n          this.nodes = this.nodes.without(uiObject)\r\n        }\r\n      } else {\t//UIObject\r\n        uiObject.node = this.node.removeChild(uiObject.node)\r\n      }\r\n\r\n      if (this.eventHandlerCallback && silent !== true) {\r\n        this.eventHandlerCallback({ type: ORYX_Config.EVENT_SHAPEREMOVED, shape: uiObject, parent: parent })\r\n      }\r\n\r\n      uiObject.bounds.unregisterCallback(this._changedCallback)\r\n    } else {\r\n      ORYX_Log.warn('remove: ORYX.Core.UIObject is not a child of this object.')\r\n    }\r\n  }\r\n\r\n  removeAll () {\r\n    let childShapes = this.getChildShapes()\r\n    for (let i = 0; i < childShapes.length; i++) {\r\n      let childObject = childShapes[i]\r\n      this.remove(childObject)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates shapes out of the given collection of shape objects and adds them to the canvas.\r\n   * @example\r\n   * canvas.addShapeObjects({\r\n         bounds:{ lowerRight:{ y:510, x:633 }, upperLeft:{ y:146, x:210 } },\r\n         resourceId:\"oryx_F0715955-50F2-403D-9851-C08CFE70F8BD\",\r\n         childShapes:[],\r\n         properties:{},\r\n         stencil:{\r\n           id:\"Subprocess\"\r\n         },\r\n         outgoing:[{resourceId: 'aShape'}],\r\n         target: {resourceId: 'aShape'}\r\n       });\r\n   * @param {Object} shapeObjects\r\n   * @param {Function} [eventHandler] An event handler passed to each newly created shape (as eventHandlerCallback)\r\n   * @return {Array} A collection of ORYX.Core.Shape\r\n   * @methodOf ORYX.Core.Canvas.prototype\r\n   */\r\n  addShapeObjects (shapeObjects, eventHandler) {\r\n    if (!shapeObjects) return\r\n\r\n    this.initializingShapes = true\r\n\r\n    /* FIXME This implementation is very evil! At first, all shapes are created on\r\n     canvas. In a second step, the attributes are applied. There must be a distinction\r\n     between the configuration phase (where the outgoings, for example, are just named),\r\n     and the creation phase (where the outgoings are evaluated). This must be reflected\r\n     in code to provide a nicer API/ implementation!!! */\r\n\r\n    const addShape = function (shape, parent) {\r\n      // Create a new Stencil\r\n      let stencil = StencilSet.stencil(this.getStencil().namespace() + shape.stencil.id)\r\n      // Create a new Shape\r\n      let ShapeClass = (stencil.type() == 'node') ? Node : Edge\r\n      let newShape = new ShapeClass(\r\n        { 'eventHandlerCallback': eventHandler },\r\n        stencil, this.facade)\r\n\r\n      // Set the resource id\r\n      newShape.resourceId = shape.resourceId\r\n      newShape.node.id = 'svg-' + shape.resourceId\r\n\r\n      // Set parent to json object to be used later\r\n      // Due to the nested json structure, normally shape.parent is not set/ must not be set.\r\n      // In special cases, it can be easier to set this directly instead of a nested structure.\r\n      shape.parent = '#' + ((shape.parent && shape.parent.resourceId) || parent.resourceId)\r\n\r\n      // Add the shape to the canvas\r\n      this.add(newShape)\r\n\r\n      return {\r\n        json: shape,\r\n        object: newShape\r\n      }\r\n    }.bind(this)\r\n\r\n    /** Builds up recursively a flatted array of shapes, including a javascript object and json representation\r\n     * @param {Object} shape Any object that has Object#childShapes\r\n     */\r\n    const addChildShapesRecursively = function (shape) {\r\n      let addedShapes = []\r\n      if (shape.childShapes && shape.childShapes.constructor == String) {\r\n        shape.childShapes = JSON.parse(shape.childShapes)\r\n      }\r\n\r\n      shape.childShapes.each(function (childShape) {\r\n        addedShapes.push(addShape(childShape, shape))\r\n        addedShapes = addedShapes.concat(addChildShapesRecursively(childShape))\r\n      })\r\n\r\n      return addedShapes\r\n    }.bind(this)\r\n\r\n    let shapes = addChildShapesRecursively({\r\n      childShapes: shapeObjects,\r\n      resourceId: this.resourceId\r\n    })\r\n    // prepare deserialisation parameter\r\n    shapes.each(function (shape) {\r\n        let properties = []\r\n        for (let field in shape.json.properties) {\r\n          properties.push({\r\n            prefix: 'oryx',\r\n            name: field,\r\n            value: shape.json.properties[field]\r\n          })\r\n        }\r\n\r\n        // Outgoings\r\n        shape.json.outgoing.each(function (out) {\r\n          properties.push({\r\n            prefix: 'raziel',\r\n            name: 'outgoing',\r\n            value: '#' + out.resourceId\r\n          })\r\n        })\r\n\r\n        // Target\r\n        // (because of a bug, the first outgoing is taken when there is no target,\r\n        // can be removed after some time)\r\n        if (shape.object instanceof Edge) {\r\n          let target = shape.json.target || shape.json.outgoing[0]\r\n          if (target) {\r\n            properties.push({\r\n              prefix: 'raziel',\r\n              name: 'target',\r\n              value: '#' + target.resourceId\r\n            })\r\n          }\r\n        }\r\n\r\n        // Bounds\r\n        if (shape.json.bounds) {\r\n          properties.push({\r\n            prefix: 'oryx',\r\n            name: 'bounds',\r\n            value: shape.json.bounds.upperLeft.x + ',' + shape.json.bounds.upperLeft.y + ',' + shape.json.bounds.lowerRight.x + ',' + shape.json.bounds.lowerRight.y\r\n          })\r\n        }\r\n\r\n        // Dockers [{x:40, y:50}, {x:30, y:60}] => \"40 50 30 60  #\"\r\n        if (shape.json.dockers) {\r\n          properties.push({\r\n            prefix: 'oryx',\r\n            name: 'dockers',\r\n            value: shape.json.dockers.inject('', function (dockersStr, docker) {\r\n              return dockersStr + docker.x + ' ' + docker.y + ' '\r\n            }) + ' #'\r\n          })\r\n        }\r\n\r\n        // Parent\r\n        properties.push({\r\n          prefix: 'raziel',\r\n          name: 'parent',\r\n          value: shape.json.parent\r\n        })\r\n\r\n        shape.__properties = properties\r\n      }.bind(this)\r\n    )\r\n\r\n    // Deserialize the properties from the shapes\r\n    // This can't be done earlier because Shape#deserialize expects that all referenced nodes are already there\r\n\r\n    // first, deserialize all nodes\r\n    shapes.each(function (shape) {\r\n      if (shape.object instanceof Node) {\r\n        shape.object.deserialize(shape.__properties, shape.json)\r\n      }\r\n    })\r\n\r\n    // second, deserialize all edges\r\n    shapes.each(function (shape) {\r\n      if (shape.object instanceof Edge) {\r\n        shape.object.deserialize(shape.__properties, shape.json)\r\n        shape.object._oldBounds = shape.object.bounds.clone()\r\n        shape.object._update()\r\n      }\r\n    })\r\n\r\n    delete this.initializingShapes\r\n    return shapes.pluck('object')\r\n  }\r\n\r\n  /**\r\n   * Updates the size of the canvas, regarding to the containg shapes.\r\n   */\r\n  updateSize () {\r\n    // Check the size for the canvas\r\n    let maxWidth = 0\r\n    let maxHeight = 0\r\n    let offset = 100\r\n    this.getChildShapes(true, function (shape) {\r\n      let b = shape.bounds\r\n      maxWidth = Math.max(maxWidth, b.lowerRight().x + offset)\r\n      maxHeight = Math.max(maxHeight, b.lowerRight().y + offset)\r\n    })\r\n\r\n    if (this.bounds.width() < maxWidth || this.bounds.height() < maxHeight) {\r\n      this.setSize({\r\n        width: Math.max(this.bounds.width(), maxWidth),\r\n        height: Math.max(this.bounds.height(), maxHeight)\r\n      })\r\n    }\r\n  }\r\n\r\n  getRootNode () {\r\n    return this.rootNode\r\n  }\r\n\r\n  getUnderlayNode () {\r\n    return this.underlayNode\r\n  }\r\n\r\n  getSvgContainer () {\r\n    return this.node.childNodes[1]\r\n  }\r\n\r\n  getHTMLContainer () {\r\n    return this._htmlContainer\r\n  }\r\n\r\n  /**\r\n   * Return all elements of the same highest level\r\n   * @param {Object} elements\r\n   */\r\n  getShapesWithSharedParent (elements) {\r\n    // If there is no elements, return []\r\n    if (!elements || elements.length < 1) {\r\n      return []\r\n    }\r\n    // If there is one element, return this element\r\n    if (elements.length === 1) {\r\n      return elements\r\n    }\r\n\r\n    return elements.findAll(function (value) {\r\n      let parentShape = value.parent\r\n      while (parentShape) {\r\n        if (elements.member(parentShape)) return false\r\n        parentShape = parentShape.parent\r\n      }\r\n      return true\r\n    })\r\n\r\n  }\r\n\r\n  setSize (size, dontSetBounds) {\r\n    if (!size || !size.width || !size.height) {\r\n      return\r\n    }\r\n\r\n    if (this.rootNode.parentNode) {\r\n      this.rootNode.parentNode.style.width = size.width + 'px'\r\n      this.rootNode.parentNode.style.height = size.height + 'px'\r\n    }\r\n\r\n    this.rootNode.setAttributeNS(null, 'width', size.width)\r\n    this.rootNode.setAttributeNS(null, 'height', size.height)\r\n\r\n    //this._htmlContainer.style.top = \"-\" + (size.height + 4) + 'px';\r\n    if (!dontSetBounds) {\r\n      this.bounds.set({ a: { x: 0, y: 0 }, b: { x: size.width / this.zoomLevel, y: size.height / this.zoomLevel } })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns an SVG document of the current process.\r\n   * @param {Boolean} escapeText Use true, if you want to parse it with an XmlParser,\r\n   *          false, if you want to use the SVG document in browser on client side.\r\n   */\r\n  getSVGRepresentation (escapeText) {\r\n    // Get the serialized svg image source\r\n    let svgClone = this.getRootNode().cloneNode(true)\r\n\r\n    this._removeInvisibleElements(svgClone)\r\n\r\n    let x1, y1, x2, y2\r\n    this.getChildShapes(true).each(function (shape) {\r\n      let absBounds = shape.absoluteBounds()\r\n      let ul = absBounds.upperLeft()\r\n      let lr = absBounds.lowerRight()\r\n      if (x1 == undefined) {\r\n        x1 = ul.x\r\n        y1 = ul.y\r\n        x2 = lr.x\r\n        y2 = lr.y\r\n      } else {\r\n        x1 = Math.min(x1, ul.x)\r\n        y1 = Math.min(y1, ul.y)\r\n        x2 = Math.max(x2, lr.x)\r\n        y2 = Math.max(y2, lr.y)\r\n      }\r\n    })\r\n\r\n    let margin = 50\r\n    let width, height, tx, ty\r\n    if (x1 == undefined) {\r\n      width = 0\r\n      height = 0\r\n      tx = 0\r\n      ty = 0\r\n    } else {\r\n      width = x2\r\n      height = y2\r\n      tx = -x1 + margin / 2\r\n      ty = -y1 + margin / 2\r\n    }\r\n\r\n    // Set the width and height\r\n    svgClone.setAttributeNS(null, 'width', width + margin)\r\n    svgClone.setAttributeNS(null, 'height', height + margin)\r\n\r\n    //remove scale factor\r\n    svgClone.childNodes[1].removeAttributeNS(null, 'transform')\r\n\r\n    try {\r\n      let svgCont = svgClone.childNodes[1].childNodes[1]\r\n      svgCont.parentNode.removeChild(svgCont)\r\n    } catch (e) {\r\n    }\r\n\r\n    if (escapeText) {\r\n      $A(svgClone.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'tspan')).each(function (elem) {\r\n        elem.textContent = elem.textContent.escapeHTML()\r\n      })\r\n\r\n      $A(svgClone.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'text')).each(function (elem) {\r\n        if (elem.childNodes.length == 0)\r\n          elem.textContent = elem.textContent.escapeHTML()\r\n      })\r\n    }\r\n\r\n    // generating absolute urls for the pdf-exporter\r\n    $A(svgClone.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'image')).each(function (elem) {\r\n      let href = elem.getAttributeNS('http://www.w3.org/1999/xlink', 'href')\r\n\r\n      if (!href.match('^(http|https)://')) {\r\n        href = window.location.protocol + '//' + window.location.host + href\r\n        elem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', href)\r\n      }\r\n    })\r\n\r\n\r\n    // escape all links\r\n    $A(svgClone.getElementsByTagNameNS(ORYX_Config.NAMESPACE_SVG, 'a')).each(function (elem) {\r\n      elem.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', (elem.getAttributeNS('http://www.w3.org/1999/xlink', 'href') || '').escapeHTML())\r\n    })\r\n\r\n    return svgClone\r\n  }\r\n\r\n  /**\r\n   * Removes all nodes (and its children) that has the\r\n   * attribute visibility set to \"hidden\"\r\n   */\r\n  _removeInvisibleElements (element) {\r\n    let index = 0\r\n    while (index < element.childNodes.length) {\r\n      let child = element.childNodes[index]\r\n      if (child.getAttributeNS &&\r\n        child.getAttributeNS(null, 'visibility') === 'hidden') {\r\n        element.removeChild(child)\r\n      } else {\r\n        this._removeInvisibleElements(child)\r\n        index++\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * This method checks all shapes on the canvas and removes all shapes that\r\n   * contain invalid bounds values or dockers values(NaN)\r\n   */\r\n\r\n  /*cleanUp: function(parent) {\r\n   if (!parent) {\r\n   parent = this;\r\n   }\r\n   parent.getChildShapes().each(function(shape){\r\n   var a = shape.bounds.a;\r\n   var b = shape.bounds.b;\r\n   if (isNaN(a.x) || isNaN(a.y) || isNaN(b.x) || isNaN(b.y)) {\r\n   parent.remove(shape);\r\n   }\r\n   else {\r\n   shape.getDockers().any(function(docker) {\r\n   a = docker.bounds.a;\r\n   b = docker.bounds.b;\r\n   if (isNaN(a.x) || isNaN(a.y) || isNaN(b.x) || isNaN(b.y)) {\r\n   parent.remove(shape);\r\n   return true;\r\n   }\r\n   return false;\r\n   });\r\n   shape.getMagnets().any(function(magnet) {\r\n   a = magnet.bounds.a;\r\n   b = magnet.bounds.b;\r\n   if (isNaN(a.x) || isNaN(a.y) || isNaN(b.x) || isNaN(b.y)) {\r\n   parent.remove(shape);\r\n   return true;\r\n   }\r\n   return false;\r\n   });\r\n   this.cleanUp(shape);\r\n   }\r\n   }.bind(this));\r\n   },*/\r\n\r\n  _delegateEvent (event) {\r\n    if (this.eventHandlerCallback && (event.target == this.rootNode || event.target == this.rootNode.parentNode)) {\r\n      this.eventHandlerCallback(event, this)\r\n    }\r\n  }\r\n\r\n  toString () {\r\n    return 'Canvas ' + this.id\r\n  }\r\n\r\n  /**\r\n   * Calls {@link ORYX.Core.AbstractShape#toJSON} and adds some stencil set information.\r\n   */\r\n  toJSON () {\r\n    // var json = arguments.callee.$.toJSON.apply(this, arguments)\r\n    let json = super.toJSON()\r\n\r\n    //\t\tif(ORYX.CONFIG.STENCILSET_HANDLER.length > 0) {\r\n    //\t\t\tjson.stencilset = {\r\n    //\t\t\t\turl: this.getStencil().stencilSet().namespace()\r\n    //\t        };\r\n    //\t\t} else {\r\n    json.stencilset = {\r\n      url: this.getStencil().stencilSet().source(),\r\n      namespace: this.getStencil().stencilSet().namespace()\r\n    }\r\n    //\t\t}\r\n\r\n    return json\r\n  }\r\n\r\n  getInstanceofType () {\r\n    return 'Canvas'\r\n  }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"full-height\"},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"full-height\">\r\n    <router-view></router-view>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n  export default {\r\n    name: 'App',\r\n    data () {\r\n      return {}\r\n    },\r\n    created () {},\r\n    computed: {},\r\n    mounted () {\r\n\r\n    },\r\n    methods: {\r\n\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\">\r\n\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=39c044a7&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport {\r\n  Button,\r\n  Slider,\r\n  Dropdown,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n  Input,\r\n  Checkbox,\r\n  InputNumber,\r\n  Dialog,\r\n  Table,\r\n  TableColumn,\r\n  Message,\r\n  Radio,\r\n  Select,\r\n  Option,\r\n  Tag\r\n} from 'element-ui'\r\n\r\nVue.use(Button)\r\nVue.use(Slider)\r\nVue.use(Dropdown)\r\nVue.use(DropdownMenu)\r\nVue.use(DropdownItem)\r\nVue.use(Input)\r\nVue.use(Checkbox)\r\nVue.use(InputNumber)\r\nVue.use(Dialog)\r\nVue.use(Table)\r\nVue.use(TableColumn)\r\nVue.use(Message)\r\nVue.use(Radio)\r\nVue.use(Select)\r\nVue.use(Option)\r\nVue.use(Tag)\r\n\r\nVue.prototype.$message = Message","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor-main-wrapper\",style:({height: _vm.wrapperHeight}),attrs:{\"id\":\"main\"}},[_c('toolbar',{attrs:{\"editor\":_vm.editor,\"editorManager\":_vm.editorManager}}),_c('div',{staticClass:\"flow-content-box\"},[_vm._t(\"paletteWrapper\",[_c('paletteWrapper',{attrs:{\"editorManager\":_vm.editorManager}})],{\"editorManager\":_vm.editorManager}),_c('div',{staticClass:\"contentCanvasWrapper\",attrs:{\"id\":\"contentCanvasWrapper\"}},[_c('canvasWrapper',{attrs:{\"editorManager\":_vm.editorManager}}),_vm._t(\"propertyWrapper\",[_c('propertySection',{attrs:{\"editorManager\":_vm.editorManager}})],{\"editorManager\":_vm.editorManager})],2)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"subheader editor-toolbar\",attrs:{\"id\":\"editor-header\"}},[_c('div',{staticClass:\"btn-group\"},[_c('div',{staticClass:\"btn-toolbar pull-left\"},_vm._l((_vm.items),function(item,index){return _c('button',{key:item.id,staticClass:\"btn btn-inverse\",class:{'separator': item.type == 'separator'},attrs:{\"id\":item.id,\"disabled\":item.type == 'separator' || item.enabled == false},on:{\"click\":function($event){return _vm.toolbarButtonClicked(index)}}},[(item.type == 'button')?_c('i',{staticClass:\"toolbar-button\",class:item.cssClass,attrs:{\"data-toggle\":\"tooltip\",\"title\":_vm.t(item.title)}}):_vm._e(),(item.type == 'separator')?_c('div',{class:item.cssClass}):_vm._e()])}),0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.secondaryItems.length > 0),expression:\"secondaryItems.length > 0\"}],staticClass:\"btn-group pull-right\"},[_c('div',{staticClass:\"btn-toolbar pull-right\"},_vm._l((_vm.secondaryItems),function(item,index){return _c('button',{key:item.id,staticClass:\"btn btn-inverse\",class:{'separator': item.type == 'separator'},attrs:{\"id\":item.id,\"title\":_vm.t(item.title),\"disabled\":item.type == 'separator'},on:{\"click\":function($event){return _vm.toolbarSecondaryButtonClicked(index)}}},[(item.type == 'button')?_c('i',{staticClass:\"toolbar-button\",class:item.cssClass,attrs:{\"data-toggle\":\"tooltip\",\"title\":_vm.t(item.title)}}):_vm._e(),(item.type == 'separator')?_c('div',{class:item.cssClass}):_vm._e()])}),0)]),_c('el-dialog',{attrs:{\"title\":_vm.t('MODEL.SAVE.TITLE'),\"visible\":_vm.saveVisible,\"append-to-body\":\"\",\"width\":\"60%\"},on:{\"close\":_vm.close}},[_c('div',{staticClass:\"modal-body\"},[(_vm.saveDialog.errorMessage && _vm.saveDialog.errorMessage.length > 0)?_c('div',{staticClass:\"alert error\",staticStyle:{\"font-size\":\"14px\",\"margin-top\":\"20px\"}},[_c('div',{staticClass:\"popup-error\",staticStyle:{\"font-size\":\"14px\"}},[_c('span',{staticClass:\"glyphicon glyphicon-remove-circle\"}),_c('span',[_vm._v(_vm._s(_vm.saveDialog.errorMessage))])])]):_vm._e(),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"nameField\"}},[_vm._v(_vm._s(_vm.t('MODEL.NAME')))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.saveDialog.name),expression:\"saveDialog.name\"},{name:\"focus\",rawName:\"v-focus\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"disabled\":_vm.saveLoading || (_vm.error && _vm.error.conflictResolveAction == 'saveAs'),\"id\":\"nameField\"},domProps:{\"value\":(_vm.saveDialog.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.saveDialog, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"keyField\"}},[_vm._v(_vm._s(_vm.t('MODEL.KEY')))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.saveDialog.key),expression:\"saveDialog.key\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"disabled\":_vm.saveLoading || (_vm.error && _vm.error.conflictResolveAction == 'saveAs'),\"id\":\"keyField\"},domProps:{\"value\":(_vm.saveDialog.key)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.saveDialog, \"key\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"docTextArea\"}},[_vm._v(_vm._s(_vm.t('MODEL.DESCRIPTION')))]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.saveDialog.description),expression:\"saveDialog.description\"}],staticClass:\"form-control\",attrs:{\"id\":\"docTextArea\",\"disabled\":_vm.saveLoading},domProps:{\"value\":(_vm.saveDialog.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.saveDialog, \"description\", $event.target.value)}}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.error),expression:\"!error\"}],staticClass:\"checkbox\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.saveDialog.newVersion),expression:\"saveDialog.newVersion\"}],attrs:{\"type\":\"checkbox\",\"disabled\":_vm.saveLoading},domProps:{\"checked\":Array.isArray(_vm.saveDialog.newVersion)?_vm._i(_vm.saveDialog.newVersion,null)>-1:(_vm.saveDialog.newVersion)},on:{\"change\":function($event){var $$a=_vm.saveDialog.newVersion,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.saveDialog, \"newVersion\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.saveDialog, \"newVersion\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.saveDialog, \"newVersion\", $$c)}}}}),_vm._v(\"\\n          \"+_vm._s(_vm.t('MODEL.SAVE.NEWVERSION'))+\"\\n        \")])]),(_vm.saveDialog.newVersion)?_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"commentTextArea\"}},[_vm._v(_vm._s(_vm.t('MODEL.SAVE.COMMENT')))]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.saveDialog.comment),expression:\"saveDialog.comment\"}],staticClass:\"form-control\",attrs:{\"id\":\"commentTextArea\",\"disabled\":_vm.saveLoading},domProps:{\"value\":(_vm.saveDialog.comment)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.saveDialog, \"comment\", $event.target.value)}}})]):_vm._e(),(_vm.saveDialog.validationErrors)?_c('div',{staticClass:\"alert error\",staticStyle:{\"font-size\":\"14px\",\"margin-top\":\"20px\"}},[_c('div',{staticClass:\"popup-error\",staticStyle:{\"font-size\":\"14px\"}},[_c('span',{staticClass:\"glyphicon glyphicon-remove-circle\"}),_c('span',[_vm._v(_vm._s(_vm.t('MODEL.VALIDATIONERRORS')))])])]):_vm._e()]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[(_vm.error && !_vm.error.isConflict)?_c('div',{staticClass:\"popup-error\"},[_c('span',[_vm._v(_vm._s(_vm.t('MODEL.SAVE.ERROR')))])]):_vm._e(),_c('div',[_c('el-button',{attrs:{\"disabled\":_vm.saveLoading},on:{\"click\":_vm.close}},[_vm._v(_vm._s(_vm.t('ACTION.CANCEL')))]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.error),expression:\"!error\"}],attrs:{\"type\":\"primary\",\"disabled\":_vm.saveLoading || _vm.saveDialog.name.length == 0 || _vm.saveDialog.key.length == 0},on:{\"click\":_vm.saveAndClose}},[_vm._v(\"\\n          \"+_vm._s(_vm.t('ACTION.SAVE-AND-CLOSE'))+\"\\n        \")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.error),expression:\"!error\"}],attrs:{\"type\":\"primary\",\"disabled\":_vm.saveLoading || _vm.saveDialog.name.length == 0 || _vm.saveDialog.key.length == 0},on:{\"click\":_vm.save}},[_vm._v(\"\\n          \"+_vm._s(_vm.t('ACTION.SAVE'))+\"\\n        \")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.error && _vm.error.isConflict),expression:\"error && error.isConflict\"}],attrs:{\"type\":\"primary\",\"disabled\":_vm.isOkButtonDisabled()},on:{\"click\":_vm.okClicked}},[_vm._v(\"\\n          \"+_vm._s(_vm.t('ACTION.OK'))+\"\\n        \")])],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nexport default {\r\n  \"GENERAL\" : {\r\n    \"MAIN-TITLE\": \"Flowable编辑器\",\r\n    \"NAVIGATION\" : {\r\n      \"PROCESSES\": \"流程\",\r\n      \"CASEMODELS\": \"Case模型\",\r\n      \"FORMS\": \"表单\",\r\n      \"DECISION-TABLES\": \"决策表\",\r\n      \"APPS\": \"应用程序\"\r\n    },\r\n    \"TITLE\": {\r\n      \"SELECT-GROUP\" :\"选择组\",\r\n      \"MATCHING-GROUPS\": \"匹配组\",\r\n      \"FILTER\": \"过滤\",\r\n      \"HISTORY\": \"历史\"\r\n    },\r\n    \"ACTION\": {\r\n      \"LOGOUT\": \"退出\",\r\n      \"RETURN-TO-LIST\": \"显示所有定义\",\r\n      \"CANCEL\": \"取消\",\r\n      \"CLOSE\": \"关闭\",\r\n      \"EDIT\": \"编辑\",\r\n      \"SAVE\": \"保存\",\r\n      \"OPEN\": \"打开\",\r\n      \"OK\": \"Ok\",\r\n      \"CONFIRM\": \"确认\",\r\n      \"CONFIRM-AND-CLOSE\": \"确认并且关闭\",\r\n      \"NEW-FORM\": \"新表单\",\r\n      \"CREATE-FORM\": \"创建表单\",\r\n      \"NEW-DECISION-TABLE\": \"新决策表\",\r\n      \"CREATE-DECISION-TABLE\": \"创建决策表\"\r\n    },\r\n    \"MESSAGE\": {\r\n      \"SELECT-GROUP-HELP\": \"使用 &uparrow; 和 &downarrow; 选择并按回车确认\",\r\n      \"PEOPLE-NO-MATCHING-RESULTS\": \"没有找到匹配的用户\",\r\n      \"GROUP-NO-MATCHING-RESULTS\": \"没有找到匹配的组\",\r\n      \"GROUP-SOURCE-TYPE\": \"组源\",\r\n      \"GROUP-SOURCE-SEARCH-OPTION\": \"组搜索\",\r\n      \"GROUP-SOURCE-FIELD-OPTION\": \"表单字段\"\r\n    }\r\n  },\r\n\r\n  \"EDITOR\": {\r\n    \"POPUP\": {\r\n      \"UNSAVED-CHANGES\": {\r\n        \"TITLE\": \"您有未保存的更改\",\r\n        \"DESCRIPTION\": \"您想如何处理未保存的更改?\",\r\n        \"ACTION\": {\r\n          \"SAVE\": \"保存更改\",\r\n          \"DISCARD\": \"放弃更改\",\r\n          \"CONTINUE\": \"继续编辑\"\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  \"PROCESS-LIST\" : {\r\n    \"TITLE\" : \"业务流程模型\",\r\n    \"SEARCH-PLACEHOLDER\": \"搜索\",\r\n    \"ACTION\" : {\r\n      \"CREATE\": \"创建流程\",\r\n      \"IMPORT\": \"导入流程\"\r\n    },\r\n\r\n    \"FILTER\" : {\r\n      \"PROCESSES\": \"流程模型\",\r\n      \"PROCESSES-COUNT\": \"一共有 {total}个流程模型\",\r\n      \"PROCESSES-ONE\": \"有一个流程模型\",\r\n      \"PROCESSES-EMPTY\": \"目前还没有创建流程模型。您可以设计流程模型、用户表单，然后将它们捆绑到app中。第一步是创建流程模型:\",\r\n      \"PROCESSES-BPMN-HINT\": \"使用BPMN可视化编辑器创建BPMN模型.\",\r\n      \"PROCESSES-BPMN-IMPORT-HINT\": \"还可以导入现有的BPMN模型。\",\r\n      \"FILTER-TEXT\": \", 匹配 \\\"{filterText}\\\"\",\r\n      \"FILTER-TEXT-EMPTY\": \"没有匹配到流程模型 \\\"{filterText}\\\"\",\r\n      \"RECENT\": \"最近\",\r\n      \"RECENT-COUNT\": \"{total} 最近使用的模型\",\r\n      \"RECENT-ONE\": \"最近使用的模型\",\r\n      \"RECENT-EMPTY\": \"最近没有使用模型\"\r\n    },\r\n\r\n    \"SORT\": {\r\n      \"MODIFIED-ASC\": \"按照修改时间升序\",\r\n      \"MODIFIED-DESC\": \"按照修改时间降序\",\r\n      \"NAME-ASC\": \"按照名称升序\",\r\n      \"NAME-DESC\": \"按照名称降序\"\r\n    }\r\n  },\r\n\r\n  \"CASE-LIST\" : {\r\n    \"TITLE\" : \"Case模型\",\r\n    \"SEARCH-PLACEHOLDER\": \"搜索\",\r\n    \"ACTION\" : {\r\n      \"CREATE\": \"创建Case\",\r\n      \"IMPORT\": \"导入Case\"\r\n    },\r\n\r\n    \"FILTER\" : {\r\n      \"CASES\": \"Case 模型\",\r\n      \"CASES-COUNT\": \"一共有 {total}个 case 模型\",\r\n      \"CASES-ONE\": \"有一个case模型\",\r\n      \"CASES-EMPTY\": \"目前还没有创建case模型。您可以设计实例模型、用户表单，然后将它们捆绑到app应用程序定义中。第一步是创建一个case模型。:\",\r\n      \"CASES-CMMN-HINT\": \"使用CMMN可视化编辑器创建CMMN模型.\",\r\n      \"CASES-CMMN-IMPORT-HINT\": \"还可以导入现有CMMN模型。\",\r\n      \"FILTER-TEXT\": \", 匹配 \\\"{filterText}\\\"\",\r\n      \"FILTER-TEXT-EMPTY\": \"没有匹配到case模型 \\\"{filterText}\\\"\",\r\n      \"RECENT\": \"最近\",\r\n      \"RECENT-COUNT\": \"{total} 最近使用的模型\",\r\n      \"RECENT-ONE\": \"最近使用的模型\",\r\n      \"RECENT-EMPTY\": \"最近没有使用模型\"\r\n    },\r\n\r\n    \"SORT\": {\r\n      \"MODIFIED-ASC\": \"按照修改时间升序\",\r\n      \"MODIFIED-DESC\": \"按照修改时间降序\",\r\n      \"NAME-ASC\": \"按照名称升序\",\r\n      \"NAME-DESC\": \"按照名称降序\"\r\n    }\r\n  },\r\n\r\n  \"FORMS-LIST\" : {\r\n    \"TITLE\" : \"表单\",\r\n    \"SEARCH-PLACEHOLDER\": \"搜索\",\r\n    \"ACTION\" : {\r\n      \"CREATE\": \"创建表单\",\r\n      \"CREATE-INLINE\": \"现在创建一个新表单!\",\r\n      \"SHOW-MORE\": \"显示更多...\"\r\n    },\r\n\r\n    \"FILTER\" : {\r\n      \"FORMS\": \"表单\",\r\n      \"FORMS-COUNT\": \"一共有{total} 个表单\",\r\n      \"FORMS-ONE\": \"有一个表单\",\r\n      \"FORMS-EMPTY\": \"没有表单。若要添加一个，请单击创建表单 \",\r\n      \"FILTER-TEXT\": \", 匹配 \\\"{filterText}\\\"\",\r\n      \"FILTER-TEXT-EMPTY\": \"没有匹配到表单 \\\"{filterText}\\\"\"\r\n    },\r\n\r\n    \"SORT\": {\r\n      \"MODIFIED-ASC\": \"按照修改时间升序\",\r\n      \"MODIFIED-DESC\": \"按照修改时间降序\",\r\n      \"NAME-ASC\": \"按照名称升序\",\r\n      \"NAME-DESC\": \"按照名称降序\"\r\n    }\r\n  },\r\n\r\n  \"DECISION-TABLES-LIST\": {\r\n    \"TITLE\": \"决策表\",\r\n    \"SEARCH-PLACEHOLDER\": \"搜索\",\r\n    \"ACTION\": {\r\n      \"CREATE\": \"创建决策表\",\r\n      \"IMPORT\": \"导入决策表\",\r\n      \"CREATE-INLINE\": \"现在创建一个新的决策表!\",\r\n      \"SHOW-MORE\": \"显示更多...\"\r\n    },\r\n\r\n    \"FILTER\": {\r\n      \"DECISION-TABLES\": \"决策表\",\r\n      \"DECISION-TABLES-COUNT\": \"一共有 {total} 个决策表\",\r\n      \"DECISION-TABLES-ONE\": \"有一个决策表\",\r\n      \"DECISION-TABLES-EMPTY\": \"没有决策表。若要添加一个，请单击创建决策表 \",\r\n      \"FILTER-TEXT\": \", 匹配 \\\"{filterText}\\\"\",\r\n      \"FILTER-TEXT-EMPTY\": \"没有匹配到决策表 \\\"{filterText}\\\"\"\r\n    },\r\n\r\n    \"SORT\": {\r\n      \"MODIFIED-ASC\": \"按照修改时间升序\",\r\n      \"MODIFIED-DESC\": \"按照修改时间降序\",\r\n      \"NAME-ASC\": \"按照名称升序\",\r\n      \"NAME-DESC\": \"按照名称降序\"\r\n    }\r\n  },\r\n\r\n  \"APPS-LIST\" : {\r\n    \"TITLE\" : \"应用程序定义\",\r\n    \"SEARCH-PLACEHOLDER\": \"搜索\",\r\n    \"ACTION\" : {\r\n      \"CREATE\": \"创建应用程序\",\r\n      \"IMPORT\": \"导入应用程序\",\r\n      \"SHOW-MORE\": \"显示更多...\"\r\n    },\r\n\r\n    \"FILTER\" : {\r\n      \"APPS\": \"应用程序定义\",\r\n      \"APPS-COUNT\": \"一共有 {total}个应用程序定义\",\r\n      \"APPS-ONE\": \"有一个app定义\",\r\n      \"APPS-EMPTY\": \"没有应用程序定义。若要添加一个，请单击创建应用程序定义\",\r\n      \"FILTER-TEXT\": \", 匹配 \\\"{filterText}\\\"\",\r\n      \"FILTER-TEXT-EMPTY\": \"没有匹配到应用程序定义  \\\"{filterText}\\\"\",\r\n\r\n      \"NO-APPS\": \" 您可以通过发布一批流程模型来创建应用程序定义\",\r\n      \"NO-APPS-CALL-TO-ACTION\": \"现在可以创建一个应用程序定义 \",\r\n      \"NO-APPS-NOTE\": \"当你准备好使用它时，记得要发布它。\"\r\n    },\r\n\r\n    \"SORT\": {\r\n      \"MODIFIED-ASC\": \"按照修改时间升序\",\r\n      \"MODIFIED-DESC\": \"按照修改时间降序\",\r\n      \"NAME-ASC\": \"按照名称升序\",\r\n      \"NAME-DESC\": \"按照名称降序\"\r\n    }\r\n  },\r\n  \"PROCESS\": {\r\n    \"NAME\": \"模型名称\",\r\n    \"KEY\": \"模型key\",\r\n    \"DESCRIPTION\": \"描述\",\r\n    \"VERSION-COMMENT\": \"版本注释\",\r\n    \"ACTION\": {\r\n      \"DETAILS\": \"显示详细信息\",\r\n      \"EDIT\": \"修改模型属性\",\r\n      \"DUPLICATE\": \"复制这个模型\",\r\n      \"EXPORT_BPMN20\": \"导出到BPMN2\",\r\n      \"DELETE\": \"删除这个模型\",\r\n      \"CREATE-CONFIRM\": \"创建新模型\",\r\n      \"DUPLICATE-CONFIRM\": \"复制这个模型\",\r\n      \"OPEN-IN-EDITOR\": \"可视化编辑器\",\r\n      \"EDIT-CONFIRM\": \"保存\",\r\n      \"DELETE-CONFIRM\": \"删除流程模型\",\r\n      \"USE-AS-NEW-VERSION\": \"作为新版本使用\",\r\n      \"FAVORITE\": \"喜欢这个模型\"\r\n\r\n    },\r\n    \"DETAILS\": {\r\n      \"HISTORY-TITLE\": \"历史\",\r\n      \"LAST-UPDATED-BY\": \"最后被{lastUpdatedBy} - {lastUpdated | dateformat}更新\",\r\n      \"CREATED-BY\": \"被{createdBy}创建\",\r\n      \"NO-DESCRIPTION\": \"这个模型没有描述信息，可以通过修改模型来添加一个描述\"\r\n    },\r\n\r\n    \"POPUP\": {\r\n      \"CREATE-TITLE\": \"创建一个新的业务流程模型\",\r\n      \"DUPLICATE-TITLE\": \"复制这个业务流程模型\",\r\n      \"CREATE-DESCRIPTION\": \"您需要为新模型命名，并且您可以在这个操作中添加描述信息。\",\r\n      \"DUPLICATE-DESCRIPTION\": \"您可以更改新模型的名称，并且此时您可以更改描述信息。\",\r\n      \"EDIT-DESCRIPTION\": \"更改下面的任何模型属性，然后按下保存去更新模型。\",\r\n      \"DELETE-DESCRIPTION\": \"确实要删除进程模型吗？ \\\"{name}\\\"?\",\r\n      \"EDIT-TITLE\":\"编辑模型详细信息\",\r\n      \"DELETE-TITLE\": \"删除模型\",\r\n      \"DELETE-LOADING-RELATIONS\": \"检查模型使用...\",\r\n      \"DELETE-RELATIONS-DESCRIPTION-SINGLE\": \"无法删除此模型，因为另一个模型正在使用它:\",\r\n      \"DELETE-RELATIONS-DESCRIPTION\": \"无法删除此模型，因为另一个模型正在使用它:\",\r\n      \"DELETE-PROCESS-RELATION\": \"流程模型\",\r\n      \"DELETE-FORM-RELATION\": \"表单模型\",\r\n      \"DELETE-APP-RELATION\": \"App模型\",\r\n      \"IMPORT-DESCRIPTION\": \"请浏览或拖拽.bpmn或.bpmn20.xml扩展名的BPMN XML定义\",\r\n      \"IMPORT-TITLE\": \"导入一个流程模型\",\r\n      \"USE-AS-NEW-TITLE\": \"作为一个新版本使用\",\r\n      \"USE-AS-NEW-DESCRIPTION\": \"您确定要使用 {version}版本 去创建一个关于 \\\"{name}\\\"的新版本?\",\r\n      \"USE-AS-NEW-UNRESOLVED-MODELS-ERROR\": \"无法完全恢复app模型到所选择的版本：由于一些引用的模型过去被删除而丢失。请相应地更新app模型。缺失模型:\",\r\n      \"USE-AS-NEW-UNRESOLVED-MODEL\": \"模型 '{name}' 内部id {id}, 被 {createdBy}创建\",\r\n      \"SHARED-WITH\": \"分享\",\r\n      \"PERMISSION\": \"许可\",\r\n      \"ACTIONS\": \"动作\",\r\n      \"IMPORT\": {\r\n        \"DROPZONE\": \"拖拽一个 .bpmn 或者 .bpmn20.xml BPMN XML 文件\",\r\n        \"CANCEL-UPLOAD\": \"取消上传\",\r\n        \"ERROR\": \"处理BPMN XML文件时出错\",\r\n        \"NO-DROP\": \"不支持拖放\"\r\n      }\r\n    },\r\n    \"ALERT\": {\r\n      \"EDIT-CONFIRM\": \"模型被更新\"\r\n    },\r\n    \"ERROR\": {\r\n      \"NOT-FOUND\": \"所请求的模型不存在\"\r\n    }\r\n  },\r\n\r\n  \"SUBPROCESS\": {\r\n    \"NAME\": \"子流程名称\",\r\n    \"DESCRIPTION\": \"描述信息\",\r\n    \"ACTION\": {\r\n      \"CREATE-CONFIRM\": \"创建一个子流程\"\r\n    },\r\n    \"POPUP\": {\r\n      \"CREATE-TITLE\": \"创建一个新的子流程\",\r\n      \"CREATE-DESCRIPTION\": \"您需要为新的子流程命名，并且您可能希望同时添加描述。\"\r\n    }\r\n  },\r\n\r\n  \"CASE\": {\r\n    \"NAME\": \"模型名称\",\r\n    \"KEY\": \"模型key\",\r\n    \"DESCRIPTION\": \"描述信息\",\r\n    \"VERSION-COMMENT\": \"版本注释\",\r\n    \"ACTION\": {\r\n      \"DETAILS\": \"显示详细信息\",\r\n      \"EDIT\": \"修改模型属性\",\r\n      \"DUPLICATE\": \"复制这个模型\",\r\n      \"EXPORT_CMMN\": \"导出到CMMN1.1\",\r\n      \"DELETE\": \"删除这个模型\",\r\n      \"CREATE-CONFIRM\": \"创建新模型\",\r\n      \"DUPLICATE-CONFIRM\": \"复制这个模型\",\r\n      \"OPEN-IN-EDITOR\": \"可视化编辑器\",\r\n      \"EDIT-CONFIRM\": \"保存\",\r\n      \"DELETE-CONFIRM\": \"删除case模型\",\r\n      \"USE-AS-NEW-VERSION\": \"作为新版本使用\",\r\n      \"FAVORITE\": \"喜欢这个模型\"\r\n    },\r\n    \"DETAILS\": {\r\n      \"HISTORY-TITLE\": \"历史\",\r\n      \"LAST-UPDATED-BY\": \"最后被 {lastUpdatedBy} - {lastUpdated | dateformat}更新\",\r\n      \"CREATED-BY\": \"被{createdBy}创建\",\r\n      \"NO-DESCRIPTION\": \"这个模型没有描述信息，可以通过修改模型来添加一个描述\"\r\n    },\r\n    \"POPUP\": {\r\n      \"CREATE-TITLE\": \"创建一个新的case模型\",\r\n      \"DUPLICATE-TITLE\": \"复制这个case模型\",\r\n      \"CREATE-DESCRIPTION\": \"您需要为新模型命名，并且您可以在这个操作中添加描述信息。\",\r\n      \"DUPLICATE-DESCRIPTION\": \"您可以更改新模型的名称，并且此时您可以更改描述信息。\",\r\n      \"EDIT-DESCRIPTION\": \"更改下面的任何模型属性，然后按下保存去更新模型。\",\r\n      \"DELETE-DESCRIPTION\": \"确实要删除进程流程吗 \\\"{name}\\\"?\",\r\n      \"EDIT-TITLE\":\"编辑模型详细信\",\r\n      \"DELETE-TITLE\": \"删除模型\",\r\n      \"DELETE-LOADING-RELATIONS\": \"检查模型使用...\",\r\n      \"DELETE-RELATIONS-DESCRIPTION-SINGLE\": \"无法删除此模型，因为另一个模型正在使用它:\",\r\n      \"DELETE-RELATIONS-DESCRIPTION\": \"无法删除此模型，因为另一个模型正在使用它:\",\r\n      \"DELETE-PROCESS-RELATION\": \"Case模型\",\r\n      \"DELETE-FORM-RELATION\": \"表单模型\",\r\n      \"DELETE-APP-RELATION\": \"App模型\",\r\n      \"IMPORT-DESCRIPTION\": \"请浏览或拖拽.cmmn 或者.cmmn.xml 扩展名的CMMN XML\",\r\n      \"IMPORT-TITLE\": \"导入一个case模型\",\r\n      \"USE-AS-NEW-TITLE\": \"作为一个新版本使用\",\r\n      \"USE-AS-NEW-DESCRIPTION\": \"您确定要使用 {version}版本 去创建一个关于 \\\"{name}\\\"的新版本?\",\r\n      \"USE-AS-NEW-UNRESOLVED-MODELS-ERROR\": \"无法完全恢复app模型到所选择的版本：由于一些引用的模型过去被删除而丢失。请相应地更新app模型。缺失模型:\",\r\n      \"USE-AS-NEW-UNRESOLVED-MODEL\": \"模型 '{name}' 内部id {id}, 被 {createdBy}创建\",\r\n      \"SHARED-WITH\": \"分享\",\r\n      \"PERMISSION\": \"许可\",\r\n      \"ACTIONS\": \"动作\",\r\n      \"IMPORT\": {\r\n        \"DROPZONE\": \"拖拽一个 .cmmn or .cmmn.xml CMMN XML文件\",\r\n        \"CANCEL-UPLOAD\": \"取消上传\",\r\n        \"ERROR\": \"处理CMMN XML文件时出错\",\r\n        \"NO-DROP\": \"不支持拖放\"\r\n      }\r\n    },\r\n    \"ALERT\": {\r\n      \"EDIT-CONFIRM\": \"模型被更新\"\r\n    },\r\n    \"ERROR\": {\r\n      \"NOT-FOUND\": \"所请求的模型不存在\"\r\n    }\r\n  },\r\n\r\n  \"FORM\": {\r\n    \"NAME\": \"表单名称\",\r\n    \"KEY\": \"表单key\",\r\n    \"DESCRIPTION\": \"描述\",\r\n    \"ACTION\": {\r\n      \"DETAILS\": \"显示详细信息\",\r\n      \"EDIT\": \"修改模型属性\",\r\n      \"DELETE\": \"复制这个表单\",\r\n      \"CREATE-CONFIRM\": \"创建新表单\",\r\n      \"DUPLICATE\": \"复制这个表单\",\r\n      \"DUPLICATE-CONFIRM\": \"复制这个表单\",\r\n      \"OPEN-IN-EDITOR\": \"表单编辑器\",\r\n      \"EDIT-CONFIRM\": \"保存\",\r\n      \"DELETE-CONFIRM\": \"删除表单\",\r\n      \"USE-AS-NEW-VERSION\": \"作为新版本使用\"\r\n\r\n    },\r\n    \"DETAILS\": {\r\n      \"HISTORY-TITLE\": \"历史\",\r\n      \"LAST-UPDATED-BY\": \"最后被{lastUpdatedBy} - {lastUpdated | dateformat}更新\",\r\n      \"CREATED-BY\": \"被{createdBy}创建\"\r\n    },\r\n\r\n    \"POPUP\": {\r\n      \"CREATE-TITLE\": \"创建一个新的表单\",\r\n      \"DUPLICATE-TITLE\": \"复制这个表单\",\r\n      \"CREATE-DESCRIPTION\": \"您需要为新表单命名，并且您可以在这个操作中添加描述信息。\",\r\n      \"DUPLICATE-DESCRIPTION\": \"您需要为新表单命名，并且您可以在这个操作中添加描述信息。\",\r\n      \"SAVE-FORM-TITLE\": \"保存表单\",\r\n      \"EDIT-DESCRIPTION\": \"更改下面的任何模型属性，然后按下保存去更新表单。\",\r\n      \"DELETE-DESCRIPTION\": \"确实要删除表单 \\\"{name}\\\"?\",\r\n      \"EDIT-TITLE\":\"编辑表单详细信息\",\r\n      \"DELETE-TITLE\": \"删除表单\",\r\n      \"USE-AS-NEW-TITLE\": \"作为一个新版本使用\",\r\n      \"USE-AS-NEW-VERSION\": \"作为一个新版本使用\",\r\n      \"USE-AS-NEW-DESCRIPTION\": \"您确定要使用 {version}版本 去创建一个关于 \\\"{name}\\\"的新版本?\",\r\n      \"USE-AS-NEW-UNRESOLVED-MODELS-ERROR\": \"无法完全恢复app模型到所选择的版本：由于一些引用的模型过去被删除而丢失。请相应地更新app模型。缺失模型:\",\r\n      \"USE-AS-NEW-UNRESOLVED-MODEL\": \"模型 '{name}' 内部id {id}, 被 {createdBy}创建\"\r\n    }\r\n  },\r\n\r\n  \"DECISION-TABLE\": {\r\n    \"NAME\": \"决策表 名称\",\r\n    \"KEY\": \"决策表 key\",\r\n    \"DESCRIPTION\": \"描述\",\r\n    \"VERSION-COMMENT\": \"版本注释\",\r\n    \"HIT-POLICY\": \"命中策略:\",\r\n    \"ACTION\": {\r\n      \"DETAILS\": \"显示详细信息\",\r\n      \"EDIT\": \"修改模型属性\",\r\n      \"SHARE\": \"分享决策表\",\r\n      \"DELETE\": \"删除决策表\",\r\n      \"ADD-COMMENT\": \"+ 添加评论\",\r\n      \"CREATE-CONFIRM\": \"创建新的决策表\",\r\n      \"OPEN-IN-EDITOR\": \"决策表编辑器\",\r\n      \"EXPORT\": \"Export 决策表\",\r\n      \"DELETE-CONFIRM\": \"删除决策表\",\r\n      \"USE-AS-NEW-VERSION\": \"作为新版本使用\",\r\n      \"FAVORITE\": \"喜欢这个决策表\",\r\n      \"DUPLICATE\": \"复制这个决策表\"\r\n    },\r\n    \"DETAILS\": {\r\n      \"HISTORY-TITLE\": \"历史\",\r\n      \"COMMENTS-TITLE\": \"评论\",\r\n      \"LAST-UPDATED-BY\": \"最后被{lastUpdatedBy} - {lastUpdated | dateformat}更新\",\r\n      \"CREATED-BY\": \"被{createdBy}创建\"\r\n    },\r\n    \"HIT-POLICIES\": {\r\n      \"FIRST\": \"First\",\r\n      \"ANY\": \"Any\",\r\n      \"UNIQUE\": \"Unique\",\r\n      \"PRIORITY\": \"Priority\",\r\n      \"RULE ORDER\": \"Rule Order\",\r\n      \"OUTPUT ORDER\": \"Output Order\",\r\n      \"COLLECT\": \"Collect\"\r\n    },\r\n    \"COLLECT-OPERATORS\": {\r\n      \"SUM\": \"和\",\r\n      \"MIN\": \"最小\",\r\n      \"MAX\": \"最大\",\r\n      \"COUNT\": \"总数\"\r\n    },\r\n    \"POPUP\": {\r\n      \"CREATE-TITLE\": \"创建一个新的决策表\",\r\n      \"CREATE-DESCRIPTION\": \"您需要为新决策表命名，并且您可以在这个操作中添加描述信息。\",\r\n      \"SAVE-DESCRIPTION\": \"您可以更改新决策表的名称，并且此时您可以更改描述信息。\",\r\n      \"DUPLICATE-TITLE\": \"复制决策表\",\r\n      \"DUPLICATE-DESCRIPTION\": \"您需要为新决策表命名，并且您可以在这个操作中添加描述信息。\",\r\n      \"DELETE-TITLE\": \"删除决策表\",\r\n      \"DELETE-DESCRIPTION\": \"确实要删除决策表 \\\"{name}\\\"?\",\r\n      \"SAVE-DECISION-TABLE-TITLE\": \"保存决策表\",\r\n      \"IMPORT-DESCRIPTION\": \"请浏览或拖拽.dmn or .dmn.xml扩展名的的 DMN XML文件\",\r\n      \"IMPORT-TITLE\": \"导入DMN模型\",\r\n      \"IMPORT\": {\r\n        \"DROPZONE\": \"拖拽一个 .dmn or .dmn.xml DMN XML文件\",\r\n        \"CANCEL-UPLOAD\": \"取消上传\",\r\n        \"ERROR\": \"处理DMN XML文件时出错\",\r\n        \"NO-DROP\": \"不支持拖放\"\r\n      },\r\n      \"USE-AS-NEW-TITLE\": \"作为一个新版本使用\",\r\n      \"USE-AS-NEW-VERSION\": \"作为一个新版本使用\",\r\n      \"USE-AS-NEW-DESCRIPTION\": \"您确定要使用 {version}版本 去创建一个关于 \\\"{name}\\\"的新版本?\",\r\n      \"USE-AS-NEW-UNRESOLVED-MODELS-ERROR\": \"无法完全恢复app模型到所选择的版本：由于一些引用的模型过去被删除而丢失。请相应地更新app模型。缺失模型:\",\r\n      \"USE-AS-NEW-UNRESOLVED-MODEL\": \"模型 '{name}' 内部id {id}, 被 {createdBy}创建\"\r\n    },\r\n    \"ALERT\": {\r\n      \"FAVORITE-CONFIRM\": \"喜欢这个决策表\",\r\n      \"UN-FAVORITE-CONFIRM\": \"这个决策表不再流行了\"\r\n    }\r\n  },\r\n\r\n  \"APP\": {\r\n    \"NAME\": \"App 定义名称\",\r\n    \"KEY\": \"App定义key\",\r\n    \"DESCRIPTION\": \"描述\",\r\n    \"ICON\": \"图标\",\r\n    \"THEME\": \"主题\",\r\n    \"GROUPS-ACCESS\": \"组访问，用逗号分隔\",\r\n    \"USERS-ACCESS\": \"用户访问，用逗号分隔\",\r\n    \"ACTION\": {\r\n      \"DETAILS\": \"显示详细信息\",\r\n      \"EDIT\": \"修改app定义属性\",\r\n      \"DUPLICATE\": \"复制这个应用\",\r\n      \"SHARE\": \"分享app定义\",\r\n      \"DELETE\": \"删除app定义\",\r\n      \"CREATE-CONFIRM\": \"创建新的app定义\",\r\n      \"DUPLICATE-CONFIRM\": \"复制这个app定义\",\r\n      \"DELETE-CONFIRM\": \"删除app定义\",\r\n      \"USE-AS-NEW-VERSION\": \"作为新版本使用\",\r\n      \"OPEN-IN-EDITOR\": \"App编辑器\",\r\n      \"PUBLISH\": \"发布\",\r\n      \"PUBLISH-CONFIRM\": \"发布app定义\",\r\n      \"SELECT-ICON\": \"修改图标...\",\r\n      \"SELECT-THEME\": \"修改主题...\",\r\n      \"EDIT-MODELS\": \"编辑包含的模型\",\r\n      \"EXPORT-ZIP\": \"将app定义导出为zip文件\",\r\n      \"EXPORT-BAR\": \"将app定义导出为可部署的bar文件\"\r\n\r\n    },\r\n    \"DETAILS\": {\r\n      \"TITLE\": \"App定义详细信息: {name}\",\r\n      \"HISTORY-TITLE\": \"历史\",\r\n      \"MODELS-TITLE\": \"app定义中包含的模型\",\r\n      \"LAST-UPDATED-BY\": \"最后被{lastUpdatedBy} - {lastUpdated | dateformat}更新\",\r\n      \"CREATED-BY\": \"被{createdBy}创建\",\r\n      \"NO-DESCRIPTION\": \"这个app定义没有描述信息，可以通过修改app定义来添加一个描述\",\r\n      \"NO-MODELS-SELECTED\": \"没有为这个app选择模型\"\r\n    },\r\n    \"TITLE\": {\r\n      \"SELECT-ICON\": \"选择应用图标\",\r\n      \"SELECT-THEME\": \"选择应用主题\",\r\n      \"PREVIEW\": \"预览\"\r\n\r\n    },\r\n    \"POPUP\": {\r\n      \"CREATE-TITLE\": \"创建新的应用程序定义\",\r\n      \"DUPLICATE-TITLE\": \"复制一个应用程序定义\",\r\n      \"SAVE-APP-TITLE\": \"保存应用程序定义\",\r\n      \"SAVE-APP-SAVE-SUCCESS\": \"保存的应用程序定义\",\r\n      \"CREATE-DESCRIPTION\": \"您需要为新的应用程序定义命名，并且您可以在这个操作中添加描述信息。\",\r\n      \"DUPLICATE-DESCRIPTION\": \"您需要为新的应用程序定义命名，并且您可以在这个操作中添加描述信息。\",\r\n      \"PUBLISH-TITLE\": \"发布应用程序定义\",\r\n      \"PUBLISH-DESCRIPTION\": \"您确定要发布应用程序定义 \\\"{name}\\\"? 注意这个应用程序定义将版本化，如果已经存在，则将更新工作流应用程序。\",\r\n      \"PUBLISH-FIELD\": \"发布？请注意，如果启用了发布，则将版本化此应用程序定义，如果已经存在，则将更新工作流应用程序。\",\r\n      \"PUBLISH-ERROR-PROCDEF-KEY-CONFLICT\": \"你的流程模型 \\\"{modelInAppName}\\\"具有相同的标识符\\\"{processDefinitionKey}\\\"作为已经存在的部署流程\\\"{conflictingModelName}\\\" ，关于这个app \\\"{conflictingAppName}\\\". 请修改这个 \\\"id\\\"流程模型的属性。\",\r\n      \"PUBLISH-ERROR-PROCESS-ALREADY-USED\": \"下面的流程模型已经在另一个应用程序中使用了。这样行吗？\",\r\n      \"PUBLISH-ERROR-PROCESS-ALREADY-USED-APP\": \"App\",\r\n      \"PUBLISH-ERROR-PROCDEF-DUPLICATE-KEYS\": \"无效的app: 找到重复的流程标识符 (修改这个非法的流程模型  \\\"id\\\"属性):\",\r\n      \"DELETE-TITLE\": \"删除应用程序定义\",\r\n      \"DELETE-DESCRIPTION\": \"确实要删除应用程序定义 \\\"{name}\\\"?\",\r\n      \"DELETE-DESCRIPTION-WITH-RUNTIME\": \"确实要删应用程序定义 \\\"{name}\\\"? 注意，这个应用程序定义已经部署到任务landing页面，并且通过确认，该应用程序将从任务应用程序landing页面中删除。\",\r\n      \"DELETE-CASCADE-FALSE\": \"只删除当前版本的应用程序定义 (v{version})\",\r\n      \"DELETE-CASCADE-TRUE\": \"也删除所有以前的版本应用程序定义\",\r\n      \"HAS-CUSTOM-STENCILITEM\" : \"模型 \\\"{modelName}\\\" 使用带有自定义模板项目的模板. 在这个模型中使用这个模型是不可能的.\",\r\n      \"HAS-VALIDATIONERROR\" : \"模型 \\\"{modelName}\\\"  有验证错误，不能添加到应用程序定义.在编辑器中打开模型以查看关于验证错误的更多细节。\",\r\n      \"IMPORT-DESCRIPTION\":\"请使用.zip扩展的应用程序定义浏览或拖拽一个\",\r\n      \"IMPORT-TITLE\":\"导入应用程序定义模型\",\r\n      \"IMPORT\": {\r\n        \"DROPZONE\": \"扩拽一个.zip 应用程序定义文件\",\r\n        \"CANCEL-UPLOAD\": \"取消上传\",\r\n        \"RENEWIDM-IDS\": \"Renew the user and group identifiers when importing step and BPMN models. This is often required when importing the 应用程序定义 into a different Flowable environment. It will try to link the human steps and user tasks to the right user and group in this target environment.\",\r\n        \"ERROR\": \"处理应用程序定义文件时出错\",\r\n        \"NO-DROP\": \"不支持拖放\"\r\n      },\r\n      \"INCLUDE-MODELS-TITLE\": \"包含在应用程序定义中的模型\"\r\n    },\r\n    \"ALERT\": {\r\n      \"DELETE-CONFIRM\": \"应用程序定义删除了\",\r\n      \"PUBLISH-CONFIRM\": \"应用程序定义已经被发布了\",\r\n      \"PUBLISH-ERROR\": \"不能发布应用程序定义. 请检查引用的流程模型的有效性。\"\r\n    }\r\n  },\r\n\r\n  \"SHARE-INFO\": {\r\n    \"ACTION\": {\r\n      \"ADD\": \"添加另一个人\"\r\n    }\r\n  },\r\n\r\n  \"FORM-BUILDER\": {\r\n    \"PALLETTE\": {\r\n      \"TEXT\": \"Text\",\r\n      \"MULTILINE-TEXT\": \"Multiline text\",\r\n      \"PASSWORD\": \"Password\",\r\n      \"NUMBER\": \"Number\",\r\n      \"CHECKBOX\": \"Checkbox\",\r\n      \"DATE\": \"Date\",\r\n      \"DROPDOWN\": \"Dropdown\",\r\n      \"RADIO\": \"Radio buttons\",\r\n      \"PEOPLE\": \"People\",\r\n      \"GROUP-OF-PEOPLE\": \"Group of people\",\r\n      \"UPLOAD\": \"Upload\",\r\n      \"EXPRESSION\": \"Expression\",\r\n      \"DECIMAL\": \"Decimal\",\r\n      \"HYPERLINK\": \"Hyperlink\",\r\n      \"SPACER\": \"Spacer\",\r\n      \"HORIZONTAL-LINE\": \"Horizontal line\",\r\n      \"HEADLINE\": \"Headline\",\r\n      \"HEADLINE-WITH-LINE\":\"Headline\"\r\n    },\r\n    \"TABS\": {\r\n      \"GENERAL\": \"General\",\r\n      \"OPTIONS\": \"Options\",\r\n      \"UPLOAD-OPTIONS\": \"Upload options\",\r\n      \"ADVANCED-OPTIONS\":\"Advanced\"\r\n    },\r\n    \"VERSION\": \"Version {version}\",\r\n    \"LAST-UPDATED\": \"Last updated by {lastUpdatedBy}, {lastUpdated | dateformat}\",\r\n    \"TITLE\": {\r\n      \"DESIGN\": \"Design\",\r\n      \"OUTCOME\": \"Outcomes\"\r\n    },\r\n    \"POPUP\": {\r\n      \"EDIT-TITLE\": \"Edit field '{name}'\",\r\n      \"EXPRESSION-TITLE\": \"Edit expression\"\r\n    },\r\n    \"MESSAGE\": {\r\n      \"EMPTY-EXPRESSION\": \"(No expression value)\",\r\n      \"EXPRESSION-HELP\": \"You can also display values previously submitted in any form, as part of the text, by referencing them using a notation as follows ${myFieldId}.\",\r\n      \"OPTIONS-EXPRESSION-HELP\": \"You can use an expression to dynamically populate options for example by referencing a variable like this ${optionsVariable}. The expression needs to result in either a java object (java.util.List with Option objects) or its json representation.\"\r\n    },\r\n    \"LABEL\" : {\r\n      \"FUNCTIONAL-GROUP\": \"Select group..\",\r\n      \"PERSON\": \"Select person..\"\r\n    },\r\n    \"COMPONENT\": {\r\n      \"LABEL\": \"Label:\",\r\n      \"OVERRIDEID\": \"Override id?\",\r\n      \"ID\": \"Id:\",\r\n      \"PLACEHOLDER\": \"Placeholder:\",\r\n      \"OPTIONS\": \"Options\",\r\n      \"RADIO-BUTTON-DEFAULT\": \"Option 1\",\r\n      \"DROPDOWN-DEFAULT-EMPTY-SELECTION\": \"Please choose one...\",\r\n      \"DROPDOWN-EMPTY-VALUE-HELP\": \"This is the 'empty value' option. Selecting this at runtime is the taken to mean 'no value' or 'empty'.  This is allowed for optional fields, but not allowed for required fields.\",\r\n      \"OPTIONS-EXPRESSION\": \"Options expression:\",\r\n      \"OPTIONS-EXPRESSION-ENABLED\": \"Enable options expression\",\r\n      \"REQUIRED\": \"Required\",\r\n      \"READONLY\": \"Read-only\",\r\n      \"EXPRESSION\": \"Expression\",\r\n      \"ADD-OPTION\": \"+ Add a new option\",\r\n      \"UPLOAD-ALLOW-MULTIPLE\": \"Allow uploading multiple files\",\r\n      \"SIZE\": \"Size\",\r\n      \"MAX-LENGTH\":\"Maximum length:\",\r\n      \"MIN-LENGTH\":\"Minimum length:\",\r\n      \"PASSWORD-UNMASK-OPTION\": \"password masking/unmasking option\",\r\n      \"HYPERLINK-URL\": \"Hyperlink URL\",\r\n      \"REGEX-PATTERN\":\"Regex standard\",\r\n      \"MASK\":{\r\n        \"TITLE\":\"Input mask\",\r\n        \"EXAMPLES\":{\r\n          \"TITLE\":\"Examples:\",\r\n          \"NUMBER\":\"Any number\",\r\n          \"LETTER\":\"Any letter\",\r\n          \"NUMBERORLETTER\":\"Any letter or number\",\r\n          \"OPTIONAL\":\"Make mask optional (not valid)\",\r\n          \"PHONE\":\"Phone\"\r\n        }\r\n      }\r\n    },\r\n    \"OUTCOMES\": {\r\n      \"DESCRIPTION\": \"You can define multiple outcomes for this task. When completing a task, the users selects one of the available outcomes, which can be used in eg. a condition further on in the process.\",\r\n      \"NO-OUTCOMES-OPTION\": \"Don't use custom outcomes, only show a 'Complete' button.\",\r\n      \"OUTCOMES-OPTION\": \"Use custom outcomes for this form.\",\r\n      \"POSSIBLE-OUTCOMES\": \"Possible outcomes\",\r\n      \"NEW-OUTCOME-PLACEHOLDER\": \"Enter new outcome\",\r\n      \"ADD\": \"Add outcome\",\r\n      \"REMOVE\": \"Remove\"\r\n    }\r\n  },\r\n\r\n  \"DECISION-TABLE-EDITOR\": {\r\n    \"EMPTY-MESSAGES\": {\r\n      \"NO-VARIABLE-SELECTED\": \"未定义\"\r\n    },\r\n    \"POPUP\": {\r\n      \"EXPRESSION-EDITOR\": {\r\n        \"INPUT-TITLE\": \"编辑输入列\",\r\n        \"INPUT-DESCRIPTION\": \"选择输入变量作为列的输入\",\r\n        \"OUTPUT-TITLE\": \"编辑输出列\",\r\n        \"OUTPUT-DESCRIPTION\": \"选择一个现有的输出变量或创建一个新的变量\",\r\n        \"EXPRESSION-LABEL\": \"列标签:\",\r\n        \"EXPRESSION-PLACEHOLDER\": \"输入可选标签\",\r\n        \"EXPRESSION-VARIABLE-NAME\": \"变量名称:\",\r\n        \"EXPRESSION-VARIABLE-TYPE\": \"变量类型:\",\r\n        \"EXPRESSION-VARIABLE-NAME-PLACEHOLDER\": \"输入变量名\",\r\n        \"OUTPUT-NEW-VARIABLE-ID\": \"变量ID:\",\r\n        \"OUTPUT-NEW-VARIABLE-TYPE\": \"变量类型:\",\r\n        \"COMPLEX-EXPRESSION-LABEL\": \"复杂表达式:\",\r\n        \"ALLOWED-VALUES\": \"允许值（可选）:\",\r\n        \"OUTPUT-VALUES\": \"输出值\",\r\n        \"OUTPUT-VALUES-OPTIONAL\": \"(可选):\",\r\n        \"OUTPUT-VALUES-NOT-OPTIONAL\": \"(为优先级/输出顺序拖动行):\"\r\n      }\r\n    },\r\n    \"BUTTON-ACTIONS-LABEL\": \"动作\",\r\n    \"BUTTON-ADD-INPUT-LABEL\": \"添加输入\",\r\n    \"BUTTON-ADD-OUTPUT-LABEL\": \"添加输出\",\r\n    \"BUTTON-ADD-RULE-LABEL\": \"添加规则\",\r\n    \"BUTTON-MOVE-RULE-UPWARDS-LABEL\": \"向上移动\",\r\n    \"BUTTON-MOVE-RULE-DOWNWARDS-LABEL\": \"向下移动\",\r\n    \"BUTTON-REMOVE-RULE-LABEL\": \"移除规则\",\r\n    \"ALERT\": {\r\n      \"EXPRESSION-VARIABLE-REQUIRED-ERROR\": \"所有输入和输出表达式都必须引用表单字段或变量。\",\r\n      \"SAVE-CONFIRM\": \"保存决策表'{name}'\"\r\n    }\r\n  },\r\n\r\n  \"TOUR\": {\r\n    \"WELCOME-TITLE\": \"欢迎, {userName}\",\r\n    \"WELCOME-CONTENT\": \"这是一个短暂的flowable编辑器. 接下来的几个步骤将指导您通过应用程序的不同部分来启动。按ESC键随时停止。\" ,\r\n    \"PALETTE-TITLE\": \"调色板\",\r\n    \"PALETTE-CONTENT\": \"在这里可以找到创建业务流程的所有可用构成。它们是按逻辑组排列的。只需点击它就可以打开一组:\",\r\n    \"CANVAS-TITLE\": \"画布\",\r\n    \"CANVAS-CONTENT\": \"这是创建业务流程的工作空间。从左侧的调色板中拖动元素，并将它们放在画布上以开始建模\",\r\n    \"DRAGDROP-TITLE\": \"拖放示例\",\r\n    \"DRAGDROP-CONTENT\": \"下面是一个如何开始建模的例子:\",\r\n    \"PROPERTIES-TITLE\": \"属性\",\r\n    \"PROPERTIES-CONTENT\": \"在这里您可以配置业务流程构造的属性。只需选择画布上的项目，它的属性就会显示出来。如果要编辑该属性，请单击该属性。\",\r\n    \"TOOLBAR-TITLE\": \"工具栏\",\r\n    \"TOOLBAR-CONTENT\": \"可以在这里找到所有的动作：保存或验证模型, 复制和粘贴一个流程的部分, 等等. 在按钮上悬停以此获得对动作的描述信息.\",\r\n    \"END-TITLE\": \"终点\",\r\n    \"END-CONTENT\": \"就是这样！现在可以开始建模过程。如果你有任何问题，请联系开发者。\"\r\n  },\r\n\r\n  \"FEATURE-TOUR\" : {\r\n    \"BENDPOINT\" : {\r\n      \"TITLE\": \"教程\",\r\n      \"DESCRIPTION\" : \"当使用连线流将流程按照步骤彼此连接的时候，您可能会发现，这些连线彼此交叉，或者您希望以不同的方式排列它们。这样做, 可以向连线添加或移除一个弯曲点。<br/><br/>如下图所示，你首先应该点击 '添加弯曲点' 然后单击连线添加它。注意，连线将在绿色中显示一个微妙的指示，以显示可以在那里添加弯曲点。<br/><br/>删除一个弯曲点再次遵循类似的模式: 点击 '移除弯曲点' 按钮 ，然后点击弯曲点再次移除。\"\r\n    }\r\n  },\r\n\r\n  \"ACTION.OK\" : \"Ok\",\r\n  \"ACTION.SAVE\" : \"保存\",\r\n  \"ACTION.SAVE-AND-CLOSE\" : \"保存和关闭编辑器\",\r\n  \"ACTION.SEND\" : \"发送\",\r\n  \"ACTION.CANCEL\" : \"取消\",\r\n  \"ACTION.SELECT\" : \"选择\",\r\n  \"ACTION.ADD\" : \"添加\",\r\n  \"ACTION.REMOVE\" : \"移除\",\r\n  \"ACTION.MOVE.UP\" : \"移动入口\",\r\n  \"ACTION.MOVE.DOWN\" : \"向下移动\",\r\n\r\n  \"TOOLBAR.ACTION.CLOSE\" : \"关闭编辑器并返回到概览页面\",\r\n  \"TOOLBAR.ACTION.SAVE\" : \"保存模型\",\r\n  \"TOOLBAR.ACTION.VALIDATE\" : \"验证模型\",\r\n  \"TOOLBAR.ACTION.CUT\" : \"剪切 (在业务流程中选择一个或多个元素)\",\r\n  \"TOOLBAR.ACTION.COPY\" : \"拷贝 (在业务流程中选择一个或多个元素)\",\r\n  \"TOOLBAR.ACTION.PASTE\" : \"粘贴\",\r\n  \"TOOLBAR.ACTION.DELETE\" : \"删除选定元素\",\r\n  \"TOOLBAR.ACTION.UNDO\" : \"撤消\",\r\n  \"TOOLBAR.ACTION.REDO\" : \"重做\",\r\n  \"TOOLBAR.ACTION.ZOOMIN\" : \"放大\",\r\n  \"TOOLBAR.ACTION.ZOOMOUT\" : \"缩小\",\r\n  \"TOOLBAR.ACTION.ZOOMACTUAL\" : \"缩放到实际尺寸\",\r\n  \"TOOLBAR.ACTION.ZOOMFIT\" : \"缩放到适当大小\",\r\n  \"TOOLBAR.ACTION.BENDPOINT.ADD\" : \"向选定的连线添加弯曲点\",\r\n  \"TOOLBAR.ACTION.BENDPOINT.REMOVE\" : \"向选定的连线移除弯曲点\",\r\n  \"TOOLBAR.ACTION.ALIGNHORIZONTAL\" : \"水平对齐\",\r\n  \"TOOLBAR.ACTION.ALIGNVERTICAL\" : \"垂直对齐\",\r\n  \"TOOLBAR.ACTION.SAMESIZE\" : \"相同大小\",\r\n  \"TOOLBAR.ACTION.HELP\": \"开始导游\",\r\n  \"TOOLBAR.ACTION.FEEDBACK\": \"提供反馈\",\r\n\r\n  \"FORM_TOOLBAR.ACTION.SAVE\" : \"保存模型\",\r\n\r\n  \"APP_DEFINITION_TOOLBAR.ACTION.SAVE\" : \"保存应用程序定义\",\r\n\r\n  \"BUTTON.ACTION.DELETE.TOOLTIP\": \"从模型中删除元素\",\r\n  \"BUTTON.ACTION.MORPH.TOOLTIP\": \"更改元素类型\",\r\n\r\n  \"ELEMENT.AUTHOR\" : \"作者\",\r\n  \"ELEMENT.DATE_CREATED\" : \"创建日期\",\r\n\r\n  \"PROPERTY.REMOVED\" : \"移除\",\r\n  \"PROPERTY.EMPTY\" : \"没有值\",\r\n  \"PROPERTY.PROPERTY.EDIT.TITLE\" : \"更改值为\",\r\n\r\n  \"PROPERTY.FEEDBACK.TITLE\" : \"请填写您的反馈意见\",\r\n\r\n  \"PROPERTY.ASSIGNMENT.TITLE\" : \"分配\",\r\n  \"PROPERTY.ASSIGNMENT.TYPE\" : \"类型\",\r\n  \"PROPERTY.ASSIGNMENT.TYPE.IDENTITYSTORE\" : \"身份存储\",\r\n  \"PROPERTY.ASSIGNMENT.TYPE.STATIC\" : \"固定值\",\r\n  \"PROPERTY.ASSIGNMENT.ASSIGNEE\" : \"分配\",\r\n  \"PROPERTY.ASSIGNMENT.MATCHING\" : \"使用 ↑ 和 ↓选择并按Enter确认或使用鼠标\",\r\n  \"PROPERTY.ASSIGNMENT.ASSIGNEE_PLACEHOLDER\" : \"输入分配人\",\r\n  \"PROPERTY.ASSIGNMENT.EMPTY\" : \"没有选择分配人\",\r\n  \"PROPERTY.ASSIGNMENT.NONE\" : \"没有 ...\",\r\n  \"PROPERTY.ASSIGNMENT.PLACEHOLDER-SEARCHUSER\": \"搜索用户\",\r\n  \"PROPERTY.ASSIGNMENT.PLACEHOLDER-SEARCHGROUP\": \"搜索组\",\r\n  \"PROPERTY.ASSIGNMENT.SEARCH\": \"搜索: \",\r\n  \"PROPERTY.ASSIGNMENT.ASSIGNEE_DISPLAY\" : \"分配人 {assignee}\",\r\n  \"PROPERTY.ASSIGNMENT.CANDIDATE_USERS_DISPLAY\" : \"{length} 候选用户\",\r\n  \"PROPERTY.ASSIGNMENT.CANDIDATE_USERS\" : \"候选用户\",\r\n  \"PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS_DISPLAY\" :  \"{length} 候选组\",\r\n  \"PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS\" :  \"候选组\",\r\n  \"PROPERTY.ASSIGNMENT.USER_IDM_DISPLAY\": \"用户 {firstName} {lastName}\",\r\n  \"PROPERTY.ASSIGNMENT.USER_IDM_EMAIL_DISPLAY\": \"用户 {email}\",\r\n  \"PROPERTY.ASSIGNMENT.USER_IDM_FIELD_DISPLAY\": \"字段 {name}\",\r\n  \"PROPERTY.ASSIGNMENT.IDM_EMPTY\" : \"流程发起人\",\r\n  \"PROPERTY.ASSIGNMENT.IDM.TYPE\" : \"分配\",\r\n  \"PROPERTY.ASSIGNMENT.IDM.NO_CANDIDATE_USERS\" : \"没有选择候选人...\",\r\n  \"PROPERTY.ASSIGNMENT.IDM.NO_CANDIDATE_GROUPS\" : \"没有选择候选组...\",\r\n  \"PROPERTY.ASSIGNMENT.IDM.DROPDOWN.INITIATOR\" : \"分配给流程发起人\",\r\n  \"PROPERTY.ASSIGNMENT.IDM.DROPDOWN.USER\" : \"分配给单个用户\",\r\n  \"PROPERTY.ASSIGNMENT.IDM.DROPDOWN.USERS\" : \"候选用户\",\r\n  \"PROPERTY.ASSIGNMENT.IDM.DROPDOWN.GROUPS\" : \"候选组\",\r\n  \"PROPERTY.ASSIGNMENT.INITIATOR-CAN-COMPLETE\" : \"允许流程发起人完成任务\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.DISPLAY\" : \"{length} 执行监听器\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.EMPTY\" : \"没有配置执行监听器\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.EVENT\" : \"事件\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.CLASS\" : \"类\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.CLASS.PLACEHOLDER\" : \"输入一个类名\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.EXPRESSION\" : \"表达式\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.EXPRESSION.PLACEHOLDER\" : \"输入一个表达式\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.DELEGATEEXPRESSION\" : \"委托表达式\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.DELEGATEEXPRESSION.PLACEHOLDER\" : \"输入一个委托表达式\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.UNSELECTED\" : \"没有选择执行监听器\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.NAME\" : \"名称\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.NAME.PLACEHOLDER\" : \"输入一个名称\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.EXPRESSION\" : \"表达式\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.EXPRESSION.PLACEHOLDER\" : \"输入一个表达式\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.STRINGVALUE\" : \"字符串值\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.STRINGVALUE.PLACEHOLDER\" : \"输入一个字符串值\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.STRING\" : \"字符串\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.STRING.PLACEHOLDER\" : \"输入一个字符串\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.IMPLEMENTATION\" : \"实现\",\r\n  \"PROPERTY.EXECUTIONLISTENERS.FIELDS.EMPTY\" : \"未选择字段\",\r\n\r\n  \"PROPERTY.FIELDS\" : \"{length} 字段\",\r\n  \"PROPERTY.FIELDS.EMPTY\" : \"未选择字段\",\r\n  \"PROPERTY.FIELDS.NAME\" : \"名称\",\r\n  \"PROPERTY.FIELDS.NAME.PLACEHOLDER\" : \"输入一个名称\",\r\n  \"PROPERTY.FIELDS.EXPRESSION\" : \"表达式\",\r\n  \"PROPERTY.FIELDS.EXPRESSION.PLACEHOLDER\" : \"输入一个表达式\",\r\n  \"PROPERTY.FIELDS.STRINGVALUE\" : \"字符串值\",\r\n  \"PROPERTY.FIELDS.STRINGVALUE.PLACEHOLDER\" : \"输入一个字符串值\",\r\n  \"PROPERTY.FIELDS.STRING\" : \"字符串\",\r\n  \"PROPERTY.FIELDS.STRING.PLACEHOLDER\" : \"输入一个字符串\",\r\n  \"PROPERTY.FIELDS.IMPLEMENTATION\" : \"实现\",\r\n\r\n  \"PROPERTY.DATAPROPERTIES.VALUES\" : \"{length} data objects\",\r\n  \"PROPERTY.DATAPROPERTIES.EMPTY\" : \"没有配置data objects\",\r\n  \"PROPERTY.DATAPROPERTIES.ID\" : \"Id\",\r\n  \"PROPERTY.DATAPROPERTIES.ID.PLACEHOLDER\" : \"输入一个id\",\r\n  \"PROPERTY.DATAPROPERTIES.NAME\" : \"名称\",\r\n  \"PROPERTY.DATAPROPERTIES.NAME.PLACEHOLDER\" : \"输入一个名称\",\r\n  \"PROPERTY.DATAPROPERTIES.TYPE\" : \"类型\",\r\n  \"PROPERTY.DATAPROPERTIES.VALUE.PLACEHOLDER\" : \"输入一个值 (可选)\",\r\n  \"PROPERTY.DATAPROPERTIES.VALUE\" : \"默认值\",\r\n\r\n  \"PROPERTY.FORMPROPERTIES.VALUE\" : \"{length} 表单属性\",\r\n  \"PROPERTY.FORMPROPERTIES.EMPTY\" : \"没有选择表单属性\",\r\n  \"PROPERTY.FORMPROPERTIES.ID\" : \"Id\",\r\n  \"PROPERTY.FORMPROPERTIES.ID.PLACEHOLDER\" : \"输入一个id\",\r\n  \"PROPERTY.FORMPROPERTIES.NAME\" : \"名称\",\r\n  \"PROPERTY.FORMPROPERTIES.NAME.PLACEHOLDER\" : \"输入一个名称\",\r\n  \"PROPERTY.FORMPROPERTIES.TYPE\" : \"类型\",\r\n  \"PROPERTY.FORMPROPERTIES.DATEPATTERN\" : \"日期格式\",\r\n  \"PROPERTY.FORMPROPERTIES.DATEPATTERN.PLACEHOLDER\" : \"输入日期格式\",\r\n  \"PROPERTY.FORMPROPERTIES.VALUES\" : \"值\",\r\n  \"PROPERTY.FORMPROPERTIES.ENUMVALUES.EMPTY\" : \"未选择枚举值\",\r\n  \"PROPERTY.FORMPROPERTIES.VALUES.ID\" : \"Id\",\r\n  \"PROPERTY.FORMPROPERTIES.VALUES.NAME\" : \"名称\",\r\n  \"PROPERTY.FORMPROPERTIES.VALUES.ID.PLACEHOLDER\" : \"输入id值\",\r\n  \"PROPERTY.FORMPROPERTIES.VALUES.NAME.PLACEHOLDER\" : \"输入名称值\",\r\n  \"PROPERTY.FORMPROPERTIES.EXPRESSION\" : \"表达式\",\r\n  \"PROPERTY.FORMPROPERTIES.EXPRESSION.PLACEHOLDER\" : \"输入一个表达式\",\r\n  \"PROPERTY.FORMPROPERTIES.VARIABLE\" : \"变量\",\r\n  \"PROPERTY.FORMPROPERTIES.VARIABLE.PLACEHOLDER\" : \"输入一个变量\",\r\n  \"PROPERTY.FORMPROPERTIES.REQUIRED\" : \"必须的\",\r\n  \"PROPERTY.FORMPROPERTIES.READABLE\" : \"可读的\",\r\n  \"PROPERTY.FORMPROPERTIES.WRITABLE\" : \"可写的\",\r\n\r\n  \"PROPERTY.INPARAMETERS.VALUE\" : \"{length} in-parameters\",\r\n  \"PROPERTY.INPARAMETERS.EMPTY\" : \"没有配置in-parameters \",\r\n\r\n  \"PROPERTY.OUTPARAMETERS.VALUE\" : \"{length} out-parameters\",\r\n  \"PROPERTY.OUTPARAMETERS.EMPTY\" : \"没有配置out-parameters\",\r\n\r\n  \"PROPERTY.PARAMETER.SOURCE\" : \"源\",\r\n  \"PROPERTY.PARAMETER.SOURCE.PLACEHOLDER\" : \"输入一个源\",\r\n  \"PROPERTY.PARAMETER.SOURCEEXPRESSION\" : \"源表达式\",\r\n  \"PROPERTY.PARAMETER.SOURCEEXPRESSION.PLACEHOLDER\" : \"输入一个源表达式\",\r\n  \"PROPERTY.PARAMETER.TARGET\" : \"目标\",\r\n  \"PROPERTY.PARAMETER.TARGET.PLACEHOLDER\" : \"输入一个目标\",\r\n  \"PROPERTY.PARAMETER.EMPTY\" : \"没有选择参数\",\r\n\r\n  \"PROPERTY.PROCESSREFERENCE.EMPTY\" : \"没有选择引用\",\r\n  \"PROPERTY.PROCESSREFERENCE.TITLE\" : \"流程参考\",\r\n  \"PROPERTY.PROCESSREFERENCE.ERROR.PROCESS\" : \"加载流程出错。稍后再试一次\",\r\n  \"PROPERTY.PROCESSREFERENCE.PROCESS.LOADING\" : \"加载流程...\",\r\n  \"PROPERTY.PROCESSREFERENCE.PROCESS.EMPTY\" : \"此文件夹不包含流程\",\r\n\r\n  \"PROPERTY.FORMREFERENCE.EMPTY\" : \"没有选择参考\",\r\n  \"PROPERTY.FORMREFERENCE.TITLE\" : \"表单引用\",\r\n  \"PROPERTY.FORMREFERENCE.DESCRIPTION\" : \"引用表单\",\r\n  \"PROPERTY.FORMREFERENCE.ERROR.FORM\" : \"加载表单出错。稍后再试一次\",\r\n  \"PROPERTY.FORMREFERENCE.FORM.LOADING\" : \"加载表单...\",\r\n  \"PROPERTY.FORMREFERENCE.FORM.EMPTY\" : \"此文件夹不包含表单\",\r\n\r\n  \"PROPERTY.TASKLISTENERS.VALUE\" : \"{length}任务监听器\",\r\n  \"PROPERTY.TASKLISTENERS.EMPTY\" : \"没有配置任务监听器\",\r\n  \"PROPERTY.TASKLISTENERS.EVENT\" : \"事件\",\r\n  \"PROPERTY.TASKLISTENERS.CLASS\" : \"类\",\r\n  \"PROPERTY.TASKLISTENERS.CLASS.PLACEHOLDER\" : \"输入一个类名\",\r\n  \"PROPERTY.TASKLISTENERS.EXPRESSION\" : \"表达式\",\r\n  \"PROPERTY.TASKLISTENERS.EXPRESSION.PLACEHOLDER\" : \"输入一个表达式\",\r\n  \"PROPERTY.TASKLISTENERS.DELEGATEEXPRESSION\" : \"委托表达式\",\r\n  \"PROPERTY.TASKLISTENERS.DELEGATEEXPRESSION.PLACEHOLDER\" : \"输入一个委托表达式\",\r\n  \"PROPERTY.TASKLISTENERS.UNSELECTED\" : \"没有选择任务监听器\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.NAME\" : \"名称\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.NAME.PLACEHOLDER\" : \"输入一个名称\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.EXPRESSION\" : \"表达式\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.EXPRESSION.PLACEHOLDER\" : \"输入一个表达式\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.STRINGVALUE\" : \"字符串值\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.STRINGVALUE.PLACEHOLDER\" : \"输入一个字符串值\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.STRING\" : \"字符串\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.STRING.PLACEHOLDER\" : \"输入一个字符串\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.IMPLEMENTATION\" : \"实现\",\r\n  \"PROPERTY.TASKLISTENERS.FIELDS.EMPTY\" : \"没有选择字段\",\r\n\r\n  \"PROPERTY.EVENTLISTENERS.DISPLAY\" : \"{length} 事件监听器\",\r\n  \"PROPERTY.EVENTLISTENERS.EMPTY\" : \"没有配置事件监听器\",\r\n  \"PROPERTY.EVENTLISTENERS.EVENTS\": \"事件\",\r\n  \"PROPERTY.EVENTLISTENERS.RETHROW\": \"Rethrow event?\",\r\n  \"PROPERTY.EVENTLISTENERS.CLASS\" : \"类\",\r\n  \"PROPERTY.EVENTLISTENERS.CLASS.PLACEHOLDER\" : \"输入一个类名\",\r\n  \"PROPERTY.EVENTLISTENERS.DELEGATEEXPRESSION\" : \"委托表达式\",\r\n  \"PROPERTY.EVENTLISTENERS.DELEGATEEXPRESSION.PLACEHOLDER\" : \"输入一个委托表达式\",\r\n  \"PROPERTY.EVENTLISTENERS.ENTITYTYPE\" : \"实体类型\",\r\n  \"PROPERTY.EVENTLISTENERS.ENTITYTYPE.PLACEHOLDER\" : \"输入一个实体类型\",\r\n  \"PROPERTY.EVENTLISTENERS.RETHROWTYPE\": \"Rethrow event type\",\r\n  \"PROPERTY.EVENTLISTENERS.ERRORCODE\" : \"错误码\",\r\n  \"PROPERTY.EVENTLISTENERS.ERRORCODE.PLACEHOLDER\" : \"输入一个错误码\",\r\n  \"PROPERTY.EVENTLISTENERS.MESSAGENAME\" : \"消息名称\",\r\n  \"PROPERTY.EVENTLISTENERS.MESSAGENAME.PLACEHOLDER\" : \"输入一个消息名称\",\r\n  \"PROPERTY.EVENTLISTENERS.SIGNALNAME\" : \"信号名称\",\r\n  \"PROPERTY.EVENTLISTENERS.SIGNALNAME.PLACEHOLDER\" : \"输入信号名称\",\r\n  \"PROPERTY.EVENTLISTENERS.UNSELECTED\" : \"没有选择事件监听器\",\r\n\r\n  \"PROPERTY.SIGNALDEFINITIONS.DISPLAY\" : \"{length} 信号定义\",\r\n  \"PROPERTY.SIGNALDEFINITIONS.EMPTY\" : \"没有配置信号定义\",\r\n  \"PROPERTY.SIGNALDEFINITIONS.SCOPE-GLOBAL\": \"全局\",\r\n  \"PROPERTY.SIGNALDEFINITIONS.SCOPE-PROCESSINSTANCE\": \"流程实例\",\r\n  \"PROPERTY.SIGNALDEFINITIONS.ID\" : \"Id\",\r\n  \"PROPERTY.SIGNALDEFINITIONS.NAME\" : \"名称\",\r\n  \"PROPERTY.SIGNALDEFINITIONS.SCOPE\" : \"Scope\",\r\n\r\n  \"PROPERTY.MESSAGEDEFINITIONS.DISPLAY\" : \"{length} 消息定义\",\r\n  \"PROPERTY.MESSAGEDEFINITIONS.EMPTY\" : \"没有配置消息定义\",\r\n  \"PROPERTY.MESSAGEDEFINITIONS.ID\" : \"Id\",\r\n  \"PROPERTY.MESSAGEDEFINITIONS.NAME\" : \"名称\",\r\n\r\n  \"PROPERTY.SEQUENCEFLOW.ORDER.EMPTY\" : \"没有确定连线的顺序\",\r\n  \"PROPERTY.SEQUENCEFLOW.ORDER.NOT.EMPTY\" : \"设置连线的顺序\",\r\n  \"PROPERTY.SEQUENCEFLOW.ORDER.NO.OUTGOING.SEQUENCEFLOW.FOUND\" : \"没有发现流出连线.\",\r\n  \"PROPERTY.SEQUENCEFLOW.ORDER.DESCRIPTION\" : \"设置需要评估连线的顺序:\",\r\n  \"PROPERTY.SEQUENCEFLOW.ORDER.SEQUENCEFLOW.VALUE\" : \"连线到 {targetType} {targetTitle}\",\r\n\r\n  \"PROPERTY.SEQUENCEFLOW.CONDITION.TITLE\" : \"连线条件\",\r\n  \"PROPERTY.SEQUENCEFLOW.CONDITION.STATIC\" : \"条件表达式\",\r\n  \"PROPERTY.SEQUENCEFLOW.CONDITION.NO-CONDITION-DISPLAY\": \"没有设置条件\",\r\n\r\n  \"PROPERTY.DUEDATE.EMPTY\" : \"没有到期\",\r\n  \"PROPERTY.DUEDATE.DEFINED\" : \"定义到期日\",\r\n  \"PROPERTY.DUEDATE.TITLE\" : \"到期日\",\r\n  \"PROPERTY.DUEDATE.EXPRESSION-LABEL\" : \"到期日表达式\",\r\n  \"PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.NO-DUEDATE\" : \"没有到期日\",\r\n  \"PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.EXPRESSION\" : \"表达式定义\",\r\n  \"PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.STATIC\" : \"任务创建后的固定持续时间\",\r\n  \"PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.FIELD\" : \"基于字段\",\r\n\r\n  \"MODEL.SAVE.TITLE\" : \"保存模型\",\r\n  \"MODEL.VALIDATE.TITLE\" : \"验证结果\",\r\n  \"MODEL.NAME\" : \"名称\",\r\n  \"MODEL.KEY\" : \"Key\",\r\n  \"MODEL.DESCRIPTION\" : \"描述\",\r\n  \"MODEL.SAVE.NEWVERSION\" : \"将此保存为新版本？这意味着你可以回到以前的版本。\",\r\n  \"MODEL.SAVE.COMMENT\" : \"评论\",\r\n  \"MODEL.SAVE.SAVING\" : \"正在保存模型\",\r\n  \"MODEL.LASTMODIFIEDDATE\" : \"最后保存\",\r\n  \"MODEL.SAVE.ERROR\": \"Unexpected error: 不能保存模型\",\r\n  \"MODEL.VALIDATIONERRORS\": \" 注意，模型包含验证错误。这意味着该模型在当前状态下不能部署在Flowable引擎上。\",\r\n  \"MODEL.CONFLICT.WRITE\": \"不能保存模型: '{userFullName}'对该模型进行了更改\",\r\n  \"MODEL.CONFLICT.WRITE.OPTIONS\": \"选择一个选项来解决此冲突:\",\r\n  \"MODEL.CONFLICT.WRITE.OPTION.OVERWRITE\": \"覆盖其他模型\",\r\n  \"MODEL.CONFLICT.WRITE.OPTION.DISCARDCHANGES\": \"放弃我的改变\",\r\n  \"MODEL.CONFLICT.WRITE.OPTION.SAVEAS\": \"保存为新模型\",\r\n  \"MODEL.CONFLICT.WRITE.OPTION.NEWVERSION\": \"创建新版本\",\r\n  \"MODEL.CONFLICT.SAVEAS\" : \"另存为:\",\r\n\r\n  \"EVENT_TYPE.ACTIVITY.COMPENSATE.TOOLTIP\": \"一项活动将作为对另一活动的补偿而被执行。事件针对即将执行的活动进行补偿。\",\r\n  \"EVENT_TYPE.ACTIVITY.COMPLETED.TOOLTIP\": \"一项活动已圆满完成。\",\r\n  \"EVENT_TYPE.ACTIVITY.ERROR.RECEIVED.TOOLTIP\": \"活动已接收到错误事件。在活动接收到实际错误之前发送\",\r\n  \"EVENT_TYPE.MEMBERSHIP.CREATED.TOOLTIP\": \"创建了新的membership\",\r\n  \"EVENT_TYPE.MEMBERSHIP.DELETED.TOOLTIP\": \"单个membership已被删除\",\r\n  \"EVENT_TYPE.MEMBERSHIPS.DELETED.TOOLTIP\": \"相关组中的所有成员已被删除。由于可能的原因，个别事件不会被派遣。\",\r\n  \"EVENT_TYPE.TASK.ASSIGNED.TOOLTIP\": \"一个任务已经被分配人了。这将抛出一个 ENTITY_UPDATED 事件\",\r\n  \"EVENT_TYPE.TASK.COMPLETED.TOOLTIP\": \"一个任务已经被完成。在删除任务实体之前调度\",\r\n  \"EVENT_TYPE.UNCAUGHT.BPMNERROR.TOOLTIP\": \"当BPMN错误被抛出，但未在流程中捕获时\",\r\n  \"EVENT_TYPE.VARIABLE.CREATED.TOOLTIP\": \"已经创建了一个新的变量\",\r\n  \"EVENT_TYPE.VARIABLE.DELETED.TOOLTIP\": \"已删除现有变量\",\r\n  \"EVENT_TYPE.VARIABLE.UPDATED.TOOLTIP\": \"已更新现有变量\",\r\n\r\n  \"PROPERTY.DECISIONTABLEREFERENCE.EMPTY\" : \"没有选择引用\",\r\n  \"PROPERTY.DECISIONTABLEREFERENCE.TITLE\" : \"决策表引用\",\r\n  \"PROPERTY.DECISIONTABLEREFERENCE.ERROR.FORM\" : \"加载决策表出现错误. 稍后再试一次\",\r\n  \"PROPERTY.DECISIONTABLEREFERENCE.DECISIONTABLE.LOADING\" : \"加载决策表...\",\r\n  \"PROPERTY.DECISIONTABLEREFERENCE.DECISIONTABLE.EMPTY\" : \"此文件夹不包含任何决策表\",\r\n\r\n  \"PROPERTY.CASEREFERENCE.EMPTY\" : \"没有选择引用\",\r\n  \"PROPERTY.CASEREFERENCE.TITLE\" : \"Case模型引用\",\r\n  \"PROPERTY.CASEREFERENCE.ERROR.FORM\" : \"加载case模型时出错。稍后再试一次\",\r\n  \"PROPERTY.CASEREFERENCE.CASE.LOADING\" : \"加载case模型...\",\r\n  \"PROPERTY.CASEREFERENCE.CASE.EMPTY\" : \"此文件夹不包含任何case模型\",\r\n\r\n  \"PROPERTY.PACKAGEA\": {\r\n\r\n  }\r\n}\r\n","import Vue from 'vue'\r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty\r\n\r\nexport function noop () {}\r\n\r\nexport function hasOwn (obj, key) {\r\n  return hasOwnProperty.call(obj, key)\r\n}\r\n\r\nfunction extend (to, _from) {\r\n  for (let key in _from) {\r\n    to[key] = _from[key]\r\n  }\r\n  return to\r\n}\r\n\r\nexport function toObject (arr) {\r\n  var res = {}\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if (arr[i]) {\r\n      extend(res, arr[i])\r\n    }\r\n  }\r\n  return res\r\n}\r\n\r\nexport const getValueByPath = function (object, prop) {\r\n  prop = prop || ''\r\n  const paths = prop.split('.')\r\n  let current = object\r\n  let result = null\r\n  for (let i = 0, j = paths.length; i < j; i++) {\r\n    const path = paths[i]\r\n    if (!current) break\r\n\r\n    if (i === j - 1) {\r\n      result = current[path]\r\n      break\r\n    }\r\n    current = current[path]\r\n  }\r\n  return result\r\n}\r\n\r\nexport function getPropByPath (obj, path, strict) {\r\n  let tempObj = obj\r\n  path = path.replace(/\\[(\\w+)\\]/g, '.$1')\r\n  path = path.replace(/^\\./, '')\r\n\r\n  let keyArr = path.split('.')\r\n  let i = 0\r\n  for (let len = keyArr.length; i < len - 1; ++i) {\r\n    if (!tempObj && !strict) break\r\n    let key = keyArr[i]\r\n    if (key in tempObj) {\r\n      tempObj = tempObj[key]\r\n    } else {\r\n      if (strict) {\r\n        throw new Error('please transfer a valid prop path to form item!')\r\n      }\r\n      break\r\n    }\r\n  }\r\n  return {\r\n    o: tempObj,\r\n    k: keyArr[i],\r\n    v: tempObj ? tempObj[keyArr[i]] : null\r\n  }\r\n}\r\n\r\nexport const generateId = function () {\r\n  return Math.floor(Math.random() * 10000)\r\n}\r\n\r\nexport const valueEquals = (a, b) => {\r\n  // see: https://stackoverflow.com/questions/3115982/how-to-check-if-two-arrays-are-equal-with-javascript\r\n  if (a === b) return true\r\n  if (!(a instanceof Array)) return false\r\n  if (!(b instanceof Array)) return false\r\n  if (a.length !== b.length) return false\r\n  for (let i = 0; i !== a.length; ++i) {\r\n    if (a[i] !== b[i]) return false\r\n  }\r\n  return true\r\n}\r\n\r\nexport const escapeRegexpString = (value = '') => String(value).replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')\r\n\r\n// TODO: use native Array.find, Array.findIndex when IE support is dropped\r\nexport const arrayFindIndex = function (arr, pred) {\r\n  for (let i = 0; i !== arr.length; ++i) {\r\n    if (pred(arr[i])) {\r\n      return i\r\n    }\r\n  }\r\n  return -1\r\n}\r\n\r\nexport const arrayFind = function (arr, pred) {\r\n  const idx = arrayFindIndex(arr, pred)\r\n  return idx !== -1 ? arr[idx] : undefined\r\n}\r\n\r\n// coerce truthy value to array\r\nexport const coerceTruthyValueToArray = function (val) {\r\n  if (Array.isArray(val)) {\r\n    return val\r\n  } else if (val) {\r\n    return [val]\r\n  } else {\r\n    return []\r\n  }\r\n}\r\n\r\nexport const isIE = function () {\r\n  return !Vue.prototype.$isServer && !isNaN(Number(document.documentMode))\r\n}\r\n\r\nexport const isEdge = function () {\r\n  return !Vue.prototype.$isServer && navigator.userAgent.indexOf('Edge') > -1\r\n}\r\n\r\nexport const autoprefixer = function (style) {\r\n  if (typeof style !== 'object') return style\r\n  const rules = ['transform', 'transition', 'animation']\r\n  const prefixes = ['ms-', 'webkit-']\r\n  rules.forEach(rule => {\r\n    const value = style[rule]\r\n    if (rule && value) {\r\n      prefixes.forEach(prefix => {\r\n        style[prefix + rule] = value\r\n      })\r\n    }\r\n  })\r\n  return style\r\n}\r\n","import { hasOwn } from './util'\r\n\r\nconst RE_NARGS = /(%|)\\{([0-9a-zA-Z_]+)\\}/g\r\n/**\r\n *  String format template\r\n *  - Inspired:\r\n *    https://github.com/Matt-Esch/string-template/index.js\r\n */\r\nexport default function (Vue) {\r\n\r\n  /**\r\n   * template\r\n   *\r\n   * @param {String} string\r\n   * @param {Array} ...args\r\n   * @return {String}\r\n   */\r\n\r\n  function template (string, ...args) {\r\n    if (!string) return ''\r\n    if (args.length === 1 && typeof args[0] === 'object') {\r\n      args = args[0]\r\n    }\r\n\r\n    if (!args || !args.hasOwnProperty) {\r\n      args = {}\r\n    }\r\n\r\n    console.log(11, string, args)\r\n    return string.replace(RE_NARGS, (match, prefix, i, index) => {\r\n      let result\r\n\r\n      if (string[index - 1] === '{' &&\r\n        string[index + match.length] === '}') {\r\n        return i\r\n      } else {\r\n        result = hasOwn(args, i) ? args[i] : null\r\n        if (result === null || result === undefined) {\r\n          return ''\r\n        }\r\n\r\n        return result\r\n      }\r\n    })\r\n  }\r\n\r\n  return template\r\n}\r\n","import defaultLang from 'src/locale/lang/zh-CN'\r\nimport Vue from 'vue'\r\nimport deepmerge from 'deepmerge'\r\nimport Format from './format'\r\n\r\nconst format = Format(Vue)\r\nlet lang = defaultLang\r\nlet merged = false\r\n\r\nlet i18nHandler = function () {\r\n  const vuei18n = Object.getPrototypeOf(this || Vue).$t\r\n  if (typeof vuei18n === 'function' && !!Vue.locale) {\r\n    if (!merged) {\r\n      merged = true\r\n      Vue.locale(\r\n        Vue.config.lang,\r\n        deepmerge(lang, Vue.locale(Vue.config.lang) || {}, { clone: true })\r\n      )\r\n    }\r\n    return vuei18n.apply(this, arguments)\r\n  }\r\n}\r\n\r\nexport const t = function (path, options) {\r\n  let value = i18nHandler.apply(this, arguments)\r\n  if (value !== null && value !== undefined) return value\r\n\r\n  const array = path.split('.')\r\n  let current = lang\r\n\r\n  for (let i = 0, j = array.length; i < j; i++) {\r\n    const property = array[i]\r\n    value = current[property]\r\n    if (i === j - 1) return format(value, options)\r\n    if (!value) return ''\r\n    current = value\r\n  }\r\n  return ''\r\n}\r\n\r\nexport const use = function (l) {\r\n  lang = l || lang\r\n}\r\n\r\nexport const i18n = function (fn) {\r\n  i18nHandler = fn || i18nHandler\r\n}\r\n\r\nexport default { use, t, i18n }\r\n","import { t } from 'src/locale'\r\n\r\nexport default {\r\n  methods: {\r\n    t (...args) {\r\n      return t.apply(this, args)\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"subheader editor-toolbar\" id=\"editor-header\">\r\n    <div class=\"btn-group\">\r\n      <div class=\"btn-toolbar pull-left\">\r\n        <button v-for=\"(item, index) in items\"\r\n                :key=\"item.id\"\r\n                :id=\"item.id\"\r\n                class=\"btn btn-inverse\"\r\n                :class=\"{'separator': item.type == 'separator'}\"\r\n                :disabled=\"item.type == 'separator' || item.enabled == false\"\r\n                @click=\"toolbarButtonClicked(index)\">\r\n          <i v-if=\"item.type == 'button'\"\r\n             :class=\"item.cssClass\"\r\n             class=\"toolbar-button\" data-toggle=\"tooltip\" :title=\"t(item.title)\"></i>\r\n          <div v-if=\"item.type == 'separator'\" :class=\"item.cssClass\"></div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"btn-group pull-right\" v-show=\"secondaryItems.length > 0\">\r\n      <div class=\"btn-toolbar pull-right\">\r\n        <button v-for=\"(item, index) in secondaryItems\"\r\n                :key=\"item.id\"\r\n                :id=\"item.id\"\r\n                :title=\"t(item.title)\"\r\n                class=\"btn btn-inverse\" :class=\"{'separator': item.type == 'separator'}\"\r\n                :disabled=\"item.type == 'separator'\"\r\n                @click=\"toolbarSecondaryButtonClicked(index)\">\r\n          <i v-if=\"item.type == 'button'\" :class=\"item.cssClass\" class=\"toolbar-button\"\r\n             data-toggle=\"tooltip\" :title=\"t(item.title)\"></i>\r\n          <div v-if=\"item.type == 'separator'\" :class=\"item.cssClass\"></div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <el-dialog\r\n        :title=\"t('MODEL.SAVE.TITLE')\"\r\n        :visible=\"saveVisible\"\r\n        append-to-body\r\n        @close=\"close\"\r\n        width=\"60%\">\r\n      <div class=\"modal-body\">\r\n        <div v-if=\"saveDialog.errorMessage && saveDialog.errorMessage.length > 0\" class=\"alert error\"\r\n             style=\"font-size: 14px; margin-top:20px\">\r\n          <div class=\"popup-error\" style=\"font-size: 14px\">\r\n            <span class=\"glyphicon glyphicon-remove-circle\"></span>\r\n            <span>{{saveDialog.errorMessage}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"nameField\">{{t('MODEL.NAME')}}</label>\r\n          <input type=\"text\"\r\n                 :disabled=\"saveLoading || (error && error.conflictResolveAction == 'saveAs')\"\r\n                 id=\"nameField\"\r\n                 class=\"form-control\"\r\n                 v-model=\"saveDialog.name\"\r\n                 v-focus/>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"keyField\">{{t('MODEL.KEY')}}</label>\r\n          <input type=\"text\"\r\n                 :disabled=\"saveLoading || (error && error.conflictResolveAction == 'saveAs')\"\r\n                 id=\"keyField\"\r\n                 class=\"form-control\"\r\n                 v-model=\"saveDialog.key\"/>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"docTextArea\">{{t('MODEL.DESCRIPTION')}}</label>\r\n          <textarea id=\"docTextArea\" :disabled=\"saveLoading\" class=\"form-control\"\r\n                    v-model=\"saveDialog.description\"></textarea>\r\n        </div>\r\n\r\n        <div class=\"checkbox\" v-show=\"!error\">\r\n          <label>\r\n            <input type=\"checkbox\" :disabled=\"saveLoading\" v-model=\"saveDialog.newVersion\">\r\n            {{t('MODEL.SAVE.NEWVERSION')}}\r\n          </label>\r\n        </div>\r\n\r\n        <div class=\"form-group\" v-if=\"saveDialog.newVersion\">\r\n          <label for=\"commentTextArea\">{{t('MODEL.SAVE.COMMENT')}}</label>\r\n          <textarea id=\"commentTextArea\" class=\"form-control\" v-model=\"saveDialog.comment\"\r\n                    :disabled=\"saveLoading\"></textarea>\r\n        </div>\r\n\r\n        <div v-if=\"saveDialog.validationErrors\" class=\"alert error\" style=\"font-size: 14px; margin-top:20px\">\r\n\r\n          <div class=\"popup-error\" style=\"font-size: 14px\">\r\n            <span class=\"glyphicon glyphicon-remove-circle\"></span>\r\n            <span>{{t('MODEL.VALIDATIONERRORS')}}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <!--<div v-if=\"error && error.isConflict && !saveLoading\" class=\"alert error\"-->\r\n        <!--style=\"font-size: 14px; margin-top:20px\">-->\r\n\r\n        <!--<div class=\"popup-error\" style=\"font-size: 14px\">-->\r\n        <!--<span class=\"glyphicon glyphicon-remove-circle\"></span>-->\r\n        <!--<span>{{t('MODEL.CONFLICT.WRITE')}}</span>-->\r\n        <!--</div>-->\r\n\r\n        <!--<div>-->\r\n\r\n        <!--<div style=\"font-size: 14px; margin-bottom: 10px\">{{t('MODEL.CONFLICT.WRITE.OPTIONS')}}</div>-->\r\n        <!--<div class=\"btn-group\" data-toggle=\"buttons\">-->\r\n        <!--<label class=\"btn btn-danger\"-->\r\n        <!--@click=\"error.conflictResolveAction = 'overwrite'\">-->\r\n        <!--<input type=\"radio\" name=\"options\" id=\"option1\">-->\r\n        <!--{{t('MODEL.CONFLICT.WRITE.OPTION.OVERWRITE')}}-->\r\n        <!--</label>-->\r\n        <!--<label class=\"btn btn-danger\"-->\r\n        <!--@click=\"error.conflictResolveAction = 'discardChanges'\">-->\r\n        <!--<input type=\"radio\" name=\"options\" id=\"option2\">-->\r\n        <!--{{t('MODEL.CONFLICT.WRITE.OPTION.DISCARDCHANGES')}}-->\r\n        <!--</label>-->\r\n        <!--<label class=\"btn btn-danger\"-->\r\n        <!--@click=\"error.conflictResolveAction = 'saveAs'\">-->\r\n        <!--<input type=\"radio\" name=\"options\" id=\"option3\" :disabled=\"account.type != 'enterprise'\">-->\r\n        <!--{{t('MODEL.CONFLICT.WRITE.OPTION.SAVEAS')}}-->\r\n        <!--</label>-->\r\n        <!--<label class=\"btn btn-danger\"-->\r\n        <!--@click=\"error.conflictResolveAction = 'newVersion'\">-->\r\n        <!--<input type=\"radio\" name=\"options\" id=\"optio43\">-->\r\n        <!--{{t('MODEL.CONFLICT.WRITE.OPTION.NEWVERSION')}}-->\r\n        <!--</label>-->\r\n        <!--</div>-->\r\n\r\n        <!--<div v-if=\"error.conflictResolveAction == 'saveAs'\" style=\"margin-top: 10px\">-->\r\n        <!--<span>{{t('MODEL.CONFLICT.SAVEAS')}}</span>-->\r\n        <!--<input type=\"text\" v-model=\"error.saveAs\" style=\"width: 300px\" v-focus>-->\r\n        <!--</div>-->\r\n        <!--</div>-->\r\n\r\n        <!--</div>-->\r\n\r\n      </div>\r\n\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <div class=\"popup-error\" v-if=\"error && !error.isConflict\">\r\n          <span>{{t('MODEL.SAVE.ERROR')}}</span>\r\n        </div>\r\n        <div>\r\n          <el-button @click=\"close\" :disabled=\"saveLoading\">{{t('ACTION.CANCEL')}}</el-button>\r\n          <el-button type=\"primary\" @click=\"saveAndClose\" v-show=\"!error\"\r\n                     :disabled=\"saveLoading || saveDialog.name.length == 0 || saveDialog.key.length == 0\">\r\n            {{t('ACTION.SAVE-AND-CLOSE')}}\r\n          </el-button>\r\n          <el-button type=\"primary\" @click=\"save\" v-show=\"!error\"\r\n                     :disabled=\"saveLoading || saveDialog.name.length == 0 || saveDialog.key.length == 0\">\r\n            {{t('ACTION.SAVE')}}\r\n          </el-button>\r\n          <el-button type=\"primary\" @click=\"okClicked\" v-show=\"error && error.isConflict\"\r\n                     :disabled=\"isOkButtonDisabled()\">\r\n            {{t('ACTION.OK')}}\r\n          </el-button>\r\n        </div>\r\n\r\n  </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Mousetrap from 'mousetrap'\r\n  import ORYX_CONFIG from 'src/oryx/CONFIG'\r\n  import Locale from 'src/mixins/locale'\r\n\r\n  export default {\r\n    name: 'toolbar',\r\n    data () {\r\n      return {\r\n        undoStack: [],\r\n        redoStack: [],\r\n        saveVisible: false,\r\n        description: '',\r\n        saveLoading: false,\r\n        saveDialog: {\r\n          name: '',\r\n          key: '',\r\n          errorMessage: []\r\n        },\r\n        account: {},\r\n        error: null\r\n      }\r\n    },\r\n    mixins: [Locale],\r\n    props: {\r\n      editor: {},\r\n      editorManager: {}\r\n    },\r\n    computed: {\r\n      items () {\r\n        return this.editorManager ? this.editorManager.getToolbarItems() : []\r\n      },\r\n      secondaryItems () {\r\n        return this.editorManager ? this.editorManager.getSecondaryItems() : []\r\n      }\r\n    },\r\n    mounted () {\r\n      this.MousetrapBind()\r\n    },\r\n    methods: {\r\n      executeFunctionByName (functionName, context) {\r\n        let namespaces = functionName.split('.')\r\n        let func = namespaces.pop()\r\n        return this.editorManager.TOOLBAR_ACTIONS[func](context)\r\n\r\n        // const args = Array.prototype.slice.call(arguments).splice(2)\r\n        // let namespaces = functionName.split('.')\r\n        // let func = namespaces.pop()\r\n        // for (let i = 1; i < namespaces.length; i++) {\r\n        //   context = context[namespaces[i]]\r\n        // }\r\n        // return context[func].apply(this, args)\r\n      },\r\n      toolbarButtonClicked (buttonIndex) {\r\n        if (buttonIndex === 0) {\r\n          this.saveVisible = true\r\n          return\r\n        }\r\n        // Default behaviour\r\n        let buttonClicked = this.items[buttonIndex]\r\n        let services = {\r\n          '$scope': this,\r\n          '$rootScope': this.$parent,\r\n          'editorManager': this.editorManager\r\n        }\r\n        this.executeFunctionByName(buttonClicked.action, services)\r\n\r\n        // Other events\r\n        let event = {\r\n          type: ORYX_CONFIG.EVENT_TYPE_TOOLBAR_BUTTON_CLICKED,\r\n          toolbarItem: buttonClicked\r\n        }\r\n        this.editorManager.dispatchFlowEvent(event.type, event)\r\n      },\r\n      toolbarSecondaryButtonClicked (buttonIndex) {\r\n        let buttonClicked = this.secondaryItems[buttonIndex]\r\n        let services = {\r\n          'this': this,\r\n          'editorManager': this.editorManager\r\n        }\r\n        this.executeFunctionByName(buttonClicked.action, services)\r\n      },\r\n      MousetrapBind () {\r\n        /* Key bindings */\r\n        Mousetrap.bind('mod+z', () => {\r\n          const services = { '$scope': this, 'editorManager': this.editorManager }\r\n          this.editorManager.TOOLBAR_ACTIONS.undo(services)\r\n          return false\r\n        })\r\n\r\n        Mousetrap.bind('mod+y', () => {\r\n          const services = { '$scope': this, 'editorManager': this.editorManager }\r\n          this.editorManager.TOOLBAR_ACTIONS.redo(services)\r\n          return false\r\n        })\r\n\r\n        Mousetrap.bind('mod+c', () => {\r\n          const services = { '$scope': this, 'editorManager': this.editorManager }\r\n          this.editorManager.TOOLBAR_ACTIONS.copy(services)\r\n          return false\r\n        })\r\n\r\n        Mousetrap.bind('mod+v', () => {\r\n          const services = { '$scope': this, 'editorManager': this.editorManager }\r\n          this.editorManager.TOOLBAR_ACTIONS.paste(services)\r\n          return false\r\n        })\r\n\r\n        Mousetrap.bind(['del'], () => {\r\n          const services = { '$scope': this, 'editorManager': this.editorManager }\r\n          this.editorManager.TOOLBAR_ACTIONS.deleteItem(services)\r\n          return false\r\n        })\r\n      },\r\n      registerOnEvent () {\r\n        // 捕获所有执行的命令并将它们存储在各自的堆栈上\r\n        this.editorManager.registerOnEvent(ORYX_CONFIG.EVENT_EXECUTE_COMMANDS, (evt) => {\r\n          // If the event has commands\r\n          if (!evt.commands) return\r\n\r\n          this.undoStack.push(evt.commands)\r\n          this.redoStack = []\r\n\r\n          for (let i = 0; i < this.items.length; i++) {\r\n            let item = this.items[i]\r\n            if (item.action === 'FLOWABLE.TOOLBAR.ACTIONS.undo') {\r\n              item.enabled = true\r\n            } else if (item.action === 'FLOWABLE.TOOLBAR.ACTIONS.redo') {\r\n              item.enabled = false\r\n            }\r\n          }\r\n\r\n          // Update\r\n          this.editorManager.getCanvas().update()\r\n          this.editorManager.updateSelection()\r\n        })\r\n      },\r\n      saveAndClose () {\r\n        this.save(() => {\r\n          if (this.editorManager.getStencilData()) {\r\n            const stencilNameSpace = this.editorManager.getStencilData().namespace\r\n            if (stencilNameSpace !== undefined && stencilNameSpace !== null && stencilNameSpace.indexOf('cmmn1.1') !== -1) {\r\n              // $location.path('/casemodels')\r\n              console.log('/casemodels')\r\n              return\r\n            }\r\n          }\r\n          // $location.path('/processes')\r\n          console.log('/processes')\r\n        })\r\n      },\r\n      save (successCallback) {\r\n        if (!this.saveDialog.name || this.saveDialog.name.length === 0 ||\r\n          !this.saveDialog.key || this.saveDialog.key.length === 0) {\r\n          return\r\n        }\r\n\r\n        // Indicator spinner image\r\n        this.saveLoading = true\r\n\r\n        this.modelMetaData.name = this.saveDialog.name\r\n        this.modelMetaData.key = this.saveDialog.key\r\n        this.modelMetaData.description = this.saveDialog.description\r\n\r\n        let json = this.editorManager.getModel()\r\n\r\n        let params = {\r\n          modeltype: this.modelMetaData.model.modelType,\r\n          json_xml: JSON.stringify(json),\r\n          name: this.saveDialog.name,\r\n          key: this.saveDialog.key,\r\n          description: this.saveDialog.description,\r\n          newversion: this.saveDialog.newVersion,\r\n          comment: this.saveDialog.comment,\r\n          lastUpdated: this.modelMetaData.lastUpdated\r\n        }\r\n\r\n        if (this.error && this.error.isConflict) {\r\n          params.conflictResolveAction = this.error.conflictResolveAction\r\n          if (this.error.conflictResolveAction === 'saveAs') {\r\n            params.saveAs = this.error.saveAs\r\n          }\r\n        }\r\n\r\n        // Update\r\n        console.log('$http', params)\r\n        // $http({\r\n        //   method: 'POST',\r\n        //   data: params,\r\n        //   ignoreErrors: true,\r\n        //   headers: {\r\n        //     'Accept': 'application/json',\r\n        //     'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n        //   },\r\n        //   transformRequest: function (obj) {\r\n        //     var str = []\r\n        //     for (var p in obj) {\r\n        //       str.push(encodeURIComponent(p) + '=' + encodeURIComponent(obj[p]))\r\n        //     }\r\n        //     return str.join('&')\r\n        //   },\r\n        //   url: FLOWABLE.URL.putModel(this.modelMetaData.modelId)\r\n        // })\r\n        //   .success(function (data, status, headers, config) {\r\n        //     this.editorManager.handleEvents({\r\n        //       type: ORYX_CONFIG.EVENT_SAVED\r\n        //     })\r\n        //     this.modelData.name = this.saveDialog.name\r\n        //     this.modelData.key = this.saveDialog.key\r\n        //     this.modelData.lastUpdated = data.lastUpdated\r\n        //\r\n        //     this.status.loading = false\r\n        //     this.$hide()\r\n        //\r\n        //     // Fire event to all who is listening\r\n        //     var saveEvent = {\r\n        //       type: FLOWABLE.eventBus.EVENT_TYPE_MODEL_SAVED,\r\n        //       model: params,\r\n        //       modelId: this.modelMetaData.modelId,\r\n        //       eventType: 'update-model'\r\n        //     }\r\n        //     FLOWABLE.eventBus.dispatch(FLOWABLE.eventBus.EVENT_TYPE_MODEL_SAVED, saveEvent)\r\n        //\r\n        //     // Reset state\r\n        //     this.error = undefined\r\n        //     this.status.loading = false\r\n        //\r\n        //     // Execute any callback\r\n        //     if (successCallback) {\r\n        //       successCallback()\r\n        //     }\r\n        //\r\n        //   })\r\n        //   .error(function (data, status, headers, config) {\r\n        //     if (status == 409) {\r\n        //       this.error = {}\r\n        //       this.error.isConflict = true\r\n        //       this.error.userFullName = data.customData.userFullName\r\n        //       this.error.isNewVersionAllowed = data.customData.newVersionAllowed\r\n        //       this.error.saveAs = this.modelMetaData.name + '_2'\r\n        //     } else {\r\n        //       this.error = undefined\r\n        //       this.saveDialog.errorMessage = data.message\r\n        //     }\r\n        //     this.status.loading = false\r\n        //   })\r\n      },\r\n      isOkButtonDisabled () {\r\n        if (this.saveLoading) {\r\n          return false\r\n        } else if (this.error && this.error.conflictResolveAction) {\r\n          if (this.error.conflictResolveAction === 'saveAs') {\r\n            return !this.error.saveAs || this.error.saveAs.length === 0\r\n          } else {\r\n            return false\r\n          }\r\n        }\r\n        return true\r\n      },\r\n      okClicked () {\r\n        if (this.error) {\r\n          if (this.error.conflictResolveAction === 'discardChanges') {\r\n            this.close()\r\n            window.location.reload()\r\n          } else if (this.error.conflictResolveAction === 'overwrite'\r\n            || this.error.conflictResolveAction === 'newVersion') {\r\n            this.save()\r\n          } else if (this.error.conflictResolveAction === 'saveAs') {\r\n            this.save(() => {\r\n              this.ignoreChanges = true  // Otherwise will get pop up that changes are not saved.\r\n              if (this.editorManager.getStencilData()) {\r\n                let stencilNameSpace = this.editorManager.getStencilData().namespace\r\n                if (stencilNameSpace !== undefined && stencilNameSpace !== null && stencilNameSpace.indexOf('cmmn1.1') !== -1) {\r\n                  // $location.path('/casemodels')\r\n                  console.log('/casemodels2')\r\n                  return\r\n                }\r\n              }\r\n              // $location.path('/processes')\r\n              console.log('/processes2')\r\n            })\r\n          }\r\n        }\r\n      },\r\n      close () {\r\n        this.saveVisible = false\r\n      },\r\n      safeApply: function (fn) {\r\n        if (this.$root) {\r\n          let phase = this.$root.$$phase\r\n          if (phase === '$apply' || phase === '$digest') {\r\n            if (fn && (typeof(fn) === 'function')) {\r\n              fn()\r\n            }\r\n          } else {\r\n            // this.$apply(fn);\r\n          }\r\n\r\n        } else {\r\n          // this.$apply(fn);\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      editorManager (nv, ov) {\r\n        if (!ov) {\r\n          this.registerOnEvent()\r\n          this.modelMetaData = this.editorManager.getBaseModelData()\r\n          if (this.modelMetaData.description) {\r\n            this.description = this.modelMetaData.description\r\n          }\r\n          this.saveDialog = {\r\n            'name': this.modelMetaData.name,\r\n            'key': this.modelMetaData.key,\r\n            'description': this.description,\r\n            'newVersion': false,\r\n            'comment': ''\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=156c84ba&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"156c84ba\",\n  null\n  \n)\n\nexport default component.exports","import editorToolbar from './src/main.vue'\r\n\r\neditorToolbar.install = function (Vue) {\r\n  Vue.component(editorToolbar.name, editorToolbar)\r\n}\r\n\r\nexport default editorToolbar\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"paletteHelpWrapper\",attrs:{\"id\":\"paletteHelpWrapper\"}},[_c('div',{staticClass:\"stencils\",attrs:{\"id\":\"paletteSection\"}},[(_vm.stencilItemGroups.length > 1)?_c('div',_vm._l((_vm.stencilItemGroups),function(group,index){return _c('div',{key:group.name},[(group.visible && group.items)?_c('ul',{staticClass:\"stencil-group\",class:{collapsed: !group.expanded, 'first': index == 0}},[_c('li',[_c('stencil-item-template',{attrs:{\"group\":group,\"editorManager\":_vm.editorManager},on:{\"expandedToggle\":function($event){return _vm.expandedToggle(group)}}})],1)]):_vm._e(),(!group.items)?_c('div',[_c('root-stencil-item-template',{attrs:{\"group\":group}})],1):_vm._e()])}),0):_vm._e(),(_vm.stencilItemGroups.length == 1)?_c('div',[_c('ul',{staticClass:\"stencil-group\"},_vm._l((_vm.stencilItemGroups[0].paletteItems),function(item){return _c('li',{key:item.id,staticClass:\"stencil-item\",attrs:{\"id\":item.id,\"title\":item.description,\"data-drag\":\"true\",\"jqyoui-draggable\":\"{onStart:'startDragCallback', onDrag:'dragCallback'}\",\"data-jqyoui-options\":\"{revert: 'invalid', helper: 'clone', opacity : 0.5}\"}},[_c('img',{attrs:{\"src\":require((\"@/assets/images/bpmn2.0/icons/\" + (item.icon))),\"width\":\"16px;\",\"height\":\"16px;\"}}),(!item.customIcon)?_c('img',{attrs:{\"width\":\"16px;\",\"height\":\"16px;\",\"src\":require((\"@/assets/images/bpmn2.0/icons/\" + (item.icon)))}}):_vm._e(),_vm._v(\"\\n          \"+_vm._s(_vm._f(\"translate\")(item.name))+\"\\n        \")])}),0)]):_vm._e()]),_c('div',{attrs:{\"id\":\"process-treeview-wrapper\"}},[_c('div',{staticClass:\"process-treeview-header\"},[_vm._v(\"\\n      Process Navigator\\n    \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEditorReady),expression:\"isEditorReady\"}],staticClass:\"process-treeview-body\"},[_c('div',{staticClass:\"process-treeview-process-title\",class:{'current-process': _vm.treeview.current},attrs:{\"title\":_vm.treeview.id}},[_vm._v(\"\\n        Process: \"+_vm._s(_vm.treeview.name)+\"\\n        \"),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.treeview.current),expression:\"!treeview.current\"}],staticClass:\"pull-right\",attrs:{\"src\":require(\"@/assets/images/pencil.png\")},on:{\"click\":function($event){return _vm.edit(_vm.treeview.id)}}})]),(_vm.treeview.children)?_c('ul',{staticClass:\"process-treeview-list\"},_vm._l((_vm.treeview.children),function(child){return _c('li',{key:child.id},[_c('process-tree-list',{attrs:{\"editorManager\":_vm.editorManager},on:{\"edit\":_vm.edit}})],1)}),0):_vm._e(),(!_vm.treeview.children || _vm.treeview.children.length == 0)?_c('div',{staticStyle:{\"padding-left\":\"5px\"}},[_vm._v(\"\\n        No structural elements used.\\n      \")]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',{on:{\"click\":_vm.expandedToggle}},[_c('i',{staticClass:\"glyphicon\",class:{'glyphicon-chevron-right': !_vm.group.expanded, 'glyphicon-chevron-down': _vm.group.expanded}}),_vm._v(\"\\n     \"+_vm._s(_vm.group.name)+\"\\n  \")]),_vm._l((_vm.group.groups),function(group){return _c('ul',{key:group.id,staticClass:\"stencil-group stencil-group-non-root\",class:{collapsed: !group.expanded, 'first': _vm.$first}},[_c('stencil-item-template')],1)}),_c('ul',_vm._l((_vm.group.paletteItems),function(item){return _c('li',{key:item.id,staticClass:\"stencil-item\"},[_c('stencil-drag-item',{attrs:{\"item\":item,\"editorManager\":_vm.editorManager}})],1)}),0)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <span @click=\"expandedToggle\">\r\n        <i class=\"glyphicon\"\r\n           :class=\"{'glyphicon-chevron-right': !group.expanded, 'glyphicon-chevron-down': group.expanded}\"></i>\r\n       {{group.name}}\r\n    </span>\r\n\r\n    <!-- Child groups -->\r\n    <ul v-for=\"group in group.groups\"\r\n        :key=\"group.id\"\r\n        class=\"stencil-group stencil-group-non-root\"\r\n        :class=\"{collapsed: !group.expanded, 'first': $first}\">\r\n      <stencil-item-template></stencil-item-template>\r\n    </ul>\r\n\r\n    <!-- Group items -->\r\n    <ul>\r\n      <li v-for=\"item in group.paletteItems\" class=\"stencil-item\"\r\n          :key=\"item.id\">\r\n        <stencil-drag-item :item=\"item\" :editorManager=\"editorManager\"></stencil-drag-item>\r\n      </li>\r\n    </ul>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  export default {\r\n    name: \"stencil-item-template\",\r\n    data() {\r\n      return {}\r\n    },\r\n    props: {\r\n      editorManager: {},\r\n      group: {\r\n        type: Object,\r\n        default: function () {\r\n          return {\r\n            name: '',\r\n            items: [],\r\n            groups: []\r\n          }\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      stencilItemGroups () {\r\n        if (!this.editorManager) return []\r\n        return this.editorManager.getShowStencilData();\r\n      }\r\n    },\r\n    methods: {\r\n      expandedToggle() {\r\n        this.$emit('expandedToggle')\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=a3dec4be&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a3dec4be\",\n  null\n  \n)\n\nexport default component.exports","import stencilItem from './src/main.vue'\r\n\r\nstencilItem.install = function (Vue) {\r\n  Vue.component(stencilItem.name, stencilItem)\r\n}\r\n\r\nexport default stencilItem\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"process-treeview-list-item\",class:{'current-process': _vm.child.current},on:{\"click\":function($event){return _vm.showSubProcess(_vm.child)}}},[_c('img',{attrs:{\"src\":require((\"@/assets/images/bpmn2.0/icons/activity/\" + (_vm.child.icon))),\"width\":\"16px;\",\"height\":\"16px;\"}}),_vm._v(\"\\n    \"+_vm._s(_vm.child.name)+\"\\n    \"),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.child.current && _vm.child.type === 'CollapsedSubProcess'),expression:\"!child.current && child.type === 'CollapsedSubProcess'\"}],staticClass:\"pull-right\",attrs:{\"src\":require(\"@/assets/images/pencil.png\")},on:{\"click\":function($event){return _vm.$emit('edit', _vm.child.id)}}})]),(_vm.child.children)?_c('ul',{staticClass:\"process-treeview-list\"},_vm._l((_vm.child.children),function(child){return _c('li',{key:child.id},[_c('process-tree-list')],1)}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div @click=\"showSubProcess(child)\"\r\n         class=\"process-treeview-list-item\" :class=\"{'current-process': child.current}\">\r\n      <img :src=\"require(`@/assets/images/bpmn2.0/icons/activity/${child.icon}`)\"\r\n           width=\"16px;\" height=\"16px;\"/>\r\n      {{child.name}}\r\n      <img v-show=\"!child.current && child.type === 'CollapsedSubProcess'\"\r\n           src=\"@/assets/images/pencil.png\" class=\"pull-right\" @click=\"$emit('edit', child.id)\" />\r\n    </div>\r\n    <ul v-if=\"child.children\" class=\"process-treeview-list\">\r\n      <li v-for=\"child in child.children\" :key=\"child.id\">\r\n        <process-tree-list></process-tree-list>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"process-tree-list\",\r\n    data () {\r\n      return {}\r\n    },\r\n    props: {\r\n      editorManager: {}\r\n    },\r\n    methods: {\r\n      showSubProcess (child) {\r\n        var flowableShapes = this.editorManager.getChildShapeByResourceId(child.resourceId);\r\n        this.editorManager.setSelection([flowableShapes],[],true);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=097dd824&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"097dd824\",\n  null\n  \n)\n\nexport default component.exports","import processTreeList from './src/main.vue'\r\n\r\nprocessTreeList.install = function (Vue) {\r\n  Vue.component(processTreeList.name, processTreeList)\r\n}\r\n\r\nexport default processTreeList\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"stencil-item root-stencil-item\",attrs:{\"id\":_vm.group.id,\"title\":_vm.group.description,\"data-drag\":\"true\",\"jqyoui-draggable\":\"{onStart:'startDragCallback', onDrag:'dragCallback'}\",\"data-jqyoui-options\":\"{revert: 'invalid', helper: 'clone', opacity : 0.5}\"}},[(!_vm.group.customIcon)?_c('img',{attrs:{\"width\":\"16px;\",\"height\":\"16px;\",\"src\":require((\"@/assets/images/bpmn2.0/icons/\" + (_vm.group.icon)))}}):_vm._e(),_vm._v(\"\\n        \"+_vm._s(_vm.group.name)+\"\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!--ng-model=\"draggedElement\"-->\r\n  <span class=\"stencil-item root-stencil-item\"\r\n        :id=\"group.id\"\r\n        :title=\"group.description\"\r\n\r\n        data-drag=\"true\"\r\n        jqyoui-draggable=\"{onStart:'startDragCallback', onDrag:'dragCallback'}\"\r\n        data-jqyoui-options=\"{revert: 'invalid', helper: 'clone', opacity : 0.5}\">\r\n        <img v-if=\"!group.customIcon\" width=\"16px;\" height=\"16px;\"\r\n             :src=\"require(`@/assets/images/bpmn2.0/icons/${group.icon}`)\"/>\r\n        <!--<img v-if=\"group.customIcon\" :src=\"getImageUrl(group.icon)\" width=\"16px;\" height=\"16px;\"/>-->\r\n        {{group.name}}\r\n</span>\r\n\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"root-stencil-item-template\",\r\n    props: {\r\n      group: {\r\n        type: Object,\r\n        default: function () {\r\n          return {\r\n            name: '',\r\n            items: [],\r\n            groups: []\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=78f86284&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"78f86284\",\n  null\n  \n)\n\nexport default component.exports","import rootStencilTtem from './src/main.vue'\r\n\r\nrootStencilTtem.install = function (Vue) {\r\n  Vue.component(rootStencilTtem.name, rootStencilTtem)\r\n}\r\n\r\nexport default rootStencilTtem\r\n","<template>\r\n  <!--组件元素-->\r\n  <div id=\"paletteHelpWrapper\" class=\"paletteHelpWrapper\">\r\n    <div class=\"stencils\" id=\"paletteSection\">\r\n      <div v-if=\"stencilItemGroups.length > 1\">\r\n        <div v-for=\"(group, index) in stencilItemGroups\" :key=\"group.name\">\r\n          <ul v-if=\"group.visible && group.items\" class=\"stencil-group\"\r\n              :class=\"{collapsed: !group.expanded, 'first': index == 0}\">\r\n            <li>\r\n              <stencil-item-template :group=\"group\" :editorManager=\"editorManager\"\r\n                                     @expandedToggle=\"expandedToggle(group)\">\r\n              </stencil-item-template>\r\n            </li>\r\n          </ul>\r\n\r\n          <div v-if=\"!group.items\">\r\n            <root-stencil-item-template :group=\"group\"></root-stencil-item-template>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div v-if=\"stencilItemGroups.length == 1\">\r\n        <ul class=\"stencil-group\">\r\n          <li v-for=\"item in stencilItemGroups[0].paletteItems\" class=\"stencil-item\"\r\n              :key=\"item.id\"\r\n              :id=\"item.id\"\r\n              :title=\"item.description\"\r\n\r\n              data-drag=\"true\"\r\n              jqyoui-draggable=\"{onStart:'startDragCallback', onDrag:'dragCallback'}\"\r\n              data-jqyoui-options=\"{revert: 'invalid', helper: 'clone', opacity : 0.5}\">\r\n\r\n            <img :src=\"require(`@/assets/images/bpmn2.0/icons/${item.icon}`)\" width=\"16px;\" height=\"16px;\"/>\r\n            <img v-if=\"!item.customIcon\" width=\"16px;\" height=\"16px;\"\r\n                 :src=\"require(`@/assets/images/bpmn2.0/icons/${item.icon}`)\"/>\r\n            <!--<img v-if=\"item.customIcon\" width=\"16px;\" height=\"16px;\"-->\r\n                 <!--:src=\"getImageUrl(item.icon)\" />-->\r\n            {{item.name | translate}}\r\n          </li>\r\n          <!--ng-model=\"draggedElement\"-->\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <!--ng-controller=\"ProcessNavigatorController\"-->\r\n    <div id=\"process-treeview-wrapper\">\r\n      <div class=\"process-treeview-header\">\r\n        Process Navigator\r\n      </div>\r\n      <div class=\"process-treeview-body\" v-show=\"isEditorReady\">\r\n        <div class=\"process-treeview-process-title\" :title=\"treeview.id\"\r\n             :class=\"{'current-process': treeview.current}\" >\r\n          Process: {{treeview.name}}\r\n          <img v-show=\"!treeview.current\"\r\n               src=\"@/assets/images/pencil.png\" class=\"pull-right\"\r\n               @click=\"edit(treeview.id)\" />\r\n        </div>\r\n        <ul class=\"process-treeview-list\" v-if=\"treeview.children\">\r\n          <li v-for=\"child in treeview.children\" :key=\"child.id\">\r\n            <process-tree-list :editorManager=\"editorManager\" @edit=\"edit\"></process-tree-list>\r\n          </li>\r\n\r\n        </ul>\r\n        <div v-if=\"!treeview.children || treeview.children.length == 0\" style=\"padding-left: 5px;\">\r\n          No structural elements used.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import stencilItemTemplate from 'packages/stencil-item'\r\n  import processTreeList from 'packages/process-tree-list'\r\n  import rootStencilItemTemplate from 'packages/root-stencil-item'\r\n\r\n  export default {\r\n    name: \"paletteHelpWrapper\",\r\n    data () {\r\n      return {\r\n        treeview: {},\r\n        isEditorReady: false,\r\n        diyStencilItem: [\r\n          {\r\n            groups: [],\r\n            items: [],\r\n            name: '自定义节点',\r\n            paletteItems: [],\r\n            visible: true,\r\n          }\r\n        ],\r\n      }\r\n    },\r\n    components: {stencilItemTemplate, processTreeList, rootStencilItemTemplate},\r\n    props: {\r\n      editorManager: {}\r\n    },\r\n    mounted () {\r\n      // let a = require('@/editorAA.js')\r\n      // console.log(333, a)\r\n    },\r\n    computed: {\r\n      stencilItemGroups () {\r\n        if (!this.editorManager) return []\r\n        const data = this.editorManager.getShowStencilData();\r\n        // console.log('stencilItemGroups', data)\r\n        // console.log(888888888)\r\n        return data\r\n      },\r\n    },\r\n    methods: {\r\n      showSubProcess (child) {\r\n        const flowableShapes = this.editorManager.getChildShapeByResourceId(child.resourceId);\r\n        this.editorManager.setSelection([flowableShapes],[],true);\r\n      },\r\n      edit (resourceId) {\r\n        this.editorManager.edit(resourceId);\r\n      },\r\n      expandedToggle (group) {\r\n        let expanded = !group.expanded\r\n        this.$set(group, 'expanded',  expanded)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=25ad003e&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25ad003e\",\n  null\n  \n)\n\nexport default component.exports","import paletteWrapper from './src/main.vue'\r\n\r\npaletteWrapper.install = function (Vue) {\r\n  Vue.component(paletteWrapper.name, paletteWrapper)\r\n}\r\n\r\nexport default paletteWrapper\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvasHelpWrapper\",attrs:{\"id\":\"canvasHelpWrapper\"}},[_c('div',{directives:[{name:\"droppable\",rawName:\"v-droppable\",value:({onDrop:'dropCallback',onOver: 'overCallback', onOut: 'outCallback'}),expression:\"{onDrop:'dropCallback',onOver: 'overCallback', onOut: 'outCallback'}\"}],staticClass:\"canvas-wrapper canvasSection\",attrs:{\"id\":\"canvasSection\",\"data-model\":\"droppedElement\",\"data-drop\":\"true\"},on:{\"&scroll\":function($event){return _vm.fnScroll($event)}}},[_c('div',{staticClass:\"canvas-message\",attrs:{\"id\":\"model-modified-date\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.btn_visibile.hide_shape_buttons),expression:\"!btn_visibile.hide_shape_buttons\"}],attrs:{\"id\":\"flow_op_btns\"}},[_c('div',{staticClass:\"Oryx_button\",attrs:{\"id\":\"delete-button\",\"title\":_vm.t('BUTTON.ACTION.DELETE.TOOLTIP')},on:{\"click\":_vm.deleteShape}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/delete.png\")}})]),(!_vm.btn_visibile.hide_morph_buttons)?_c('div',{staticClass:\"Oryx_button\",attrs:{\"id\":\"morph-button\",\"title\":_vm.t('BUTTON.ACTION.MORPH.TOOLTIP')},on:{\"click\":_vm.morphShape}},[_c('el-dropdown',{attrs:{\"trigger\":\"click\"},on:{\"command\":_vm.handleCommand}},[_c('span',{staticClass:\"el-dropdown-link\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/wrench.png\")}})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},_vm._l((_vm.morphShapes),function(item){return _c('el-dropdown-item',{key:item.id,attrs:{\"command\":item}},[_c('img',{attrs:{\"width\":\"16px;\",\"height\":\"16px;\",\"src\":require((\"@/assets/images/bpmn2.0/icons/\" + (item.icon)))}}),_vm._v(\"\\n              \"+_vm._s(item.name)+\"\\n            \")])}),1)],1)],1):_vm._e(),(!_vm.btn_visibile.hide_edit_buttons)?_c('div',{staticClass:\"Oryx_button\",attrs:{\"id\":\"edit-button\"},on:{\"click\":_vm.editShape}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/pencil.png\")}})]):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!(_vm.btn_visibile.hide_shape_buttons || _vm.btn_visibile.hide_flow_add_btns)),expression:\"!(btn_visibile.hide_shape_buttons || btn_visibile.hide_flow_add_btns)\"}],attrs:{\"id\":\"flow_add_btns\"}},_vm._l((_vm.quickMenuItems),function(item){return _c('div',{directives:[{name:\"draggable\",rawName:\"v-draggable\",value:({onStart:'startDragCallbackQuickMenu', onDrag:'dragCallbackQuickMenu',\n         revert: 'invalid', helper: 'clone', opacity : 0.5}),expression:\"{onStart:'startDragCallbackQuickMenu', onDrag:'dragCallbackQuickMenu',\\n         revert: 'invalid', helper: 'clone', opacity : 0.5}\"}],key:item.id,staticClass:\"Oryx_button\",attrs:{\"id\":item.id,\"title\":item.description,\"data-model\":\"draggedElement\",\"data-drag\":\"true\"},on:{\"click\":function($event){return _vm.quickAddItem(item.id)}}},[_c('img',{attrs:{\"src\":require((\"@/assets/images/bpmn2.0/icons/\" + (item.icon)))}})])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\r\nexport const EventBus = new Vue()\r\n\r\n\r\n// EventBus.$emit\r\n// EventBus.$on\r\n// EventBus.$off('decreased', {})\r\n","// Helper method: find a group in an array\r\nexport function findGroup (name, groupArray) {\r\n  for (let index = 0; index < groupArray.length; index++) {\r\n    if (groupArray[index].name === name) {\r\n      return groupArray[index]\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\n// Helper method: add a new group to an array of groups\r\nexport function addGroup (groupName, groupArray) {\r\n  let group = { name: groupName, items: [], paletteItems: [], groups: [], visible: true }\r\n  groupArray.push(group)\r\n  return group\r\n}\r\n\r\nexport function getAdditionalIEZoom () {\r\n  let additionalIEZoom = 1\r\n  if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n    let ua = navigator.userAgent\r\n    if (ua.indexOf('MSIE') >= 0) {\r\n      // IE 10 and below\r\n      let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n      if (zoom !== 100) {\r\n        additionalIEZoom = zoom / 100\r\n      }\r\n    }\r\n  }\r\n  return additionalIEZoom\r\n}\r\n\r\n/**\r\n * This creates a modal window that auto closes on route change.\r\n * By default, this is NOT the case, and leads to some funny behaviour.\r\n *\r\n * Use this method vs the default $modal({myJson}) approach\r\n */\r\nexport function _internalCreateModal (modalConfig, $modal, $scope) {\r\n  if ($scope !== null && $scope !== undefined) {\r\n    $scope.modal = $modal(modalConfig)\r\n\r\n    $scope.$on('$routeChangeStart', function () {\r\n      if ($scope.modal) {\r\n        $scope.modal.hide()\r\n      }\r\n    })\r\n\r\n    return $scope.modal\r\n  } else {\r\n    return $modal(modalConfig)\r\n  }\r\n}\r\n\r\nexport function extendDeep (parent, child) {\r\n\r\n  let proxy = null\r\n\r\n  proxy = JSON.stringify(parent) // 把parent对象转换成字符串\r\n  proxy = JSON.parse(proxy) // 把字符串转换成对象，这是parent的一个副本\r\n\r\n  child = child || {}\r\n\r\n  for (let i in proxy) {\r\n    // 判断对象是否包含特定的自身（非继承）属性\r\n    if (proxy.hasOwnProperty(i)) {\r\n      child[i] = proxy[i]\r\n    }\r\n  }\r\n\r\n  proxy = null // 因为proxy是中间对象，可以将它回收掉\r\n\r\n  return child\r\n}\r\n\r\n/**\r\n * @description [throttle 节流函数]\r\n * @author shanshuizinong\r\n * @param {Function} fn 延时调用函数\r\n * @param {Number} delay 延迟多长时间\r\n * @param {Number} atleast 至少多长时间触发一次\r\n * @return {Function} 延迟执行的方法\r\n */\r\nexport function throttle (fn, delay, atleast) {\r\n  let timer = null\r\n  let previous = null\r\n  return function () {\r\n    let now = +new Date()\r\n    if (!previous) previous = now\r\n    if (atleast && now - previous > atleast) {\r\n      fn()\r\n      previous = now\r\n      clearTimeout(timer)\r\n    } else {\r\n      clearTimeout(timer)\r\n      timer = setTimeout(function () {\r\n        fn()\r\n        previous = null\r\n      }, delay)\r\n    }\r\n  }\r\n}\r\n\r\n// 防抖\r\nexport function _debounce (fn, delay = 200) {\r\n  let timer\r\n  return function () {\r\n    const th = this\r\n    const args = arguments\r\n    if (timer) {\r\n      clearTimeout(timer)\r\n    }\r\n    timer = setTimeout(function () {\r\n      timer = null\r\n      fn.apply(th, args)\r\n    }, delay)\r\n  }\r\n}\r\n\r\n// 节流\r\nexport function _throttle (fn, interval = 200) {\r\n  let last\r\n  let timer\r\n  return function () {\r\n    const th = this\r\n    const args = arguments\r\n    let now = +new Date()\r\n    if (last && now - last < interval) {\r\n      clearTimeout(timer)\r\n      timer = setTimeout(function () {\r\n        last = now\r\n        fn.apply(th, args)\r\n      }, interval)\r\n    } else {\r\n      last = now\r\n      fn.apply(th, args)\r\n    }\r\n  }\r\n}\r\n","const ngDragDropService = {\r\n  draggableScope: null,\r\n  droppableScope: null,\r\n  extract: function (scope, callbackName) {\r\n    var atStartBracket = callbackName.indexOf('(') !== -1 ? callbackName.indexOf('(') : callbackName.length,\r\n      atEndBracket = callbackName.lastIndexOf(')') !== -1 ? callbackName.lastIndexOf(')') : callbackName.length,\r\n      // matching function arguments inside brackets\r\n      args = callbackName.substring(atStartBracket + 1, atEndBracket),\r\n      // matching a string upto a dot to check ctrl as syntax\r\n      constructor = callbackName.match(/^[^.]+.\\s*/)[0].slice(0, -1)\r\n\r\n    constructor = scope.context[constructor] && typeof scope.context[constructor].constructor === 'function' ? constructor : null\r\n\r\n    let a = args && args.split(',') || []\r\n    a.map(function (item) {\r\n      console.log('item', item)\r\n    })\r\n    return {\r\n      callback: callbackName.substring(constructor && constructor.length + 1 || 0, atStartBracket),\r\n      args: (args && args.split(',') || []).map(function (item) { return [$parse(item)(scope)] }),\r\n      // args: $.map(args && args.split(',') || [], function(item) { return [$parse(item)(scope)]; }),\r\n      constructor: constructor\r\n    }\r\n  },\r\n  callEventCallback: function (scope, callbackName, event, ui) {\r\n    if (!callbackName) return\r\n\r\n    const objExtract = this.extract(scope, callbackName)\r\n    const callback = objExtract.callback\r\n    const constructor = objExtract.constructor\r\n    const args = [event, ui].concat(objExtract.args)\r\n\r\n    // call either $scoped method i.e. $scope.dropCallback or constructor's method i.e. this.dropCallback.\r\n    // Removing scope.$apply call that was performance intensive (especially onDrag) and does not require it\r\n    // always. So call it within the callback if needed.\r\n    return (scope.context[callback] || scope.context[constructor][callback]).apply(scope, args)\r\n  }\r\n}\r\n\r\n\r\nexport function draggable (el, binding, vnode) {\r\n  let dragSettings, jqyouiOptions, zIndex\r\n\r\n  if (el.dataset.drag) {\r\n    jqyouiOptions = {\r\n      revert: binding.value.revert,\r\n      helper: binding.value.helper,\r\n      opacity: binding.value.opacity\r\n    }\r\n\r\n    let element = jQuery(el)\r\n    element\r\n      .draggable({ disabled: false })\r\n      .draggable(jqyouiOptions)\r\n      .draggable({\r\n        start: function (event, ui) {\r\n          dragSettings = {\r\n            onStart: binding.value.onStart,\r\n            onDrag: binding.value.onDrag\r\n          }\r\n\r\n          ngDragDropService.draggableScope = vnode\r\n          zIndex = element.css('z-index')\r\n          let q = jqyouiOptions.helper ? ui.helper : element\r\n          q.css('z-index', 9999)\r\n          // let startXY = element[dragSettings.containment || 'offset']()\r\n          // console.log(11, startXY)\r\n          // vnode.context[dragSettings.onStart](event, ui)\r\n          ngDragDropService.callEventCallback(vnode, dragSettings.onStart, event, ui)\r\n        },\r\n        stop: function (event, ui) {\r\n          let q = jqyouiOptions.helper ? ui.helper : element\r\n          q.css('z-index', zIndex)\r\n          // vnode.context[dragSettings.onStop](event, ui)\r\n          ngDragDropService.callEventCallback(vnode, dragSettings.onStop, event, ui)\r\n        },\r\n        drag: function (event, ui) {\r\n          // vnode.context[dragSettings.onDrag](event, ui)\r\n          ngDragDropService.callEventCallback(vnode, dragSettings.onDrag, event, ui)\r\n        }\r\n      })\r\n  } else {\r\n    el.draggable({ disabled: true })\r\n  }\r\n}\r\n\r\nexport function droppable (el, binding, vnode) {\r\n  let dropSettings\r\n  if (el.dataset.drop) {\r\n    dropSettings = {\r\n      onDrop: binding.value.onDrop,\r\n      onOver: binding.value.onOver,\r\n      onOut: binding.value.onOut\r\n    }\r\n\r\n    let element = jQuery(el)\r\n    // console.log('element', element)\r\n    // console.log('droppable', element.droppable)\r\n    element\r\n      .droppable({ disabled: false })\r\n      .droppable({\r\n        over: function (event, ui) {\r\n          ngDragDropService.callEventCallback(vnode, dropSettings.onOver, event, ui)\r\n        },\r\n        out: function (event, ui) {\r\n          ngDragDropService.callEventCallback(vnode, dropSettings.onOut, event, ui)\r\n        },\r\n        drop: function (event, ui) {\r\n          if (dropSettings.beforeDrop) {\r\n            ngDragDropService.callEventCallback(vnode, dropSettings.beforeDrop, event, ui)\r\n          } else {\r\n            // let uiDraggable = jQuery(ui.draggable)\r\n            // console.log(333, ngattr(ui.draggable, 'model'))\r\n            // if (ngattr(ui.draggable, 'model')) {\r\n            //   ngDragDropService.droppableScope = vnode;\r\n            //   ngDragDropService.invokeDrop(jQuery(ui.draggable), element, event, ui);\r\n            // } else {\r\n            //   ngDragDropService.callEventCallback(vnode, dropSettings.onDrop, event, ui);\r\n            // }\r\n            ngDragDropService.callEventCallback(vnode, dropSettings.onDrop, event, ui)\r\n          }\r\n        }\r\n      })\r\n  } else {\r\n    el.droppable({ disabled: true })\r\n  }\r\n}\r\n","<template>\r\n  <!--画布区域-->\r\n  <div id=\"canvasHelpWrapper\" class=\"canvasHelpWrapper\">\r\n    <div class=\"canvas-wrapper canvasSection\" id=\"canvasSection\"\r\n         v-droppable=\"{onDrop:'dropCallback',onOver: 'overCallback', onOut: 'outCallback'}\"\r\n         data-model=\"droppedElement\"\r\n         data-drop=\"true\"\r\n         @scroll.passive=\"fnScroll\">\r\n      <div class=\"canvas-message\" id=\"model-modified-date\"></div>\r\n\r\n      <div id=\"flow_op_btns\" v-show=\"!btn_visibile.hide_shape_buttons\">\r\n        <!--删除按钮-->\r\n        <div class=\"Oryx_button\" id=\"delete-button\"\r\n             :title=\"t('BUTTON.ACTION.DELETE.TOOLTIP')\"\r\n             @click=\"deleteShape\">\r\n          <img src=\"@/assets/images/delete.png\"/>\r\n        </div>\r\n        <!--设置修改形状-->\r\n        <div v-if=\"!btn_visibile.hide_morph_buttons\"\r\n             class=\"Oryx_button\" id=\"morph-button\"\r\n             :title=\"t('BUTTON.ACTION.MORPH.TOOLTIP')\"\r\n             @click=\"morphShape\">\r\n\r\n          <el-dropdown trigger=\"click\" @command=\"handleCommand\">\r\n      <span class=\"el-dropdown-link\">\r\n        <img src=\"@/assets/images/wrench.png\"/>\r\n        <!--下拉菜单<i class=\"el-icon-arrow-down el-icon&#45;&#45;right\"></i>-->\r\n      </span>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item v-for=\"item in morphShapes\" :key=\"item.id\" :command=\"item\">\r\n                <img width=\"16px;\" height=\"16px;\"\r\n                     :src=\"require(`@/assets/images/bpmn2.0/icons/${item.icon}`)\"/>\r\n                {{item.name}}\r\n              </el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n\r\n        </div>\r\n        <!--编辑-->\r\n        <div v-if=\"!btn_visibile.hide_edit_buttons\"\r\n             class=\"Oryx_button\" id=\"edit-button\" @click=\"editShape\">\r\n          <img src=\"@/assets/images/pencil.png\"/>\r\n        </div>\r\n      </div>\r\n\r\n      <!--v-draggable=\"{onStart:'startDragCallbackQuickMenu', onDrag:'dragCallbackQuickMenu',-->\r\n      <!--revert: 'invalid', helper: 'clone', opacity : 0.5}\"-->\r\n      <div id=\"flow_add_btns\" v-show=\"!(btn_visibile.hide_shape_buttons || btn_visibile.hide_flow_add_btns)\">\r\n        <div v-for=\"item in quickMenuItems\"\r\n             class=\"Oryx_button\"\r\n             :key=\"item.id\"\r\n             :id=\"item.id\"\r\n             :title=\"item.description\"\r\n             @click=\"quickAddItem(item.id)\"\r\n             data-model=\"draggedElement\"\r\n             data-drag=\"true\"\r\n             v-draggable=\"{onStart:'startDragCallbackQuickMenu', onDrag:'dragCallbackQuickMenu',\r\n           revert: 'invalid', helper: 'clone', opacity : 0.5}\">\r\n          <img :src=\"require(`@/assets/images/bpmn2.0/icons/${item.icon}`)\"/>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ORYX_CONFIG from 'src/oryx/CONFIG'\r\n  import FLOW_eventBus from 'src/flowable/FLOW_eventBus'\r\n  import { EventBus } from 'src/EventBus'\r\n  import { _debounce, getAdditionalIEZoom } from 'src/Util'\r\n  import Locale from 'src/mixins/locale'\r\n  import { draggable, droppable } from 'src/directives/drag-drop'\r\n\r\n  export default {\r\n    name: 'canvasWrapper',\r\n    data () {\r\n      return {\r\n        morphShapes: [],\r\n        currentSelectedMorph: null,\r\n        newShape: null,\r\n        btn_visibile: {\r\n          hide_shape_buttons: true,\r\n          hide_flow_add_btns: true,\r\n          hide_morph_buttons: true,\r\n          hide_edit_buttons: true\r\n        },\r\n        dragCanContain: false,\r\n        dragModeOver: false,\r\n        quickMenu: undefined\r\n      }\r\n    },\r\n    mixins: [Locale],\r\n    directives: {\r\n      draggable,\r\n      droppable\r\n    },\r\n    props: {\r\n      editorManager: {}\r\n    },\r\n    mounted () {\r\n      // 隐藏画布节点的快捷按钮\r\n      FLOW_eventBus.addListener(ORYX_CONFIG.EVENT_TYPE_HIDE_SHAPE_BUTTONS, (btns) => {\r\n        btns.map(btn => {\r\n          this.btn_visibile[btn.type] = btn.status\r\n        })\r\n      })\r\n\r\n      EventBus.$on('UPDATE_dragModeOver', (status) => {\r\n        this.dragModeOver = status\r\n        EventBus.$emit('UPDATE_dragModeOver_forDragItem', status)\r\n      })\r\n      EventBus.$on('UPDATE_dragCanContain', (status) => {\r\n        this.dragCanContain = status\r\n      })\r\n      EventBus.$on('UPDATE_quickMenu', (data) => {\r\n        this.quickMenu = data\r\n      })\r\n    },\r\n    computed: {\r\n      modelData () {\r\n        return this.editorManager ? this.editorManager.getBaseModelData() : []\r\n      },\r\n      quickMenuItems () {\r\n        return this.editorManager ? this.editorManager.quickMenuItems : []\r\n      }\r\n    },\r\n    methods: {\r\n      editShape () {\r\n        this.editorManager.edit(this.selectedShape.resourceId)\r\n      },\r\n      fnScroll () {\r\n        // Hides the resizer and quick menu items during scrolling\r\n        const selectedElements = this.editorManager.getSelection()\r\n        const subSelectionElements = this.editorManager.getSubSelection()\r\n\r\n        this.selectedElements = selectedElements\r\n        this.subSelectionElements = subSelectionElements\r\n        if (selectedElements && selectedElements.length > 0) {\r\n          this.selectedElementBeforeScrolling = selectedElements[0]\r\n        }\r\n        this.btn_visibile.hide_shape_buttons = true\r\n\r\n        jQuery('.resizer_southeast').each(function (i, obj) {\r\n          this.orginalResizerSEStyle = obj.style.display\r\n          obj.style.display = 'none'\r\n        })\r\n        jQuery('.resizer_northwest').each(function (i, obj) {\r\n          this.orginalResizerNWStyle = obj.style.display\r\n          obj.style.display = 'none'\r\n        })\r\n        jQuery('.resizer_south').each(function (i, obj) {\r\n          this.orginalResizerNWStyle = obj.style.display\r\n          obj.style.display = 'none'\r\n        })\r\n        jQuery('.resizer_north').each(function (i, obj) {\r\n          this.orginalResizerNWStyle = obj.style.display\r\n          obj.style.display = 'none'\r\n        })\r\n        this.editorManager.handleEvents({ type: ORYX_CONFIG.EVENT_CANVAS_SCROLL })\r\n        this.fnHandleScrollDebounce()\r\n      },\r\n      fnHandleScrollDebounce: _debounce(function (_type, index, item) {\r\n        // Puts the quick menu items and resizer back when scroll is stopped.\r\n        // this.editorManager.setSelection([])\r\n        // needed cause it checks for element changes and does nothing if the elements are the same\r\n        // this.editorManager.setSelection(this.selectedElements, this.subSelectionElements)\r\n        this.editorManager.updateOryxButtonPosition(this.selectedElements)\r\n        this.selectedElements = undefined\r\n        this.subSelectionElements = undefined\r\n\r\n        function handleDisplayProperty (obj) {\r\n          if (jQuery(obj).position().top > 0) {\r\n            obj.style.display = 'block'\r\n          } else {\r\n            obj.style.display = 'none'\r\n          }\r\n        }\r\n\r\n        // jQuery('.Oryx_button').each(function(i, obj) {\r\n        //   handleDisplayProperty(obj);\r\n        // });\r\n        jQuery('.resizer_southeast').each(function (i, obj) {\r\n          handleDisplayProperty(obj)\r\n        })\r\n        jQuery('.resizer_northwest').each(function (i, obj) {\r\n          handleDisplayProperty(obj)\r\n        })\r\n        jQuery('.resizer_south').each(function (i, obj) {\r\n          handleDisplayProperty(obj)\r\n        })\r\n        jQuery('.resizer_north').each(function (i, obj) {\r\n          handleDisplayProperty(obj)\r\n        })\r\n      }, 200),\r\n      deleteShape () {\r\n        this.editorManager.flowToolbarEvent({ '$scope': this, 'editorManager': this.editorManager })\r\n      },\r\n      morphShape () {\r\n        var shapes = this.editorManager.getSelection()\r\n        if (shapes && shapes.length == 1) {\r\n          this.currentSelectedShape = shapes.first()\r\n          let currentSelectedShapeId = this.currentSelectedShape.getStencil().idWithoutNs()\r\n          var stencilItem = this.editorManager.getStencilItemById(currentSelectedShapeId)\r\n\r\n          var morphShapes = []\r\n          const morphRoles = this.editorManager.morphRoles\r\n          // && morphRoles[i].id !== currentSelectedShapeId\r\n          for (let i = 0; i < morphRoles.length; i++) {\r\n            if (morphRoles[i].role === stencilItem.morphRole) {\r\n              let ary = morphRoles[i].morphOptions.slice()\r\n              for (let y = 0; y < ary.length; y++) {\r\n                if (ary[y].id != currentSelectedShapeId) {\r\n                  morphShapes.push(ary[y])\r\n                }\r\n              }\r\n            }\r\n          }\r\n          this.morphShapes = morphShapes\r\n        }\r\n      },\r\n      // 切换元素类型\r\n      handleCommand (item) {\r\n        let stencil = undefined\r\n        const stencilSets = this.editorManager.getStencilSets().values()\r\n\r\n        const stencilId = item.genericTaskId || item.id\r\n\r\n        for (let i = 0; i < stencilSets.length; i++) {\r\n          let stencilSet = stencilSets[i]\r\n          let nodes = stencilSet.nodes()\r\n          for (let j = 0; j < nodes.length; j++) {\r\n            if (nodes[j].idWithoutNs() === stencilId) {\r\n              stencil = nodes[j]\r\n              break\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!stencil) return\r\n\r\n        // Create and execute command (for undo/redo)\r\n        // const command = new MorphTo(this.currentSelectedShape, stencil, this.editorManager.getEditor())\r\n        // this.editorManager.executeCommands([command])\r\n        this.editorManager.assignCommand('MorphTo', this.currentSelectedShape, stencil, this.editorManager.getEditor())\r\n\r\n      },\r\n      dropCallback (event, ui) {\r\n        this.editorManager.handleEvents({\r\n          type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n          highlightId: 'shapeRepo.attached'\r\n        })\r\n        this.editorManager.handleEvents({\r\n          type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n          highlightId: 'shapeRepo.added'\r\n        })\r\n        this.editorManager.handleEvents({\r\n          type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n          highlightId: 'shapeMenu'\r\n        })\r\n\r\n        this.editorManager.dispatchFlowEvent(ORYX_CONFIG.EVENT_TYPE_HIDE_SHAPE_BUTTONS, [\r\n          { type: 'hide_shape_buttons', status: true },\r\n          { type: 'hide_flow_add_btns', status: true },\r\n          { type: 'hide_morph_buttons', status: true },\r\n          { type: 'hide_edit_buttons', status: true }\r\n        ])\r\n\r\n        // console.log('dragCanContain', this.dragCanContain)\r\n        if (this.dragCanContain) {\r\n          let item = this.editorManager.getStencilItemById(ui.draggable[0].id)\r\n          let pos = { x: event.pageX, y: event.pageY }\r\n\r\n          let additionalIEZoom = getAdditionalIEZoom()\r\n          let screenCTM = this.editorManager.getCanvas().node.getScreenCTM()\r\n\r\n          // Correcting the UpperLeft-Offset\r\n          pos.x -= (screenCTM.e / additionalIEZoom)\r\n          pos.y -= (screenCTM.f / additionalIEZoom)\r\n          // Correcting the Zoom-Factor\r\n          pos.x /= screenCTM.a\r\n          pos.y /= screenCTM.d\r\n          // Correcting the ScrollOffset\r\n          pos.x -= document.documentElement.scrollLeft\r\n          pos.y -= document.documentElement.scrollTop\r\n\r\n          let parentAbs = this.editorManager.dragCurrentParent.absoluteXY()\r\n          pos.x -= parentAbs.x\r\n          pos.y -= parentAbs.y\r\n\r\n          let containedStencil = undefined\r\n          let stencilSets = this.editorManager.getStencilSets().values()\r\n          for (let i = 0; i < stencilSets.length; i++) {\r\n            let stencilSet = stencilSets[i]\r\n            let nodes = stencilSet.nodes()\r\n            for (let j = 0; j < nodes.length; j++) {\r\n              if (nodes[j].idWithoutNs() === ui.draggable[0].id) {\r\n                containedStencil = nodes[j]\r\n                break\r\n              }\r\n            }\r\n\r\n            if (!containedStencil) {\r\n              let edges = stencilSet.edges()\r\n              for (let j = 0; j < edges.length; j++) {\r\n                if (edges[j].idWithoutNs() === ui.draggable[0].id) {\r\n                  containedStencil = edges[j]\r\n                  break\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          if (!containedStencil) return\r\n\r\n          if (this.quickMenu) {\r\n            // 当拖拽的是快捷元素\r\n            let shapes = this.editorManager.getSelection()\r\n            if (shapes && shapes.length == 1) {\r\n              let currentSelectedShape = shapes.first()\r\n              let option = {}\r\n              option.type = currentSelectedShape.getStencil().namespace() + ui.draggable[0].id\r\n              option.namespace = currentSelectedShape.getStencil().namespace()\r\n              option.connectedShape = currentSelectedShape\r\n              option.parent = this.editorManager.dragCurrentParent\r\n              option.containedStencil = containedStencil\r\n\r\n              // If the ctrl key is not pressed,\r\n              // snapp the new shape to the center\r\n              // if it is near to the center of the other shape\r\n              if (!event.ctrlKey) {\r\n                // Get the center of the shape\r\n                let cShape = currentSelectedShape.bounds.center()\r\n                // Snapp +-20 Pixel horizontal to the center\r\n                if (20 > Math.abs(cShape.x - pos.x)) {\r\n                  pos.x = cShape.x\r\n                }\r\n                // Snapp +-20 Pixel vertical to the center\r\n                if (20 > Math.abs(cShape.y - pos.y)) {\r\n                  pos.y = cShape.y\r\n                }\r\n              }\r\n\r\n              option.position = pos\r\n\r\n              if (containedStencil.idWithoutNs() !== 'SequenceFlow' && containedStencil.idWithoutNs() !== 'Association' &&\r\n                containedStencil.idWithoutNs() !== 'MessageFlow' && containedStencil.idWithoutNs() !== 'DataAssociation') {\r\n\r\n                let args = { sourceShape: currentSelectedShape, targetStencil: containedStencil }\r\n                let targetStencil = this.editorManager.getRules().connectMorph(args)\r\n                if (!targetStencil) { // Check if there can be a target shape\r\n                  return\r\n                }\r\n                option.connectingType = targetStencil.id()\r\n              }\r\n\r\n              // let command = new FLOWABLE_OPTIONS.CreateCommand(option, this.editorManager.dropTargetElement, pos, this.editorManager.getEditor())\r\n              //\r\n              // this.editorManager.executeCommands([command])\r\n              this.editorManager.assignCommand('CreateCommand', option, this.editorManager.dropTargetElement, pos, this.editorManager.getEditor())\r\n            }\r\n\r\n          } else {\r\n            let canAttach = false\r\n            if (containedStencil.idWithoutNs() === 'BoundaryErrorEvent' || containedStencil.idWithoutNs() === 'BoundaryTimerEvent' ||\r\n              containedStencil.idWithoutNs() === 'BoundarySignalEvent' || containedStencil.idWithoutNs() === 'BoundaryMessageEvent' ||\r\n              containedStencil.idWithoutNs() === 'BoundaryCancelEvent' || containedStencil.idWithoutNs() === 'BoundaryCompensationEvent') {\r\n\r\n              // Modify position, otherwise boundary event will get position related to left corner of the canvas instead of the container\r\n              pos = this.editorManager.eventCoordinates(event)\r\n              canAttach = true\r\n            }\r\n\r\n            let option = {}\r\n            option['type'] = this.modelData.model.stencilset.namespace + item.id\r\n            option['namespace'] = this.modelData.model.stencilset.namespace\r\n            option['position'] = pos\r\n            option['parent'] = this.editorManager.dragCurrentParent\r\n\r\n\r\n            // Update canvas\r\n            // let command = new commandClass(option, this.editorManager.dragCurrentParent, canAttach, pos, this.editorManager.getEditor())\r\n            // this.editorManager.executeCommands([command])\r\n            this.editorManager.assignCommand('CommandClass', option, this.editorManager.dragCurrentParent, canAttach, pos, this.editorManager.getEditor())\r\n\r\n            // Fire event to all who want to know about this\r\n            let dropEvent = {\r\n              type: ORYX_CONFIG.EVENT_TYPE_ITEM_DROPPED,\r\n              droppedItem: item,\r\n              position: pos\r\n            }\r\n            this.editorManager.dispatchFlowEvent(dropEvent.type, dropEvent)\r\n          }\r\n        }\r\n        this.editorManager.dragCurrentParent = undefined\r\n        this.editorManager.dragCurrentParentId = undefined\r\n        this.editorManager.dragCurrentParentStencil = undefined\r\n        EventBus.$emit('UPDATE_dragCanContain', undefined)\r\n        EventBus.$emit('UPDATE_quickMenu', undefined)\r\n        this.editorManager.dropTargetElement = undefined\r\n      },\r\n      overCallback (event, ui) {\r\n        EventBus.$emit('UPDATE_dragModeOver', true)\r\n      },\r\n      outCallback (event, ui) {\r\n        EventBus.$emit('UPDATE_dragModeOver', false)\r\n        console.log('out==============')\r\n      },\r\n      startDragCallbackQuickMenu (event, ui) {\r\n        EventBus.$emit('UPDATE_dragModeOver', false)\r\n        EventBus.$emit('UPDATE_quickMenu', true)\r\n      },\r\n      dragCallbackQuickMenu (event, ui) {\r\n        console.log('dragCallbackQuickMenu==============')\r\n        if (this.dragModeOver != false) {\r\n          var coord = this.editorManager.eventCoordinatesXY(event.pageX, event.pageY)\r\n\r\n          var additionalIEZoom = 1\r\n          if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n            var ua = navigator.userAgent\r\n            if (ua.indexOf('MSIE') >= 0) {\r\n              // IE 10 and below\r\n              var zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100)\r\n              if (zoom !== 100) {\r\n                additionalIEZoom = zoom / 100\r\n              }\r\n            }\r\n          }\r\n\r\n          if (additionalIEZoom !== 1) {\r\n            coord.x = coord.x / additionalIEZoom\r\n            coord.y = coord.y / additionalIEZoom\r\n          }\r\n\r\n          var aShapes = this.editorManager.getCanvas().getAbstractShapesAtPosition(coord)\r\n\r\n          if (aShapes.length <= 0) {\r\n            if (event.helper) {\r\n              EventBus.$emit('UPDATE_dragCanContain', false)\r\n              return false\r\n            }\r\n          }\r\n\r\n          if (this.editorManager.instanceofCanvas(aShapes[0])) {\r\n            this.editorManager.getCanvas().setHightlightStateBasedOnX(coord.x)\r\n          }\r\n\r\n          let stencil = undefined\r\n          let stencilSets = this.editorManager.getStencilSets().values()\r\n          for (let i = 0; i < stencilSets.length; i++) {\r\n            let stencilSet = stencilSets[i]\r\n            let nodes = stencilSet.nodes()\r\n            for (let j = 0; j < nodes.length; j++) {\r\n              if (nodes[j].idWithoutNs() === event.target.id) {\r\n                stencil = nodes[j]\r\n                break\r\n              }\r\n            }\r\n\r\n            if (!stencil) {\r\n              var edges = stencilSet.edges()\r\n              for (var j = 0; j < edges.length; j++) {\r\n                if (edges[j].idWithoutNs() === event.target.id) {\r\n                  stencil = edges[j]\r\n                  break\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          let candidate = aShapes.last()\r\n\r\n          let isValid = false\r\n          if (stencil.type() === 'node') {\r\n            // check containment rules\r\n            let canContain = this.editorManager.getRules().canContain({\r\n              containingShape: candidate,\r\n              containedStencil: stencil\r\n            })\r\n\r\n            let parentCandidate = aShapes.reverse().find(function (candidate) {\r\n              return (this.editorManager.instanceofCanvas(candidate)\r\n                || this.editorManager.instanceofNode(candidate)\r\n                || this.editorManager.instanceofEdge(candidate))\r\n            })\r\n\r\n            if (!parentCandidate) {\r\n              EventBus.$emit('UPDATE_dragCanContain', false)\r\n              return false\r\n            }\r\n\r\n            this.editorManager.dragCurrentParent = parentCandidate\r\n            this.editorManager.dragCurrentParentId = parentCandidate.id\r\n            this.editorManager.dragCurrentParentStencil = parentCandidate.getStencil().id()\r\n            EventBus.$emit('UPDATE_dragCanContain', canContain)\r\n            this.editorManager.dropTargetElement = parentCandidate\r\n            isValid = canContain\r\n\r\n          } else { //Edge\r\n            let shapes = this.editorManager.getSelection()\r\n            if (shapes && shapes.length === 1) {\r\n              let currentSelectedShape = shapes.first()\r\n              let curCan = candidate\r\n              let canConnect = false\r\n\r\n              let targetStencil = this.editorManager.getStencilItemById(curCan.getStencil().idWithoutNs())\r\n              if (targetStencil) {\r\n                let associationConnect = false\r\n                if (stencil.idWithoutNs() === 'Association' && (curCan.getStencil().idWithoutNs() === 'TextAnnotation' || curCan.getStencil().idWithoutNs() === 'BoundaryCompensationEvent')) {\r\n                  associationConnect = true\r\n                } else if (stencil.idWithoutNs() === 'DataAssociation' && curCan.getStencil().idWithoutNs() === 'DataStore') {\r\n                  associationConnect = true\r\n                }\r\n\r\n                if (targetStencil.canConnectTo || associationConnect) {\r\n                  while (!canConnect && curCan && !this.editorManager.instanceofCanvas(curCan)) {\r\n                    candidate = curCan\r\n                    //check connection rules\r\n                    canConnect = this.editorManager.getRules().canConnect({\r\n                      sourceShape: currentSelectedShape,\r\n                      edgeStencil: stencil,\r\n                      targetShape: curCan\r\n                    })\r\n                    curCan = curCan.parent\r\n                  }\r\n                }\r\n              }\r\n              let parentCandidate = this.editorManager.getCanvas()\r\n\r\n              isValid = canConnect\r\n              this.editorManager.dragCurrentParent = parentCandidate\r\n              this.editorManager.dragCurrentParentId = parentCandidate.id\r\n              this.editorManager.dragCurrentParentStencil = parentCandidate.getStencil().id()\r\n              EventBus.$emit('canContain', canConnect)\r\n              this.editorManager.dropTargetElement = candidate\r\n            }\r\n\r\n          }\r\n\r\n          this.editorManager.handleEvents({\r\n            type: ORYX_CONFIG.EVENT_HIGHLIGHT_SHOW,\r\n            highlightId: 'shapeMenu',\r\n            elements: [candidate],\r\n            color: isValid ? ORYX_CONFIG.SELECTION_VALID_COLOR : ORYX_CONFIG.SELECTION_INVALID_COLOR\r\n          })\r\n        }\r\n      },\r\n      quickAddItem (newItemId) {\r\n        console.log('Oryx_button:', newItemId)\r\n        let shapes = this.editorManager.getSelection()\r\n        if (shapes && shapes.length === 1) {\r\n          this.currentSelectedShape = shapes.first()\r\n\r\n          let containedStencil = undefined\r\n          let stencilSets = this.editorManager.getStencilSets().values()\r\n          for (let i = 0; i < stencilSets.length; i++) {\r\n            let stencilSet = stencilSets[i]\r\n            let nodes = stencilSet.nodes()\r\n            for (let j = 0; j < nodes.length; j++) {\r\n              if (nodes[j].idWithoutNs() === newItemId) {\r\n                containedStencil = nodes[j]\r\n                break\r\n              }\r\n            }\r\n          }\r\n\r\n          if (!containedStencil) return\r\n\r\n          let option = {\r\n            type: this.currentSelectedShape.getStencil().namespace() + newItemId,\r\n            namespace: this.currentSelectedShape.getStencil().namespace()\r\n          }\r\n          option['connectedShape'] = this.currentSelectedShape\r\n          option['parent'] = this.currentSelectedShape.parent\r\n          option['containedStencil'] = containedStencil\r\n\r\n          let args = { sourceShape: this.currentSelectedShape, targetStencil: containedStencil }\r\n          let targetStencil = this.editorManager.getRules().connectMorph(args)\r\n\r\n          // Check if there can be a target shape\r\n          if (!targetStencil) {\r\n            return\r\n          }\r\n\r\n          option['connectingType'] = targetStencil.id()\r\n          this.editorManager.assignCommand('CreateCommand', option, undefined, undefined, this.editorManager.getEditor())\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=7d0d16c4&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d0d16c4\",\n  null\n  \n)\n\nexport default component.exports","import canvasWrapper from './src/main.vue'\r\n\r\ncanvasWrapper.install = function (Vue) {\r\n  Vue.component(canvasWrapper.name, canvasWrapper)\r\n}\r\n\r\nexport default canvasWrapper\r\n","/** Inspired by https://github.com/krasimir/EventBus/blob/master/src/EventBus.js */\r\n\r\nconst FLOWABLE_CONFIG = {\r\n  UI_CONFIG: {\r\n    'showRemovedProperties': false,\r\n  },\r\n  HEADER_CONFIG: {\r\n    'showAppTitle': true,\r\n    'showHeaderMenu': true,\r\n    'showMainNavigation': true,\r\n    'showPageHeader': true\r\n  },\r\n  TOOLBAR_CONFIG: {\r\n    'items': [\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.SAVE',\r\n        'cssClass': 'editor-icon editor-icon-save',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.saveModel'\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.VALIDATE',\r\n        'cssClass': 'glyphicon glyphicon-ok',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.validate'\r\n      },\r\n      {\r\n        'type': 'separator',\r\n        'title': '',\r\n        'cssClass': 'toolbar-separator'\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.CUT',\r\n        'cssClass': 'editor-icon editor-icon-cut',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.cut',\r\n        'enabled': false,\r\n        'enabledAction': 'element'\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.COPY',\r\n        'cssClass': 'editor-icon editor-icon-copy',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.copy',\r\n        'enabled': false,\r\n        'enabledAction': 'element'\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.PASTE',\r\n        'cssClass': 'editor-icon editor-icon-paste',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.paste',\r\n        'enabled': false\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.DELETE',\r\n        'cssClass': 'editor-icon editor-icon-delete',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.deleteItem',\r\n        'enabled': false,\r\n        'enabledAction': 'element'\r\n      },\r\n      {\r\n        'type': 'separator',\r\n        'title': 'TOOLBAR.ACTION.SAVE',\r\n        'cssClass': 'toolbar-separator'\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.REDO',\r\n        'cssClass': 'editor-icon editor-icon-redo',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.redo',\r\n        'enabled': false\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.UNDO',\r\n        'cssClass': 'editor-icon editor-icon-undo',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.undo',\r\n        'enabled': false\r\n      },\r\n      {\r\n        'type': 'separator',\r\n        'title': 'TOOLBAR.ACTION.SAVE',\r\n        'cssClass': 'toolbar-separator'\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.ALIGNVERTICAL',\r\n        'cssClass': 'editor-icon editor-icon-align-vertical',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.alignVertical',\r\n        'enabled': false,\r\n        'enabledAction': 'element',\r\n        'disableInForm': true,\r\n        'minSelectionCount': 2\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.ALIGNHORIZONTAL',\r\n        'cssClass': 'editor-icon editor-icon-align-horizontal',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.alignHorizontal',\r\n        'enabledAction': 'element',\r\n        'enabled': false,\r\n        'disableInForm': true,\r\n        'minSelectionCount': 2\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.SAMESIZE',\r\n        'cssClass': 'editor-icon editor-icon-same-size',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.sameSize',\r\n        'enabledAction': 'element',\r\n        'enabled': false,\r\n        'disableInForm': true,\r\n        'minSelectionCount': 2\r\n      },\r\n      {\r\n        'type': 'separator',\r\n        'title': 'TOOLBAR.ACTION.SAVE',\r\n        'cssClass': 'toolbar-separator',\r\n        'disableInForm': true\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.ZOOMIN',\r\n        'cssClass': 'editor-icon editor-icon-zoom-in',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.zoomIn'\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.ZOOMOUT',\r\n        'cssClass': 'editor-icon editor-icon-zoom-out',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.zoomOut'\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.ZOOMACTUAL',\r\n        'cssClass': 'editor-icon editor-icon-zoom-actual',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.zoomActual'\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.ZOOMFIT',\r\n        'cssClass': 'editor-icon editor-icon-zoom-fit',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.zoomFit'\r\n      },\r\n      {\r\n        'type': 'separator',\r\n        'title': 'TOOLBAR.ACTION.SAVE',\r\n        'cssClass': 'toolbar-separator',\r\n        'disableInForm': true\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.BENDPOINT.ADD',\r\n        'cssClass': 'editor-icon editor-icon-bendpoint-add',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.addBendPoint',\r\n        'id': 'add-bendpoint-button',\r\n        'disableInForm': true\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.BENDPOINT.REMOVE',\r\n        'cssClass': 'editor-icon editor-icon-bendpoint-remove',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.removeBendPoint',\r\n        'id': 'remove-bendpoint-button',\r\n        'disableInForm': true\r\n      },\r\n      {\r\n        'type': 'separator',\r\n        'title': '',\r\n        'cssClass': 'toolbar-separator',\r\n        'disableInForm': true\r\n      },\r\n      {\r\n        'type': 'button',\r\n        'title': 'TOOLBAR.ACTION.HELP',\r\n        'cssClass': 'glyphicon glyphicon-question-sign',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.help'\r\n      }\r\n    ],\r\n    'secondaryItems': [\r\n      {\r\n        'type': 'button',\r\n        'title': 'Close',\r\n        'cssClass': 'glyphicon glyphicon-remove',\r\n        'action': 'FLOWABLE.TOOLBAR.ACTIONS.closeEditor'\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\n\r\nexport default FLOWABLE_CONFIG\r\n","import Command from './core/Command'\r\nimport Bounds from './core/Bounds'\r\nimport UIObject from './core/UIObject'\r\nimport AbstractShape from './core/AbstractShape'\r\nimport Canvas from './core/Canvas'\r\nimport MoveDockersCommand from './core/MoveDockersCommand'\r\nimport Shape from './core/Shape'\r\nimport Node from './core/Node'\r\nimport Edge from './core/Edge'\r\nimport Move from './core/Move'\r\nimport Controls from './core/Controls/index'\r\nimport Math from './core/Math'\r\n\r\nimport StencilSet from './core/StencilSet/index'\r\nimport SVG from './core/SVG'\r\nimport UIDragFunction from './core/UIEnableDrag'\r\n\r\nimport Editor from './Editor'\r\nimport Plugins from './Plugins'\r\nimport Utils from './Utils'\r\nimport CONFIG from './CONFIG'\r\nimport Log from './Log'\r\n\r\nconst ORYX = {\r\n  //set the path in the config.js file!!!!\r\n  PATH: 'editor/',\r\n  //CONFIGURATION: \"config.js\",\r\n\r\n  URLS: [],\r\n\r\n  alreadyLoaded: [],\r\n\r\n  configrationRetries: 0,\r\n\r\n  Version: '0.1.1',\r\n\r\n  /**\r\n   * First bootstrapping layer. The Oryx loading procedure begins. In this\r\n   * step, all preliminaries that are not in the responsibility of Oryx to be\r\n   * met have to be checked here, such as the existance of the prototpe\r\n   * library in the current execution environment. After that, the second\r\n   * bootstrapping layer is being invoked. Failing to ensure that any\r\n   * preliminary condition is not met has to fail with an error.\r\n   *\r\n   * 第一个引导层。Oryx开始加载，在这步骤，所有不属于Oryx责任的准备工作必须在这里检查MET，例如Prototpe的存在\r\n   * 当前执行环境中的库。之后，第二个正在调用引导层。未能确保不满足初步条件就必须失败并出现错误。\r\n   */\r\n  load: function () {\r\n    ORYX.Log.debug('Oryx begins loading procedure.')\r\n\r\n    // check for prototype\r\n    if ((typeof Prototype == 'undefined') ||\r\n      (typeof Element == 'undefined') ||\r\n      (typeof Element.Methods == 'undefined') ||\r\n      parseFloat(Prototype.Version.split('.')[0] + '.' +\r\n        Prototype.Version.split('.')[1]) < 1.5)\r\n\r\n      throw('Application requires the Prototype JavaScript framework >= 1.5.3')\r\n\r\n    ORYX.Log.debug('Prototype > 1.5 found.')\r\n\r\n    // continue loading.\r\n    ORYX._load()\r\n  },\r\n\r\n  /**\r\n   * Second bootstrapping layer. The oryx configuration is checked. When not\r\n   * yet loaded, config.js is being requested from the server. A repeated\r\n   * error in retrieving the configuration will result in an error to be\r\n   * thrown after a certain time of retries. Once the configuration is there,\r\n   * all urls that are registered with oryx loading are being requested from\r\n   * the server. Once everything is loaded, the third layer is being invoked.\r\n   */\r\n  _load: function () {\r\n    ORYX.loadPlugins()\r\n  },\r\n\r\n  /**\r\n   * Third bootstrapping layer. This is where first the plugin coniguration\r\n   * file is loaded into oryx, analyzed, and where all plugins are being\r\n   * requested by the server. Afterwards, all editor instances will be\r\n   * initialized.\r\n   */\r\n  loadPlugins: function () {\r\n    // load plugins if enabled.\r\n    if (ORYX.CONFIG.PLUGINS_ENABLED)\r\n      Utils._loadPlugins()\r\n    else\r\n      ORYX.Log.warn('Ignoring plugins, loading Core only.')\r\n\r\n    // init the editor instances.\r\n    init()\r\n  },\r\n  _loadPluginsOnFails: function (result) {\r\n    ORYX.Log.error('Plugin configuration file not available.')\r\n  }\r\n}\r\n\r\nORYX.CONFIG = CONFIG\r\nORYX.Log = Log\r\n\r\nORYX.Core = {}\r\nORYX.Core.Command = Command\r\nORYX.Core.Bounds = Bounds\r\nORYX.Core.UIObject = UIObject\r\nORYX.Core.AbstractShape = AbstractShape\r\nORYX.Core.Canvas = Canvas\r\nORYX.Core.MoveDockersCommand = MoveDockersCommand\r\nORYX.Core.Shape = Shape\r\nORYX.Core.Node = Node\r\nORYX.Core.Edge = Edge\r\nORYX.Core.Move = Move\r\nORYX.Core.UIDragFunction = UIDragFunction\r\nORYX.Core.Controls = Controls\r\nORYX.Core.Math = Math\r\nORYX.Core.StencilSet = StencilSet\r\nORYX.Core.SVG = SVG\r\n\r\n\r\nORYX.Editor = Editor\r\nORYX.Plugins = Plugins\r\nORYX.Utils = Utils\r\n\r\n/**\r\n * Main initialization method. To be called when loading\r\n * of the document, including all scripts, is completed.\r\n */\r\n\r\n\r\nfunction init () {\r\n  ORYX.Log.debug('Querying editor instances')\r\n  // Hack for WebKit to set the SVGElement-Classes\r\n  ORYX.Utils.setMissingClasses();\r\n  // If someone wants to create the editor instance himself\r\n  if (window.onOryxResourcesLoaded) {\r\n    window.onOryxResourcesLoaded()\r\n  } else {\r\n    // Else fetch the model from server and display editor\r\n    let modelId = window.location.search.substring(4)\r\n    let modelUrl = './service/model/' + modelId + '/json'\r\n    ORYX.Editor.createByUrl(modelUrl)\r\n  }\r\n}\r\n\r\nexport default ORYX\r\n","import ORYX from '../oryx'\r\nimport { t } from 'src/locale'\r\n\r\n// 帮助提示\r\nconst EDITOR_TOUR = {\r\n  /*\r\n   * General 'getting started' tutorial for the Editor.\r\n   */\r\n  gettingStarted: function ($scope, useLocalStorage) {\r\n    const _this = this\r\n    let userName\r\n    if (!$scope.account) {\r\n      userName = '开发者'\r\n    } else if ($scope.account.firstName) {\r\n      userName = $scope.account.firstName\r\n    } else {\r\n      userName = $scope.account.fullname\r\n    }\r\n\r\n    const translations = [\r\n      t('TOUR.WELCOME-TITLE', { userName: userName }),\r\n      t('TOUR.WELCOME-CONTENT'),\r\n      t('TOUR.PALETTE-TITLE'),\r\n      t('TOUR.PALETTE-CONTENT'),\r\n      t('TOUR.CANVAS-TITLE'),\r\n      t('TOUR.CANVAS-CONTENT'),\r\n      t('TOUR.DRAGDROP-TITLE'),\r\n      t('TOUR.DRAGDROP-CONTENT'),\r\n      t('TOUR.PROPERTIES-TITLE'),\r\n      t('TOUR.PROPERTIES-CONTENT'),\r\n      t('TOUR.TOOLBAR-TITLE'),\r\n      t('TOUR.TOOLBAR-CONTENT'),\r\n      t('TOUR.END-TITLE'),\r\n      t('TOUR.END-CONTENT')\r\n    ]\r\n    // We're using a hack here due to https://github.com/sorich87/bootstrap-tour/issues/85:\r\n    // when clicking next in the tour, it always sets the 'display' css property to 'none'\r\n    // The hack is simple: before the next step is shown, we reset the 'display' property to 'block'\r\n\r\n    const tourStepDomElements = ['body', '#paletteHelpWrapper',\r\n      '#canvasHelpWrapper', '#propertiesHelpWrapper', '#editor-header']\r\n\r\n    const tour = new Tour({\r\n      name: 'activitiEditorTour',\r\n      storage: (useLocalStorage ? window.localStorage : false),\r\n      container: 'body',\r\n      backdrop: true,\r\n      keyboard: true,\r\n      steps: [\r\n        {\r\n          orphan: true,\r\n          title: translations[0],\r\n          content: translations[1],\r\n          template: _this._buildStepTemplate(false, true, false, 300),\r\n          onNext: _this._buildOnNextFunction(tourStepDomElements[0])\r\n        },\r\n        {\r\n          element: tourStepDomElements[1],\r\n          title: translations[2],\r\n          content: translations[3],\r\n          template: _this._buildStepTemplate(false, true, false, 400, 'flowable/images/tour/open-group.gif'),\r\n          onNext: _this._buildOnNextFunction(tourStepDomElements[1])\r\n        },\r\n        {\r\n          element: tourStepDomElements[2],\r\n          title: translations[4],\r\n          content: translations[5],\r\n          placement: 'left',\r\n          template: _this._buildStepTemplate(false, true, false),\r\n          onNext: _this._buildOnNextFunction(tourStepDomElements[2])\r\n        },\r\n        {\r\n          orphan: true,\r\n          title: translations[6],\r\n          content: translations[7],\r\n          template: _this._buildStepTemplate(false, true, false, 720, 'flowable/images/tour/tour-dnd.gif'),\r\n          onNext: _this._buildOnNextFunction(tourStepDomElements[0])\r\n        },\r\n        {\r\n          element: tourStepDomElements[3],\r\n          title: translations[8],\r\n          content: translations[9],\r\n          placement: 'top',\r\n          template: _this._buildStepTemplate(false, true, false, 400),\r\n          onNext: _this._buildOnNextFunction(tourStepDomElements[3])\r\n        },\r\n        {\r\n          element: tourStepDomElements[4],\r\n          title: translations[10],\r\n          content: translations[11],\r\n          placement: 'bottom',\r\n          template: _this._buildStepTemplate(false, true, false, 400),\r\n          onNext: _this._buildOnNextFunction(tourStepDomElements[4])\r\n        },\r\n        {\r\n          orphan: true,\r\n          title: translations[12],\r\n          content: translations[13],\r\n          template: _this._buildStepTemplate(false, false, true, 400),\r\n          onNext: _this._buildOnNextFunction(tourStepDomElements[0])\r\n        }\r\n      ],\r\n      onEnd: _this._buildOnEndFunction(tourStepDomElements)\r\n    })\r\n    tour.init()\r\n    tour.start()\r\n  },\r\n\r\n  /*\r\n   * Tutorial showing how to use the bendpoint functionality for sequenceflow\r\n   */\r\n  sequenceFlowBendpoint: function ($scope, useLocalStorage) {\r\n    const _this = this\r\n    const translations = [\r\n      t('FEATURE-TOUR.BENDPOINT.TITLE'), t('FEATURE-TOUR.BENDPOINT.DESCRIPTION')\r\n    ]\r\n    // We're using a hack here due to https://github.com/sorich87/bootstrap-tour/issues/85:\r\n    // when clicking next in the tour, it always sets the 'display' css property to 'none'\r\n    // The hack is simple: before the next step is shown, we reset the 'display' property to 'block'\r\n\r\n    const tourStepDomElements = ['body']\r\n    const tour = new Tour({\r\n      name: 'bendpointTour',\r\n      storage: (useLocalStorage ? window.localStorage : false),\r\n      container: 'body',\r\n      backdrop: true,\r\n      keyboard: true,\r\n      steps: [\r\n        {\r\n          orphan: true,\r\n          title: translations[0],\r\n          content: translations[1],\r\n          template: _this._buildStepTemplate(false, false, true, 500, 'flowable/images/tour/sequenceflow-bendpoint.gif'),\r\n          onNext: _this._buildOnNextFunction(tourStepDomElements[0])\r\n        }\r\n      ],\r\n      onEnd: _this._buildOnEndFunction(tourStepDomElements)\r\n    })\r\n\r\n    tour.init()\r\n    tour.start()\r\n  },\r\n\r\n  _buildStepTemplate: function (addPrevButton, addNextButton, addEndTourButton, optionalForcedWidth, image) {\r\n    let width = 200\r\n    if (optionalForcedWidth) {\r\n      width = optionalForcedWidth\r\n    }\r\n\r\n    let template =\r\n      '<div class=\\'popover tour\\' style=\\'max-width:' + width + 'px\\'>' +\r\n      '<div class=\\'arrow\\'></div>' +\r\n      '<h3 class=\\'popover-title\\'></h3>' +\r\n      '<div class=\\'popover-content\\'></div>' +\r\n      '<div class=\\'popover-navigation\\'>'\r\n    if (image) {\r\n      template = template + '<div><img src=\\'' + image + '\\' style=\\'border 1px solid black;margin:5px 0 5px 0;\\'></img></div>'\r\n    }\r\n    if (addPrevButton) {\r\n      template = template + '<button class=\\'btn btn-sm btn-default \\' data-role=\\'prev\\'>« Prev</button>'\r\n    }\r\n    if (addNextButton) {\r\n      template = template + '<button class=\\'btn btn-sm btn-default\\' data-role=\\'next\\' style=\\'float:right\\'\">Next »</button>'\r\n    }\r\n    if (addEndTourButton) {\r\n      template = template + '<button class=\\'btn btn-warning btn-sm\\' data-role=\\'end\\' style=\\'float:right\\'\">Got it!</button>'\r\n    }\r\n\r\n    template = template + '</div>' + '</nav>' + '</div>'\r\n    return template\r\n  },\r\n\r\n  _buildOnNextFunction: function (selector) {\r\n    return function () {\r\n      jQuery(selector).each(function (i, obj) {\r\n        obj.style.display = 'block'\r\n      })\r\n    }\r\n  },\r\n\r\n  _buildOnEndFunction: function (selectors) {\r\n    return function () {\r\n      for (let elementsToResetIndex = 0; elementsToResetIndex < selectors.length; elementsToResetIndex++) {\r\n        jQuery(selectors[elementsToResetIndex]).each(function (i, obj) {\r\n          obj.style.display = 'block'\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst ACTIONS = {\r\n  closeEditor: function (services) {\r\n    if (services.editorManager && services.editorManager.getStencilData()) {\r\n      const stencilNameSpace = services.editorManager.getStencilData().namespace\r\n      if (stencilNameSpace !== undefined &&\r\n        stencilNameSpace !== null &&\r\n        stencilNameSpace.indexOf('cmmn1.1') !== -1) {\r\n        services.$location.path('/casemodels')\r\n        return\r\n      }\r\n    }\r\n    services.$location.path('/processes')\r\n  },\r\n  // navigateToProcess: function (processId) {\r\n  //   const navigateEvent = {\r\n  //     type: FLOWABLE.eventBus.EVENT_TYPE_NAVIGATE_TO_PROCESS,\r\n  //     processId: processId\r\n  //   }\r\n  //   this.eventBus.dispatch(FLOWABLE.eventBus.EVENT_TYPE_NAVIGATE_TO_PROCESS, navigateEvent)\r\n  // },\r\n  validate: function (services) {\r\n    // _internalCreateModal({\r\n    //   backdrop: true,\r\n    //   keyboard: true,\r\n    //   template: 'editor-app/popups/validate-model.html?version=' + Date.now(),\r\n    //   scope: services.$scope\r\n    // }, services.$modal, services.$scope)\r\n  },\r\n  undo: function (services) {\r\n    // Get the last commands\r\n    const lastCommands = services.$scope.undoStack.pop()\r\n    if (lastCommands) {\r\n      // Add the commands to the redo stack\r\n      services.$scope.redoStack.push(lastCommands)\r\n      // Force refresh of selection, might be that the undo command\r\n      // impacts properties in the selected item\r\n      if (services.$rootScope && services.$rootScope.forceSelectionRefresh) {\r\n        services.$rootScope.forceSelectionRefresh = true\r\n      }\r\n\r\n      // Rollback every command\r\n      for (let i = lastCommands.length - 1; i >= 0; --i) {\r\n        lastCommands[i].rollback()\r\n      }\r\n\r\n      // Update and refresh the canvas\r\n      services.editorManager.handleEvents({\r\n        type: ORYX.CONFIG.EVENT_UNDO_ROLLBACK,\r\n        commands: lastCommands\r\n      })\r\n\r\n      // Update\r\n      services.editorManager.getCanvas().update()\r\n      services.editorManager.updateSelection()\r\n    }\r\n\r\n    let toggleUndo = false\r\n    if (services.$scope.undoStack.length === 0) {\r\n      toggleUndo = true\r\n    }\r\n\r\n    let toggleRedo = false\r\n    if (services.$scope.redoStack.length > 0) {\r\n      toggleRedo = true\r\n    }\r\n\r\n    if (toggleUndo || toggleRedo) {\r\n      for (let i = 0; i < services.$scope.items.length; i++) {\r\n        let item = services.$scope.items[i]\r\n        if (toggleUndo && item.action === 'FLOWABLE.TOOLBAR.ACTIONS.undo') {\r\n          item.enabled = false\r\n        } else if (toggleRedo && item.action === 'FLOWABLE.TOOLBAR.ACTIONS.redo') {\r\n          item.enabled = true\r\n        }\r\n      }\r\n    }\r\n  },\r\n  redo: function (services) {\r\n    // Get the last commands from the redo stack\r\n    const lastCommands = services.$scope.redoStack.pop()\r\n    if (lastCommands) {\r\n      // Add this commands to the undo stack\r\n      services.$scope.undoStack.push(lastCommands)\r\n\r\n      // Force refresh of selection, might be that the redo command\r\n      // impacts properties in the selected item\r\n      if (services.$rootScope && services.$rootScope.forceSelectionRefresh) {\r\n        services.$rootScope.forceSelectionRefresh = true\r\n      }\r\n\r\n      // Execute those commands\r\n      lastCommands.each(function (command) {\r\n        command.execute()\r\n      })\r\n\r\n      // Update and refresh the canvas\r\n      services.editorManager.handleEvents({\r\n        type: ORYX.CONFIG.EVENT_UNDO_EXECUTE,\r\n        commands: lastCommands\r\n      })\r\n\r\n      // Update\r\n      services.editorManager.getCanvas().update()\r\n      services.editorManager.updateSelection()\r\n    }\r\n\r\n    let toggleUndo = false\r\n    if (services.$scope.undoStack.length > 0) {\r\n      toggleUndo = true\r\n    }\r\n\r\n    let toggleRedo = false\r\n    if (services.$scope.redoStack.length == 0) {\r\n      toggleRedo = true\r\n    }\r\n\r\n    if (toggleUndo || toggleRedo) {\r\n      for (let i = 0; i < services.$scope.items.length; i++) {\r\n        let item = services.$scope.items[i]\r\n        if (toggleUndo && item.action === 'FLOWABLE.TOOLBAR.ACTIONS.undo') {\r\n          services.$scope.safeApply(function () {\r\n            item.enabled = true\r\n          })\r\n        } else if (toggleRedo && item.action === 'FLOWABLE.TOOLBAR.ACTIONS.redo') {\r\n          services.$scope.safeApply(function () {\r\n            item.enabled = false\r\n          })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  cut: function (services) {\r\n    this._getOryxEditPlugin(services).editCut()\r\n    for (let i = 0; i < services.$scope.items.length; i++) {\r\n      let item = services.$scope.items[i]\r\n      if (item.action === 'FLOWABLE.TOOLBAR.ACTIONS.paste') {\r\n        item.enabled = true\r\n      }\r\n    }\r\n  },\r\n  copy: function (services) {\r\n    this._getOryxEditPlugin(services).editCopy()\r\n    for (let i = 0; i < services.$scope.items.length; i++) {\r\n      let item = services.$scope.items[i]\r\n      if (item.action === 'FLOWABLE.TOOLBAR.ACTIONS.paste') {\r\n        item.enabled = true\r\n      }\r\n    }\r\n  },\r\n  paste: function (services) {\r\n    this._getOryxEditPlugin(services).editPaste()\r\n  },\r\n  deleteItem: function (services) {\r\n    this._getOryxEditPlugin(services).editDelete()\r\n  },\r\n  addBendPoint: function (services) {\r\n    // Show the tutorial the first time\r\n    EDITOR_TOUR.sequenceFlowBendpoint(services.$scope, true)\r\n\r\n    const dockerPlugin = this._getOryxDockerPlugin(services)\r\n    let enableAdd = !dockerPlugin.enabledAdd()\r\n    dockerPlugin.setEnableAdd(enableAdd)\r\n    if (enableAdd) {\r\n      dockerPlugin.setEnableRemove(false)\r\n      document.body.style.cursor = 'pointer'\r\n    } else {\r\n      document.body.style.cursor = 'default'\r\n    }\r\n  },\r\n  removeBendPoint: function (services) {\r\n    // Show the tutorial the first time\r\n    EDITOR_TOUR.sequenceFlowBendpoint(services.$scope, true)\r\n    const dockerPlugin = this._getOryxDockerPlugin(services)\r\n    let enableRemove = !dockerPlugin.enabledRemove()\r\n    dockerPlugin.setEnableRemove(enableRemove)\r\n    if (enableRemove) {\r\n      dockerPlugin.setEnableAdd(false)\r\n      document.body.style.cursor = 'pointer'\r\n    } else {\r\n      document.body.style.cursor = 'default'\r\n    }\r\n  },\r\n  /**\r\n   * Helper method: fetches the Oryx Edit plugin from the provided scope,\r\n   * if not on the scope, it is created and put on the scope for further use.\r\n   *\r\n   * It's important to reuse the same EditPlugin while the same scope is active,\r\n   * as the clipboard is stored for the whole lifetime of the scope.\r\n   */\r\n  _getOryxEditPlugin: function (services) {\r\n    const $scope = services.$scope\r\n    const editorManager = services.editorManager\r\n    if ($scope.oryxEditPlugin === undefined || $scope.oryxEditPlugin === null) {\r\n      $scope.oryxEditPlugin = new ORYX.Plugins.Edit(editorManager.getEditor())\r\n    }\r\n    return $scope.oryxEditPlugin\r\n  },\r\n  // 缩放\r\n  zoomIn: function (services) {\r\n    this._getOryxViewPlugin(services).zoom([1.0 + ORYX.CONFIG.CustomConfigs.ZOOM_OFFSET])\r\n  },\r\n  zoomOut: function (services) {\r\n    this._getOryxViewPlugin(services).zoom([1.0 - ORYX.CONFIG.CustomConfigs.ZOOM_OFFSET])\r\n  },\r\n  zoomActual: function (services) {\r\n    this._getOryxViewPlugin(services).setAFixZoomLevel(1)\r\n  },\r\n  zoomFit: function (services) {\r\n    this._getOryxViewPlugin(services).zoomFitToModel()\r\n  },\r\n  // 对齐\r\n  alignVertical: function (services) {\r\n    this._getOryxArrangmentPlugin(services).alignShapes([ORYX.CONFIG.EDITOR_ALIGN_CENTER])\r\n  },\r\n  alignHorizontal: function (services) {\r\n    this._getOryxArrangmentPlugin(services).alignShapes([ORYX.CONFIG.EDITOR_ALIGN_MIDDLE])\r\n  },\r\n\r\n  sameSize: function (services) {\r\n    this._getOryxArrangmentPlugin(services).alignShapes([ORYX.CONFIG.EDITOR_ALIGN_SIZE])\r\n  },\r\n  help: function (services) {\r\n    EDITOR_TOUR.gettingStarted(services.$scope)\r\n  },\r\n  /**\r\n   * Helper method: fetches the Oryx View plugin from the provided scope,\r\n   * if not on the scope, it is created and put on the scope for further use.\r\n   */\r\n  _getOryxViewPlugin: function (services) {\r\n    const $scope = services.$scope\r\n    const editorManager = services.editorManager\r\n    if ($scope.oryxViewPlugin === undefined || $scope.oryxViewPlugin === null) {\r\n      $scope.oryxViewPlugin = new ORYX.Plugins.View(editorManager.getEditor())\r\n    }\r\n    return $scope.oryxViewPlugin\r\n  },\r\n  _getOryxArrangmentPlugin: function (services) {\r\n    const $scope = services.$scope\r\n    const editorManager = services.editorManager\r\n    if ($scope.oryxArrangmentPlugin === undefined || $scope.oryxArrangmentPlugin === null) {\r\n      $scope.oryxArrangmentPlugin = new ORYX.Plugins.Arrangement(editorManager.getEditor())\r\n    }\r\n    return $scope.oryxArrangmentPlugin\r\n  },\r\n  _getOryxDockerPlugin: function (services) {\r\n    const $scope = services.$scope\r\n    const editorManager = services.editorManager\r\n    if ($scope.oryxDockerPlugin === undefined || $scope.oryxDockerPlugin === null) {\r\n      $scope.oryxDockerPlugin = new ORYX.Plugins.AddDocker(editorManager.getEditor())\r\n    }\r\n    return $scope.oryxDockerPlugin\r\n  }\r\n}\r\n\r\nexport default ACTIONS\r\n","import ORYX from 'src/oryx'\r\nimport ORYX_Config from '../../oryx/CONFIG'\r\n\r\nexport default class CreateCommand extends ORYX.Core.Command {\r\n  constructor (option, currentReference, position, facade) {\r\n    super()\r\n    this.option = option\r\n    this.currentReference = currentReference\r\n    this.position = position\r\n    this.facade = facade\r\n    this.shape\r\n    this.edge\r\n    this.targetRefPos\r\n    this.sourceRefPos\r\n    /*\r\n     * clone options parameters\r\n     */\r\n    this.connectedShape = option.connectedShape\r\n    this.connectingType = option.connectingType\r\n    this.namespace = option.namespace\r\n    this.type = option.type\r\n    this.containedStencil = option.containedStencil\r\n    this.parent = option.parent\r\n    this.currentReference = currentReference\r\n    this.shapeOptions = option.shapeOptions\r\n  }\r\n\r\n  execute () {\r\n    if (this.shape) {\r\n      if (this.shape instanceof ORYX.Core.Node) {\r\n        this.parent.add(this.shape)\r\n        if (this.edge) {\r\n          this.facade.getCanvas().add(this.edge)\r\n          this.edge.dockers.first().setDockedShape(this.connectedShape)\r\n          this.edge.dockers.first().setReferencePoint(this.sourceRefPos)\r\n          this.edge.dockers.last().setDockedShape(this.shape)\r\n          this.edge.dockers.last().setReferencePoint(this.targetRefPos)\r\n        }\r\n\r\n        this.facade.setSelection([this.shape])\r\n\r\n      } else if (this.shape instanceof ORYX.Core.Edge) {\r\n        this.facade.getCanvas().add(this.shape)\r\n        this.shape.dockers.first().setDockedShape(this.connectedShape)\r\n        this.shape.dockers.first().setReferencePoint(this.sourceRefPos)\r\n      }\r\n    } else {\r\n      this.shape = this.facade.createShape(this.option)\r\n      this.edge = (!(this.shape instanceof ORYX.Core.Edge)) ?\r\n        this.shape.getIncomingShapes().first() : undefined\r\n    }\r\n\r\n    if (this.currentReference && this.position) {\r\n      if (this.shape instanceof ORYX.Core.Edge) {\r\n\r\n        if (!(this.currentReference instanceof ORYX.Core.Canvas)) {\r\n          this.shape.dockers.last().setDockedShape(this.currentReference)\r\n\r\n          if (this.currentReference.getStencil().idWithoutNs() === 'TextAnnotation') {\r\n            let midpoint = {}\r\n            midpoint.x = 0\r\n            midpoint.y = this.currentReference.bounds.height() / 2\r\n            this.shape.dockers.last().setReferencePoint(midpoint)\r\n          } else {\r\n            this.shape.dockers.last().setReferencePoint(this.currentReference.bounds.midPoint())\r\n          }\r\n        } else {\r\n          this.shape.dockers.last().bounds.centerMoveTo(this.position)\r\n        }\r\n        this.sourceRefPos = this.shape.dockers.first().referencePoint\r\n        this.targetRefPos = this.shape.dockers.last().referencePoint\r\n      } else if (this.edge) {\r\n        this.sourceRefPos = this.edge.dockers.first().referencePoint\r\n        this.targetRefPos = this.edge.dockers.last().referencePoint\r\n      }\r\n    } else {\r\n      var containedStencil = this.containedStencil\r\n      var connectedShape = this.connectedShape\r\n      var bc = connectedShape.bounds\r\n      var bs = this.shape.bounds\r\n\r\n      var pos = bc.center()\r\n      if (containedStencil.defaultAlign() === 'north') {\r\n        pos.y -= (bc.height() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET + (bs.height() / 2)\r\n      } else if (containedStencil.defaultAlign() === 'northeast') {\r\n        pos.x += (bc.width() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET_CORNER + (bs.width() / 2)\r\n        pos.y -= (bc.height() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET_CORNER + (bs.height() / 2)\r\n      } else if (containedStencil.defaultAlign() === 'southeast') {\r\n        pos.x += (bc.width() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET_CORNER + (bs.width() / 2)\r\n        pos.y += (bc.height() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET_CORNER + (bs.height() / 2)\r\n      } else if (containedStencil.defaultAlign() === 'south') {\r\n        pos.y += (bc.height() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET + (bs.height() / 2)\r\n      } else if (containedStencil.defaultAlign() === 'southwest') {\r\n        pos.x -= (bc.width() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET_CORNER + (bs.width() / 2)\r\n        pos.y += (bc.height() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET_CORNER + (bs.height() / 2)\r\n      } else if (containedStencil.defaultAlign() === 'west') {\r\n        pos.x -= (bc.width() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET + (bs.width() / 2)\r\n      } else if (containedStencil.defaultAlign() === 'northwest') {\r\n        pos.x -= (bc.width() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET_CORNER + (bs.width() / 2)\r\n        pos.y -= (bc.height() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET_CORNER + (bs.height() / 2)\r\n      } else {\r\n        pos.x += (bc.width() / 2) + ORYX.CONFIG.CustomConfigs.SHAPEMENU_CREATE_OFFSET + (bs.width() / 2)\r\n      }\r\n\r\n      // Move shape to the new position\r\n      this.shape.bounds.centerMoveTo(pos)\r\n\r\n      // Move all dockers of a node to the position\r\n      if (this.shape instanceof ORYX.Core.Node) {\r\n        (this.shape.dockers || []).each(function (docker) {\r\n          docker.bounds.centerMoveTo(pos)\r\n        })\r\n      }\r\n\r\n      //this.shape.update();\r\n      this.position = pos\r\n\r\n      if (this.edge) {\r\n        this.sourceRefPos = this.edge.dockers.first().referencePoint\r\n        this.targetRefPos = this.edge.dockers.last().referencePoint\r\n      }\r\n    }\r\n\r\n    this.facade.getCanvas().update()\r\n    // this.facade.raiseEvent({ type: 'newshape_addin_canvas', shape: this.shape })\r\n    this.facade.handleEvents({\r\n      type: 'newshape_addin_canvas',\r\n      shape: this.shape\r\n    })\r\n    this.facade.updateSelection()\r\n  }\r\n\r\n  rollback () {\r\n    this.facade.deleteShape(this.shape)\r\n    if (this.edge) {\r\n      this.facade.deleteShape(this.edge)\r\n    }\r\n    // this.currentParent.update();\r\n    this.facade.setSelection(this.facade.getSelection().without(this.shape, this.edge))\r\n  }\r\n}\r\n","// 切换元素类型\r\nimport ORYX from 'src/oryx'\r\n\r\nexport default class MorphTo extends ORYX.Core.Command {\r\n  constructor (shape, stencil, facade) {\r\n    super()\r\n    this.shape = shape\r\n    this.stencil = stencil\r\n    this.facade = facade\r\n  }\r\n\r\n  execute () {\r\n    const shape = this.shape\r\n    const stencil = this.stencil\r\n    const resourceId = shape.resourceId\r\n\r\n    // Serialize all attributes\r\n    let serialized = shape.serialize()\r\n    stencil.properties().each((function (prop) {\r\n      if (prop.readonly()) {\r\n        serialized = serialized.reject(function (serProp) {\r\n          return serProp.name === prop.id()\r\n        })\r\n      }\r\n    }).bind(this))\r\n\r\n    // Get shape if already created, otherwise create a new shape\r\n    if (this.newShape) {\r\n      this.facade.getCanvas().add(this.newShape)\r\n    } else {\r\n      this.newShape = this.facade.createShape({\r\n        type: stencil.id(),\r\n        namespace: stencil.namespace(),\r\n        resourceId: resourceId\r\n      })\r\n    }\r\n\r\n    // calculate new bounds using old shape's upperLeft and new shape's width/height\r\n    let boundsObj = serialized.find(function (serProp) {\r\n      return (serProp.prefix === 'oryx' && serProp.name === 'bounds')\r\n    })\r\n\r\n    let changedBounds = null\r\n\r\n    if (!this.facade.getRules().preserveBounds(shape.getStencil())) {\r\n      let bounds = boundsObj.value.split(',')\r\n      if (parseInt(bounds[0], 10) > parseInt(bounds[2], 10)) {\r\n        // if lowerRight comes first, swap array items\r\n        let tmp = bounds[0]\r\n        bounds[0] = bounds[2]\r\n        bounds[2] = tmp\r\n        tmp = bounds[1]\r\n        bounds[1] = bounds[3]\r\n        bounds[3] = tmp\r\n      }\r\n      bounds[2] = parseInt(bounds[0], 10) + this.newShape.bounds.width()\r\n      bounds[3] = parseInt(bounds[1], 10) + this.newShape.bounds.height()\r\n      boundsObj.value = bounds.join(',')\r\n    } else {\r\n      let height = shape.bounds.height()\r\n      let width = shape.bounds.width()\r\n\r\n      // consider the minimum and maximum size of\r\n      // the new shape\r\n\r\n      if (this.newShape.minimumSize) {\r\n        if (shape.bounds.height() < this.newShape.minimumSize.height) {\r\n          height = this.newShape.minimumSize.height\r\n        }\r\n\r\n        if (shape.bounds.width() < this.newShape.minimumSize.width) {\r\n          width = this.newShape.minimumSize.width\r\n        }\r\n      }\r\n\r\n      if (this.newShape.maximumSize) {\r\n        if (shape.bounds.height() > this.newShape.maximumSize.height) {\r\n          height = this.newShape.maximumSize.height\r\n        }\r\n\r\n        if (shape.bounds.width() > this.newShape.maximumSize.width) {\r\n          width = this.newShape.maximumSize.width\r\n        }\r\n      }\r\n\r\n      changedBounds = {\r\n        a: {\r\n          x: shape.bounds.a.x,\r\n          y: shape.bounds.a.y\r\n        },\r\n        b: {\r\n          x: shape.bounds.a.x + width,\r\n          y: shape.bounds.a.y + height\r\n        }\r\n      }\r\n    }\r\n\r\n    let oPos = shape.bounds.center()\r\n    if (changedBounds !== null) {\r\n      this.newShape.bounds.set(changedBounds)\r\n    }\r\n\r\n    // Set all related dockers\r\n    this.setRelatedDockers(shape, this.newShape)\r\n\r\n    // store DOM position of old shape\r\n    let parentNode = shape.node.parentNode\r\n    let nextSibling = shape.node.nextSibling\r\n\r\n    // Delete the old shape\r\n    this.facade.deleteShape(shape)\r\n\r\n    // Deserialize the new shape - Set all attributes\r\n    this.newShape.deserialize(serialized)\r\n    /*\r\n     * Change color to default if unchanged\r\n     * 23.04.2010\r\n     */\r\n    if (shape.getStencil().property('oryx-bgcolor')\r\n      && shape.properties['oryx-bgcolor']\r\n      && shape.getStencil().property('oryx-bgcolor').value().toUpperCase() === shape.properties['oryx-bgcolor'].toUpperCase()) {\r\n      if (this.newShape.getStencil().property('oryx-bgcolor')) {\r\n        this.newShape.setProperty('oryx-bgcolor', this.newShape.getStencil().property('oryx-bgcolor').value())\r\n      }\r\n    }\r\n\r\n    if (changedBounds !== null) {\r\n      this.newShape.bounds.set(changedBounds)\r\n    }\r\n\r\n    if (this.newShape.getStencil().type() === 'edge' || (this.newShape.dockers.length === 0 || !this.newShape.dockers[0].getDockedShape())) {\r\n      this.newShape.bounds.centerMoveTo(oPos)\r\n    }\r\n\r\n    if (this.newShape.getStencil().type() === 'node' && (this.newShape.dockers.length === 0 || !this.newShape.dockers[0].getDockedShape())) {\r\n      this.setRelatedDockers(this.newShape, this.newShape)\r\n    }\r\n\r\n    // place at the DOM position of the old shape\r\n    if (nextSibling) parentNode.insertBefore(this.newShape.node, nextSibling)\r\n    else parentNode.appendChild(this.newShape.node)\r\n\r\n    // Set selection\r\n    this.facade.setSelection([this.newShape])\r\n    this.facade.getCanvas().update()\r\n    this.facade.updateSelection()\r\n  }\r\n\r\n  rollback () {\r\n    if (!this.shape || !this.newShape || !this.newShape.parent) {\r\n      return\r\n    }\r\n    // Append shape to the parent\r\n    this.newShape.parent.add(this.shape)\r\n    // Set dockers\r\n    this.setRelatedDockers(this.newShape, this.shape)\r\n    // Delete new shape\r\n    this.facade.deleteShape(this.newShape)\r\n    // Set selection\r\n    this.facade.setSelection([this.shape])\r\n    // Update\r\n    this.facade.getCanvas().update()\r\n    this.facade.updateSelection()\r\n  }\r\n\r\n  /**\r\n   * Set all incoming and outgoing edges from the shape to the new shape\r\n   * @param {Shape} shape\r\n   * @param {Shape} newShape\r\n   */\r\n  setRelatedDockers (shape, newShape) {\r\n    if (shape.getStencil().type() === 'node') {\r\n\r\n      (shape.incoming || []).concat(shape.outgoing || [])\r\n        .each(function (i) {\r\n          i.dockers.each(function (docker) {\r\n            if (docker.getDockedShape() == shape) {\r\n              let rPoint = Object.clone(docker.referencePoint)\r\n              // Move reference point per percent\r\n\r\n              let rPointNew = {\r\n                x: rPoint.x * newShape.bounds.width() / shape.bounds.width(),\r\n                y: rPoint.y * newShape.bounds.height() / shape.bounds.height()\r\n              }\r\n\r\n              docker.setDockedShape(newShape)\r\n              // Set reference point and center to new position\r\n              docker.setReferencePoint(rPointNew)\r\n              if (i instanceof ORYX.Core.Edge) {\r\n                docker.bounds.centerMoveTo(rPointNew)\r\n              } else {\r\n                let absXY = shape.absoluteXY()\r\n                docker.bounds.centerMoveTo({ x: rPointNew.x + absXY.x, y: rPointNew.y + absXY.y })\r\n                //docker.bounds.moveBy({x:rPointNew.x-rPoint.x, y:rPointNew.y-rPoint.y});\r\n              }\r\n            }\r\n          })\r\n        })\r\n\r\n      // for attached events\r\n      if (shape.dockers.length > 0 && shape.dockers.first().getDockedShape()) {\r\n        newShape.dockers.first().setDockedShape(shape.dockers.first().getDockedShape())\r\n        newShape.dockers.first().setReferencePoint(Object.clone(shape.dockers.first().referencePoint))\r\n      }\r\n\r\n    } else { // is edge\r\n      newShape.dockers.first().setDockedShape(shape.dockers.first().getDockedShape())\r\n      newShape.dockers.first().setReferencePoint(shape.dockers.first().referencePoint)\r\n      newShape.dockers.last().setDockedShape(shape.dockers.last().getDockedShape())\r\n      newShape.dockers.last().setReferencePoint(shape.dockers.last().referencePoint)\r\n    }\r\n  }\r\n}\r\n","import ORYX from 'src/oryx'\r\n\r\nexport default class SetProperty extends ORYX.Core.Command {\r\n  constructor (key, oldValue, newValue, shape, facade) {\r\n    super()\r\n    this.key = key\r\n    this.oldValue = oldValue\r\n    this.newValue = newValue\r\n    this.shape = shape\r\n    this.facade = facade\r\n  }\r\n  execute () {\r\n    this.shape.setProperty(this.key, this.newValue)\r\n    this.facade.getCanvas().update()\r\n    this.facade.updateSelection()\r\n  }\r\n  rollback () {\r\n    this.shape.setProperty(this.key, this.oldValue)\r\n    this.facade.getCanvas().update()\r\n    this.facade.updateSelection()\r\n  }\r\n}\r\n","import ORYX from 'src/oryx'\r\n\r\nexport default class CommandClass extends ORYX.Core.Command {\r\n  constructor (option, dockedShape, canAttach, position, facade) {\r\n    super()\r\n    this.option = option\r\n    this.docker = null\r\n    this.dockedShape = dockedShape\r\n    this.dockedShapeParent = dockedShape.parent || facade.getCanvas()\r\n    this.position = position\r\n    this.facade = facade\r\n    this.selection = this.facade.getSelection()\r\n    this.shape = null\r\n    this.parent = null\r\n    this.canAttach = canAttach\r\n  }\r\n\r\n  execute () {\r\n    if (!this.shape) {\r\n      this.shape = this.facade.createShape(this.option)\r\n      this.parent = this.shape.parent\r\n    } else if (this.parent) {\r\n      this.parent.add(this.shape)\r\n    }\r\n\r\n    if (this.canAttach && this.shape.dockers && this.shape.dockers.length) {\r\n      this.docker = this.shape.dockers[0]\r\n\r\n      this.dockedShapeParent.add(this.docker.parent)\r\n\r\n      // Set the Docker to the new Shape\r\n      this.docker.setDockedShape(undefined)\r\n      this.docker.bounds.centerMoveTo(this.position)\r\n      if (this.dockedShape !== this.facade.getCanvas()) {\r\n        this.docker.setDockedShape(this.dockedShape)\r\n      }\r\n      this.facade.setSelection([this.docker.parent])\r\n    }\r\n\r\n    this.facade.getCanvas().update()\r\n    this.facade.updateSelection()\r\n\r\n  }\r\n\r\n  rollback () {\r\n    if (this.shape) {\r\n      this.facade.setSelection(this.selection.without(this.shape))\r\n      this.facade.deleteShape(this.shape)\r\n    }\r\n    if (this.canAttach && this.docker) {\r\n      this.docker.setDockedShape(undefined)\r\n    }\r\n    this.facade.getCanvas().update()\r\n    this.facade.updateSelection()\r\n\r\n  }\r\n}\r\n\r\n","import FLOWABLE_CONFIG from './FLOWABLE_Config'\r\nimport TOOLBAR_ACTIONS from './TOOLBAR_ACTIONS'\r\nimport FLOW_eventBus from './FLOW_eventBus'\r\nimport { findGroup, addGroup } from '../Util'\r\nimport ORYX from '../oryx'\r\n\r\nimport CreateCommand from './Command/CreateCommand'\r\nimport MorphTo from './Command/MorphTo'\r\nimport SetProperty from './Command/setProperty'\r\nimport CommandClass from './Command/commandClass'\r\n\r\nconst FLOWABLE = jQuery.extend(true, {}, FLOWABLE_CONFIG)\r\n/**流程图编辑器 类\r\n * @params modelData: 流程图实例数据\r\n * @params stencilData: 流程元素/组件\r\n **/\r\nexport default class EditorManager {\r\n  Commands = {\r\n    CreateCommand,\r\n    MorphTo,\r\n    SetProperty,\r\n    CommandClass\r\n  }\r\n  TOOLBAR_ACTIONS = TOOLBAR_ACTIONS\r\n  constructor (config) {\r\n    this.listeners = {}\r\n    config = jQuery.extend(true, {}, config)\r\n    // this.editorConfigs = jQuery.extend(true, FLOWABLE, config.editorConfigs)\r\n    config.editorConfigs && ORYX.CONFIG.setCustomConfigs(config.editorConfigs)\r\n    this.property_config = config.editorConfigs.PROPERTY_CONFIG\r\n    this.treeFilteredElements = ['SubProcess', 'CollapsedSubProcess']\r\n    this.canvasTracker = new Hash()\r\n    this.structualIcons = {\r\n      'SubProcess': 'expanded.subprocess.png',\r\n      'CollapsedSubProcess': 'subprocess.png',\r\n      'EventSubProcess': 'event.subprocess.png'\r\n    }\r\n\r\n    // 设置不需要双击修改名称功能的节点\r\n    this.elementsWithoutRenameAction = config.elementsWithoutRenameAction\r\n\r\n    this.setModelId(config.modelData.modelId)\r\n    this.current = this.modelId // 当前流程id\r\n    this.loading = true\r\n\r\n    // 设置 this.modelData\r\n    this.setModelData(config.modelData)\r\n    // 设置 this.stencilData\r\n    this.setStencilData(config.stencilData)\r\n    this.setShowStencilData()\r\n\r\n    this.setToolbarItems()\r\n\r\n    const baseUrl = 'http://b3mn.org/stencilset/'\r\n\r\n    const stencilSet = new ORYX.Core.StencilSet.StencilSet(baseUrl, config.stencilData)\r\n\r\n    ORYX.Core.StencilSet.loadStencilSet(baseUrl, stencilSet, config.modelData.modelId)\r\n    config.pluginConfig && ORYX.Plugins._loadPlugins(config.pluginConfig)\r\n    // 拖拽功能辅助变量\r\n    this.dragCurrentParent = undefined\r\n    this.dragCurrentParentId = undefined\r\n    this.dragCurrentParentStencil = undefined\r\n    this.dropTargetElement = undefined\r\n\r\n    // 元素选择辅助变量\r\n    this.selectedItem = {}\r\n\r\n    this.bootEditor()\r\n  }\r\n  assignCommand (type, ...configs) {\r\n    if (!type) return\r\n    const Commands = this.Commands\r\n    let command = new Commands[type](...configs)\r\n    this.executeCommands([command])\r\n  }\r\n\r\n  instanceofCanvas (shape) {\r\n    return shape instanceof ORYX.Core.Canvas\r\n  }\r\n  instanceofNode (shape) {\r\n    return shape instanceof ORYX.Core.Node\r\n  }\r\n  instanceofEdge (shape) {\r\n    return shape instanceof ORYX.Core.Edge\r\n  }\r\n\r\n  getSelectedItem () { return this.selectedItem }\r\n  getSelectedShape () { return this.selectedShape }\r\n  getContainmentRules () { return this.containmentRules }\r\n  getToolbarItems () { return this.toolbarItems }\r\n  setToolbarItems () {\r\n    let items = []\r\n    const toolbarItems = FLOWABLE.TOOLBAR_CONFIG.items\r\n    for (let i = 0; i < toolbarItems.length; i++) {\r\n      if (this.modelData.model.modelType === 'form') {\r\n        if (!toolbarItems[i].disableInForm) {\r\n          items.push(toolbarItems[i])\r\n        }\r\n      } else {\r\n        items.push(toolbarItems[i])\r\n      }\r\n    }\r\n    this.toolbarItems = items\r\n  }\r\n\r\n  getSecondaryItems () { return FLOWABLE.TOOLBAR_CONFIG.secondaryItems }\r\n\r\n  getModelId () { return this.modelId }\r\n  setModelId (modelId) { this.modelId = modelId }\r\n\r\n  getModel () {\r\n    this.syncCanvasTracker()\r\n\r\n    let modelMetaData = this.getBaseModelData()\r\n\r\n    let stencilId = undefined\r\n    let stencilSetNamespace = undefined\r\n    let stencilSetUrl = undefined\r\n    if (modelMetaData.model.stencilset.namespace == 'http://b3mn.org/stencilset/cmmn1.1#') {\r\n      stencilId = 'CMMNDiagram'\r\n      stencilSetNamespace = 'http://b3mn.org/stencilset/cmmn1.1#'\r\n      stencilSetUrl = '../editor/stencilsets/cmmn1.1/cmmn1.1.json'\r\n    } else {\r\n      stencilId = 'BPMNDiagram'\r\n      stencilSetNamespace = 'http://b3mn.org/stencilset/bpmn2.0#'\r\n      stencilSetUrl = '../editor/stencilsets/bpmn2.0/bpmn2.0.json'\r\n    }\r\n\r\n    // this is an object.\r\n    let editorConfig = this.editor.getJSON()\r\n    console.log(222, this.modelId)\r\n    let model = {\r\n      modelId: this.modelId,\r\n      bounds: editorConfig.bounds,\r\n      properties: editorConfig.properties,\r\n      childShapes: JSON.parse(this.canvasTracker.get(this.modelId)),\r\n      stencil: {\r\n        id: stencilId\r\n      },\r\n      stencilset: {\r\n        namespace: stencilSetNamespace,\r\n        url: stencilSetUrl\r\n      }\r\n    }\r\n\r\n    this._mergeCanvasToChild(model)\r\n\r\n    return model\r\n  }\r\n  setModelData (response) {\r\n    this.modelData = response\r\n    // _this.UPDATE_modelData(response)\r\n  }\r\n\r\n  getBaseModelData () { return this.modelData }\r\n\r\n  getCurrentModelId () { return this.current }\r\n\r\n  getStencilData () { return this.stencilData }\r\n  setStencilData (stencilData) {\r\n    // we don't want a references!\r\n    this.stencilData = jQuery.extend(true, {}, stencilData)\r\n  }\r\n  getShowStencilData () {\r\n    return this.showStencilData\r\n  }\r\n  setShowStencilData () {\r\n    let quickMenuDefinition = undefined\r\n    let ignoreForPaletteDefinition = undefined\r\n    const data = this.stencilData\r\n    if (data.namespace == 'http://b3mn.org/stencilset/cmmn1.1#') {\r\n      quickMenuDefinition = ['HumanTask', 'Association']\r\n      ignoreForPaletteDefinition = ['CasePlanModel']\r\n    } else {\r\n      quickMenuDefinition = ['UserTask', 'EndNoneEvent', 'ExclusiveGateway',\r\n        'CatchTimerEvent', 'ThrowNoneEvent', 'TextAnnotation',\r\n        'SequenceFlow', 'Association']\r\n      ignoreForPaletteDefinition = ['SequenceFlow', 'MessageFlow', 'Association', 'DataAssociation', 'DataStore', 'SendTask']\r\n    }\r\n\r\n    let quickMenuItems = []\r\n    let morphRoles = []\r\n    for (let i = 0; i < data.rules.morphingRules.length; i++) {\r\n      let role = data.rules.morphingRules[i].role\r\n      let roleItem = { 'role': role, 'morphOptions': [] }\r\n      morphRoles.push(roleItem)\r\n    }\r\n\r\n    let stencilItemGroups_ary = []\r\n\r\n    // Check all received items\r\n    for (let stencilIndex = 0; stencilIndex < data.stencils.length; stencilIndex++) {\r\n      // Check if the root group is the 'diagram' group. If so, this item should not be shown.\r\n      let currentGroupName = data.stencils[stencilIndex].groups[0]\r\n      if (currentGroupName === 'Diagram' || currentGroupName === 'Form') {\r\n        continue  // go to next item\r\n      }\r\n\r\n      let removed = false\r\n      if (data.stencils[stencilIndex].removed) {\r\n        removed = true\r\n      }\r\n\r\n      let currentGroup = undefined\r\n      if (!removed) {\r\n        // Check if this group already exists. If not, we create a new one\r\n        if (currentGroupName !== null && currentGroupName !== undefined && currentGroupName.length > 0) {\r\n          currentGroup = findGroup(currentGroupName, stencilItemGroups_ary) // Find group in root groups array\r\n          if (currentGroup === null) {\r\n            currentGroup = addGroup(currentGroupName, stencilItemGroups_ary)\r\n          }\r\n\r\n          // Add all child groups (if any)\r\n          for (let groupIndex = 1; groupIndex < data.stencils[stencilIndex].groups.length; groupIndex++) {\r\n            let childGroupName = data.stencils[stencilIndex].groups[groupIndex]\r\n            let childGroup = findGroup(childGroupName, currentGroup.groups)\r\n            if (childGroup === null) {\r\n              childGroup = addGroup(childGroupName, currentGroup.groups)\r\n            }\r\n\r\n            // The current group variable holds the parent of the next group (if any),\r\n            // and is basically the last element in the array of groups defined in the stencil item\r\n            currentGroup = childGroup\r\n          }\r\n        }\r\n      }\r\n\r\n      // Construct the stencil item\r\n      let stencilItem = {\r\n        'id': data.stencils[stencilIndex].id,\r\n        'name': data.stencils[stencilIndex].title,\r\n        'description': data.stencils[stencilIndex].description,\r\n        'icon': data.stencils[stencilIndex].icon,\r\n        'type': data.stencils[stencilIndex].type,\r\n        'roles': data.stencils[stencilIndex].roles,\r\n        'removed': removed,\r\n        'customIcon': false,\r\n        'canConnect': false,\r\n        'canConnectTo': false,\r\n        'canConnectAssociation': false\r\n      }\r\n\r\n      if (data.stencils[stencilIndex].customIconId && data.stencils[stencilIndex].customIconId > 0) {\r\n        stencilItem.customIcon = true\r\n        stencilItem.icon = data.stencils[stencilIndex].customIconId\r\n      }\r\n\r\n      if (!removed) {\r\n        if (quickMenuDefinition.indexOf(stencilItem.id) >= 0) {\r\n          quickMenuItems[quickMenuDefinition.indexOf(stencilItem.id)] = stencilItem\r\n        }\r\n      }\r\n\r\n      if (stencilItem.id === 'TextAnnotation' || stencilItem.id === 'BoundaryCompensationEvent') {\r\n        stencilItem.canConnectAssociation = true\r\n      }\r\n\r\n      for (let i = 0; i < data.stencils[stencilIndex].roles.length; i++) {\r\n        let stencilRole = data.stencils[stencilIndex].roles[i]\r\n        if (data.namespace == 'http://b3mn.org/stencilset/cmmn1.1#') {\r\n          if (stencilRole === 'association_start') {\r\n            stencilItem.canConnect = true\r\n          } else if (stencilRole === 'association_end') {\r\n            stencilItem.canConnectTo = true\r\n          }\r\n        } else {\r\n          if (stencilRole === 'sequence_start') {\r\n            stencilItem.canConnect = true\r\n          } else if (stencilRole === 'sequence_end') {\r\n            stencilItem.canConnectTo = true\r\n          }\r\n        }\r\n\r\n        for (let j = 0; j < morphRoles.length; j++) {\r\n          if (stencilRole === morphRoles[j].role) {\r\n            if (!removed) {\r\n              morphRoles[j].morphOptions.push(stencilItem)\r\n            }\r\n            stencilItem.morphRole = morphRoles[j].role\r\n            break\r\n          }\r\n        }\r\n      }\r\n\r\n      if (currentGroup) {\r\n        // Add the stencil item to the correct group\r\n        currentGroup.items.push(stencilItem)\r\n        if (ignoreForPaletteDefinition.indexOf(stencilItem.id) < 0) {\r\n          currentGroup.paletteItems.push(stencilItem)\r\n        }\r\n      } else {\r\n        // It's a root stencil element\r\n        if (!removed) {\r\n          stencilItemGroups_ary.push(stencilItem)\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    for (let i = 0; i < stencilItemGroups_ary.length; i++) {\r\n      if (stencilItemGroups_ary[i].paletteItems && stencilItemGroups_ary[i].paletteItems.length == 0) {\r\n        stencilItemGroups_ary[i].visible = false\r\n      }\r\n    }\r\n\r\n    this.showStencilData = stencilItemGroups_ary\r\n    // this.UPDATE_stencilItemGroups(stencilItemGroups_ary)\r\n\r\n    let containmentRules = []\r\n    for (let i = 0; i < data.rules.containmentRules.length; i++) {\r\n      let rule = data.rules.containmentRules[i]\r\n      containmentRules.push(rule)\r\n    }\r\n    this.containmentRules = containmentRules\r\n\r\n    // remove quick menu items which are not available anymore due to custom pallette\r\n    let availableQuickMenuItems = []\r\n    for (let i = 0; i < quickMenuItems.length; i++) {\r\n      if (quickMenuItems[i]) {\r\n        availableQuickMenuItems[availableQuickMenuItems.length] = quickMenuItems[i]\r\n      }\r\n    }\r\n\r\n    // this.UPDATE_quickMenuItems(availableQuickMenuItems)\r\n    this.quickMenuItems = availableQuickMenuItems\r\n    this.morphRoles = morphRoles\r\n    // console.log('availableQuickMenuItems', availableQuickMenuItems)\r\n    // console.log('morphRoles', morphRoles)\r\n  }\r\n\r\n  getSelection () { return this.editor.selection }\r\n  setSelection (selection) { this.editor.setSelection(selection) }\r\n  updateSelection () { this.editor.updateSelection() }\r\n  getSubSelection () {\r\n    return this.editor._subSelection\r\n  }\r\n\r\n  bootEditor () {\r\n    // TODO: populate the canvas with correct json sections.\r\n    this.canvasTracker = new Hash()\r\n\r\n    // 第一个参数boolean代表是否进行深度拷贝\r\n    let config = jQuery.extend(true, {}, this.modelData)\r\n\r\n    if (!config.model.childShapes) {\r\n      config.model.childShapes = []\r\n    }\r\n\r\n    // this will remove any childshapes of a collapseable subprocess.\r\n    this.findAndRegisterCanvas(config.model.childShapes)\r\n\r\n    // this will be overwritten almost instantly.\r\n    this.canvasTracker.set(config.modelId, JSON.stringify(config.model.childShapes))\r\n    this.editor = new ORYX.Editor(config)\r\n\r\n    this.current = this.editor.id\r\n    this.loading = false\r\n\r\n    FLOW_eventBus.dispatch('ORYX-EDITOR-LOADED', {})\r\n    FLOW_eventBus.dispatch(ORYX.CONFIG.EVENT_TYPE_EDITOR_BOOTED, {})\r\n\r\n    const eventMappings = [\r\n      // 元素选择\r\n      { oryxType: ORYX.CONFIG.EVENT_SELECTION_CHANGED, flowableType: ORYX.CONFIG.EVENT_TYPE_SELECTION_CHANGE },\r\n      // 双击\r\n      { oryxType: ORYX.CONFIG.EVENT_DBLCLICK, flowableType: ORYX.CONFIG.EVENT_TYPE_DOUBLE_CLICK },\r\n      // 鼠标状态\r\n      { oryxType: ORYX.CONFIG.EVENT_MOUSEOUT, flowableType: ORYX.CONFIG.EVENT_TYPE_MOUSE_OUT },\r\n      { oryxType: ORYX.CONFIG.EVENT_MOUSEOVER, flowableType: ORYX.CONFIG.EVENT_TYPE_MOUSE_OVER },\r\n      { oryxType: ORYX.CONFIG.EVENT_EDITOR_INIT_COMPLETED, flowableType: ORYX.CONFIG.EVENT_TYPE_EDITOR_READY },\r\n      // 属性变化\r\n      {\r\n        oryxType: ORYX.CONFIG.EVENT_PROPERTY_CHANGED,\r\n        flowableType: ORYX.CONFIG.EVENT_TYPE_PROPERTY_VALUE_CHANGED\r\n      }\r\n    ]\r\n\r\n    eventMappings.forEach((eventMapping) => {\r\n      this.registerOnEvent(eventMapping.oryxType, (event, shape) => {\r\n        FLOW_eventBus.dispatch(eventMapping.flowableType, event, shape)\r\n      })\r\n    })\r\n\r\n    // if an element is added te properties will catch this event.\r\n    FLOW_eventBus.addListener(ORYX.CONFIG.EVENT_TYPE_PROPERTY_VALUE_CHANGED, this.filterEvent.bind(this))\r\n    FLOW_eventBus.addListener(ORYX.CONFIG.EVENT_TYPE_ITEM_DROPPED, this.filterEvent.bind(this))\r\n    FLOW_eventBus.addListener('EDITORMANAGER-EDIT-ACTION', function () {\r\n      this.renderProcessHierarchy()\r\n    })\r\n\r\n    this.initAddListener()\r\n    this.initRegisterOnEvent()\r\n  }\r\n\r\n  renderProcessHierarchy () {\r\n    //only start calculating when the editor has done all his constructor work.\r\n    if (!this.isEditorReady) {\r\n      return false\r\n    }\r\n\r\n    if (!this.isLoading()) {\r\n      //the current implementation of has a lot of eventlisteners. when calling getTree() it could manipulate\r\n      //the canvastracker while the canvas is stille loading stuff.\r\n      //TODO: check if its possible to trigger the re-rendering by a single event instead of registering on 10 events...\r\n      this.treeview = this.getTree()\r\n    }\r\n\r\n  }\r\n  filterEvent (event) {\r\n    // this event is fired when the user changes a property by the property editor.\r\n    if (event.type === 'event-type-property-value-changed') {\r\n      if (event.property.key === 'oryx-overrideid' || event.property.key === 'oryx-name') {\r\n        this.renderProcessHierarchy()\r\n      }\r\n      //this event is fired when the stencil / shape's text is changed / updated.\r\n    } else if (event.type === 'propertyChanged') {\r\n      if (event.name === 'oryx-overrideid' || event.name === 'oryx-name') {\r\n\r\n        this.renderProcessHierarchy()\r\n      }\r\n    } else if (event.type === ORYX.CONFIG.ACTION_DELETE_COMPLETED) {\r\n      this.renderProcessHierarchy()\r\n      //for some reason the new tree does not trigger an ui update.\r\n      //$scope.$apply();\r\n    } else if (event.type === 'event-type-item-dropped') {\r\n      this.renderProcessHierarchy()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Helper method to find a stencil item.\r\n   */\r\n  getStencilItemById (stencilItemId) {\r\n    for (let i = 0; i < this.showStencilData.length; i++) {\r\n      let element = this.showStencilData[i]\r\n\r\n      // Real group\r\n      if (element.items !== null && element.items !== undefined) {\r\n        var item = this.findStencilItemInGroup(stencilItemId, element)\r\n        if (item) {\r\n          return item\r\n        }\r\n      } else { // Root stencil item\r\n        if (element.id === stencilItemId) {\r\n          return element\r\n        }\r\n      }\r\n    }\r\n    return undefined\r\n  }\r\n\r\n  /**\r\n   * Helper method that searches a group for an item with the given id.\r\n   * If not found, will return undefined.\r\n   */\r\n  findStencilItemInGroup (stencilItemId, group) {\r\n    var item\r\n\r\n    // Check all items directly in this group\r\n    for (var j = 0; j < group.items.length; j++) {\r\n      item = group.items[j]\r\n      if (item.id === stencilItemId) {\r\n        return item\r\n      }\r\n    }\r\n\r\n    // Check the child groups\r\n    if (group.groups && group.groups.length > 0) {\r\n      for (var k = 0; k < group.groups.length; k++) {\r\n        item = this.findStencilItemInGroup(stencilItemId, group.groups[k])\r\n        if (item) {\r\n          return item\r\n        }\r\n      }\r\n    }\r\n\r\n    return undefined\r\n  }\r\n\r\n  handleEvents (events) {\r\n    this.editor.handleEvents(events)\r\n  }\r\n  registerOnEvent (event, callback) {\r\n    this.editor.registerOnEvent(event, callback)\r\n  }\r\n\r\n  getChildShapeByResourceId (resourceId) {\r\n    return this.editor.getCanvas().getChildShapeByResourceId(resourceId)\r\n  }\r\n  getJSON () { return this.editor.getJSON() }\r\n\r\n  getStencilSets () { return this.editor.getStencilSets() }\r\n  getCanvas () { return this.editor.getCanvas() }\r\n  getRules () { return this.editor.getRules() }\r\n  getEditor () {\r\n    //TODO: find out if we can avoid exposing the editor object to angular.\r\n    return this.editor\r\n  }\r\n  getTree () {\r\n    //build a tree of all subprocesses and there children.\r\n    var result = new Hash()\r\n    var parent = this.getModel()\r\n    result.set('name', parent.properties['name'] || 'No name provided')\r\n    result.set('id', this.modelId)\r\n    result.set('type', 'root')\r\n    result.set('current', this.current === this.modelId)\r\n    var childShapes = parent.childShapes\r\n    var children = this._buildTreeChildren(childShapes)\r\n    result.set('children', children)\r\n    return result.toObject()\r\n  }\r\n\r\n  executeCommands (commands) {\r\n    this.editor.executeCommands(commands)\r\n  }\r\n  eventCoordinates (coordinates) {\r\n    return this.editor.eventCoordinates(coordinates)\r\n  }\r\n  eventCoordinatesXY (x, y) {\r\n    return this.editor.eventCoordinatesXY(x, y)\r\n  }\r\n\r\n  edit (resourceId) {\r\n    //Save the current canvas in the canvastracker if it is the root process.\r\n    this.syncCanvasTracker()\r\n\r\n    this.loading = true\r\n\r\n    var shapes = this.getCanvas().getChildren()\r\n    shapes.each(function (shape) {\r\n      this.editor.deleteShape(shape)\r\n    }.bind(this))\r\n\r\n    shapes = this.canvasTracker.get(resourceId)\r\n    if (!shapes) {\r\n      shapes = JSON.stringify([])\r\n    }\r\n\r\n    this.editor.loadSerialized({\r\n      childShapes: shapes\r\n    })\r\n\r\n    this.getCanvas().update()\r\n\r\n    this.current = resourceId\r\n\r\n    this.loading = false\r\n    FLOW_eventBus.dispatch('EDITORMANAGER-EDIT-ACTION', {})\r\n    FLOW_eventBus.dispatch(ORYX.CONFIG.EVENT_TYPE_UNDO_REDO_RESET, {})\r\n  }\r\n\r\n  _buildTreeChildren (childShapes) {\r\n    var children = []\r\n    for (var i = 0; i < childShapes.length; i++) {\r\n      var childShape = childShapes[i]\r\n      var stencilId = childShape.stencil.id\r\n      //we are currently only interested in the expanded subprocess and collapsed processes\r\n      if (stencilId && this.treeFilteredElements.indexOf(stencilId) > -1) {\r\n        var child = new Hash()\r\n        child.set('name', childShape.properties.name || 'No name provided')\r\n        child.set('id', childShape.resourceId)\r\n        child.set('type', stencilId)\r\n        child.set('current', childShape.resourceId === this.current)\r\n\r\n        //check if childshapes\r\n\r\n        if (stencilId === 'CollapsedSubProcess') {\r\n          //the save function stores the real object as a childshape\r\n          //it is possible that there is no child element because the user did not open the collapsed subprocess.\r\n          if (childShape.childShapes.length === 0) {\r\n            child.set('children', [])\r\n          } else {\r\n            child.set('children', this._buildTreeChildren(childShape.childShapes))\r\n          }\r\n          child.set('editable', true)\r\n        } else {\r\n          child.set('children', this._buildTreeChildren(childShape.childShapes))\r\n          child.set('editable', false)\r\n        }\r\n        child.set('icon', this.structualIcons[stencilId])\r\n        children.push(child.toObject())\r\n      }\r\n    }\r\n    return children\r\n  }\r\n  syncCanvasTracker () {\r\n    let shapes = this.getCanvas().getChildren()\r\n    let jsonShapes = []\r\n    shapes.each(function (shape) {\r\n      //toJson is an summary object but its not a json string.!!!!!\r\n      jsonShapes.push(shape.toJSON())\r\n    })\r\n    this.canvasTracker.set(this.current, JSON.stringify(jsonShapes))\r\n  }\r\n  findAndRegisterCanvas (childShapes) {\r\n    for (let i = 0; i < childShapes.length; i++) {\r\n      let childShape = childShapes[i]\r\n      if (childShape.stencil.id === 'CollapsedSubProcess') {\r\n        if (childShape.childShapes.length > 0) {\r\n          //the canvastracker will auto correct itself with a new canvasmodel see this.edit()...\r\n          this.findAndRegisterCanvas(childShape.childShapes)\r\n          //a canvas can't be nested as a child because the editor would crash on redundant information.\r\n          this.canvasTracker.set(childShape.resourceId, JSON.stringify(childShape.childShapes))\r\n          //reference to config will clear the value.\r\n          childShape.childShapes = []\r\n        } else {\r\n          this.canvasTracker.set(childShape.resourceId, '[]')\r\n        }\r\n      }\r\n    }\r\n  }\r\n  _mergeCanvasToChild (parent) {\r\n    for (let i = 0; i < parent.childShapes.length; i++) {\r\n      let childShape = parent.childShapes[i]\r\n      if (childShape.stencil.id === 'CollapsedSubProcess') {\r\n\r\n        let elements = this.canvasTracker.get(childShape.resourceId)\r\n        if (elements) {\r\n          elements = JSON.parse(elements)\r\n        } else {\r\n          elements = []\r\n        }\r\n        childShape.childShapes = elements\r\n        this._mergeCanvasToChild(childShape)\r\n      } else if (childShape.stencil.id === 'SubProcess') {\r\n        this._mergeCanvasToChild(childShape)\r\n      } else {\r\n        //do nothing?\r\n      }\r\n    }\r\n  }\r\n  isLoading () {\r\n    return this.loading\r\n  }\r\n\r\n  navigateTo (resourceId) {\r\n    //TODO: this could be improved by check if the resourceId is not equal to the current tracker...\r\n    this.syncCanvasTracker()\r\n    let found = false\r\n    this.canvasTracker.each(function (pair) {\r\n      let key = pair.key\r\n      let children = JSON.parse(pair.value)\r\n      let targetable = this._findTarget(children, resourceId)\r\n      if (!found && targetable) {\r\n        this.edit(key)\r\n        let flowableShape = this.getCanvas().getChildShapeByResourceId(targetable)\r\n        this.setSelection([flowableShape], [], true)\r\n        found = true\r\n      }\r\n    }, this)\r\n  }\r\n\r\n  _findTarget (children, resourceId) {\r\n    for (let i = 0; i < children.length; i++) {\r\n      let child = children[i]\r\n      if (child.resourceId === resourceId) {\r\n        return child.resourceId\r\n      } else if (child.properties && child.properties['overrideid'] === resourceId) {\r\n        return child.resourceId\r\n      } else {\r\n        let result = this._findTarget(child.childShapes, resourceId)\r\n        if (result) {\r\n          return result\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  dispatchFlowEvent (type, event) {\r\n    FLOW_eventBus.dispatch(type, event)\r\n  }\r\n  flowToolbarEvent (services) {\r\n    this.TOOLBAR_ACTIONS.deleteItem(services)\r\n  }\r\n\r\n  initRegisterOnEvent () {\r\n    this.registerOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED, (event) => {\r\n      let shapes = event.elements\r\n      // Listen to selection change events: show properties\r\n      this.showShapeProperties(shapes)\r\n      this.updateOryxButtonPosition(shapes)\r\n      // 控制 toolbar buttons 是否可用\r\n      this.updateToolbarButtonStatus(shapes)\r\n    })\r\n  }\r\n  showShapeProperties (shapes) {\r\n    let canvasSelected = false\r\n    if (shapes && shapes.length === 0) {\r\n      shapes = [this.getCanvas()]\r\n      canvasSelected = true\r\n    }\r\n    if (shapes && shapes.length > 0) {\r\n      const selectedShape = shapes.first()\r\n      const stencil = selectedShape.getStencil()\r\n\r\n      if (this.selectedElementBeforeScrolling &&\r\n        stencil.id().indexOf('BPMNDiagram') !== -1 &&\r\n        stencil.id().indexOf('CMMNDiagram') !== -1) {\r\n        // ignore canvas event because of empty selection when scrolling stops\r\n        return\r\n      }\r\n\r\n      if (this.selectedElementBeforeScrolling &&\r\n        this.selectedElementBeforeScrolling.getId() === selectedShape.getId()) {\r\n        this.selectedElementBeforeScrolling = null\r\n        return\r\n      }\r\n\r\n      // Store previous selection\r\n      this.previousSelectedShape = this.selectedShape\r\n\r\n      // Only do something if another element is selected (Oryx fires this event multiple times)\r\n      if (this.previousSelectedShape !== undefined &&\r\n        (this.previousSelectedShape.getId() === selectedShape.getId() &&\r\n          selectedShape.getStencil().idWithoutNs() != 'UserTask')) {\r\n        if (this.forceSelectionRefresh) {\r\n          // Switch the flag again, this run will force refresh\r\n          this.forceSelectionRefresh = false\r\n        } else {\r\n          // Selected the same element again, no need to update anything\r\n          return\r\n        }\r\n      }\r\n\r\n      let selectedItem = { 'title': '', 'properties': [] }\r\n      if (canvasSelected) {\r\n        selectedItem.auditData = {\r\n          'author': this.modelData.createdByUser,\r\n          'createDate': this.modelData.createDate\r\n        }\r\n      }\r\n\r\n      // 获取选中元素的属性\r\n      let properties = stencil.properties()\r\n      for (let i = 0; i < properties.length; i++) {\r\n        let property = properties[i]\r\n        if (!property.popular()) continue\r\n        let key = property.prefix() + '-' + property.id()\r\n\r\n        if (key === 'oryx-name') {\r\n          selectedItem.title = selectedShape.properties.get(key)\r\n        }\r\n\r\n        // First we check if there is a config for 'key-type' and then for 'type' alone\r\n        let propertyConfig = this.property_config[key + '-' + property.type()]\r\n        if (propertyConfig === undefined || propertyConfig === null) {\r\n          propertyConfig = this.property_config[property.type()]\r\n        }\r\n\r\n        if (propertyConfig === undefined || propertyConfig === null) {\r\n          console.log('WARNING: no property configuration defined for ' + key + ' of type ' + property.type())\r\n          console.warn('警告: 找不到 ' + key + ' of type ' + property.type() + '属性所对应的组件')\r\n        } else {\r\n          if (selectedShape.properties.get(key) === 'true') {\r\n            selectedShape.properties.set(key, true)\r\n          }\r\n\r\n          if (FLOWABLE.UI_CONFIG.showRemovedProperties === false && property.isHidden()) {\r\n            continue\r\n          }\r\n\r\n          let currentProperty = {\r\n            'key': key,\r\n            'title': property.title(),\r\n            'description': property.description(),\r\n            'type': property.type(),\r\n            'mode': 'read',\r\n            'hidden': property.isHidden(),\r\n            'value': selectedShape.properties.get(key)\r\n          }\r\n\r\n          if ((currentProperty.type === 'complex' || currentProperty.type === 'multiplecomplex') && currentProperty.value && currentProperty.value.length > 0) {\r\n            try {\r\n              currentProperty.value = JSON.parse(currentProperty.value)\r\n            } catch (err) {\r\n              // ignore\r\n            }\r\n          }\r\n\r\n          if (propertyConfig.readModeTemplateUrl !== undefined && propertyConfig.readModeTemplateUrl !== null) {\r\n            currentProperty.readModeTemplateUrl = propertyConfig.readModeTemplateUrl\r\n          }\r\n          if (propertyConfig.writeModeTemplateUrl !== null && propertyConfig.writeModeTemplateUrl !== null) {\r\n            currentProperty.writeModeTemplateUrl = propertyConfig.writeModeTemplateUrl\r\n          }\r\n\r\n          if (propertyConfig.templateUrl !== undefined && propertyConfig.templateUrl !== null) {\r\n            currentProperty.templateUrl = propertyConfig.templateUrl\r\n            currentProperty.hasReadWriteMode = false\r\n          } else {\r\n            currentProperty.hasReadWriteMode = true\r\n          }\r\n\r\n          if (currentProperty.value === undefined\r\n            || currentProperty.value === null\r\n            || currentProperty.value.length == 0) {\r\n            currentProperty.noValue = true\r\n          }\r\n\r\n          selectedItem.properties.push(currentProperty)\r\n        }\r\n      }\r\n\r\n      this.selectedItem = selectedItem\r\n      this.selectedShape = selectedShape\r\n      FLOW_eventBus.dispatch(ORYX.CONFIG.EVENT_TYPE_SELECTION_CHANGED, {\r\n        selectedItem,\r\n        selectedShape\r\n      })\r\n    } else {\r\n      this.selectedItem = {}\r\n      this.selectedShape = null\r\n    }\r\n  }\r\n  updateOryxButtonPosition (selectedElements) {\r\n    FLOW_eventBus.dispatch(ORYX.CONFIG.EVENT_TYPE_HIDE_SHAPE_BUTTONS, [\r\n      { type: 'hide_shape_buttons', status: true }\r\n    ])\r\n    let hide_flow_add_btns = true\r\n    let hide_morph_buttons = true\r\n    let hide_edit_buttons = true\r\n\r\n    const shapes = selectedElements\r\n    if (shapes && shapes.length === 1) {\r\n      const selectedShape = shapes.first()\r\n      const a = this.getCanvas().node.getScreenCTM() // 获取 svg对象 的转换矩阵CTM\r\n\r\n      let absoluteXY = selectedShape.absoluteXY()\r\n      absoluteXY.x *= a.a\r\n      absoluteXY.y *= a.d\r\n\r\n      let additionalIEZoom = 1\r\n      additionalIEZoom = ORYX.Utils.IEZoomBelow10(additionalIEZoom)\r\n\r\n      const canvasSection = jQuery('#canvasSection')\r\n      if (additionalIEZoom === 1) {\r\n        absoluteXY.y = absoluteXY.y - canvasSection.offset().top + 5\r\n        absoluteXY.x = absoluteXY.x - canvasSection.offset().left\r\n      } else {\r\n        let canvasOffsetLeft = canvasSection.offset().left\r\n        let canvasScrollLeft = canvasSection.scrollLeft()\r\n        let canvasScrollTop = canvasSection.scrollTop()\r\n\r\n        let offset = a.e - (canvasOffsetLeft * additionalIEZoom)\r\n        let additionaloffset = 0\r\n        if (offset > 10) {\r\n          additionaloffset = (offset / additionalIEZoom) - offset\r\n        }\r\n        absoluteXY.y = absoluteXY.y - (canvasSection.offset().top * additionalIEZoom) + 5 + ((canvasScrollTop * additionalIEZoom) - canvasScrollTop)\r\n        absoluteXY.x = absoluteXY.x - (canvasOffsetLeft * additionalIEZoom) + additionaloffset + ((canvasScrollLeft * additionalIEZoom) - canvasScrollLeft)\r\n      }\r\n\r\n      let bounds = new ORYX.Core.Bounds(\r\n        a.e + absoluteXY.x,\r\n        a.f + absoluteXY.y,\r\n        a.e + absoluteXY.x + a.a * selectedShape.bounds.width(),\r\n        a.f + absoluteXY.y + a.d * selectedShape.bounds.height()\r\n      )\r\n      const shapeXY = bounds.upperLeft()\r\n      const stencilItem = this.getStencilItemById(selectedShape.getStencil().idWithoutNs())\r\n      let morphShapes = []\r\n      if (stencilItem && stencilItem.morphRole) {\r\n        for (let i = 0; i < this.morphRoles.length; i++) {\r\n          if (this.morphRoles[i].role === stencilItem.morphRole) {\r\n            morphShapes = this.morphRoles[i].morphOptions\r\n          }\r\n        }\r\n      }\r\n\r\n      let x = shapeXY.x\r\n      // 如果元素不够宽, 把左边2个按钮往左移，防止溢出\r\n      if (bounds.width() < 48) {\r\n        x -= 24\r\n      }\r\n\r\n      if (morphShapes && morphShapes.length > 0) {\r\n        hide_morph_buttons = false\r\n      }\r\n\r\n      let flow_op_btns = document.getElementById('flow_op_btns')\r\n      flow_op_btns.style.left = x + 'px'\r\n      flow_op_btns.style.top = (shapeXY.y + bounds.height() + 2) + 'px'\r\n\r\n      let editable = selectedShape._stencil._jsonStencil.id.endsWith('CollapsedSubProcess')\r\n      hide_edit_buttons = !editable\r\n\r\n      if (stencilItem && (stencilItem.canConnect || stencilItem.canConnectAssociation)) {\r\n        let quickButtonX = shapeXY.x + bounds.width() + 5\r\n        let quickButtonY = shapeXY.y\r\n        let flow_add_btns = document.getElementById('flow_add_btns')\r\n        flow_add_btns.style.left = quickButtonX + 'px'\r\n        flow_add_btns.style.top = quickButtonY + 'px'\r\n        hide_flow_add_btns = false\r\n      }\r\n      FLOW_eventBus.dispatch(ORYX.CONFIG.EVENT_TYPE_HIDE_SHAPE_BUTTONS, [\r\n        { type: 'hide_shape_buttons', status: false },\r\n        { type: 'hide_flow_add_btns', status: hide_flow_add_btns },\r\n        { type: 'hide_morph_buttons', status: hide_morph_buttons },\r\n        { type: 'hide_edit_buttons', status: hide_edit_buttons },\r\n      ])\r\n    }\r\n  }\r\n  updateToolbarButtonStatus (elements) {\r\n    for (let i = 0; i < this.toolbarItems.length; i++) {\r\n      let item = this.toolbarItems[i]\r\n      if (item.enabledAction && item.enabledAction === 'element') {\r\n        let minLength = 1\r\n        if (item.minSelectionCount) {\r\n          minLength = item.minSelectionCount\r\n        }\r\n        if (elements.length >= minLength && !item.enabled) {\r\n          item.enabled = true\r\n        } else if (elements.length == 0 && item.enabled) {\r\n          item.enabled = false\r\n        }\r\n      }\r\n    }\r\n  }\r\n  initAddListener (editorManager) {\r\n    FLOW_eventBus.addListener(ORYX.CONFIG.EVENT_TYPE_EDITOR_READY, () => {\r\n      var url = window.location.href\r\n      var regex = new RegExp('[?&]subProcessId(=([^&#]*)|&|#|$)')\r\n      var results = regex.exec(url)\r\n      if (results && results[2]) {\r\n        editorManager.edit(decodeURIComponent(results[2].replace(/\\+/g, ' ')))\r\n      }\r\n    })\r\n    FLOW_eventBus.addListener(ORYX.CONFIG.EVENT_TYPE_UNDO_REDO_RESET, function () {\r\n      if (this.items) {\r\n        for (let i = 0; i < this.items.length; i++) {\r\n          let item = this.items[i]\r\n          if (item.action === 'FLOWABLE.TOOLBAR.ACTIONS.undo' || item.action === 'FLOWABLE.TOOLBAR.ACTIONS.redo') {\r\n            item.enabled = false\r\n          }\r\n        }\r\n      }\r\n\r\n    }, this)\r\n    FLOW_eventBus.addListener(ORYX.CONFIG.EVENT_TYPE_SHOW_VALIDATION_POPUP, function (event) {\r\n      // Method to open validation dialog\r\n      var showValidationDialog = function () {\r\n        this.currentValidationId = event.validationId\r\n        this.isOnProcessLevel = event.onProcessLevel\r\n\r\n        _internalCreateModal({ template: 'editor-app/popups/validation-errors.html?version=' + Date.now() }, $modal, this)\r\n      }\r\n\r\n      showValidationDialog()\r\n    })\r\n    FLOW_eventBus.addListener(ORYX.CONFIG.EVENT_TYPE_NAVIGATE_TO_PROCESS, function (event) {\r\n      var modelMetaData = editorManager.getBaseModelData()\r\n      this.editorHistory.push({\r\n        id: modelMetaData.modelId,\r\n        name: modelMetaData.name,\r\n        type: 'bpmnmodel'\r\n      })\r\n\r\n      $window.location.href = '../editor/#/editor/' + event.processId\r\n    })\r\n  }\r\n}\r\n","<template>\r\n  <div id=\"main\" class=\"editor-main-wrapper\" :style=\"{height: wrapperHeight}\">\r\n    <!--头部操作按钮-->\r\n    <toolbar :editor=\"editor\" :editorManager=\"editorManager\"></toolbar>\r\n    <div class=\"flow-content-box\">\r\n      <slot name=\"paletteWrapper\" v-bind:editorManager=\"editorManager\">\r\n        <paletteWrapper :editorManager=\"editorManager\"></paletteWrapper>\r\n      </slot>\r\n\r\n      <div id=\"contentCanvasWrapper\" class=\"contentCanvasWrapper\">\r\n        <canvasWrapper :editorManager=\"editorManager\"></canvasWrapper>\r\n\r\n        <slot name=\"propertyWrapper\" v-bind:editorManager=\"editorManager\">\r\n          <propertySection :editorManager=\"editorManager\"></propertySection>\r\n        </slot>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import toolbar from 'packages/editor-toolbar'\r\n  import paletteWrapper from 'packages/palette-wrapper'\r\n  import canvasWrapper from 'packages/canvas-wrapper'\r\n  import propertySection from 'packages/property-section'\r\n  import EditorManager from 'src/flowable/EditorManager'\r\n  import Locale from 'src/mixins/locale'\r\n  import Default_Config from 'src/flowable/Default_Config'\r\n\r\n  export default {\r\n    name: 'flowEditor',\r\n    data () {\r\n      return {\r\n        wrapperHeight: '700px',\r\n        editorManager: null,\r\n        editor: null,\r\n        editorHistory: [],\r\n        undoStack: [],\r\n        redoStack: [],\r\n        forceSelectionRefresh: false\r\n      }\r\n    },\r\n    mixins: [Locale],\r\n    props: {\r\n      config: {\r\n        type: Object\r\n      }\r\n    },\r\n    components: { toolbar, paletteWrapper, canvasWrapper, propertySection },\r\n    created () {},\r\n    computed: {},\r\n    mounted () {\r\n      // this.getJson()\r\n      this.editorManager = new EditorManager({\r\n        ...this.config,\r\n        elementsWithoutRenameAction: ['Lane', 'V-Lane']\r\n      })\r\n    },\r\n    methods: {}\r\n  }\r\n</script>\r\n<style lang=\"scss\">\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow-design.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow-design.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flow-design.vue?vue&type=template&id=3745c3e2&\"\nimport script from \"./flow-design.vue?vue&type=script&lang=js&\"\nexport * from \"./flow-design.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// 导入组件，组件必须声明 name\r\nimport flowEditor from './src/flow-design.vue'\r\n\r\n// 为组件提供 install 安装方法，供按需引入\r\nflowEditor.install = function (Vue) {\r\n  Vue.component(flowEditor.name, flowEditor)\r\n}\r\n\r\n// 默认导出组件\r\nexport default flowEditor\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"draggable\",rawName:\"v-draggable\",value:({onStart:'startDragCallback', onDrag:'dragCallback', revert: 'invalid', helper: 'clone', opacity : 0.5}),expression:\"{onStart:'startDragCallback', onDrag:'dragCallback', revert: 'invalid', helper: 'clone', opacity : 0.5}\"}],attrs:{\"id\":_vm.item.id,\"title\":_vm.item.description,\"data-drag\":\"true\",\"data-model\":\"draggedElement\"}},[(!_vm.item.customIcon)?_c('img',{attrs:{\"width\":\"16px;\",\"height\":\"16px;\",\"src\":require((\"@/assets/images/bpmn2.0/icons/\" + (_vm.item.icon)))}}):_vm._e(),_c('span',[_vm._v(_vm._s(_vm.item.name))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div :id=\"item.id\"\r\n       :title=\"item.description\"\r\n       v-draggable=\"{onStart:'startDragCallback', onDrag:'dragCallback', revert: 'invalid', helper: 'clone', opacity : 0.5}\"\r\n       data-drag=\"true\"\r\n       data-model=\"draggedElement\">\r\n    <img v-if=\"!item.customIcon\" width=\"16px;\" height=\"16px;\"\r\n         :src=\"require(`@/assets/images/bpmn2.0/icons/${item.icon}`)\"/>\r\n    <!--<img v-if=\"item.customIcon\" :src=\"getImageUrl(item.icon)\" width=\"16px;\" height=\"16px;\"/>-->\r\n    <span>{{item.name}}</span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ORYX_CONFIG from 'src/oryx/CONFIG'\r\n  import { draggable } from 'src/directives/drag-drop'\r\n  import { EventBus } from 'src/EventBus'\r\n\r\n  export default {\r\n    name: \"stencilDragItem\",\r\n    data() {\r\n      return {\r\n        dragModeOver_drag: false\r\n      }\r\n    },\r\n    directives: { draggable },\r\n    props: {\r\n      editorManager: {},\r\n      item: {\r\n        type: Object\r\n      }\r\n    },\r\n    mounted () {\r\n      EventBus.$on('UPDATE_dragModeOver_forDragItem', (status) => {\r\n        console.log(9999, status)\r\n        this.dragModeOver_drag = status\r\n      })\r\n    },\r\n    methods: {\r\n      startDragCallback  (event, ui) {\r\n        console.log('startDragCallback')\r\n        EventBus.$emit('UPDATE_dragModeOver', false)\r\n        EventBus.$emit('UPDATE_quickMenu', false)\r\n        if (!ui.helper.hasClass('stencil-item-dragged')) {\r\n          ui.helper.addClass('stencil-item-dragged');\r\n        }\r\n      },\r\n      dragCallback (event, ui) {\r\n        // console.log('dragCallback')\r\n        if (this.dragModeOver_drag !== false) {\r\n          const coord = this.editorManager.eventCoordinatesXY(event.pageX, event.pageY);\r\n\r\n          let additionalIEZoom = 1;\r\n          if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {\r\n            let ua = navigator.userAgent;\r\n            if (ua.indexOf('MSIE') >= 0) {\r\n              // IE 10 and below\r\n              let zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100);\r\n              if (zoom !== 100) {\r\n                additionalIEZoom = zoom / 100\r\n              }\r\n            }\r\n          }\r\n\r\n          if (additionalIEZoom !== 1) {\r\n            coord.x = coord.x / additionalIEZoom;\r\n            coord.y = coord.y / additionalIEZoom;\r\n          }\r\n\r\n          let aShapes = this.editorManager.getCanvas().getAbstractShapesAtPosition(coord);\r\n\r\n          if (aShapes.length <= 0) {\r\n            if (event.helper) {\r\n              EventBus.$emit('UPDATE_dragCanContain', false)\r\n              return false;\r\n            }\r\n          }\r\n\r\n          if (this.editorManager.instanceofCanvas(aShapes[0])) {\r\n            this.editorManager.getCanvas().setHightlightStateBasedOnX(coord.x);\r\n          }\r\n\r\n          // console.log('aShapes', aShapes)\r\n          const item = this.editorManager.getStencilItemById(event.target.id);\r\n          if (aShapes.length == 1 && this.editorManager.instanceofCanvas(aShapes[0])) {\r\n            let parentCandidate = aShapes[0];\r\n\r\n            if (item.id === 'Lane' || item.id === 'V-Lane' || item.id === 'BoundaryErrorEvent' || item.id === 'BoundaryMessageEvent' ||\r\n              item.id === 'BoundarySignalEvent' || item.id === 'BoundaryTimerEvent' ||\r\n              item.id === 'BoundaryCancelEvent' || item.id === 'BoundaryCompensationEvent' ||\r\n              item.id === 'EntryCriterion') {\r\n              EventBus.$emit('UPDATE_dragCanContain', false)\r\n\r\n              // Show Highlight\r\n              this.editorManager.handleEvents({\r\n                type: ORYX_CONFIG.EVENT_HIGHLIGHT_SHOW,\r\n                highlightId: 'shapeRepo.added',\r\n                elements: [parentCandidate],\r\n                style: ORYX_CONFIG.SELECTION_HIGHLIGHT_STYLE_RECTANGLE,\r\n                color: ORYX_CONFIG.SELECTION_INVALID_COLOR\r\n              });\r\n            } else {\r\n              EventBus.$emit('UPDATE_dragCanContain', true)\r\n              this.editorManager.dragCurrentParent = parentCandidate\r\n              this.editorManager.dragCurrentParentId = parentCandidate.id\r\n\r\n              this.editorManager.handleEvents({\r\n                type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n                highlightId: \"shapeRepo.added\"\r\n              });\r\n            }\r\n\r\n            this.editorManager.handleEvents({\r\n              type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n              highlightId: \"shapeRepo.attached\"\r\n            });\r\n\r\n            return false;\r\n\r\n          } else  {\r\n            // console.log(22, item)\r\n            let parentCandidate = aShapes.reverse().find((candidate) => {\r\n              // return (candidate instanceof ORYX.Core.Canvas\r\n              //   || candidate instanceof ORYX.Core.Node\r\n              //   || candidate instanceof ORYX.Core.Edge);\r\n\r\n              return (this.editorManager.instanceofCanvas(candidate)\r\n                || (item.id.endsWith('Lane') ? this.editorManager.instanceofNode(candidate) :\r\n                  (this.editorManager.instanceofNode(candidate) && !(candidate.getStencil().id().endsWith('Lane') ||\r\n                    candidate.getStencil().id().endsWith('Pool'))))\r\n                || this.editorManager.instanceofEdge(candidate));\r\n            });\r\n            // console.log('parentCandidate', parentCandidate)\r\n            if (this.editorManager.instanceofCanvas(parentCandidate)) {\r\n              if (item.id === 'Lane' || item.id === 'V-Lane' || item.id === 'BoundaryErrorEvent' || item.id === 'BoundaryMessageEvent' ||\r\n                item.id === 'BoundarySignalEvent' || item.id === 'BoundaryTimerEvent' ||\r\n                item.id === 'BoundaryCancelEvent' || item.id === 'BoundaryCompensationEvent' ||\r\n                item.id === 'EntryCriterion') {\r\n                EventBus.$emit('UPDATE_dragCanContain', false)\r\n                // Show Highlight\r\n                this.editorManager.handleEvents({\r\n                  type: ORYX_CONFIG.EVENT_HIGHLIGHT_SHOW,\r\n                  highlightId: 'shapeRepo.added',\r\n                  elements: [parentCandidate],\r\n                  style: ORYX_CONFIG.SELECTION_HIGHLIGHT_STYLE_RECTANGLE,\r\n                  color: ORYX_CONFIG.SELECTION_INVALID_COLOR\r\n                });\r\n              } else {\r\n                EventBus.$emit('UPDATE_dragCanContain', true)\r\n                this.editorManager.dragCurrentParent = parentCandidate\r\n                this.editorManager.dragCurrentParentId = parentCandidate.id\r\n\r\n                this.editorManager.handleEvents({\r\n                  type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n                  highlightId: \"shapeRepo.added\"\r\n                });\r\n              }\r\n\r\n              this.editorManager.handleEvents({\r\n                type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n                highlightId: \"shapeRepo.attached\"\r\n              });\r\n\r\n              return false;\r\n            }\r\n\r\n            if (!parentCandidate) {\r\n              EventBus.$emit('UPDATE_dragCanContain', false)\r\n              return false;\r\n            }\r\n\r\n            if (item.type === \"node\") {\r\n              // check if the draggable is a boundary event and the parent an Activity\r\n              let _canContain = false;\r\n              let parentStencilId = parentCandidate.getStencil().id();\r\n              if (this.editorManager.dragCurrentParentId && this.editorManager.dragCurrentParentId === parentCandidate.id) {\r\n                return false;\r\n              }\r\n\r\n              let parentItem = this.editorManager.getStencilItemById(parentCandidate.getStencil().idWithoutNs());\r\n              if (parentItem.roles.indexOf('Activity') > -1) {\r\n                if (item.roles.indexOf('IntermediateEventOnActivityBoundary') > -1\r\n                  || item.roles.indexOf('EntryCriterionOnItemBoundary') > -1\r\n                  || item.roles.indexOf('ExitCriterionOnItemBoundary') > -1) {\r\n                  _canContain = true;\r\n                }\r\n              } else if(parentItem.roles.indexOf('StageActivity') > -1) {\r\n                if (item.roles.indexOf('EntryCriterionOnItemBoundary') > -1\r\n                  || item.roles.indexOf('ExitCriterionOnItemBoundary') > -1) {\r\n                  _canContain = true;\r\n                }\r\n              } else if(parentItem.roles.indexOf('StageModelActivity') > -1) {\r\n                if (item.roles.indexOf('ExitCriterionOnItemBoundary') > -1) {\r\n                  _canContain = true;\r\n                }\r\n              } else if (parentCandidate.getStencil().idWithoutNs() === 'Pool') {\r\n                if (item.id === 'Lane') {\r\n                  _canContain = true;\r\n                }\r\n              } else if (parentCandidate.getStencil().idWithoutNs() === 'V-Pool') {\r\n                if (item.id === 'V-Lane') {\r\n                  _canContain = true;\r\n                }\r\n              }\r\n\r\n              if (_canContain) {\r\n                this.editorManager.handleEvents({\r\n                  type: ORYX_CONFIG.EVENT_HIGHLIGHT_SHOW,\r\n                  highlightId: \"shapeRepo.attached\",\r\n                  elements: [parentCandidate],\r\n                  style: ORYX_CONFIG.SELECTION_HIGHLIGHT_STYLE_RECTANGLE,\r\n                  color: ORYX_CONFIG.SELECTION_VALID_COLOR\r\n                });\r\n\r\n                this.editorManager.handleEvents({\r\n                  type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n                  highlightId: \"shapeRepo.added\"\r\n                });\r\n              } else {\r\n                let containmentRules = this.editorManager.containmentRules\r\n\r\n                for (let i = 0; i < containmentRules.length; i++) {\r\n                  let rule = containmentRules[i];\r\n                  if (rule.role === parentItem.id) {\r\n                    for (let j = 0; j < rule.contains.length; j++) {\r\n                      if (item.roles.indexOf(rule.contains[j]) > -1) {\r\n                        _canContain = true;\r\n                        break;\r\n                      }\r\n                    }\r\n\r\n                    if (_canContain) {\r\n                      break;\r\n                    }\r\n                  }\r\n                }\r\n\r\n                // Show Highlight\r\n                this.editorManager.handleEvents({\r\n                  type: ORYX_CONFIG.EVENT_HIGHLIGHT_SHOW,\r\n                  highlightId: 'shapeRepo.added',\r\n                  elements: [parentCandidate],\r\n                  color: _canContain ? ORYX_CONFIG.SELECTION_VALID_COLOR : ORYX_CONFIG.SELECTION_INVALID_COLOR\r\n                });\r\n\r\n                this.editorManager.handleEvents({\r\n                  type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n                  highlightId: \"shapeRepo.attached\"\r\n                });\r\n              }\r\n\r\n              this.editorManager.dragCurrentParent = parentCandidate\r\n              this.editorManager.dragCurrentParentId = parentCandidate.id\r\n              this.editorManager.dragCurrentParentStencil = parentStencilId\r\n              EventBus.$emit('UPDATE_dragCanContain', _canContain)\r\n\r\n            } else  {\r\n              let canvasCandidate = this.editorManager.getCanvas();\r\n              let canConnect = false;\r\n\r\n              let targetStencil = this.editorManager.getStencilItemById(parentCandidate.getStencil().idWithoutNs());\r\n              if (targetStencil) {\r\n                let associationConnect = false;\r\n                if (stencil.idWithoutNs() === 'Association' && (curCan.getStencil().idWithoutNs() === 'TextAnnotation' || curCan.getStencil().idWithoutNs() === 'BoundaryCompensationEvent')) {\r\n                  associationConnect = true;\r\n                } else if (stencil.idWithoutNs() === 'DataAssociation' && curCan.getStencil().idWithoutNs() === 'DataStore') {\r\n                  associationConnect = true;\r\n                }\r\n\r\n                if (targetStencil.canConnectTo || associationConnect) {\r\n                  canConnect = true;\r\n                }\r\n              }\r\n\r\n              // Edge\r\n              this.editorManager.dragCurrentParent = canvasCandidate\r\n              this.editorManager.dragCurrentParentId = canvasCandidate.id\r\n              this.editorManager.dragCurrentParentStencil = canvasCandidate.getStencil().id()\r\n              EventBus.$emit('UPDATE_dragCanContain', canConnect)\r\n              // Show Highlight\r\n              this.editorManager.handleEvents({\r\n                type: ORYX_CONFIG.EVENT_HIGHLIGHT_SHOW,\r\n                highlightId: 'shapeRepo.added',\r\n                elements: [canvasCandidate],\r\n                color: ORYX_CONFIG.SELECTION_VALID_COLOR\r\n              });\r\n\r\n              this.editorManager.handleEvents({\r\n                type: ORYX_CONFIG.EVENT_HIGHLIGHT_HIDE,\r\n                highlightId: \"shapeRepo.attached\"\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=272dd1c8&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"272dd1c8\",\n  null\n  \n)\n\nexport default component.exports","import stencilDragItem from './src/main.vue'\r\n\r\nstencilDragItem.install = function (Vue) {\r\n  Vue.component(stencilDragItem.name, stencilDragItem)\r\n}\r\n\r\nexport default stencilDragItem\r\n","// 整合所有的组件，对外导出，即一个完整的组件库\r\n\r\nimport flowEditor from '../packages/flow-design'\r\nimport canvasWrapper from '../packages/canvas-wrapper'\r\nimport propertySection from '../packages/property-section'\r\nimport paletteWrapper from '../packages/palette-wrapper'\r\nimport editorToolbar from '../packages/editor-toolbar'\r\nimport processTreeList from '../packages/process-tree-list'\r\nimport rootStencilTtem from '../packages/root-stencil-item'\r\nimport stencilItem from '../packages/stencil-item'\r\nimport stencilDragItem from '../packages/stencil-drag-item'\r\nimport locale from 'src/locale'\r\n\r\n// 存储组件列表\r\nconst components = [\r\n  flowEditor,\r\n  canvasWrapper,\r\n  propertySection,\r\n  paletteWrapper,\r\n  editorToolbar,\r\n  processTreeList,\r\n  rootStencilTtem,\r\n  stencilItem,\r\n  stencilDragItem\r\n]\r\n\r\n// 定义 install 方法，接收 Vue 作为参数。如果使用 use 注册插件，则所有的组件都将被注册\r\nconst install = function (Vue, opts = {}) {\r\n  locale.use(opts.locale)\r\n  locale.i18n(opts.i18n)\r\n\r\n  // 判断是否安装\r\n  if (install.installed) return\r\n  // 遍历注册全局组件\r\n  components.forEach(component => Vue.component(component.name, component))\r\n}\r\n\r\n// 判断是否是直接引入文件\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n  install(window.Vue)\r\n}\r\n\r\nexport default {\r\n  locale: locale.use,\r\n  i18n: locale.i18n,\r\n  // 导出的对象必须具有 install，才能被 Vue.use() 方法安装\r\n  install,\r\n  // 以下是具体的组件列表\r\n  flowEditor,\r\n  canvasWrapper,\r\n  propertySection,\r\n  paletteWrapper,\r\n  editorToolbar,\r\n  processTreeList,\r\n  rootStencilTtem,\r\n  stencilItem,\r\n  stencilDragItem\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"docs-demo-wrapper\"},[_c('div',{staticClass:\"demo-container\",style:({height: _vm.isExpand ? 'auto' : '0'})},[_c('div',{attrs:{\"span\":\"14\"}},[_c('div',{staticClass:\"docs-demo docs-demo--expand\"},[_c('div',{staticClass:\"highlight-wrapper\"},[_vm._t(\"highlight\")],2)])])]),_c('span',{staticClass:\"docs-trans docs-demo__triangle\",on:{\"click\":_vm.toggle}},[_vm._v(_vm._s(_vm.isExpand ? '隐藏代码' : '显示代码'))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"docs-demo-wrapper\">\r\n    <div :style=\"{height: isExpand ? 'auto' : '0'}\" class=\"demo-container\">\r\n      <div span=\"14\">\r\n        <div class=\"docs-demo docs-demo--expand\">\r\n          <div class=\"highlight-wrapper\">\r\n            <slot name=\"highlight\"></slot>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <span class=\"docs-trans docs-demo__triangle\" @click=\"toggle\">{{isExpand ? '隐藏代码' : '显示代码'}}</span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nimport Vue from 'vue'\r\nexport default {\r\n  data() {\r\n    return {\r\n      isExpand: false\r\n    }\r\n  },\r\n  methods: {\r\n    toggle() {\r\n      this.isExpand = !this.isExpand\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.demo-container {\r\n  transition: max-height 0.3s ease;\r\n  overflow: hidden;\r\n}\r\n.docs-demo {\r\n  width: 100%;\r\n  height: auto;\r\n  box-sizing: border-box;\r\n  font-size: 14px;\r\n  background-color: #f7f7f7;\r\n  border: 1px solid #e2ecf4;\r\n  border-top: none;\r\n  pre code {\r\n    font-family: Consolas, Menlo, Courier, monospace;\r\n    line-height: 22px;\r\n    border: none;\r\n  }\r\n}\r\n.docs-trans {\r\n  width: 100%;\r\n  text-align: center;\r\n  display: inline-block;\r\n  color: #c5d9e8;\r\n  font-size: 12px;\r\n  padding: 10px 0;\r\n  background-color: #fafbfc;\r\n  margin-bottom: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n.docs-demo__code,\r\n.highlight-wrapper,\r\n.docs-demo__meta {\r\n  padding: 0 20px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.docs-demo__code {\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.docs-demo.docs-demo--expand .docs-demo__meta {\r\n  border-bottom: 1px dashed #e9e9e9;\r\n}\r\n\r\n.docs-demo.docs-demo--expand .docs-demo__triangle {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.highlight-wrapper {\r\n  display: none;\r\n\r\n  p,\r\n  pre {\r\n    margin: 0;\r\n  }\r\n\r\n  .hljs {\r\n    padding: 0;\r\n  }\r\n}\r\n\r\n.docs-demo.docs-demo--expand .highlight-wrapper {\r\n  display: block;\r\n}\r\n\r\n.docs-demo__code__mobi {\r\n  height: 620px;\r\n  margin: 20px 0;\r\n}\r\n\r\n.docs-demo__code__mobi__header {\r\n  border-radius: 4px 4px 0 0;\r\n  background: -webkit-linear-gradient(rgba(55, 55, 55, 0.98), #545456);\r\n  background: linear-gradient(rgba(55, 55, 55, 0.98), #545456);\r\n  text-align: center;\r\n  padding: 8px;\r\n\r\n  img {\r\n    width: 100%;\r\n  }\r\n\r\n  .url-box {\r\n    height: 28px;\r\n    line-height: 28px;\r\n    color: #fff;\r\n    padding: 0 3px;\r\n    background-color: #a2a2a2;\r\n    margin: 10px auto 0;\r\n    border-radius: 4px;\r\n    white-space: nowrap;\r\n    overflow-x: auto;\r\n  }\r\n}\r\n\r\n.docs-demo__code__mobi__content {\r\n  iframe {\r\n    width: 100%;\r\n    border: 0;\r\n    height: 548px;\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./demo-block.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./demo-block.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./demo-block.vue?vue&type=template&id=a3425874&\"\nimport script from \"./demo-block.vue?vue&type=script&lang=js&\"\nexport * from \"./demo-block.vue?vue&type=script&lang=js&\"\nimport style0 from \"./demo-block.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport './plugins/element.js'\r\n\r\nimport flowEditor from 'src/index'\r\nimport 'packages/styles/src/index.scss'\r\nVue.use(flowEditor)\r\n\r\nimport demoBlock from '@/components/demo-block.vue'\r\nVue.component('demo-block', demoBlock)\r\n// 注意，在注册全局组件时，一定是叫demo-block。\r\n\r\nVue.config.productionTip = false\r\n\r\nVue.filter('limitLength', function (value, len) {\r\n  if (!value) return ''\r\n  if (value.length <= len) return value\r\n  return value.slice(0, len)\r\n})\r\n\r\nVue.filter('dateformat', function (date, format) {\r\n  if (date) {\r\n    // if (format) {\r\n    //   return moment(date).format(format)\r\n    // } else {\r\n    //   return moment(date).calendar()\r\n    // }\r\n    return date\r\n  }\r\n  return ''\r\n})\r\n\r\n\r\nnew Vue({\r\n  router,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAA6SURBVDiNY/z//z8DJYCJIt3UMIAxIiKCMj9ERET8////PwMMo/Px4YiIiP8DHwajBgyGhMQ49DMTAImWNxGXuc7EAAAAAElFTkSuQmCC\"","import Control from './Control'\r\nimport ORYX_Utils from '../../Utils'\r\n\r\n/**\r\n * @classDescription Represents a magnet that is part of another shape and can\r\n * be attached to dockers. Magnets are used for linking edge objects\r\n * to other Shape objects.\r\n * @extends {Control}\r\n */\r\nexport default class Magnet extends Control {\r\n  constructor() {\r\n    // arguments.callee.$.construct.apply(this, arguments)\r\n    super()\r\n    //this.anchors = [];\r\n    this.anchorLeft = null\r\n    this.anchorRight = null\r\n    this.anchorTop = null\r\n    this.anchorBottom = null\r\n\r\n    this.bounds.set(0, 0, 16, 16)\r\n\r\n    // graft magnet's root node into owner's control group.\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/2000/svg',\r\n      null,\r\n      ['g', { 'pointer-events': 'all' },\r\n        ['circle', { cx: '8', cy: '8', r: '4', stroke: 'none', fill: 'red', 'fill-opacity': '0.3' }]\r\n      ])\r\n\r\n    this.hide()\r\n  }\r\n  update() {\r\n    // arguments.callee.$.update.apply(this, arguments)\r\n    super.update()\r\n    //this.isChanged = true;\r\n  }\r\n  _update() {\r\n    // arguments.callee.$.update.apply(this, arguments)\r\n    super.update()\r\n    //this.isChanged = true;\r\n  }\r\n  refresh () {\r\n    // arguments.callee.$.refresh.apply(this, arguments)\r\n    super.refresh()\r\n    let p = this.bounds.upperLeft()\r\n    /*if(this.parent) {\r\n     var parentPos = this.parent.bounds.upperLeft();\r\n     p.x += parentPos.x;\r\n     p.y += parentPos.y;\r\n     }*/\r\n\r\n    this.node.setAttributeNS(null, 'transform', 'translate(' + p.x + ', ' + p.y + ')')\r\n  }\r\n  show () {\r\n    //this.refresh();\r\n    // arguments.callee.$.show.apply(this, arguments)\r\n    super.show()\r\n  }\r\n  toString() {\r\n    return 'Magnet ' + this.id\r\n  }\r\n  getInstanceofType () {\r\n    return 'Magent'\r\n  }\r\n}","import Control from './Control'\r\nimport Docker from './Docker'\r\nimport Magnet from './Magnet'\r\n\r\n\r\nconst Controls = {\r\n  Control: Control,\r\n  Docker: Docker,\r\n  Magnet: Magnet\r\n}\r\n\r\nexport default Controls","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJySURBVDiNZZNPaFVXEMZ/37n3EUiE6OY1CroKfcTYuonUunuLWvzTdiF5nCtEbBGEgoIuIyQUpHQXQt1EcFFIbuDGhaBk011aqmAiRMUkRHCVBrowpA8q0nvPuPC89pWe1Zz5Zr6Z+ZiRmdH9Wq3WYJqmg8BnZpYBmNkysBxCyIuieNkd7zqGJGVZdjVJklXgUAjhOfABsF/SF5K+S5JkNcuyq5L0HwJJ8t7fB6aBv4GDkq5JugzckfQCMKAXmPbez3dIHID3/gpwJpLeN7PPgY/MzObn5y/leT5sZh8Dm5I2enp6xr333wJodHR0MLbdC2ymaXq2LMt1QMAfVVV9WBTFbtSnv1arNauqqkuaqqrqqHPOnY/JJunLqqo+jckA9TRNJzrzLiws/BlCuC5pH9DrnDvvgJGIb+R5vm5mp7tVNrMrrVarEUe9DOwBhiM84iR1CH5rNpupmZ0E/pJ0MfprSZJMjY2N7Qd+kLQk6XUUf8T9W4s39Xr9hKS9Zjae5/lPwIOInSrL8megP4SwZGY9HXIHPIlshyWdAX4dGhr6ESBJknEgxOBhgBDCL8DR6Ft3klbi53dJTefcN5OTkwFgdnb2GZB3dbnmnDsAHItFH7qyLG9LapvZYzO71263t7pFrKpqgvfLhZktSZoBUuBtWZbTriiKLWAihLAqqdHX17five+0SFEUr4CZWHEN+CTaU0VRbKUA29vbtwYGBs4BFyL4JMuyNeCRmbWdcytm9kYS8fjuNhqNGwDqvkbv/deSbvF+sbrfFnATOALs7O7u3lxcXHz7PwL455y/MrPjwHGgBqxK+l7S07m5uZ3u+Hdrd/sMyAAzeQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAESSURBVDiNxZOxSsVAEEXvHQXzCgNWWvsF/sFTsLK0SUIs/Qet7CysRBBrQUjCdlZa2Pg6P8FSsLNQeYUISa6NCWsgUUjhwDZ3mbMzd2coCWPCRmUDWOy7SNN0RdKepH0Al3men/4KIMkkSba+k3YBLAGApOW+h9h4EMdxTPIYwLoHnEs6l3RlZq1ZZVk+Oec+WkAURdtmdjPUUqfSWZZl07YFM8sHkitJd75gZq0fzS/09ghggeSmf+q6vk6S5KKt4A8xB1B1tDcfMDhNkp5JfnrSS1VVJz7gAcC0D0ByoyO9AlgD8N54cDZUAckZgHuSB0EQTMIwXHXOPQI/5+CQ5BGAyQDrtiiKHXkLxH9fptGAL210ZLUSXdD0AAAAAElFTkSuQmCC\"","import UIObject from './UIObject'\r\nimport ERDF from '../ERDF'\r\nimport ORYX_Config from '../CONFIG'\r\nimport ORYX_Utils from '../Utils'\r\n\r\n/**\r\n * Top Level uiobject.\r\n * @class ORYX.Core.AbstractShape\r\n * @extends ORYX.Core.UIObject\r\n */\r\n\r\nexport default class AbstractShape extends UIObject {\r\n  constructor (options, stencil, facade) {\r\n    super(options)\r\n    // arguments.callee.$.construct.apply(this, arguments);\r\n\r\n    this.resourceId = ORYX_Utils.provideId() // Id of resource in DOM\r\n\r\n    // stencil reference\r\n    this._stencil = stencil\r\n    // if the stencil defines a super stencil that should be used for its instances, set it.\r\n    if (this._stencil._jsonStencil.superId) {\r\n      let stencilId = this._stencil.id()\r\n      let superStencilId = stencilId.substring(0, stencilId.indexOf('#') + 1) + stencil._jsonStencil.superId\r\n      let stencilSet = this._stencil.stencilSet()\r\n      this._stencil = stencilSet.stencil(superStencilId)\r\n    }\r\n\r\n    // Hash map for all properties. Only stores the values of the properties.\r\n    this.properties = new Hash()\r\n    this.propertiesChanged = new Hash()\r\n\r\n    // List of properties which are not included in the stencilset,\r\n    // but which gets (de)serialized\r\n    this.hiddenProperties = new Hash()\r\n\r\n    //Initialization of property map and initial value.\r\n    this._stencil.properties().each((function (property) {\r\n      let key = property.prefix() + '-' + property.id()\r\n      this.properties.set(key, property.value())\r\n      this.propertiesChanged.set(key, true)\r\n    }).bind(this))\r\n\r\n    // if super stencil was defined, also regard stencil's properties:\r\n    if (stencil._jsonStencil.superId) {\r\n      stencil.properties().each((function (property) {\r\n        let key = property.prefix() + '-' + property.id()\r\n        let value = property.value()\r\n        let oldValue = this.properties.get(key)\r\n        this.properties.set(key, value)\r\n        this.propertiesChanged.set(key, true)\r\n\r\n        // Raise an event, to show that the property has changed\r\n        // required for plugins like processLink.js\r\n        //window.setTimeout( function(){\r\n\r\n        this._delegateEvent({\r\n          type: ORYX_Config.EVENT_PROPERTY_CHANGED,\r\n          name: key,\r\n          value: value,\r\n          oldValue: oldValue\r\n        })\r\n\r\n        //}.bind(this), 10)\r\n\r\n      }).bind(this))\r\n    }\r\n  }\r\n\r\n  layout () {\r\n\r\n  }\r\n\r\n  /**\r\n   * Returns the stencil object specifiing the type of the shape.\r\n   */\r\n  getStencil () {\r\n    return this._stencil\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object} resourceId\r\n   */\r\n  getChildShapeByResourceId (resourceId) {\r\n    resourceId = ERDF.__stripHashes(resourceId)\r\n    return this.getChildShapes(true).find(function (shape) {\r\n      return shape.resourceId == resourceId\r\n    })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object} deep\r\n   * @param {Object} iterator\r\n   */\r\n  getChildShapes (deep, iterator) {\r\n    let result = []\r\n    this.children.each(function (uiObject) {\r\n      let type = uiObject.getInstanceofType()\r\n      if (type.includes('Shape') && uiObject.isVisible) {\r\n        if (iterator) {\r\n          iterator(uiObject)\r\n        }\r\n        result.push(uiObject)\r\n        if (deep) {\r\n          result = result.concat(uiObject.getChildShapes(deep, iterator))\r\n        }\r\n      }\r\n    })\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * @param {Object} shape\r\n   * @return {boolean} true if any of shape's childs is given shape\r\n   */\r\n  hasChildShape (shape) {\r\n    return this.getChildShapes().any(function (child) {\r\n      return (child === shape) || child.hasChildShape(shape)\r\n    })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object} deep\r\n   * @param {Object} iterator\r\n   */\r\n  getChildNodes (deep, iterator) {\r\n    let result = []\r\n    this.children.each(function (uiObject) {\r\n      let type = uiObject.getInstanceofType()\r\n      if (type.includes('Node') && uiObject.isVisible) {\r\n        if (iterator) {\r\n          iterator(uiObject)\r\n        }\r\n        result.push(uiObject)\r\n      }\r\n      if (type.includes('Shape')) {\r\n        if (deep) {\r\n          result = result.concat(uiObject.getChildNodes(deep, iterator))\r\n        }\r\n      }\r\n    })\r\n\r\n    return result\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Object} deep\r\n   * @param {Object} iterator\r\n   */\r\n  getChildEdges (deep, iterator) {\r\n    let result = []\r\n    this.children.each(function (uiObject) {\r\n      let type = uiObject.getInstanceofType()\r\n      if (type.includes('Edge') && uiObject.isVisible) {\r\n        if (iterator) {\r\n          iterator(uiObject)\r\n        }\r\n        result.push(uiObject)\r\n      }\r\n      if (type.includes('Shape')) {\r\n        if (deep) {\r\n          result = result.concat(uiObject.getChildEdges(deep, iterator))\r\n        }\r\n      }\r\n    })\r\n\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * Returns a sorted array of ORYX.Core.Node objects.\r\n   * Ordered in z Order, the last object has the highest z Order.\r\n   */\r\n  // TODO deep iterator\r\n  getAbstractShapesAtPosition () {\r\n    let x, y\r\n    switch (arguments.length) {\r\n      case 1:\r\n        x = arguments[0].x\r\n        y = arguments[0].y\r\n        break\r\n      case 2:\r\n        //two or more arguments\r\n        x = arguments[0]\r\n        y = arguments[1]\r\n        break\r\n      default:\r\n        throw 'getAbstractShapesAtPosition needs 1 or 2 arguments!'\r\n    }\r\n\r\n    if (this.isPointIncluded(x, y)) {\r\n      let result = []\r\n      result.push(this)\r\n\r\n      // check, if one child is at that position\r\n      let childNodes = this.getChildNodes()\r\n      let childEdges = this.getChildEdges()\r\n\r\n      let ary = [childNodes, childEdges]\r\n      ary.each(function (ne) {\r\n        let nodesAtPosition = new Hash()\r\n\r\n        ne.each(function (node) {\r\n          if (!node.isVisible) {\r\n            return\r\n          }\r\n          let candidates = node.getAbstractShapesAtPosition(x, y)\r\n          if (candidates.length > 0) {\r\n            let nodesInZOrder = $A(node.node.parentNode.childNodes)\r\n            let zOrderIndex = nodesInZOrder.indexOf(node.node)\r\n            nodesAtPosition.set(zOrderIndex, candidates)\r\n          }\r\n        })\r\n\r\n        nodesAtPosition.keys().sort().each(function (key) {\r\n          result = result.concat(nodesAtPosition.get(key))\r\n        })\r\n      })\r\n\r\n      return result\r\n    } else {\r\n      return []\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param key {String} Must be 'prefix-id' of property\r\n   * @param value {Object} Can be of type String or Number according to property type.\r\n   */\r\n  setProperty (key, value, force) {\r\n    let oldValue = this.properties.get(key)\r\n    if (oldValue !== value || force === true) {\r\n      this.properties.set(key, value)\r\n      this.propertiesChanged.set(key, true)\r\n      this._changed()\r\n\r\n      // Raise an event, to show that the property has changed\r\n      // window.setTimeout( function(){\r\n\r\n      if (!this._isInSetProperty) {\r\n        this._isInSetProperty = true\r\n        this._delegateEvent({\r\n          type: ORYX_Config.EVENT_PROPERTY_CHANGED,\r\n          elements: [this],\r\n          name: key,\r\n          value: value,\r\n          oldValue: oldValue\r\n        })\r\n\r\n        delete this._isInSetProperty\r\n      }\r\n      //}.bind(this), 10)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns TRUE if one of the properties is flagged as dirty\r\n   * @return {boolean}\r\n   */\r\n  isPropertyChanged () {\r\n    return this.propertiesChanged.any(function (property) {\r\n      return property.value\r\n    })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {String} Must be 'prefix-id' of property\r\n   * @param {Object} Can be of type String or Number according to property type.\r\n   */\r\n  setHiddenProperty (key, value) {\r\n    // IF undefined, Delete\r\n    if (value === undefined) {\r\n      this.hiddenProperties.unset(key)\r\n      return\r\n    }\r\n    let oldValue = this.hiddenProperties.get(key)\r\n    if (oldValue !== value) {\r\n      this.hiddenProperties.set(key, value)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calculate if the point is inside the Shape\r\n   * @param {Point}\r\n   */\r\n  isPointIncluded (pointX, pointY, absoluteBounds) {\r\n    let absBounds = absoluteBounds ? absoluteBounds : this.absoluteBounds()\r\n    return absBounds.isIncluded(pointX, pointY)\r\n  }\r\n\r\n  /**\r\n   * Get the serialized object\r\n   * return Array with hash-entrees (prefix, name, value)\r\n   * Following values will given:\r\n   *    Type\r\n   *    Properties\r\n   */\r\n  serialize () {\r\n    let serializedObject = []\r\n    // Add the type\r\n    serializedObject.push({ name: 'type', prefix: 'oryx', value: this.getStencil().id(), type: 'literal' })\r\n\r\n    // Add hidden properties\r\n    this.hiddenProperties.each(function (prop) {\r\n      serializedObject.push({\r\n        name: prop.key.replace('oryx-', ''),\r\n        prefix: 'oryx',\r\n        value: prop.value,\r\n        type: 'literal'\r\n      })\r\n    }.bind(this))\r\n\r\n    // Add all properties\r\n    this.getStencil().properties().each((function (property) {\r\n      let prefix = property.prefix()\t// Get prefix\r\n      let name = property.id()\t\t// Get name\r\n\r\n      //if(typeof this.properties[prefix+'-'+name] == 'boolean' || this.properties[prefix+'-'+name] != \"\")\r\n      serializedObject.push({\r\n        name: name,\r\n        prefix: prefix,\r\n        value: this.properties.get(prefix + '-' + name),\r\n        type: 'literal'\r\n      })\r\n\r\n    }).bind(this))\r\n\r\n    return serializedObject\r\n  }\r\n\r\n  deserialize (serialize) {\r\n    // Search in Serialize\r\n    let initializedDocker = 0\r\n\r\n    // Sort properties so that the hidden properties are first in the list\r\n    serialize = serialize.sort(function (a, b) {\r\n      a = Number(this.properties.keys().member(a.prefix + '-' + a.name))\r\n      b = Number(this.properties.keys().member(b.prefix + '-' + b.name))\r\n      return a > b ? 1 : (a < b ? -1 : 0)\r\n    }.bind(this))\r\n\r\n    serialize.each((function (obj) {\r\n      let name = obj.name\r\n      let prefix = obj.prefix\r\n      let value = obj.value\r\n\r\n      // Complex properties can be real json objects, encode them to a string\r\n      if (Object.prototype.toString.call(value) === 'Object') value = JSON.stringify(value)\r\n\r\n      switch (prefix + '-' + name) {\r\n        case 'raziel-parent':\r\n          // Set parent\r\n          if (!this.parent) {\r\n            break\r\n          }\r\n          // Set outgoing Shape\r\n          let parent = this.getCanvas().getChildShapeByResourceId(value)\r\n          if (parent) {\r\n            parent.add(this)\r\n          }\r\n          break\r\n        default:\r\n          // If list, eval as an array\r\n          let prop = this.getStencil().property(prefix + '-' + name)\r\n          if (prop && prop.isList() && typeof value === 'string') {\r\n            if ((value || '').strip() && !value.startsWith('[') && !value.startsWith(']'))\r\n              value = '[\"' + value.strip() + '\"]'\r\n            value = ((value || '').strip() || '[]').evalJSON()\r\n          }\r\n\r\n          // Set property\r\n          if (this.properties.keys().member(prefix + '-' + name)) {\r\n            this.setProperty(prefix + '-' + name, value)\r\n          } else if (!(name === 'bounds' || name === 'parent' || name === 'target' || name === 'dockers' || name === 'docker' || name === 'outgoing' || name === 'incoming')) {\r\n            this.setHiddenProperty(prefix + '-' + name, value)\r\n          }\r\n\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  toString () {\r\n    return 'ORYX.Core.AbstractShape ' + this.id\r\n  }\r\n\r\n  /**\r\n   * Converts the shape to a JSON representation.\r\n   * @return {Object} A JSON object with included ORYX.Core.AbstractShape.JSONHelper and getShape() method.\r\n   */\r\n  toJSON () {\r\n    // upgrade to prototype 1.6/1.7 breaks the jquery extend call. rebuilding the properties here.\r\n    let mergedProperties = this.properties.merge(this.hiddenProperties)\r\n    let resultProperties = new Hash()\r\n    mergedProperties.each(function (pair) {\r\n      let key = pair.key\r\n      let value = pair.value\r\n\r\n      //If complex property, value should be a json object\r\n      if (this.getStencil().property(key)\r\n        && this.getStencil().property(key).type() === ORYX_Config.TYPE_COMPLEX\r\n        && Object.prototype.toString.call(value) === 'String') {\r\n\r\n        try {\r\n          value = JSON.parse(value)\r\n        } catch (error) {\r\n        }\r\n\r\n        // Parse date\r\n      } else if (value instanceof Date && this.getStencil().property(key)) {\r\n        try {\r\n          value = value.format(this.getStencil().property(key).dateFormat())\r\n        } catch (e) {\r\n        }\r\n      }\r\n\r\n      // Takes \"my_property\" instead of \"oryx-my_property\" as key\r\n      key = key.replace(/^[\\w_]+-/, '')\r\n      resultProperties.set(key, value)\r\n\r\n    }.bind(this))\r\n\r\n    let json = {\r\n      resourceId: this.resourceId,\r\n      properties: resultProperties.toObject(),\r\n      stencil: {\r\n        id: this.getStencil().idWithoutNs()\r\n      },\r\n      childShapes: this.getChildShapes().map(function (shape) {\r\n        return shape.toJSON()\r\n      })\r\n    }\r\n\r\n    if (this.getOutgoingShapes) {\r\n      json.outgoing = this.getOutgoingShapes().map(function (shape) {\r\n        return {\r\n          resourceId: shape.resourceId\r\n        }\r\n      })\r\n    }\r\n\r\n    if (this.bounds) {\r\n      json.bounds = {\r\n        lowerRight: this.bounds.lowerRight(),\r\n        upperLeft: this.bounds.upperLeft()\r\n      }\r\n    }\r\n\r\n    if (this.dockers) {\r\n      json.dockers = this.dockers.map(function (docker) {\r\n        let d = docker.getDockedShape() && docker.referencePoint ? docker.referencePoint : docker.bounds.center()\r\n        d.getDocker = function () {\r\n          return docker\r\n        }\r\n        return d\r\n      })\r\n    }\r\n\r\n    jQuery.extend(json, ORYX_Utils.JSONHelper)\r\n\r\n    // do not pollute the json attributes (for serialization), so put the corresponding\r\n    // shape is encapsulated in a method\r\n    json.getShape = function () {\r\n      return this\r\n    }.bind(this)\r\n\r\n    return json\r\n  }\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAESSURBVDiNpZMxSsRAGIXfHyZgsFnBJoVgt+ANtllIp54gTKop1gtYWIqwjYUXsEmV3GBZu4CHEGRBtksj2FrI/2wSWXYnjrKvfPP/37yBN0IS+8j4zKIojlT1XkSmAEDyOYqim6qqPrZno21DRERVFwBmJMckxwBmqroQEQkCrLUXACaeYJM8zy+DAJInvmd1Og0CVPVgaFtEDoMAAOshAMm3IMAYszO0AVgFAXEcrwZSrJMkeQ0CyrL8BDD3AObd2e8A59yoL9CmRGTqnBvt+H2VsywzaZpekbwDcOxJAADvInLbtu1j0zRfPwBr7TmAB5JnA4vbaV4AXNd1/WQAgOTyL4u9uouWAMTXg39J9v3O3/tPZDq1OyK2AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE/SURBVDiNpZMxbhpBGIXfN50LLkFhbQ9WJNL4AOmX2WkiLoD7VFtwgPQWolkz9LkCSFHCBSh8CffzXLBEFE7A8ZNGmuJ9ml9v3o9tnWs6nd4CjaRRfyRpL2lv+ynnfDj3h9MFoGmaB2Br+8b2o6SxpLHtR9s3wLb38IezLYC6rn8AgxDC167rnvWGUkrDUsrK9stms/li20GSYoxzYFBV1f3fYEnquu65qqp7YBBjnEsSdV3fAtsQwqd/wW9M8tP25wA0tpfXwqdJbC+BGHRMenctfKadpHGQNAJ+vZfumVG46LygoGNB7t4L9sw+6NiyyX88PpH0O9h+AmYppeG1ZEppCMxsr0PO+QAsSimrtm0vZtK2bSilrIBFzvnw4Spz2kaAGOPc9jfbS0m70/f2gU2AGbBYr9ff3YN8dJ1fAZZ7wIFK8M93AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","import Control from './Control'\r\nimport ORYX_Config from '../../CONFIG'\r\nimport ORYX_Utils from '../../Utils'\r\n\r\n/**\r\n * @classDescription Represents a movable docker that can be bound to a shape. Dockers are used\r\n * for positioning shape objects.\r\n * @extends {Control}\r\n *\r\n * TODO absoluteXY und absoluteCenterXY von einem Docker liefern falsche Werte!!!\r\n */\r\nexport default class Docker extends Control {\r\n  constructor () {\r\n    // arguments.callee.$.construct.apply(this, arguments);\r\n    super(...arguments)\r\n    this.isMovable = true\t\t\t\t// Enables movability\r\n    this.bounds.set(0, 0, 16, 16)\t\t// Set the bounds\r\n    this.referencePoint = undefined\t\t// Refrenzpoint\r\n    this._dockedShapeBounds = undefined\r\n    this._dockedShape = undefined\r\n    this._oldRefPoint1 = undefined\r\n    this._oldRefPoint2 = undefined\r\n\r\n    // this.anchors = [];\r\n    this.anchorLeft = null\r\n    this.anchorRight = null\r\n    this.anchorTop = null\r\n    this.anchorBottom = null\r\n\r\n    this.node = ORYX_Utils.graft('http://www.w3.org/2000/svg', null, ['g'])\r\n\r\n    // The DockerNode reprasentation\r\n    this._dockerNode = ORYX_Utils.graft('http://www.w3.org/2000/svg',\r\n      this.node,\r\n      ['g', { 'pointer-events': 'all' },\r\n        ['circle', { cx: '8', cy: '8', r: '8', stroke: 'none', fill: 'none' }],\r\n        ['circle', { cx: '8', cy: '8', r: '3', stroke: 'black', fill: 'red', 'stroke-width': '1' }]\r\n      ])\r\n\r\n    // The ReferenzNode reprasentation\r\n    this._referencePointNode = ORYX_Utils.graft('http://www.w3.org/2000/svg',\r\n      this.node,\r\n      ['g', { 'pointer-events': 'none' },\r\n        ['circle', {\r\n          cx: this.bounds.upperLeft().x,\r\n          cy: this.bounds.upperLeft().y,\r\n          r: 3,\r\n          fill: 'red',\r\n          'fill-opacity': 0.4\r\n        }]])\r\n\r\n    // Hide the Docker\r\n    this.hide()\r\n\r\n    // Add to the EventHandler\r\n    this.addEventHandlers(this._dockerNode)\r\n\r\n    // Buffer the Update Callback for un-/register on Event-Handler\r\n    this._updateCallback = this._changed.bind(this)\r\n  }\r\n  update () {\r\n    // If there have an DockedShape\r\n    if (this._dockedShape) {\r\n      let type = this._dockedShape.getInstanceofType()\r\n      if (this._dockedShapeBounds && type.includes('Node')) {\r\n        // Calc the delta of width and height of the lastBounds and the current Bounds\r\n        let dswidth = this._dockedShapeBounds.width()\r\n        let dsheight = this._dockedShapeBounds.height()\r\n        if (!dswidth) {\r\n          dswidth = 1\r\n        }\r\n        if (!dsheight) {\r\n          dsheight = 1\r\n        }\r\n\r\n        let widthDelta = this._dockedShape.bounds.width() / dswidth\r\n        let heightDelta = this._dockedShape.bounds.height() / dsheight\r\n\r\n        // If there is an different\r\n        if (widthDelta !== 1.0 || heightDelta !== 1.0) {\r\n          // Set the delta\r\n          this.referencePoint.x *= widthDelta\r\n          this.referencePoint.y *= heightDelta\r\n        }\r\n\r\n        // Clone these bounds\r\n        this._dockedShapeBounds = this._dockedShape.bounds.clone()\r\n      }\r\n\r\n      // Get the first and the last Docker of the parent Shape\r\n      let dockerIndex = this.parent.dockers.indexOf(this)\r\n      let dock1 = this\r\n      let dock2 = this.parent.dockers.length > 1 ?\r\n        (dockerIndex === 0 ?\t\t\t\t\t\t\t// If there is the first element\r\n          this.parent.dockers[dockerIndex + 1] :\t// then take the next docker\r\n          this.parent.dockers[dockerIndex - 1]) :  // if not, then take the docker before\r\n        undefined\r\n\r\n      // Calculate the first absolute Refenzpoint\r\n      let absoluteReferenzPoint1 = dock1.getDockedShape() ?\r\n        dock1.getAbsoluteReferencePoint() :\r\n        dock1.bounds.center()\r\n\r\n      // Calculate the last absolute Refenzpoint\r\n      let absoluteReferenzPoint2 = dock2 && dock2.getDockedShape() ?\r\n        dock2.getAbsoluteReferencePoint() :\r\n        dock2 ?\r\n          dock2.bounds.center() :\r\n          undefined\r\n\r\n      // If there is no last absolute Referenzpoint\r\n      if (!absoluteReferenzPoint2) {\r\n        // Calculate from the middle of the DockedShape\r\n        let center = this._dockedShape.absoluteCenterXY()\r\n        let minDimension = this._dockedShape.bounds.width() * this._dockedShape.bounds.height()\r\n        absoluteReferenzPoint2 = {\r\n          x: absoluteReferenzPoint1.x + (center.x - absoluteReferenzPoint1.x) * -minDimension,\r\n          y: absoluteReferenzPoint1.y + (center.y - absoluteReferenzPoint1.y) * -minDimension\r\n        }\r\n      }\r\n\r\n      /*if (!this._oldRefPoint1 || !this._oldRefPoint2 ||\r\n       absoluteReferenzPoint1.x !== this._oldRefPoint1.x ||\r\n       absoluteReferenzPoint1.y !== this._oldRefPoint1.y ||\r\n       absoluteReferenzPoint2.x !== this._oldRefPoint2.x ||\r\n       absoluteReferenzPoint2.y !== this._oldRefPoint2.y) {*/\r\n\r\n      // Get the new point for the Docker, calucalted by the intersection point of the Shape and the two points\r\n      let newPoint = this._dockedShape.getIntersectionPoint(absoluteReferenzPoint1, absoluteReferenzPoint2)\r\n\r\n      // If there is new point, take the referencepoint as the new point\r\n      if (!newPoint) {\r\n        newPoint = this.getAbsoluteReferencePoint()\r\n      }\r\n\r\n      if (this.parent && this.parent.parent) {\r\n        let grandParentPos = this.parent.parent.absoluteXY()\r\n        newPoint.x -= grandParentPos.x\r\n        newPoint.y -= grandParentPos.y\r\n      }\r\n\r\n      // Set the bounds to the new point\r\n      this.bounds.centerMoveTo(newPoint)\r\n\r\n      this._oldRefPoint1 = absoluteReferenzPoint1\r\n      this._oldRefPoint2 = absoluteReferenzPoint2\r\n    }\r\n    /*else {\r\n     newPoint = this.bounds.center();\r\n     }*/\r\n\r\n\r\n    //\t}\r\n\r\n    // Call the super class\r\n    super.update()\r\n    // arguments.callee.$.update.apply(this, arguments)\r\n  }\r\n  /**\r\n   * Calls the super class refresh method and updates the view of the docker.\r\n   */\r\n  refresh () {\r\n    // arguments.callee.$.refresh.apply(this, arguments)\r\n    super.refresh()\r\n    // Refresh the dockers node\r\n    let p = this.bounds.upperLeft()\r\n    this._dockerNode.setAttributeNS(null, 'transform', 'translate(' + p.x + ', ' + p.y + ')')\r\n\r\n    // Refresh the referencepoints node\r\n    p = Object.clone(this.referencePoint)\r\n\r\n    if (p && this._dockedShape) {\r\n      let upL\r\n      let type = this.parent.getInstanceofType()\r\n      if (type.includes('Edge')) {\r\n        upL = this._dockedShape.absoluteXY()\r\n      } else {\r\n        upL = this._dockedShape.bounds.upperLeft()\r\n      }\r\n      p.x += upL.x\r\n      p.y += upL.y\r\n    } else {\r\n      p = this.bounds.center()\r\n    }\r\n\r\n    this._referencePointNode.setAttributeNS(null, 'transform', 'translate(' + p.x + ', ' + p.y + ')')\r\n  }\r\n  /**\r\n   * Set the reference point\r\n   * @param {Object} point\r\n   */\r\n  setReferencePoint(point) {\r\n    // Set the referencepoint\r\n    if (this.referencePoint !== point &&\r\n      (!this.referencePoint ||\r\n        !point ||\r\n        this.referencePoint.x !== point.x ||\r\n        this.referencePoint.y !== point.y)) {\r\n\r\n      this.referencePoint = point\r\n      this._changed()\r\n    }\r\n    // Update directly, because the referencepoint has no influence of the bounds\r\n    //this.refresh();\r\n  }\r\n  /**\r\n   * Get the absolute referencepoint\r\n   */\r\n  getAbsoluteReferencePoint() {\r\n    if (!this.referencePoint || !this._dockedShape) {\r\n      return undefined\r\n    } else {\r\n      let absUL = this._dockedShape.absoluteXY()\r\n      return {\r\n        x: this.referencePoint.x + absUL.x,\r\n        y: this.referencePoint.y + absUL.y\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Set the docked Shape from the docker\r\n   * @param {Object} shape\r\n   */\r\n  setDockedShape(shape) {\r\n    // If there is an old docked Shape\r\n    if (this._dockedShape) {\r\n      this._dockedShape.bounds.unregisterCallback(this._updateCallback)\r\n\r\n      // Delete the Shapes from the incoming and outgoing array\r\n      // If this Docker the incoming of the Shape\r\n      if (this === this.parent.dockers.first()) {\r\n        this.parent.incoming = this.parent.incoming.without(this._dockedShape)\r\n        this._dockedShape.outgoing = this._dockedShape.outgoing.without(this.parent)\r\n        // If this Docker the outgoing of the Shape\r\n      } else if (this === this.parent.dockers.last()) {\r\n        this.parent.outgoing = this.parent.outgoing.without(this._dockedShape)\r\n        this._dockedShape.incoming = this._dockedShape.incoming.without(this.parent)\r\n      }\r\n    }\r\n\r\n    // Set the new Shape\r\n    this._dockedShape = shape\r\n    this._dockedShapeBounds = undefined\r\n    let referencePoint = undefined\r\n\r\n    // If there is an Shape, register the updateCallback if there are changes in the shape bounds\r\n    if (this._dockedShape) {\r\n      // Add the Shapes to the incoming and outgoing array\r\n      // If this Docker the incoming of the Shape\r\n      if (this === this.parent.dockers.first()) {\r\n        this.parent.incoming.push(shape)\r\n        shape.outgoing.push(this.parent)\r\n        // If this Docker the outgoing of the Shape\r\n      } else if (this === this.parent.dockers.last()) {\r\n        this.parent.outgoing.push(shape)\r\n        shape.incoming.push(this.parent)\r\n      }\r\n\r\n      // Get the bounds and set the new referencepoint\r\n      let bounds = this.bounds\r\n      let absUL = shape.absoluteXY()\r\n\r\n      /*if(shape.parent){\r\n       var b = shape.parent.bounds.upperLeft();\r\n       absUL.x -= b.x;\r\n       absUL.y -= b.y;\r\n       }*/\r\n\r\n      referencePoint = {\r\n        x: bounds.center().x - absUL.x,\r\n        y: bounds.center().y - absUL.y\r\n      }\r\n\r\n      this._dockedShapeBounds = this._dockedShape.bounds.clone()\r\n\r\n      this._dockedShape.bounds.registerCallback(this._updateCallback)\r\n\r\n      // Set the color of the docker as docked\r\n      this.setDockerColor(ORYX_Config.DOCKER_DOCKED_COLOR)\r\n    } else {\r\n      // Set the color of the docker as undocked\r\n      this.setDockerColor(ORYX_Config.DOCKER_UNDOCKED_COLOR)\r\n    }\r\n\r\n    // Set the referencepoint\r\n    this.setReferencePoint(referencePoint)\r\n    this._changed()\r\n    //this.update();\r\n  }\r\n  /**\r\n   * Get the docked Shape\r\n   */\r\n  getDockedShape() {\r\n    return this._dockedShape\r\n  }\r\n  /**\r\n   * Returns TRUE if the docker has a docked shape\r\n   */\r\n  isDocked() {\r\n    return !!this._dockedShape\r\n  }\r\n  /**\r\n   * Set the Color of the Docker\r\n   * @param {Object} color\r\n   */\r\n  setDockerColor(color) {\r\n    this._dockerNode.lastChild.setAttributeNS(null, 'fill', color)\r\n  }\r\n  preventHiding(prevent) {\r\n    this._preventHiding = Math.max(0, (this._preventHiding || 0) + (prevent ? 1 : -1))\r\n  }\r\n  /**\r\n   * Hides this UIObject and all its children.\r\n   */\r\n  hide () {\r\n    if (this._preventHiding) {\r\n      return false\r\n    }\r\n\r\n    // Hide docker and reference point\r\n    this.node.setAttributeNS(null, 'visibility', 'hidden')\r\n    this._referencePointNode.setAttributeNS(null, 'visibility', 'hidden')\r\n\r\n    this.children.each(function (uiObj) {\r\n      uiObj.hide()\r\n    })\r\n  }\r\n  /**\r\n   * Enables visibility of this UIObject and all its children.\r\n   */\r\n  show () {\r\n    // Show docker\r\n    this.node.setAttributeNS(null, 'visibility', 'visible')\r\n\r\n    // Hide reference point if the connected shape is an edge\r\n    // let type = this.getDockedShape() && this.getDockedShape().getInstanceofType()\r\n    if (this.getDockedShape() && this.getDockedShape().getInstanceofType().includes('Edge')) {\r\n      this._referencePointNode.setAttributeNS(null, 'visibility', 'hidden')\r\n    } else {\r\n      this._referencePointNode.setAttributeNS(null, 'visibility', 'visible')\r\n    }\r\n\r\n    this.children.each(function (uiObj) {\r\n      uiObj.show()\r\n    })\r\n  }\r\n  toString() {\r\n    return 'Docker ' + this.id\r\n  }\r\n  getInstanceofType () {\r\n    return 'Docker'\r\n  }\r\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=b1d41464&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=b1d41464&scoped=true&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAaxJREFUeNpk08uLzWEcBvDP+c0ZZsycHGSO20YxbtEobLBScktZyJayYTGTmn/AQkSkyM6GrCwlWWCjidXIvVyycSuhcTvNjHNsnsPBr95+7/v7fZ/nfZ/n+b4l/z9zsRXrUeAVrmEUk2i2Fxf/gIdxB5vxAi8xHxdwAwOYglIL0Jp04yqe4Fy+NzCRHcvYiEMYwm3U209zEQfRnzEPVRzIewb6Ius5lqCrBV6N+wEuSnEZOzCCnaigA9NwGmdQS52TOIIV2aWIzqfYhsdYmB1LWI7XWIzeAuuifQI/on0Y15PAA+zNKQo8y3w2ugvMxLcQjGMB9uF8YjsWgjkxexKfguss8Dm6G3H1RHROYixSLmEQvfGiDx9QlJP7AG5hDZYGtBtfc6qP2IPL+Jn/dTRKcf8mtmAT1sbtZlsfFHF8FCtxD1fwtoROHI4pRwOqtDVT6+lI5IPYjy941+rGCs6GeXs0VjE9ox+ncBcbsAyzQvqbvYpdeJhURnKJ3uA9jmNVyGrplT+XIiQ9IaqluAeP4ngT35PaWMz9i6C1nhoTu+JPKZGOh6CeNfg1AA25aCgpfpvWAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACPSURBVDiN7ZOxDcMwEANJIzOlygAa4flreI6sYa+QAdzISzGN5SoBBDllCLBg8XzgANI2rugGAJn5sP0EcF/XlZLO1i+5kpyXZdlgGxFRJRXb6LGkEhHVNroOPjkifBa0MOJpFF7jMlzQNDWyww1/Br9jsGdm6X2amUVSBY4xkZyPMb06hmQAO8kZAHh1zm9+xhz6mIDAWwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFQSURBVDiNrZOxTgJBEIa/WXINBU9BR6GBa3wGYwmBbSi3UmuewFqtrqQ5Ltcan4HmJFrY+RRX0BB2LJxLLgaCGv9udv5/dnbmX1FV2phMJn3nnAdSEUkBVLUCqhhjXpblR5svTQERkel0eg3cAV0OYwssiqJ4VBOKqjbiJ+DSiDtgo6qvVvwcGAKJ5Z+LorhSVRVVZTab3QD3lnwRkXme5+/tq733A1VdAiM7ul2tVg8yHo/7nU7nzdp+6fV6F1mW7Q71H0JI6rpeW5Htfr8/czawLrATkfkxMUCWZTsRmdsTu84574DU8pvvbR+CcTYWpq61qtdT4gat4abup6JjcGaSZlU/QsNV1coBlZ0PvfeDU2LjDC2sXIwx58thiaouQwjJMXEIITEvJMA2xpg78/bCOKO6rteHOvHeD1oeAFiUZfnxP1Y20t8/Uxu//c6ffF3G311hlAAAAAAASUVORK5CYII=\"","/**\r\n * @classDescription With Bounds you can set and get position and size of UIObjects.\r\n * 通过边界，您可以设置并获取ui对象的位置和大小\r\n */\r\n\r\nexport default class Bounds {\r\n  constructor () {\r\n    this._changedCallbacks = [] //register a callback with changedCallacks.push(this.method.bind(this));\r\n    this.a = {}\r\n    this.b = {}\r\n    this.set.apply(this, arguments)\r\n    this.suspendChange = false\r\n    this.changedWhileSuspend = false\r\n  }\r\n\r\n  /**\r\n   * Calls all registered callbacks.\r\n   */\r\n  _changed (sizeChanged) {\r\n    if (!this.suspendChange) {\r\n      this._changedCallbacks.each(function (callback) {\r\n        callback(this, sizeChanged)\r\n      }.bind(this))\r\n      this.changedWhileSuspend = false\r\n    } else\r\n      this.changedWhileSuspend = true\r\n  }\r\n\r\n  /**\r\n   * Registers a callback that is called, if the bounds changes.\r\n   * @param callback {Function} The callback function.\r\n   */\r\n  registerCallback (callback) {\r\n    if (!this._changedCallbacks.member(callback)) {\r\n      this._changedCallbacks.push(callback)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unregisters a callback.\r\n   * @param callback {Function} The callback function.\r\n   */\r\n  unregisterCallback (callback) {\r\n    this._changedCallbacks = this._changedCallbacks.without(callback)\r\n  }\r\n\r\n  /**\r\n   * Sets position and size of the shape dependent of four coordinates\r\n   * (set(ax, ay, bx, by);), two points (set({x: ax, y: ay}, {x: bx, y: by});)\r\n   * or one bound (set({a: {x: ax, y: ay}, b: {x: bx, y: by}});).\r\n   */\r\n  set () {\r\n    let changed = false\r\n    let ax, ay, bx, by\r\n    switch (arguments.length) {\r\n      case 1:\r\n        if (this.a.x !== arguments[0].a.x) {\r\n          changed = true\r\n          this.a.x = arguments[0].a.x\r\n        }\r\n        if (this.a.y !== arguments[0].a.y) {\r\n          changed = true\r\n          this.a.y = arguments[0].a.y\r\n        }\r\n        if (this.b.x !== arguments[0].b.x) {\r\n          changed = true\r\n          this.b.x = arguments[0].b.x\r\n        }\r\n        if (this.b.y !== arguments[0].b.y) {\r\n          changed = true\r\n          this.b.y = arguments[0].b.y\r\n        }\r\n        break\r\n\r\n      case 2:\r\n        ax = Math.min(arguments[0].x, arguments[1].x)\r\n        ay = Math.min(arguments[0].y, arguments[1].y)\r\n        bx = Math.max(arguments[0].x, arguments[1].x)\r\n        by = Math.max(arguments[0].y, arguments[1].y)\r\n        if (this.a.x !== ax) {\r\n          changed = true\r\n          this.a.x = ax\r\n        }\r\n        if (this.a.y !== ay) {\r\n          changed = true\r\n          this.a.y = ay\r\n        }\r\n        if (this.b.x !== bx) {\r\n          changed = true\r\n          this.b.x = bx\r\n        }\r\n        if (this.b.y !== by) {\r\n          changed = true\r\n          this.b.y = by\r\n        }\r\n        break\r\n\r\n      case 4:\r\n        ax = Math.min(arguments[0], arguments[2])\r\n        ay = Math.min(arguments[1], arguments[3])\r\n        bx = Math.max(arguments[0], arguments[2])\r\n        by = Math.max(arguments[1], arguments[3])\r\n        if (this.a.x !== ax) {\r\n          changed = true\r\n          this.a.x = ax\r\n        }\r\n        if (this.a.y !== ay) {\r\n          changed = true\r\n          this.a.y = ay\r\n        }\r\n        if (this.b.x !== bx) {\r\n          changed = true\r\n          this.b.x = bx\r\n        }\r\n        if (this.b.y !== by) {\r\n          changed = true\r\n          this.b.y = by\r\n        }\r\n        break\r\n    }\r\n\r\n    if (changed) {\r\n      this._changed(true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Moves the bounds so that the point p will be the new upper left corner.\r\n   * @param {Point} p\r\n   * or\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  moveTo () {\r\n    let currentPosition = this.upperLeft()\r\n    switch (arguments.length) {\r\n      case 1:\r\n        this.moveBy({\r\n          x: arguments[0].x - currentPosition.x,\r\n          y: arguments[0].y - currentPosition.y\r\n        })\r\n        break\r\n      case 2:\r\n        this.moveBy({\r\n          x: arguments[0] - currentPosition.x,\r\n          y: arguments[1] - currentPosition.y\r\n        })\r\n        break\r\n      default:\r\n      //TODO error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Moves the bounds relatively by p.\r\n   * @param {Point} p\r\n   * or\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   *\r\n   */\r\n  moveBy () {\r\n    let changed = false\r\n\r\n    switch (arguments.length) {\r\n      case 1:\r\n        let p = arguments[0]\r\n        if (p.x !== 0 || p.y !== 0) {\r\n          changed = true\r\n          this.a.x += p.x\r\n          this.b.x += p.x\r\n          this.a.y += p.y\r\n          this.b.y += p.y\r\n        }\r\n        break\r\n      case 2:\r\n        let x = arguments[0]\r\n        let y = arguments[1]\r\n        if (x !== 0 || y !== 0) {\r\n          changed = true\r\n          this.a.x += x\r\n          this.b.x += x\r\n          this.a.y += y\r\n          this.b.y += y\r\n        }\r\n        break\r\n      default:\r\n      //TODO error\r\n    }\r\n\r\n    if (changed) {\r\n      this._changed()\r\n    }\r\n  }\r\n\r\n  /***\r\n   * Includes the bounds b into the current bounds.\r\n   * @param {Bounds} b\r\n   */\r\n  include (b) {\r\n    if ((this.a.x === undefined) && (this.a.y === undefined) &&\r\n      (this.b.x === undefined) && (this.b.y === undefined)) {\r\n      return b\r\n    }\r\n\r\n    let cx = Math.min(this.a.x, b.a.x)\r\n    let cy = Math.min(this.a.y, b.a.y)\r\n    let dx = Math.max(this.b.x, b.b.x)\r\n    let dy = Math.max(this.b.y, b.b.y)\r\n\r\n    this.set(cx, cy, dx, dy)\r\n  }\r\n\r\n  /**\r\n   * Relatively extends the bounds by p.\r\n   * @param {Point} p\r\n   */\r\n  extend (p) {\r\n    if (p.x !== 0 || p.y !== 0) {\r\n      // this is over cross for the case that a and b have same coordinates.\r\n      //((this.a.x > this.b.x) ? this.a : this.b).x += p.x;\r\n      //((this.b.y > this.a.y) ? this.b : this.a).y += p.y;\r\n      this.b.x += p.x\r\n      this.b.y += p.y\r\n\r\n      this._changed(true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Widens the scope of the bounds by x.\r\n   * @param {Number} x\r\n   */\r\n  widen (x) {\r\n    if (x !== 0) {\r\n      this.suspendChange = true\r\n      this.moveBy({ x: -x, y: -x })\r\n      this.extend({ x: 2 * x, y: 2 * x })\r\n      this.suspendChange = false\r\n      if (this.changedWhileSuspend) {\r\n        this._changed(true)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the upper left corner's point regardless of the bound delimiter points.\r\n   */\r\n  upperLeft () {\r\n    let result = {}\r\n    result.x = this.a.x\r\n    result.y = this.a.y\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * Returns the lower Right left corner's point regardless of the\r\n   * bound delimiter points.\r\n   */\r\n  lowerRight () {\r\n    let result = {}\r\n    result.x = this.b.x\r\n    result.y = this.b.y\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * @return {Number} Width of bounds.\r\n   */\r\n  width () {\r\n    return this.b.x - this.a.x\r\n  }\r\n\r\n  /**\r\n   * @return {Number} Height of bounds.\r\n   */\r\n  height () {\r\n    return this.b.y - this.a.y\r\n  }\r\n\r\n  /**\r\n   * @return {Point} The center point of this bounds.\r\n   */\r\n  center () {\r\n    let center = {}\r\n    center.x = (this.a.x + this.b.x) / 2.0\r\n    center.y = (this.a.y + this.b.y) / 2.0\r\n    return center\r\n  }\r\n\r\n  /**\r\n   * @return {Point} The center point of this bounds relative to upperLeft.\r\n   */\r\n  midPoint () {\r\n    let midpoint = {}\r\n    midpoint.x = (this.b.x - this.a.x) / 2.0\r\n    midpoint.y = (this.b.y - this.a.y) / 2.0\r\n    return midpoint\r\n  }\r\n\r\n  /**\r\n   * Moves the center point of this bounds to the new position.\r\n   * @param p {Point}\r\n   * or\r\n   * @param x {Number}\r\n   * @param y {Number}\r\n   */\r\n  centerMoveTo () {\r\n    let currentPosition = this.center()\r\n    switch (arguments.length) {\r\n      case 1:\r\n        this.moveBy(arguments[0].x - currentPosition.x, arguments[0].y - currentPosition.y)\r\n        break\r\n      case 2:\r\n        this.moveBy(arguments[0] - currentPosition.x, arguments[1] - currentPosition.y)\r\n        break\r\n    }\r\n  }\r\n\r\n  // isIncluded (point, offset)\r\n  isIncluded () {\r\n    let pointX, pointY, offset\r\n\r\n    // Get the the two Points\r\n    switch (arguments.length) {\r\n      case 1:\r\n        pointX = arguments[0].x\r\n        pointY = arguments[0].y\r\n        offset = 0\r\n        break\r\n      case 2:\r\n        if (arguments[0].x && arguments[0].y) {\r\n          pointX = arguments[0].x\r\n          pointY = arguments[0].y\r\n          offset = Math.abs(arguments[1])\r\n        } else {\r\n          pointX = arguments[0]\r\n          pointY = arguments[1]\r\n          offset = 0\r\n        }\r\n        break\r\n      case 3:\r\n        pointX = arguments[0]\r\n        pointY = arguments[1]\r\n        offset = Math.abs(arguments[2])\r\n        break\r\n      default:\r\n        throw 'isIncluded needs one, two or three arguments'\r\n    }\r\n\r\n    let ul = this.upperLeft()\r\n    let lr = this.lowerRight()\r\n\r\n    if (pointX >= ul.x - offset &&\r\n      pointX <= lr.x + offset &&\r\n      pointY >= ul.y - offset &&\r\n      pointY <= lr.y + offset) {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @return {Bounds} A copy of this bounds.\r\n   */\r\n  clone () {\r\n    // Returns a new bounds object without the callback\r\n    // references of the original bounds\r\n    return new Bounds(this)\r\n  }\r\n\r\n  toString () {\r\n    return '( ' + this.a.x + ' | ' + this.a.y + ' )/( ' + this.b.x + ' | ' + this.b.y + ' )'\r\n  }\r\n\r\n  serializeForERDF () {\r\n    return this.a.x + ',' + this.a.y + ',' + this.b.x + ',' + this.b.y\r\n  }\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACySURBVDiNpZPBDYMwDEW/ETP11AEygu01MkfXgBU6AJew1O8lRhUigMKXfEjiPDvfipDEE40A4O5vkh8Ar3mexcw2amNdRCRP07SAJFS1mFkiiTthZklVC0ncunAUqsoNEIueGHrNC1+6AaEhnO0FSHWVAfkf2V5Hhca7iXtwFD314KybUNODuHwFGVpJAW0ZHPvxhNXdUytpL3dPZlaAaqKI5PqZvldt17NVRDJQx/hEP6Sk2jmxBXC7AAAAAElFTkSuQmCC\"","import ORYX_Config from '../CONFIG'\r\n\r\nconst UIDragFunction = {\r\n  UIDragCallback: function (event) {\r\n    let position = {\r\n      x: Event.pointerX(event) - this.offSetPosition.x,\r\n      y: Event.pointerY(event) - this.offSetPosition.y\r\n    }\r\n\r\n    position.x -= this.offsetScroll.x - this.scrollNode.scrollLeft\r\n    position.y -= this.offsetScroll.y - this.scrollNode.scrollTop\r\n    position.x /= this.faktorXY.x\r\n    position.y /= this.faktorXY.y\r\n\r\n    this.uiObj.bounds.moveTo(position)\r\n    // this.uiObj.update();\r\n\r\n    if (this.movedCallback) {\r\n      this.movedCallback(event)\r\n    }\r\n\r\n    // Event.stop(event);\r\n  },\r\n\r\n  UIDisableDrag: function (event) {\r\n    document.documentElement.removeEventListener(ORYX_Config.EVENT_MOUSEMOVE, this.dragCallback, false)\r\n    document.documentElement.removeEventListener(ORYX_Config.EVENT_MOUSEUP, this.disableCallback, true)\r\n\r\n    if (this.upCallback)\r\n      this.upCallback(event)\r\n\r\n    this.upCallback = undefined\r\n    this.movedCallback = undefined\r\n\r\n    Event.stop(event)\r\n  },\r\n\r\n  UIEnableDrag: function (event, uiObj, option) {\r\n    console.log(uiObj, this)\r\n    this.uiObj = uiObj\r\n    let upL = uiObj.bounds.upperLeft()\r\n\r\n    let a = uiObj.node.getScreenCTM()\r\n    this.faktorXY = { x: a.a, y: a.d }\r\n\r\n    this.scrollNode = uiObj.node.ownerSVGElement.parentNode.parentNode\r\n    this.offSetPosition = {\r\n      x: Event.pointerX(event) - (upL.x * this.faktorXY.x),\r\n      y: Event.pointerY(event) - (upL.y * this.faktorXY.y)\r\n    }\r\n\r\n    this.offsetScroll = { x: this.scrollNode.scrollLeft, y: this.scrollNode.scrollTop }\r\n\r\n    this.dragCallback = this.UIDragCallback.bind(this)\r\n    this.disableCallback = this.UIDisableDrag.bind(this)\r\n\r\n    this.movedCallback = option ? option.movedCallback : undefined\r\n    this.upCallback = option ? option.upCallback : undefined\r\n\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_MOUSEUP, this.disableCallback, true)\r\n    document.documentElement.addEventListener(ORYX_Config.EVENT_MOUSEMOVE, this.dragCallback, false)\r\n\r\n  }\r\n}\r\n\r\nexport default UIDragFunction","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAA4SURBVDiNY/z//z8DJYCJIt3UMIAxIiKCIj+wMDAwMCxfvpyRHM2RkZH/Bz4MRg0YDAmJcehnJgD+lA4n8Ti0pwAAAABJRU5ErkJggg==\"","\r\nexport default class Command {\r\n  constructor () {\r\n\r\n  }\r\n\r\n  execute () {\r\n    throw \"Command.execute() has to be implemented!\"\r\n  }\r\n\r\n  rollback () {\r\n    throw \"Command.rollback() has to be implemented!\"\r\n  }\r\n}"],"sourceRoot":""}